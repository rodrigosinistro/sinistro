function _0x32d2(){const _0x4d7065=['selsPlayers','scroll','init','allPlayerUpdate','Fvtt','_entities','target','_$btnRun','find','trimState','default','folder','path','closest','map','push','7467190MIfahW','text','selAllPlayers','forEach','12bzKmJm','contents','value','_$iptSearch','permission','handleSelectClick','_$cbAll','name','ascSortLower','input[name=\x22permu__cb-all-players-all-entities\x22]','.permu__cell-player','_collectionName','warn','addEventListener','teardown','select[name=\x22permu__sel-each-player-all-entities\x22]','slice','.permu__cell-ent-name','label[data-permu-type=\x22lbl-entity-each-player\x22]','Bulk\x20Permission\x20Editor','.permu__row-ent','length','_handleFilterChange','_$cbEach','metasPlayerUpdates','...','[name=\x22btn-reset\x22]','_pHandleBtnClick_run','_collection','_$btnReset','findIndex','38rSYzHi','entityMeta','cbAllPlayers','disabled','860279iDzEBY','values','_pUpdateItemPermissions','click','get','deepEquals','data-permu-player-id','.fltr__mini-view','995176eNcMZW','setAttribute','attr','tool-permissions_','notifications','filterBox','input[name=\x22permu__cb-each-player-all-entities\x22]','playerPermissions','select[data-permu-type=\x22sel-entity-each-player\x22]','close','Update\x20Complete','9SOMHwn','unknown','activateListeners','_setMassCheckboxValues','items','data-permu-entity-id','tagName','_pHandleBtnClick_reset','children','type','sort','STR_SEE_CONSOLE','checked','_players','501693QgBZMo','2892170KAARDG','38436LFjwYR','doAbsorbItems','visibleItems','MODULE_LOCATION','[name=btn-filter]','getValues','bind','pInitFilterBox','Updating...','EVNT_VALCHANGE','.veapp__list','update','896992GgcQob','getData','select[name=\x22permu__sel-all-players-all-entities\x22]','Save','_setMassAllPlayerCheckboxValues','allPlayerPermissions','SELECT','render','_absorbFnGetData','_list','label[data-permu-type=\x22lbl-entity-player\x22]','val','.search','filter','data-permu-value','[name=\x22btn-save\x22]','input[data-permu-player-id]','Task','/template/CollectionPermissionUpdater.hbs','then','ele','cbEachPlayer','_sortEntities','prop','select[data-permu-type=\x22sel-player-all-entities\x22]','_$rowMass','label[data-permu-type=\x22lbl-entity-all-players\x22]','Saving...','data','[name=btn-toggle-summary]','cbsPlayers','_pageFilter','change','toDisplay','getMaxWindowHeight','mergeMap','input','getPermissionsEnum','style'];_0x32d2=function(){return _0x4d7065;};return _0x32d2();}const _0x489925=_0x4008;(function(_0x4bdcb1,_0x52d68f){const _0x37d9ab=_0x4008,_0x2e9909=_0x4bdcb1();while(!![]){try{const _0x56c988=parseInt(_0x37d9ab(0x1f1))/0x1+-parseInt(_0x37d9ab(0x1cc))/0x2*(parseInt(_0x37d9ab(0x1f3))/0x3)+parseInt(_0x37d9ab(0x1d8))/0x4+-parseInt(_0x37d9ab(0x1f2))/0x5+parseInt(_0x37d9ab(0x1ad))/0x6*(-parseInt(_0x37d9ab(0x1d0))/0x7)+-parseInt(_0x37d9ab(0x1ff))/0x8+-parseInt(_0x37d9ab(0x1e3))/0x9*(-parseInt(_0x37d9ab(0x1a9))/0xa);if(_0x56c988===_0x52d68f)break;else _0x2e9909['push'](_0x2e9909['shift']());}catch(_0x7e490){_0x2e9909['push'](_0x2e9909['shift']());}}}(_0x32d2,0x4d7f2));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{AppFilterBasic}from'./FilterApplications.js';function _0x4008(_0x5c56a9,_0x11627b){const _0x32d247=_0x32d2();return _0x4008=function(_0x400865,_0x11ccd7){_0x400865=_0x400865-0x19d;let _0x42e1b7=_0x32d247[_0x400865];return _0x42e1b7;},_0x4008(_0x5c56a9,_0x11627b);}class CollectionPermissionUpdater extends BaseCollectionTool{constructor(_0x22ef27){const _0x1521cc=_0x4008;super({'title':_0x1521cc(0x1c0),'template':SharedConsts[_0x1521cc(0x1f6)]+_0x1521cc(0x211),'width':0x3c0,'height':Util[_0x1521cc(0x221)](),'resizable':!![]},_0x22ef27),this[_0x1521cc(0x21e)]=new AppFilterBasic(),this['_list']=null,this[_0x1521cc(0x1b3)]=null,this[_0x1521cc(0x218)]=null,this['_$cbEach']=null,this[_0x1521cc(0x1a0)]=null,this[_0x1521cc(0x1b0)]=null,this['_$btnReset']=null,this[_0x1521cc(0x1f0)]=null,this[_0x1521cc(0x19e)]=null;}[_0x489925(0x1e5)](_0x310b05){const _0x58e68f=_0x489925;super[_0x58e68f(0x1e5)](_0x310b05);const _0x3efd19='-2',_0x43f978=_0x310b05[0x0][_0x58e68f(0x1eb)][0x2],_0x414808=$(_0x43f978)['find'](_0x58e68f(0x1be))[_0x58e68f(0x1a7)]((_0x30d27e,_0x4719df)=>_0x4719df)[_0x58e68f(0x1d4)]();_0x43f978[_0x58e68f(0x1ba)](_0x58e68f(0x227),()=>{const _0x1729de=_0x58e68f,_0x1249cf=_0x43f978['scrollLeft'];_0x414808[_0x1729de(0x1ac)](_0x9d45de=>_0x9d45de[_0x1729de(0x225)]['left']=_0x1249cf+'px');});const _0x5ae4da=_0x43f978['children'][0x1];this[_0x58e68f(0x218)]=$(_0x5ae4da);const _0x5f3f6d=this[_0x58e68f(0x218)]['find'](_0x58e68f(0x201))[_0x58e68f(0x21f)](()=>{const _0x64c20d=_0x58e68f,_0x9f80b4=_0x5f3f6d[_0x64c20d(0x20a)]();this[_0x64c20d(0x208)][_0x64c20d(0x1f5)][_0x64c20d(0x1ac)](_0x4ba562=>{const _0x157019=_0x64c20d;if(!_0x4ba562[_0x157019(0x21b)][_0x157019(0x1ce)]['checked'])return;_0x4ba562[_0x157019(0x21b)]['selAllPlayers'][_0x157019(0x1af)]=_0x9f80b4,_0x4ba562[_0x157019(0x21b)][_0x157019(0x1ab)][_0x157019(0x1d9)](_0x157019(0x20d),_0x9f80b4);}),_0x5f3f6d['val'](_0x3efd19);});this[_0x58e68f(0x1b3)]=this[_0x58e68f(0x218)][_0x58e68f(0x1a1)](_0x58e68f(0x1b6))[_0x58e68f(0x21f)](()=>{const _0x56b343=_0x58e68f,_0x4a8d37=this[_0x56b343(0x1b3)][_0x56b343(0x216)](_0x56b343(0x1ef));this[_0x56b343(0x203)](_0x4a8d37),this['_list'][_0x56b343(0x1f5)]['forEach'](_0x228ec6=>{const _0x38449a=_0x56b343;_0x228ec6[_0x38449a(0x21b)][_0x38449a(0x1ce)][_0x38449a(0x1ef)]=_0x4a8d37;});});const _0x432586=this[_0x58e68f(0x218)][_0x58e68f(0x1a1)](_0x58e68f(0x1bc))[_0x58e68f(0x21f)](()=>{const _0x46126c=_0x58e68f,_0x57b6d1=_0x432586['val'](),_0x1a924a=this[_0x46126c(0x208)][_0x46126c(0x1e7)][0x0]?this['_list'][_0x46126c(0x1e7)][0x0][_0x46126c(0x21b)]['cbsPlayers'][_0x46126c(0x1c2)]:0x0;for(let _0x173b70=0x0;_0x173b70<_0x1a924a;++_0x173b70){this[_0x46126c(0x208)]['visibleItems'][_0x46126c(0x1ac)](_0x4f3b00=>{const _0x3b118e=_0x46126c;if(!_0x4f3b00['data'][_0x3b118e(0x21d)][_0x173b70][_0x3b118e(0x1ef)])return;_0x4f3b00[_0x3b118e(0x21b)][_0x3b118e(0x226)][_0x173b70][_0x3b118e(0x1af)]=_0x57b6d1,_0x4f3b00['data']['selsPlayers'][_0x173b70][_0x3b118e(0x1d9)]('data-permu-value',_0x57b6d1);});}_0x432586[_0x46126c(0x20a)](_0x3efd19);});this[_0x58e68f(0x1c4)]=this[_0x58e68f(0x218)][_0x58e68f(0x1a1)](_0x58e68f(0x1de))['change'](()=>{const _0x4065dc=_0x58e68f,_0x45bdad=this['_$cbEach'][_0x4065dc(0x216)](_0x4065dc(0x1ef));this[_0x4065dc(0x1e6)](_0x45bdad),this[_0x4065dc(0x208)][_0x4065dc(0x1f5)][_0x4065dc(0x1ac)](_0x49a95b=>{const _0x2225ee=_0x4065dc;_0x49a95b[_0x2225ee(0x21b)][_0x2225ee(0x214)]['checked']=_0x45bdad,_0x49a95b[_0x2225ee(0x21b)]['cbsPlayers'][_0x2225ee(0x1ac)](_0x336fe6=>_0x336fe6[_0x2225ee(0x1ef)]=_0x45bdad);});}),this[_0x58e68f(0x218)]['on'](_0x58e68f(0x21f),_0x58e68f(0x217),_0x42f413=>{const _0x1c713a=_0x58e68f,_0x12eb9d=$(_0x42f413[_0x1c713a(0x19f)]),_0x4f93d2=_0x12eb9d[_0x1c713a(0x20a)](),_0x31b969=_0x12eb9d[_0x1c713a(0x1da)](_0x1c713a(0x1d6)),_0x55563d=this[_0x1c713a(0x1f0)][_0x1c713a(0x1cb)](_0x403781=>_0x403781['id']===_0x31b969);this[_0x1c713a(0x208)][_0x1c713a(0x1f5)][_0x1c713a(0x1ac)](_0x5823bc=>{const _0x27e372=_0x1c713a;if(!_0x5823bc[_0x27e372(0x21b)][_0x27e372(0x21d)][_0x55563d][_0x27e372(0x1ef)])return;_0x5823bc[_0x27e372(0x21b)]['selsPlayers'][_0x55563d][_0x27e372(0x1af)]=_0x4f93d2,_0x5823bc[_0x27e372(0x21b)][_0x27e372(0x226)][_0x55563d][_0x27e372(0x1d9)](_0x27e372(0x20d),_0x4f93d2);}),_0x12eb9d[_0x1c713a(0x20a)](_0x3efd19);}),this['_$rowMass']['on'](_0x58e68f(0x1d3),'label[data-permu-type=\x22lbl-player-all-entities\x22]',_0x5b1750=>{const _0x57a24c=_0x58e68f;if(_0x5b1750[_0x57a24c(0x19f)][_0x57a24c(0x1e9)]==='SELECT')return;const _0x2f07e4=$(_0x5b1750[_0x57a24c(0x19f)])['closest'](_0x57a24c(0x1b7)),_0x43996=_0x2f07e4[_0x57a24c(0x1a1)](_0x57a24c(0x223)),_0x36827c=_0x43996['prop'](_0x57a24c(0x1ef)),_0x2cfac1=_0x43996[_0x57a24c(0x1da)](_0x57a24c(0x1d6)),_0x2ddcfe=this['_players']['findIndex'](_0x2a76b2=>_0x2a76b2['id']===_0x2cfac1);this['_list'][_0x57a24c(0x1f5)][_0x57a24c(0x1ac)](_0x4313ab=>{const _0x33c3a5=_0x57a24c;_0x4313ab[_0x33c3a5(0x21b)][_0x33c3a5(0x21d)][_0x2ddcfe]['checked']=_0x36827c;});}),_0x310b05['on'](_0x58e68f(0x21f),'select[data-permu-type=\x22sel-entity-all-players\x22]',_0x538580=>{const _0x4fada3=_0x58e68f,_0x47ec01=$(_0x538580['target']);_0x47ec01['attr'](_0x4fada3(0x20d),_0x47ec01[_0x4fada3(0x20a)]());}),_0x310b05['on']('click',_0x58e68f(0x219),_0x4c46f0=>{const _0x57ad31=_0x58e68f;if(_0x4c46f0['target'][_0x57ad31(0x1e9)]===_0x57ad31(0x205))return;const _0xcc9e95=$(_0x4c46f0[_0x57ad31(0x19f)])[_0x57ad31(0x1a6)](_0x57ad31(0x1c1)),_0x4b1c54=_0xcc9e95[_0x57ad31(0x1da)]('data-permu-entity-id'),_0x13801e=this[_0x57ad31(0x208)]['items'][_0x57ad31(0x1a1)](_0x5e95e4=>_0x5e95e4[_0x57ad31(0x1d1)]['id']===_0x4b1c54);ListUiUtil[_0x57ad31(0x1b2)](this[_0x57ad31(0x208)],_0x13801e,_0x4c46f0,{'fnGetCb':_0x59ec1c=>_0x59ec1c[_0x57ad31(0x21b)][_0x57ad31(0x1ce)],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x50a928,_0x2624a1)=>{const _0x6d329f=_0x57ad31;_0x50a928[_0x6d329f(0x21b)][_0x6d329f(0x1ce)][_0x6d329f(0x1ef)]=_0x2624a1;}});}),_0x310b05['on']('change',_0x58e68f(0x1e0),_0x4c18e5=>{const _0x299e12=_0x58e68f,_0x5ab1b9=$(_0x4c18e5[_0x299e12(0x19f)]),_0x22bf33=_0x5ab1b9[_0x299e12(0x20a)](),_0x30c879=_0x5ab1b9[_0x299e12(0x1a6)](_0x299e12(0x1c1)),_0x2c57ff=_0x30c879[_0x299e12(0x1da)](_0x299e12(0x1e8)),_0x4ec7e3=this[_0x299e12(0x208)][_0x299e12(0x1e7)][_0x299e12(0x1a1)](_0x3f2bda=>_0x3f2bda[_0x299e12(0x1d1)]['id']===_0x2c57ff),_0x250df5=_0x4ec7e3[_0x299e12(0x21b)][_0x299e12(0x21d)][_0x299e12(0x1c2)];for(let _0x39e94c=0x0;_0x39e94c<_0x250df5;++_0x39e94c){if(!_0x4ec7e3[_0x299e12(0x21b)][_0x299e12(0x21d)][_0x39e94c][_0x299e12(0x1ef)])continue;_0x4ec7e3[_0x299e12(0x21b)][_0x299e12(0x226)][_0x39e94c]['value']=_0x22bf33,_0x4ec7e3[_0x299e12(0x21b)][_0x299e12(0x226)][_0x39e94c][_0x299e12(0x1d9)](_0x299e12(0x20d),_0x22bf33);}_0x5ab1b9[_0x299e12(0x20a)](_0x3efd19);}),_0x310b05['on']('click',_0x58e68f(0x1bf),_0x29e997=>{const _0x42bc76=_0x58e68f;if(_0x29e997['target']['tagName']===_0x42bc76(0x205))return;const _0x1ed58c=$(_0x29e997[_0x42bc76(0x19f)])[_0x42bc76(0x1a6)](_0x42bc76(0x1c1)),_0x25df06=_0x1ed58c[_0x42bc76(0x1da)]('data-permu-entity-id'),_0x2165b3=this[_0x42bc76(0x208)][_0x42bc76(0x1e7)]['find'](_0x27b602=>_0x27b602['values']['id']===_0x25df06);ListUiUtil[_0x42bc76(0x1b2)](this[_0x42bc76(0x208)],_0x2165b3,_0x29e997,{'fnGetCb':_0x2665f8=>_0x2665f8['data'][_0x42bc76(0x214)],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x4c5bdb,_0x87c8fd)=>{const _0x38f4c0=_0x42bc76;_0x4c5bdb[_0x38f4c0(0x21b)][_0x38f4c0(0x21d)][_0x38f4c0(0x1ac)](_0xf31bac=>_0xf31bac['checked']=_0x87c8fd);}});}),_0x310b05['on'](_0x58e68f(0x21f),'select[data-permu-type=\x22sel-entity\x22]',_0x12fe0f=>{const _0x2b20d4=_0x58e68f,_0x398ed6=$(_0x12fe0f[_0x2b20d4(0x19f)]);_0x398ed6['attr'](_0x2b20d4(0x20d),_0x398ed6[_0x2b20d4(0x20a)]());}),_0x310b05['on'](_0x58e68f(0x1d3),_0x58e68f(0x209),_0x41f50e=>{const _0x1ba406=_0x58e68f;if(_0x41f50e[_0x1ba406(0x19f)][_0x1ba406(0x1e9)]===_0x1ba406(0x205))return;const _0x292779=$(_0x41f50e[_0x1ba406(0x19f)])[_0x1ba406(0x1a6)]('.permu__row-ent'),_0x588bee=$(_0x41f50e[_0x1ba406(0x19f)])['closest'](_0x1ba406(0x1b7))['find'](_0x1ba406(0x20f)),_0x2a11f8=_0x292779[_0x1ba406(0x1da)]('data-permu-entity-id'),_0xcbeb1=_0x588bee[_0x1ba406(0x1da)]('data-permu-player-id'),_0x3a4347=this[_0x1ba406(0x1f0)][_0x1ba406(0x1cb)](_0xba4b1c=>_0xba4b1c['id']===_0xcbeb1),_0x59e6dc=this[_0x1ba406(0x208)][_0x1ba406(0x1e7)]['find'](_0x5e37dd=>_0x5e37dd[_0x1ba406(0x1d1)]['id']===_0x2a11f8);ListUiUtil[_0x1ba406(0x1b2)](this[_0x1ba406(0x208)],_0x59e6dc,_0x41f50e,{'fnGetCb':_0x1aae23=>_0x1aae23['data'][_0x1ba406(0x21d)][_0x3a4347],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x341932,_0x692fd6)=>{const _0x37bd25=_0x1ba406;_0x341932[_0x37bd25(0x21b)]['cbsPlayers'][_0x3a4347][_0x37bd25(0x1ef)]=_0x692fd6;}});}),this[_0x58e68f(0x1a0)]=_0x310b05[_0x58e68f(0x1a1)](_0x58e68f(0x20e))[_0x58e68f(0x1d3)](async()=>this[_0x58e68f(0x1c8)]()),this['_$iptSearch']=_0x310b05[_0x58e68f(0x1a1)]('.search'),this['_$btnReset']=_0x310b05[_0x58e68f(0x1a1)](_0x58e68f(0x1c7))[_0x58e68f(0x1d3)](()=>this['_pHandleBtnClick_reset']()),this['_list']=new List({'$iptSearch':_0x310b05[_0x58e68f(0x1a1)](_0x58e68f(0x20b)),'$wrpList':_0x310b05[_0x58e68f(0x1a1)](_0x58e68f(0x1fd)),'fnSort':CollectionPermissionUpdater[_0x58e68f(0x215)]}),this['_pageFilter'][_0x58e68f(0x1fa)]({'$iptSearch':this['_$iptSearch'],'$btnReset':this[_0x58e68f(0x1ca)],'$btnOpen':_0x310b05[_0x58e68f(0x1a1)](_0x58e68f(0x1f7)),'$btnToggleSummaryHidden':_0x310b05[_0x58e68f(0x1a1)](_0x58e68f(0x21c)),'$wrpMiniPills':_0x310b05['find'](_0x58e68f(0x1d7)),'namespace':_0x58e68f(0x1db)+this['_collectionName']})[_0x58e68f(0x212)](()=>{const _0x169c11=_0x58e68f;this['_entities'][_0x169c11(0x1ac)](_0x42200f=>this[_0x169c11(0x21e)]['addToFilters'](_0x42200f)),this[_0x169c11(0x208)][_0x169c11(0x1f4)](this[_0x169c11(0x19e)],{'fnGetName':_0x527730=>_0x527730[_0x169c11(0x1b4)],'fnGetValues':_0x47ffe7=>({'id':_0x47ffe7['id'],'path':_0x47ffe7['path']}),'fnGetData':CollectionPermissionUpdater[_0x169c11(0x207)]}),this['_list'][_0x169c11(0x228)](),this['_pageFilter'][_0x169c11(0x1a2)](),this[_0x169c11(0x21e)][_0x169c11(0x1dd)][_0x169c11(0x206)](),this[_0x169c11(0x21e)][_0x169c11(0x1dd)]['on'](FilterBox[_0x169c11(0x1fc)],this[_0x169c11(0x1c3)][_0x169c11(0x1f9)](this)),this[_0x169c11(0x1c3)]();});}async[_0x489925(0x1c8)](){const _0x5ba626=_0x489925;if(!this[_0x5ba626(0x208)])return;const _0x14ce28=[];this[_0x5ba626(0x19e)]['forEach'](_0x2f7d35=>{const _0xc65c33=_0x5ba626,_0x37cf41=this['_list'][_0xc65c33(0x1e7)]['find'](_0x51345a=>_0x51345a[_0xc65c33(0x1d1)]['id']===_0x2f7d35['id']);let _0x26c4ca=null;const _0x144fb4=[],_0xc5ad25=''+_0x2f7d35[_0xc65c33(0x204)];if(_0x37cf41['data'][_0xc65c33(0x1ab)][_0xc65c33(0x1af)]!==_0xc5ad25)_0x26c4ca=_0x37cf41[_0xc65c33(0x21b)]['selAllPlayers'][_0xc65c33(0x1af)];_0x37cf41[_0xc65c33(0x21b)][_0xc65c33(0x226)][_0xc65c33(0x1ac)]((_0x4f0f02,_0x4f43b0)=>{const _0x2f50f8=_0xc65c33,_0x1213fd=this[_0x2f50f8(0x1f0)][_0x4f43b0]['id'],_0x1d878e=''+_0x2f7d35['playerPermissions'][_0x1213fd];if(_0x4f0f02['value']!==_0x1d878e)_0x144fb4[_0x2f50f8(0x1a8)]({'value':_0x4f0f02[_0x2f50f8(0x1af)],'playerId':_0x1213fd});});if(_0x26c4ca!=null||_0x144fb4['length'])_0x14ce28[_0xc65c33(0x1a8)]({'entityMeta':_0x2f7d35,'metasPlayerUpdates':_0x144fb4,'allPlayerUpdate':_0x26c4ca});});if(!_0x14ce28)return ui[_0x5ba626(0x1dc)][_0x5ba626(0x1b9)]('Please\x20make\x20some\x20changes\x20first!');this[_0x5ba626(0x1a0)][_0x5ba626(0x1da)](_0x5ba626(0x1cf),!![])[_0x5ba626(0x1aa)](_0x5ba626(0x21a));const _0x1e2ce5=_0x14ce28['map'](_0x251ff1=>new Util[(_0x5ba626(0x210))](''+_0x251ff1[_0x5ba626(0x1cd)][_0x5ba626(0x1a5)]+_0x251ff1[_0x5ba626(0x1cd)]['name'],()=>this[_0x5ba626(0x1d2)](_0x251ff1)));await UtilApplications['pRunTasks'](_0x1e2ce5,{'titleInitial':_0x5ba626(0x1fb),'titleComplete':_0x5ba626(0x1e2),'fnGetRowRunningText':_0xe93e00=>'Updating\x20'+_0xe93e00+_0x5ba626(0x1c6),'fnGetRowSuccessText':_0x30f8d7=>'Updated\x20'+_0x30f8d7+'.','fnGetRowErrorText':_0x140e55=>'Failed\x20to\x20update\x20'+_0x140e55+'!\x20'+VeCt[_0x5ba626(0x1ee)]}),this[_0x5ba626(0x1a0)]['attr'](_0x5ba626(0x1cf),![])[_0x5ba626(0x1aa)]('Saved!'),setTimeout(()=>this[_0x5ba626(0x1a0)][_0x5ba626(0x1aa)](_0x5ba626(0x202)),VeCt['DUR_INLINE_NOTIFY']);}async['_pUpdateItemPermissions'](_0x216370){const _0x5d8b3b=_0x489925,_0x326dce=this[_0x5d8b3b(0x1c9)][_0x5d8b3b(0x1d4)](_0x216370[_0x5d8b3b(0x1cd)]['id']),_0x17a827={..._0x326dce['data']['permission']};_0x216370[_0x5d8b3b(0x229)]!=null&&(_0x17a827['default']=Number(_0x216370[_0x5d8b3b(0x229)])),(_0x216370[_0x5d8b3b(0x1c5)]||[])[_0x5d8b3b(0x1ac)](_0x38871a=>{const {playerId:_0x4e6a44,value:_0x2714f1}=_0x38871a;if(!~_0x2714f1)return delete _0x17a827[_0x4e6a44];_0x17a827[_0x4e6a44]=Number(_0x2714f1);}),!CollectionUtil[_0x5d8b3b(0x1d5)](_0x326dce['data']['permission'],_0x17a827)&&await _0x326dce[_0x5d8b3b(0x1fe)]({'permission':_0x17a827},{'diff':![],'recursive':![],'noHook':!![]}),_0x216370[_0x5d8b3b(0x229)]!=null&&(_0x216370[_0x5d8b3b(0x1cd)]['allPlayerPermissions']=''+_0x216370[_0x5d8b3b(0x229)]),(_0x216370[_0x5d8b3b(0x1c5)]||[])[_0x5d8b3b(0x1ac)](_0x2452f6=>{const _0x25e685=_0x5d8b3b,{playerId:_0x53dbd5,value:_0x116978}=_0x2452f6;_0x216370[_0x25e685(0x1cd)][_0x25e685(0x1df)][_0x53dbd5]=''+_0x116978;});}async[_0x489925(0x1ea)](){const _0x50ea9d=_0x489925;this[_0x50ea9d(0x1b0)][_0x50ea9d(0x20a)](''),this[_0x50ea9d(0x1b3)][_0x50ea9d(0x216)](_0x50ea9d(0x1ef),![]),this[_0x50ea9d(0x203)](![]),this[_0x50ea9d(0x1c4)][_0x50ea9d(0x216)](_0x50ea9d(0x1ef),![]),this[_0x50ea9d(0x1e6)](![]),this[_0x50ea9d(0x19e)][_0x50ea9d(0x1ac)](_0x491c32=>{const _0x4fb25f=_0x50ea9d,_0x4dc7ba=this['_list'][_0x4fb25f(0x1e7)][_0x4fb25f(0x1a1)](_0x162e60=>_0x162e60[_0x4fb25f(0x1d1)]['id']===_0x491c32['id']);_0x4dc7ba[_0x4fb25f(0x21b)][_0x4fb25f(0x214)]['checked']=![],_0x4dc7ba[_0x4fb25f(0x21b)][_0x4fb25f(0x21d)][_0x4fb25f(0x1ac)](_0x5ce85a=>_0x5ce85a[_0x4fb25f(0x1ef)]=![]),_0x4dc7ba['data'][_0x4fb25f(0x226)][_0x4fb25f(0x1ac)]((_0x3e5cd9,_0x57c23e)=>{const _0x273c36=_0x4fb25f,_0x50e3c8=this['_players'][_0x57c23e]['id'],_0x9a887e=''+_0x491c32['playerPermissions'][_0x50e3c8];_0x3e5cd9[_0x273c36(0x1af)]=_0x9a887e,_0x3e5cd9[_0x273c36(0x1d9)]('data-permu-value',_0x9a887e);});});}[_0x489925(0x203)](_0x56f43a){const _0x556cdd=_0x489925;this[_0x556cdd(0x208)][_0x556cdd(0x1f5)][_0x556cdd(0x1ac)](_0x3f0b6a=>_0x3f0b6a[_0x556cdd(0x21b)][_0x556cdd(0x1ce)][_0x556cdd(0x1ef)]=_0x56f43a);}[_0x489925(0x1e6)](_0x400493){const _0x2bc36c=_0x489925;this[_0x2bc36c(0x218)][_0x2bc36c(0x1a1)]('input[data-permu-player-id]')[_0x2bc36c(0x1d4)]()[_0x2bc36c(0x1ac)](_0x1942da=>_0x1942da[_0x2bc36c(0x1ef)]=_0x400493);}[_0x489925(0x1c3)](){const _0x39f1b9=_0x489925,_0x1740cf=this[_0x39f1b9(0x21e)][_0x39f1b9(0x1dd)][_0x39f1b9(0x1f8)]();this['_list'][_0x39f1b9(0x20c)](_0x2fa170=>this[_0x39f1b9(0x21e)][_0x39f1b9(0x220)](_0x1740cf,this['_entities'][_0x2fa170['ix']]));}static[_0x489925(0x207)](_0x38ff29){const _0x26501b=_0x489925,_0x55cc4a=_0x38ff29[_0x26501b(0x213)][_0x26501b(0x1eb)][0x2],_0x322351=_0x38ff29['ele']['children'][0x3],_0x4a699f=[..._0x38ff29['ele']['children']][_0x26501b(0x1bd)](0x4);return{'cbAllPlayers':_0x55cc4a[_0x26501b(0x1eb)][0x0],'selAllPlayers':_0x55cc4a[_0x26501b(0x1eb)][0x1],'cbEachPlayer':_0x322351[_0x26501b(0x1eb)][0x0],'selEachPlayer':_0x322351['children'][0x1],'cbsPlayers':_0x4a699f[_0x26501b(0x1a7)](_0x3891ce=>_0x3891ce[_0x26501b(0x1eb)][0x0]),'selsPlayers':_0x4a699f[_0x26501b(0x1a7)](_0x53c2a1=>_0x53c2a1[_0x26501b(0x1eb)][0x1])};}static[_0x489925(0x215)](_0x4a26c4,_0x3d9550){const _0x456a16=_0x489925,_0x39e2cc=_0x4a26c4[_0x456a16(0x1d1)]?_0x4a26c4[_0x456a16(0x1d1)][_0x456a16(0x1a5)]:_0x4a26c4['path'],_0x1b365c=_0x3d9550[_0x456a16(0x1d1)]?_0x3d9550[_0x456a16(0x1d1)]['path']:_0x3d9550[_0x456a16(0x1a5)];if(_0x39e2cc&&!_0x1b365c)return-0x1;if(!_0x39e2cc&&_0x1b365c)return 0x1;return SortUtil[_0x456a16(0x1b5)](_0x39e2cc,_0x1b365c)||SortUtil[_0x456a16(0x1b5)](_0x4a26c4[_0x456a16(0x1b4)],_0x3d9550[_0x456a16(0x1b4)]);}['getData'](){const _0x22e2d5=_0x489925;return this['_players']=game['users'][_0x22e2d5(0x1ae)][_0x22e2d5(0x1a7)](_0x27d21b=>({'id':_0x27d21b['id'],'name':_0x27d21b['name']})),this[_0x22e2d5(0x19e)]=this[_0x22e2d5(0x1c9)]['contents'][_0x22e2d5(0x1a7)]((_0x5a7b13,_0x332190)=>{const _0x1e0955=_0x22e2d5,_0x252e7f=UtilApplications['getFolderPath'](_0x5a7b13,{'isAddTrailingSlash':!![]}),_0x307021=(_0x5a7b13[_0x1e0955(0x21b)]||{})[_0x1e0955(0x1b1)]||{},_0x51b13f=_0x307021[_0x1e0955(0x1a3)]!=null?_0x307021['default']:0x0;return{'id':_0x5a7b13['id'],'name':_0x5a7b13[_0x1e0955(0x1b4)],'allPlayerPermissions':_0x51b13f,'playerPermissions':this['_players'][_0x1e0955(0x1a7)](_0xcb74d=>_0xcb74d['id'])[_0x1e0955(0x222)](_0xd44150=>{const _0x2bf06b=_0x307021[_0xd44150]!=null?_0x307021[_0xd44150]:-0x1;return{[_0xd44150]:_0x2bf06b};}),'type':MiscUtil[_0x1e0955(0x1d4)](_0x5a7b13,'data',_0x1e0955(0x1ec))||_0x1e0955(0x1e4),'folderId':_0x5a7b13[_0x1e0955(0x1a4)]?_0x5a7b13[_0x1e0955(0x1a4)]['id']:null,'path':_0x252e7f||'','ix':_0x332190};}),this[_0x22e2d5(0x19e)][_0x22e2d5(0x1ed)](CollectionPermissionUpdater[_0x22e2d5(0x215)]),{...super[_0x22e2d5(0x200)](),'titleSearch':this[_0x22e2d5(0x1b8)]+'s','players':this[_0x22e2d5(0x1f0)],'entities':this[_0x22e2d5(0x19e)],'permissionsAll':Util[_0x22e2d5(0x19d)][_0x22e2d5(0x224)](),'permissions':Util['Fvtt'][_0x22e2d5(0x224)]({'isIncludeDefault':!![]})};}['close'](..._0x15e2d4){const _0x198622=_0x489925;return this['_pageFilter'][_0x198622(0x1bb)](),super[_0x198622(0x1e1)](..._0x15e2d4);}}export{CollectionPermissionUpdater};