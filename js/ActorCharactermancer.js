const _0x48d901=_0x45dc;(function(_0x4e82f7,_0x3146be){const _0x18995c=_0x45dc,_0x41737f=_0x4e82f7();while(!![]){try{const _0x3cb40b=parseInt(_0x18995c(0x1c2))/0x1+-parseInt(_0x18995c(0x1cc))/0x2+-parseInt(_0x18995c(0x1c7))/0x3+parseInt(_0x18995c(0x21d))/0x4+parseInt(_0x18995c(0x25d))/0x5*(parseInt(_0x18995c(0x257))/0x6)+parseInt(_0x18995c(0x2a0))/0x7*(parseInt(_0x18995c(0x1d8))/0x8)+-parseInt(_0x18995c(0x19e))/0x9;if(_0x3cb40b===_0x3146be)break;else _0x41737f['push'](_0x41737f['shift']());}catch(_0x1ca294){_0x41737f['push'](_0x41737f['shift']());}}}(_0x2b80,0xbbc1c));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{ImportListRace}from'./ImportListRace.js';import{Charactermancer_Class_ProficiencyImportModeSelect,Charactermancer_Class_Util,PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{ImportListClass}from'./ImportListClass.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{ImportListBackground}from'./ImportListBackground.js';import{ImportListFeat}from'./ImportListFeat.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerRace}from'./ActorCharactermancerRace.js';import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{ActorCharactermancerEquipment}from'./ActorCharactermancerEquipment.js';import{ActorCharactermancerBackground}from'./ActorCharactermancerBackground.js';import{ActorCharactermancerClass}from'./ActorCharactermancerClass.js';import{ActorCharactermancerFeat}from'./ActorCharactermancerFeat.js';import{ActorCharactermancerSpell}from'./ActorCharactermancerSpell.js';import{ActorCharactermancerAbility}from'./ActorCharactermancerAbility.js';import{UtilDataSource}from'./UtilDataSource.js';import{Charactermancer_FeatureOptionsSelect,Charactermancer_FeatureSourceTracker,Charactermancer_Util}from'./UtilCharactermancer.js';import{Charactermancer_Race_Util}from'./UtilCharactermancerRace.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';function _0x2b80(){const _0x22516b=['Open\x20Charactermancer\x20Targeting\x20Current\x20Sheet','disabled','getRace_','importFeat','modalFilterClasses','source','classFeature','compAbility','startingProficiencies','featureSourceTracker_','resources','_postProcessAllSelectedData','Open\x20Charactermancer\x20Targeting\x20Player\x20Character','length','addFauxOptionalFeatureEntries','Imported\x20race.','addFauxOptionalFeatureFeatures','register','class','_foundryAllFeatures','savingThrowProficiencies','entity','error','armorProficiencies','getValues','_doSwitchToPrevTab','ability','pGetRaces','feats','background','isPrimary','initFullEntries','Build\x20complete!','DATA_URL_OPTIONALFEATURES','_conInitialWithModifiers','ptrTaskProgress','_tabs','pGetFormData','_foundryChosenAbilityScoreIncrease','DataSourceSpecial','5etools-charactermancer','importClassSubclassFeature','_fullEntries','token','_render_pRenderTabEquipmentShop','compsClassLevelSelect','item','pGetItems','3925340WzHlSq','_pHandleSaveClick_','equipmentItemEntries','then','_pRender_renderTabAbilities','SOURCE_TYP_BREW','pLoad','ActorCharactermancerSourceSelector_filter','_versions','subrace','bind','_compEquipment','getClass_','max','Building...','notifications','compSpellAdditionalSpellRace','filterValuesSpellsCache','isCustomizeLanguagesTools','Spells','getCurrentAbilityScores','STR_SEE_CONSOLE','class_ixMax','Imported\x20background.','Build\x20failed!\x20','_compAbility','compBackgroundSkillProficiencies','copy','pImportClass','Build\x20cancelled.','catch','compBackgroundDamageImmunity','Imported\x20feats.','_BREW_DIRS','MODE_PRIMARY','TabMeta','filter','Importing\x20spells...','SOURCE_TYP_OFFICIAL_ALL','damageImmunities','data','multiclassing','preInit','compBackgroundDamageResistance','custom','compRaceDamageImmunity','isStandardStartingEquipmentActive_','pImportEntry','_pHandleSaveClick_postSave','compSpell','_preInit_registerKeybinds','senses','type','get','_pHandleSaveClick_spells','MODULE_LOCATION','SOURCE_TYP_CUSTOM','pDoApplyResourcesFormDataToActor','6uiMbpv','_pHandleSaveClick_pDoApplyTraitLike','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Previous</button>','getSubclass_','$wrpTab','actor','7201055qnyqXM','_featureSourceTracker','_pRender_renderTabBackground','pRenderShop','compRaceSkillToolLanguageProficiencies','compStatgen','_foundryIsSkipImportPreparedSpells','_foundryConInitial','\x22):\x20Select\x20Sources','SKILL_TO_ATB_ABV','pageFilter','features','filterBox','pDoApplySensesFormDataToActor','_pPostLoad','<hr\x20class=\x22hr-1\x20w-100\x22>','Running\x20post-build\x20step...','languageProficiencies','_pOpen','spellcastingAbility','_doSwitchToNextTab','_cbPostSave','_pRender_pRenderTabSpells','class_getProps','_foundryIsSkipImportCantrips','appendTo','getMergedData','compRaceSize','prop','decorate','compSpellAdditionalSpellBackground','DATA_URL_BACKGROUNDS','expertise','compEquipmentCurrency','cbPostSave','_foundryFormDataFeatures','$btnTab','map','AdditionalSaveState','isFiltered','sort','getTotals','_tabShop','compRace','compsClassHpIncreaseMode','compBackgroundWeaponProficiencies','<div\x20class=\x22ve-flex-vh-center\x20w-100\x20h-100\x22><i>Loading...</i></div>','Set\x20ability\x20scores.','pGetLocalHomebrewSources','_compBackground','DataSourceUrl','subclasses','_DATA_PROPS_EXPECTED','pSerialAwaitMap','damageVulnerabilities','startingEquipment','set','isCancelled','compsSpellSpells','_renderTabs','_pHandleSaveClick_abilities','mergeMap','compBackgroundToolProficiencies','_pGetSources','_foundryIsSkipImportCharacteristics','Component','Imported\x20classes\x20and\x20subclasses.','7XRJNZm','getMaxWindowHeight','find','Race','/template/Charactermancer.hbs','pGetWithCache','state','Class','_hasNextTab','compsSpellAdditionalSpellSubclass','Importing\x20background...','filterBoxSpells','compRaceToolProficiencies','forEach','_compClass','_pHandleSaveClick_background','compEquipmentShopGold','DataSourceFile','Imported\x20spells.','resist','compFeat','_pRender_renderTabClass','mode','delete','currency','compBackgroundExpertise','compsSpellAdditionalSpellClass','Custom\x20URL','vulnerable','_pHandleSaveClick_pDoImportAdditionalSpells','MODE_MULTICLASS','Importing\x20classes\x20and\x20subclasses...','_comp','Upload\x20File','_pRender_renderTabFeats','_foundryIsSkipCustomizeLanguagesTools','pRenderStarting','SOURCE_TYP_BREW_LOCAL','Charactermancer\x20(Actor\x20\x22','spell','_getActiveTab','5etools','DATA_URL_FEATS','_compRace','Abilities','_data','_pLoadVetoolsSource','compRaceArmorProficiencies','compRaceDamageResistance','SRD','additionalSpells','_foundrySelectedLevelIndices','ABIL_ABVS','_pRender','feat','_hasPrevTab','name','compsClassFeatureOptionsSelect','TaskRunner','render','_compFeat','20225403YDzGFM','pApplyFormDataToActor','ascSort','getFormDataAsi','size','Importing\x20race...','<button\x20class=\x22btn\x20btn-5et\x20btn-primary\x22>Finalize</button>','_pHandleSaveClick_pDoApplySkills','immune','compBackgroundFeatures','mutateForFilters','push','MODULE_NAME','conditionImmunities','keys','compRaceDamageVulnerability','flat','skillProficiencies','compBackgroundLanguageToolProficiencies','_pRender_renderTabRace','optionalfeature','close','pGetAllSpells','_isLevelUp','progressWidget','pGetHomebrewSources','_pHandleSaveClick_class','_actor','race','assign','feat_pGetAdditionalFeatFormData','_tabEquipment','_setActiveTab','last','skills','pGetClassSubclassFeatureIgnoredLookup','1286059YXIJHS','_foundryStartingProficiencyMode','Importing\x20feats...','compsClassSkillProficiencies','Feats','2497524WuRkuq','_render_loading','./DataConverterClassSubclassFeature.js','compRaceWeaponProficiencies','weaponProficiencies','1364660vTQFRv','compEquipmentStartingDefault','pUpdateDocument','pRender','subclass','_pLoad','slice','compBackground','pGetUserBoolean','cls','_conFinalWithModifiers','Build\x20Complete','6588416eVAQCD','_compSpell','empty','_cons_initTabs','Starting\x20Equipment','addClass','toolProficiencies','getFeatureCustomizedBackground_','btn-sm','_pHandleSaveClick_feats','MODE_NONE','getCurrentLevel','setProgress','pDoApplyProficiencyFormDataToActorUpdate','pImportEquipmentItemEntries','pPostLoadBrew','compBackgroundConditionImmunity','compBackgroundDamageVulnerability','compRaceLanguageProficiencies','_render_pRenderTabEquipmentStarting','pInit'];_0x2b80=function(){return _0x22516b;};return _0x2b80();}import{Charactermancer_Spell}from'./UtilCharactermancerSpell.js';import{UtilDocuments}from'./UtilDocuments.js';import{UtilWorldDataSourceSelector}from'./UtilWorldDataSourceSelector.js';import{Charactermancer_Feature_Util}from'./UtilCharactermancerFeature.js';import{UtilKeybinding}from'./UtilKeybinding.js';class ActorCharactermancerSourceSelector extends AppSourceSelectorMulti{static[_0x48d901(0x247)](){const _0x5c2bc5=_0x48d901;this[_0x5c2bc5(0x24f)]();}static['_preInit_registerKeybinds'](){const _0x244985=_0x48d901,_0x1b7d4e=({modeId:modeId=null}={})=>{const _0x3b47be=UtilKeybinding['getPlayerActor']();if(!_0x3b47be)return!![];return this['_pOpen']({'modeId':modeId,'actor':_0x3b47be}),!![];},_0x54465c=({modeId:modeId=null}={})=>{const _0x1a5cf0=_0x45dc,_0x31fddc=UtilKeybinding['getCurrentImportableSheetDocumentMeta']({'isRequireActor':!![]});if(!_0x31fddc?.[_0x1a5cf0(0x25c)])return!![];return this[_0x1a5cf0(0x26f)]({'modeId':modeId,..._0x31fddc}),!![];};game['keybindings'][_0x244985(0x1fe)](SharedConsts[_0x244985(0x1aa)],'ActorCharactermancerSourceSelector__openForCharacter',{'name':_0x244985(0x1f9),'editable':[],'onDown':()=>_0x1b7d4e()}),game['keybindings'][_0x244985(0x1fe)](SharedConsts[_0x244985(0x1aa)],'ActorCharactermancerSourceSelector__openForCurrentSheet',{'name':_0x244985(0x1ed),'editable':[],'onDown':()=>_0x54465c()});}static async['pHandleButtonClick'](_0x323283,_0x251b97,_0x4ccb3c,_0x531556){const _0x1bc1bf=_0x48d901;return this['_pOpen']({'actor':_0x251b97[_0x1bc1bf(0x25c)]});}static async[_0x48d901(0x26f)]({actor:_0x246ed9}){const _0x1857e9=_0x48d901,_0x2f9a91=await this[_0x1857e9(0x29c)]({'actor':_0x246ed9}),_0x5cf27f=new ActorCharactermancerSourceSelector({'title':_0x1857e9(0x187)+_0x246ed9[_0x1857e9(0x199)]+_0x1857e9(0x265),'filterNamespace':_0x1857e9(0x224),'savedSelectionKey':'ActorCharactermancerSourceSelector_savedSelection','sourcesToDisplay':_0x2f9a91}),_0x3b03c7=await _0x5cf27f['pWaitForUserInput']();if(_0x3b03c7==null)return;this[_0x1857e9(0x1f8)](_0x3b03c7);const _0x5827b7=new ActorCharactermancer({'actor':_0x246ed9,'data':_0x3b03c7});_0x5827b7[_0x1857e9(0x19c)](!![]);}static[_0x48d901(0x1f8)](_0x4b3d9f){const _0x243683=_0x48d901;_0x4b3d9f[_0x243683(0x16e)]((_0x4870a0,_0x2c58da)=>{const _0x34af11=_0x243683;if(!_0x4870a0['class']||!_0x4870a0['class']['length'])return;const _0x134747=_0x4b3d9f[_0x34af11(0x1d2)](0x0,_0x2c58da)['filter'](_0x433179=>_0x433179[_0x34af11(0x1ff)]);if(!_0x134747['length'])return;_0x4870a0[_0x34af11(0x1ff)]=_0x4870a0['class'][_0x34af11(0x241)](_0x13a335=>{const _0x165d6c=_0x34af11,_0x59f200=_0x134747['find'](_0x2af77a=>_0x2af77a['class']&&_0x2af77a[_0x165d6c(0x1ff)][_0x165d6c(0x2a2)](_0x361b47=>_0x13a335[_0x165d6c(0x199)]===_0x361b47['name']&&_0x13a335[_0x165d6c(0x1f2)]===_0x361b47[_0x165d6c(0x1f2)]));if(!_0x59f200)return!![];const _0x353f80=_0x59f200['class'][_0x165d6c(0x2a2)](_0x5d804f=>_0x13a335[_0x165d6c(0x199)]===_0x5d804f[_0x165d6c(0x199)]&&_0x13a335[_0x165d6c(0x1f2)]===_0x5d804f['source']);return _0x353f80['subclasses']=[..._0x353f80['subclasses']||[],..._0x13a335[_0x165d6c(0x290)]||[]],![];});}),_0x4b3d9f[_0x243683(0x16e)](_0x4cec98=>delete _0x4cec98[_0x243683(0x1d0)]);const _0x5cc182=_0x4b3d9f['map'](_0x219261=>_0x219261['optionalfeature']||[])['flat']();Charactermancer_Feature_Util[_0x243683(0x1fb)](_0x5cc182,_0x5cc182);const _0x2c50c6=_0x4b3d9f['map'](_0x42bbe4=>_0x42bbe4[_0x243683(0x1ff)]||[])['flat']();Charactermancer_Class_Util[_0x243683(0x1fd)](_0x2c50c6,_0x5cc182);const _0x2f911e=_0x4b3d9f[_0x243683(0x282)](_0x1a256e=>_0x1a256e[_0x243683(0x197)]||[])[_0x243683(0x1ae)]();Charactermancer_Feature_Util['addFauxOptionalFeatureEntries'](_0x2f911e,_0x5cc182);}static async['_pGetSources']({actor:_0x391235}){const _0xd840e=_0x48d901;return[new UtilDataSource[(_0xd840e(0x214))](Config[_0xd840e(0x252)]('ui','isStreamerMode')?_0xd840e(0x192):_0xd840e(0x18a),this['_pLoadVetoolsSource'][_0xd840e(0x227)](this),{'cacheKey':_0xd840e(0x215),'filterTypes':[UtilDataSource[_0xd840e(0x243)]],'isDefault':!![],'pPostLoad':this[_0xd840e(0x26b)]['bind'](this,{'isVetools':!![],'actor':_0x391235})}),new UtilDataSource[(_0xd840e(0x28f))](_0xd840e(0x17c),'',{'pPostLoad':this[_0xd840e(0x26b)][_0xd840e(0x227)](this,{'isVetools':![],'actor':_0x391235}),'filterTypes':[UtilDataSource[_0xd840e(0x255)]]}),new UtilDataSource[(_0xd840e(0x172))](_0xd840e(0x182),{'pPostLoad':this[_0xd840e(0x26b)][_0xd840e(0x227)](this,{'isVetools':![],'actor':_0x391235}),'filterTypes':[UtilDataSource[_0xd840e(0x255)]]}),...(await Vetools[_0xd840e(0x28d)](...ActorCharactermancerSourceSelector[_0xd840e(0x23e)]))[_0xd840e(0x282)](({name:_0x332951,url:_0x32c04c})=>new UtilDataSource[(_0xd840e(0x28f))](_0x332951,_0x32c04c,{'pPostLoad':this[_0xd840e(0x26b)][_0xd840e(0x227)](this,{'isVetools':![],'actor':_0x391235}),'filterTypes':[UtilDataSource[_0xd840e(0x222)],UtilDataSource[_0xd840e(0x186)]]})),...(await Vetools[_0xd840e(0x1b7)](...ActorCharactermancerSourceSelector[_0xd840e(0x23e)]))[_0xd840e(0x282)](({name:_0xf4630f,url:_0x541a11})=>new UtilDataSource[(_0xd840e(0x28f))](_0xf4630f,_0x541a11,{'pPostLoad':this[_0xd840e(0x26b)][_0xd840e(0x227)](this,{'isVetools':![],'actor':_0x391235}),'filterTypes':[UtilDataSource[_0xd840e(0x222)]]}))][_0xd840e(0x241)](_0x35e45b=>!UtilWorldDataSourceSelector[_0xd840e(0x284)](_0x35e45b));}static async[_0x48d901(0x18f)](){const _0xb29c69=_0x48d901,_0x5617c3={},[_0x59b8b9,_0x533ba5,_0xd86afd,_0x418867,_0x5c38b8,_0x31f94f,_0x5db1e2]=await Promise['all']([Vetools['pGetClasses'](),Vetools[_0xb29c69(0x208)](),Vetools[_0xb29c69(0x2a5)](Vetools[_0xb29c69(0x27c)]),Vetools[_0xb29c69(0x21c)](),Vetools[_0xb29c69(0x1b4)](),Vetools[_0xb29c69(0x2a5)](Vetools[_0xb29c69(0x18b)]),Vetools[_0xb29c69(0x2a5)](Vetools[_0xb29c69(0x20e)])]);return Object[_0xb29c69(0x1bb)](_0x5617c3,_0x59b8b9),_0x5617c3['race']=_0x533ba5[_0xb29c69(0x1ba)],_0x5617c3[_0xb29c69(0x20a)]=_0xd86afd[_0xb29c69(0x20a)],_0x5617c3[_0xb29c69(0x21b)]=_0x418867[_0xb29c69(0x21b)],_0x5617c3[_0xb29c69(0x188)]=_0x5c38b8[_0xb29c69(0x188)],_0x5617c3['feat']=_0x31f94f[_0xb29c69(0x197)],_0x5617c3[_0xb29c69(0x1b2)]=_0x5db1e2[_0xb29c69(0x1b2)],_0x5617c3;}static async[_0x48d901(0x26b)]({isVetools:_0x2f51bb,actor:_0x1b7b07},_0x43aada){const _0x236af3=_0x48d901;_0x43aada={..._0x43aada};!_0x2f51bb&&(_0x43aada[_0x236af3(0x1ba)]||_0x43aada[_0x236af3(0x226)])&&(_0x43aada[_0x236af3(0x1ba)]=MiscUtil[_0x236af3(0x238)](_0x43aada['race']||[]),_0x43aada[_0x236af3(0x1ba)]=await Charactermancer_Race_Util[_0x236af3(0x1e7)](_0x43aada));if(_0x43aada[_0x236af3(0x1ff)]||_0x43aada[_0x236af3(0x1d0)]){const {DataConverterClassSubclassFeature:_0x57e343}=await import(_0x236af3(0x1c9)),_0x14952e=await _0x57e343[_0x236af3(0x1c1)]({'data':_0x43aada});_0x43aada['class']=await PageFilterClassesFoundry['pPostLoad']({'class':_0x43aada[_0x236af3(0x1ff)],'subclass':_0x43aada['subclass'],'classFeature':_0x43aada[_0x236af3(0x1f3)],'subclassFeature':_0x43aada['subclassFeature']},{'actor':_0x1b7b07,'isIgnoredLookup':_0x14952e});if(_0x43aada['class'])_0x43aada['class']['forEach'](_0x5a9581=>PageFilterClasses[_0x236af3(0x1a8)](_0x5a9581));}if(_0x43aada['feat'])_0x43aada[_0x236af3(0x197)]=MiscUtil[_0x236af3(0x238)](_0x43aada[_0x236af3(0x197)]);if(_0x43aada['optionalfeature'])_0x43aada[_0x236af3(0x1b2)]=MiscUtil[_0x236af3(0x238)](_0x43aada[_0x236af3(0x1b2)]);return _0x43aada;}}ActorCharactermancerSourceSelector[_0x48d901(0x23e)]=[_0x48d901(0x1ff),_0x48d901(0x1d0),_0x48d901(0x1ba),'subrace',_0x48d901(0x21b),_0x48d901(0x20a),_0x48d901(0x21b),_0x48d901(0x188),'feat',_0x48d901(0x1b2)];class ActorCharactermancer extends Application{static [_0x48d901(0x291)]=[_0x48d901(0x1ff),_0x48d901(0x1d0),_0x48d901(0x1f3),'subclassFeature',_0x48d901(0x1ba),'background',_0x48d901(0x21b),_0x48d901(0x188),_0x48d901(0x197),_0x48d901(0x1b2)];constructor(_0x46d1eb){const _0xbd9ad5=_0x48d901;_0x46d1eb=_0x46d1eb||{},super({'title':_0xbd9ad5(0x187)+_0x46d1eb['actor']['name']+'\x22)','template':SharedConsts[_0xbd9ad5(0x254)]+_0xbd9ad5(0x2a4),'width':Util['getMaxWindowWidth'](0x4b0),'height':Util[_0xbd9ad5(0x2a1)](),'resizable':!![]});const _0x1797ff=UtilDataSource[_0xbd9ad5(0x277)](_0x46d1eb[_0xbd9ad5(0x245)]);ActorCharactermancer['_DATA_PROPS_EXPECTED'][_0xbd9ad5(0x16e)](_0x1aab40=>_0x1797ff[_0x1aab40]=_0x1797ff[_0x1aab40]||[]),this['_comp']=new ActorCharactermancer[(_0xbd9ad5(0x29e))]({'actor':_0x46d1eb[_0xbd9ad5(0x25c)],'data':_0x1797ff,'cbPostSave':this[_0xbd9ad5(0x1b3)][_0xbd9ad5(0x227)](this)});}['activateListeners'](_0x21a2ce){const _0x19f8fc=_0x48d901;this[_0x19f8fc(0x181)]['render'](_0x21a2ce);}}function _0x45dc(_0x242001,_0x95d6e0){const _0x2b8016=_0x2b80();return _0x45dc=function(_0x45dc87,_0x267c46){_0x45dc87=_0x45dc87-0x16a;let _0x2c12c3=_0x2b8016[_0x45dc87];return _0x2c12c3;},_0x45dc(_0x242001,_0x95d6e0);}ActorCharactermancer[_0x48d901(0x29e)]=class extends ActorCharactermancerBaseComponent{constructor(_0x31b5a2){const _0x23441e=_0x48d901;_0x31b5a2=_0x31b5a2||{},super(),TabUiUtil[_0x23441e(0x27a)](this),this['_actor']=_0x31b5a2[_0x23441e(0x25c)],this[_0x23441e(0x18e)]=_0x31b5a2['data'],this[_0x23441e(0x272)]=_0x31b5a2[_0x23441e(0x27f)],this['_featureSourceTracker']=new Charactermancer_FeatureSourceTracker(),this[_0x23441e(0x1b5)]=Charactermancer_Util[_0x23441e(0x1e3)](this[_0x23441e(0x1b9)])>0x0,this[_0x23441e(0x211)]=null;const {tabClass:_0x252a98,tabRace:_0x4aeb93,tabAbilities:_0x42807e,tabBackground:_0x177afb,tabEquipment:_0xc423d1,tabShop:_0x47b820,tabSpells:_0x2151f9,tabFeats:_0x3f1700}=this[_0x23441e(0x1db)]();this[_0x23441e(0x1bd)]=_0xc423d1,this['_tabShop']=_0x47b820,this[_0x23441e(0x16f)]=new ActorCharactermancerClass({'actor':_0x31b5a2[_0x23441e(0x25c)],'data':_0x31b5a2[_0x23441e(0x245)],'parent':this,'tabClass':_0x252a98}),this[_0x23441e(0x18c)]=new ActorCharactermancerRace({'actor':_0x31b5a2[_0x23441e(0x25c)],'data':_0x31b5a2[_0x23441e(0x245)],'parent':this,'tabRace':_0x4aeb93}),this[_0x23441e(0x236)]=new ActorCharactermancerAbility({'actor':_0x31b5a2[_0x23441e(0x25c)],'data':_0x31b5a2[_0x23441e(0x245)],'parent':this,'tabAbilities':_0x42807e}),this[_0x23441e(0x28e)]=new ActorCharactermancerBackground({'actor':_0x31b5a2[_0x23441e(0x25c)],'data':_0x31b5a2['data'],'parent':this,'tabBackground':_0x177afb}),this[_0x23441e(0x228)]=new ActorCharactermancerEquipment({'actor':_0x31b5a2[_0x23441e(0x25c)],'data':_0x31b5a2['data'],'parent':this,'tabEquipment':_0xc423d1,'tabShop':_0x47b820}),this[_0x23441e(0x1d9)]=new ActorCharactermancerSpell({'actor':_0x31b5a2[_0x23441e(0x25c)],'data':_0x31b5a2[_0x23441e(0x245)],'parent':this,'tabSpells':_0x2151f9}),this[_0x23441e(0x19d)]=new ActorCharactermancerFeat({'actor':_0x31b5a2[_0x23441e(0x25c)],'data':_0x31b5a2[_0x23441e(0x245)],'parent':this,'tabFeats':_0x3f1700}),this['_conInitialWithModifiers']=null,this[_0x23441e(0x1d6)]=null;}['_cons_initTabs'](){const _0x27f099=_0x48d901;this['_isLevelUp']?this['_tabs']=this[_0x27f099(0x298)]([new TabUiUtil[(_0x27f099(0x240))]({'name':_0x27f099(0x2a7),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':_0x27f099(0x18d),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':_0x27f099(0x230),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':'Feats','hasBorder':!![]})],{'propProxy':_0x27f099(0x2a6)}):this['_tabs']=this[_0x27f099(0x298)]([new TabUiUtil['TabMeta']({'name':_0x27f099(0x2a7),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':_0x27f099(0x2a3),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':_0x27f099(0x18d),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':'Background','hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x27f099(0x1dc),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':'Equipment\x20Shop','hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x27f099(0x230),'hasBorder':!![]}),new TabUiUtil[(_0x27f099(0x240))]({'name':_0x27f099(0x1c6),'hasBorder':!![]})],{'propProxy':_0x27f099(0x2a6)});if(this['_isLevelUp']){const [_0x5a5bbe,_0x468af4,_0xe44418,_0xc1aff1]=this[_0x27f099(0x211)];return{'tabClass':_0x5a5bbe,'tabAbilities':_0x468af4,'tabSpells':_0xe44418,'tabFeats':_0xc1aff1};}else{const [_0x2878e9,_0x120274,_0x27c34c,_0x2e3b64,_0x363ef1,_0x491576,_0x54a359,_0x3da747]=this[_0x27f099(0x211)];return{'tabClass':_0x2878e9,'tabRace':_0x120274,'tabAbilities':_0x27c34c,'tabBackground':_0x2e3b64,'tabEquipment':_0x363ef1,'tabShop':_0x491576,'tabSpells':_0x54a359,'tabFeats':_0x3da747};}}get[_0x48d901(0x1f6)](){const _0x1e4642=_0x48d901;return this[_0x1e4642(0x25e)];}get['compClass'](){return this['_compClass'];}get[_0x48d901(0x288)](){return this['_compRace'];}get[_0x48d901(0x1d3)](){const _0x370810=_0x48d901;return this[_0x370810(0x28e)];}get['compEquipment'](){const _0x257097=_0x48d901;return this[_0x257097(0x228)];}get[_0x48d901(0x24e)](){const _0x345582=_0x48d901;return this[_0x345582(0x1d9)];}get[_0x48d901(0x175)](){const _0x4ec4fd=_0x48d901;return this[_0x4ec4fd(0x19d)];}get[_0x48d901(0x1f4)](){const _0x2df9d1=_0x48d901;return this[_0x2df9d1(0x236)];}set['activeTab_'](_0xa17ae2){const _0x2f7383=_0x48d901;this[_0x2f7383(0x1be)]({'propProxy':'state','tab':_0xa17ae2});}[_0x48d901(0x19c)](_0x48deae){const _0x470f00=_0x48d901;this[_0x470f00(0x1c8)](_0x48deae),this[_0x470f00(0x1d1)]()[_0x470f00(0x220)](()=>this[_0x470f00(0x196)](_0x48deae))[_0x470f00(0x23b)](_0xb65ea9=>{const _0x3fd9f5=_0x470f00;ui[_0x3fd9f5(0x22c)][_0x3fd9f5(0x203)]('Failed\x20to\x20load!\x20'+VeCt['STR_SEE_CONSOLE']);throw _0xb65ea9;});}['_render_loading'](_0x444a12){const _0x27d6ec=_0x48d901;_0x444a12['append'](_0x27d6ec(0x28b));}async[_0x48d901(0x1d1)](){const _0x3969df=_0x48d901;await this[_0x3969df(0x18c)]['pLoad'](),await this[_0x3969df(0x28e)][_0x3969df(0x223)](),await this[_0x3969df(0x16f)][_0x3969df(0x223)](),await this[_0x3969df(0x1d9)][_0x3969df(0x223)](),await this[_0x3969df(0x19d)]['pLoad']();}async[_0x48d901(0x196)](_0xc7e047){const _0x4a16d4=_0x48d901;_0xc7e047[_0x4a16d4(0x1da)]();const _0xe12b6b=$(_0x4a16d4(0x259))['click'](()=>this[_0x4a16d4(0x206)]({'propProxy':_0x4a16d4(0x2a6)})),_0x578687=$('<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Next</button>')['click'](()=>{const _0x2eaf05=_0x4a16d4;this[_0x2eaf05(0x271)]({'propProxy':_0x2eaf05(0x2a6)}),(this[_0x2eaf05(0x189)]({'propProxy':_0x2eaf05(0x2a6)})===this[_0x2eaf05(0x287)]&&this[_0x2eaf05(0x228)][_0x2eaf05(0x24b)]()||this['_getActiveTab']({'propProxy':_0x2eaf05(0x2a6)})===this[_0x2eaf05(0x1bd)]&&!this[_0x2eaf05(0x228)]['isStandardStartingEquipmentActive_']())&&this[_0x2eaf05(0x271)]({'propProxy':_0x2eaf05(0x2a6)});}),_0x1ecacd=()=>{const _0x141d88=_0x4a16d4;_0xe12b6b[_0x141d88(0x279)]('disabled',!this[_0x141d88(0x198)]({'propProxy':'state'})),_0x578687['prop'](_0x141d88(0x1ee),!this[_0x141d88(0x2a8)]({'propProxy':_0x141d88(0x2a6)}));};this['_addHookActiveTab'](_0x1ecacd,{'propProxy':_0x4a16d4(0x2a6)}),_0x1ecacd();const _0x4caa22=$(_0x4a16d4(0x1a4))['click'](()=>{const _0x210604=_0x4a16d4;_0x4caa22[_0x210604(0x279)](_0x210604(0x1ee),!![]);try{this['_pHandleSaveClick']();}finally{_0x4caa22[_0x210604(0x279)](_0x210604(0x1ee),![]);}});$$`<div class="w-100 no-shrink ui-tab__wrp-tab-heads--border">
			${this[_0x4a16d4(0x211)]['map'](_0x466e87=>_0x466e87[_0x4a16d4(0x281)][_0x4a16d4(0x1dd)](_0x4a16d4(0x1e0)))}
		</div>`[_0x4a16d4(0x276)](_0xc7e047),this['_tabs']['forEach'](_0x4266b7=>_0x4266b7[_0x4a16d4(0x25b)][_0x4a16d4(0x276)](_0xc7e047)),_0xc7e047['append'](_0x4a16d4(0x26c)),$$`<div class="w-100 no-shrink ve-flex-h-right pr-3">
			<div class="ve-flex-v-center btn-group">${_0xe12b6b}${_0x578687}</div>
			<div class="vr-2"></div>
			${_0x4caa22}
		</div>`[_0x4a16d4(0x276)](_0xc7e047),this['_pRender_renderTabClass'](),this['_pRender_renderTabRace'](),this[_0x4a16d4(0x221)](),this[_0x4a16d4(0x25f)](),await this[_0x4a16d4(0x1eb)](),await this['_render_pRenderTabEquipmentShop'](),await this['_pRender_pRenderTabSpells'](),this[_0x4a16d4(0x183)]();}[_0x48d901(0x176)](){const _0x256830=_0x48d901;this[_0x256830(0x16f)][_0x256830(0x19c)]();}[_0x48d901(0x1b1)](){const _0x1d9b11=_0x48d901;this['_compRace'][_0x1d9b11(0x19c)]();}[_0x48d901(0x221)](){const _0x52d4f8=_0x48d901;this[_0x52d4f8(0x236)][_0x52d4f8(0x19c)]();}['_pRender_renderTabBackground'](){const _0x1aaa28=_0x48d901;this['_compBackground'][_0x1aaa28(0x19c)]();}async['_render_pRenderTabEquipmentStarting'](){const _0x522330=_0x48d901;await this[_0x522330(0x228)][_0x522330(0x185)]();}async[_0x48d901(0x219)](){const _0x45d235=_0x48d901;await this[_0x45d235(0x228)][_0x45d235(0x260)]();}async[_0x48d901(0x273)](){const _0x2faae2=_0x48d901;await this[_0x2faae2(0x1d9)][_0x2faae2(0x1cf)]();}[_0x48d901(0x183)](){const _0x4712f1=_0x48d901;this[_0x4712f1(0x19d)][_0x4712f1(0x19c)]();}async['_pHandleSaveClick'](){const _0x5bc3b9=_0x48d901,_0x13776e=await InputUiUtil[_0x5bc3b9(0x1d4)]({'title':'Are\x20You\x20Sure?'});if(!_0x13776e)return;const _0x46f619=[this[_0x5bc3b9(0x299)][_0x5bc3b9(0x227)](this),this[_0x5bc3b9(0x1b5)]?null:this['_pHandleSaveClick_race']['bind'](this),this['_pHandleSaveClick_class']['bind'](this),this[_0x5bc3b9(0x1b5)]?null:this[_0x5bc3b9(0x170)]['bind'](this),this['_pHandleSaveClick_feats'][_0x5bc3b9(0x227)](this),this[_0x5bc3b9(0x253)][_0x5bc3b9(0x227)](this),this[_0x5bc3b9(0x1b5)]?null:this['_pHandleSaveClick_equipment'][_0x5bc3b9(0x227)](this),this[_0x5bc3b9(0x24d)][_0x5bc3b9(0x227)](this)][_0x5bc3b9(0x241)](Boolean),_0x14ca1e=new UtilApplications[(_0x5bc3b9(0x19b))]({'titleInitial':_0x5bc3b9(0x22b),'titleComplete':_0x5bc3b9(0x1d7),'totalTasks':_0x46f619[_0x5bc3b9(0x1fa)]});await _0x14ca1e['pInit']();const _0x500073={'_':0x0};try{await this[_0x5bc3b9(0x21e)](_0x46f619,_0x14ca1e,_0x500073);}catch(_0x1e6180){_0x14ca1e[_0x5bc3b9(0x1e4)]({'message':_0x5bc3b9(0x235)+VeCt[_0x5bc3b9(0x232)],'count':_0x500073['_'],'isError':!![]});throw _0x1e6180;}}async[_0x48d901(0x21e)](_0x798784,_0x5c0cdc,_0x35d914){const _0x1b086f=_0x48d901,_0x23d978=new ActorCharactermancer['Component'][(_0x1b086f(0x283))]({'progressWidget':_0x5c0cdc,'ptrTaskProgress':_0x35d914});for(const _0x4f2be7 of _0x798784)await _0x4f2be7(_0x23d978);_0x5c0cdc[_0x1b086f(0x1e4)]({'message':_0x1b086f(0x20d),'count':_0x35d914['_']});}async[_0x48d901(0x299)](_0x4853d7){const _0x18e906=_0x48d901,{progressWidget:_0x3f378f,ptrTaskProgress:_0x280475}=_0x4853d7;_0x3f378f['setProgress']({'message':'Setting\x20ability\x20scores...','count':++_0x280475['_']});if(_0x3f378f[_0x18e906(0x296)])return _0x3f378f[_0x18e906(0x1e4)]({'message':'Build\x20cancelled.'});if(this['_isLevelUp']){const {con:_0x89a634}=Charactermancer_Util[_0x18e906(0x231)](this['_actor']);this['_conInitialWithModifiers']=_0x89a634;}const _0x45549e=this['_compAbility'][_0x18e906(0x262)][_0x18e906(0x286)]();if(_0x45549e[_0x18e906(0x177)]!==StatGenUi[_0x18e906(0x1e2)]){const _0x1cb900={'data':{'abilities':{...Parser[_0x18e906(0x195)][_0x18e906(0x29a)](_0x42fdbd=>({[_0x42fdbd]:{'value':_0x45549e?.['totals']?.[_0x45549e[_0x18e906(0x177)]]?.[_0x42fdbd]||0x0}}))}}};await UtilDocuments[_0x18e906(0x1ce)](this['_actor'],_0x1cb900);}if(this['_isLevelUp']){const {con:_0x1a5493}=Charactermancer_Util[_0x18e906(0x231)](this[_0x18e906(0x1b9)]);this[_0x18e906(0x1d6)]=_0x1a5493;}_0x3f378f[_0x18e906(0x1e4)]({'message':_0x18e906(0x28c),'count':_0x280475['_']});if(_0x3f378f[_0x18e906(0x296)])return _0x3f378f[_0x18e906(0x1e4)]({'message':'Build\x20cancelled.','count':_0x280475['_']});}async['_pHandleSaveClick_race'](_0x486590){const _0x15b900=_0x48d901,{progressWidget:_0x2d69ed,ptrTaskProgress:_0x39408e}=_0x486590;_0x2d69ed[_0x15b900(0x1e4)]({'message':_0x15b900(0x1a3),'count':++_0x39408e['_']});const _0x3285d4=this[_0x15b900(0x18c)][_0x15b900(0x1ef)]();if(_0x3285d4){const _0x3c952f=new ImportListRace({'actor':this[_0x15b900(0x1b9)]});await _0x3c952f['pInit']();const _0x40f948=MiscUtil['copy'](_0x3285d4);delete _0x40f948['ability'],delete _0x40f948[_0x15b900(0x209)],delete _0x40f948[_0x15b900(0x225)],delete _0x40f948[_0x15b900(0x193)];if(this['_compRace']['compRaceSize'])_0x40f948[_0x15b900(0x1a2)]=[(await this[_0x15b900(0x18c)][_0x15b900(0x278)][_0x15b900(0x212)]())[_0x15b900(0x245)]];else delete _0x40f948[_0x15b900(0x1a2)];await this[_0x15b900(0x1a5)]([this[_0x15b900(0x18c)]['compRaceSkillProficiencies'],this[_0x15b900(0x18c)][_0x15b900(0x261)]],_0x40f948,_0x15b900(0x1af)),await this[_0x15b900(0x258)]({'comps':[this[_0x15b900(0x18c)][_0x15b900(0x1ea)],this['_compRace'][_0x15b900(0x261)]],'toObj':_0x40f948,'path':[_0x15b900(0x26e)]}),await this[_0x15b900(0x258)]({'comps':[this[_0x15b900(0x18c)][_0x15b900(0x16d)],this['_compRace'][_0x15b900(0x261)]],'toObj':_0x40f948,'path':[_0x15b900(0x1de)]}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comps':[this[_0x15b900(0x18c)]['compRaceExpertise']],'toObj':_0x40f948,'path':['expertise']}),await this[_0x15b900(0x258)]({'comps':[this[_0x15b900(0x18c)][_0x15b900(0x190)]],'toObj':_0x40f948,'path':[_0x15b900(0x204)]}),await this[_0x15b900(0x258)]({'comps':[this['_compRace'][_0x15b900(0x1ca)]],'toObj':_0x40f948,'path':[_0x15b900(0x1cb)]}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comps':[this[_0x15b900(0x18c)][_0x15b900(0x24a)]],'toObj':_0x40f948,'path':[_0x15b900(0x1a6)],'isLegacy':!![]}),await this[_0x15b900(0x258)]({'comps':[this['_compRace'][_0x15b900(0x191)]],'toObj':_0x40f948,'path':[_0x15b900(0x174)],'isLegacy':!![]}),await this[_0x15b900(0x258)]({'comps':[this['_compRace'][_0x15b900(0x1ad)]],'toObj':_0x40f948,'path':['vulnerable'],'isLegacy':!![]}),await this[_0x15b900(0x258)]({'comps':[this[_0x15b900(0x18c)]['compRaceConditionImmunity']],'toObj':_0x40f948,'path':['conditionImmune'],'isLegacy':!![]}),await _0x3c952f[_0x15b900(0x24c)](_0x40f948,{'isCharactermancer':!![]});}_0x2d69ed['setProgress']({'message':_0x15b900(0x1fc),'count':_0x39408e['_']});if(_0x2d69ed[_0x15b900(0x296)])return _0x2d69ed['setProgress']({'message':_0x15b900(0x23a),'count':_0x39408e['_']});}async[_0x48d901(0x1b8)](_0x58f728){const _0x16ec5b=_0x48d901,{progressWidget:_0x207f76,ptrTaskProgress:_0xdc375}=_0x58f728;_0x207f76['setProgress']({'message':_0x16ec5b(0x180),'count':++_0xdc375['_']});const _0x388e59=[];for(let _0x3c4364=0x0;_0x3c4364<this[_0x16ec5b(0x16f)][_0x16ec5b(0x2a6)][_0x16ec5b(0x233)]+0x1;++_0x3c4364){const {propIxClass:_0x44635d,propIxSubclass:_0x118359}=ActorCharactermancerBaseComponent[_0x16ec5b(0x274)](_0x3c4364),_0x140b00=this[_0x16ec5b(0x16f)][_0x16ec5b(0x229)]({'propIxClass':_0x44635d});if(!_0x140b00)continue;const _0x23b3f6=this[_0x16ec5b(0x16f)][_0x16ec5b(0x25a)]({'cls':_0x140b00,'propIxSubclass':_0x118359});_0x388e59['push']({'ix':_0x3c4364,'cls':_0x140b00,'sc':_0x23b3f6,'isPrimary':this[_0x16ec5b(0x16f)]['state']['class_ixPrimaryClass']===_0x3c4364});}if(_0x388e59[_0x16ec5b(0x1fa)]){_0x388e59[_0x16ec5b(0x285)]((_0x288d3c,_0x2888ee)=>SortUtil[_0x16ec5b(0x1a0)](Number(_0x2888ee[_0x16ec5b(0x20b)]),Number(_0x288d3c['isPrimary']))||SortUtil[_0x16ec5b(0x1a0)](_0x288d3c[_0x16ec5b(0x1d5)][_0x16ec5b(0x199)],_0x2888ee[_0x16ec5b(0x1d5)][_0x16ec5b(0x199)]));const _0x2f233b=new ImportListClass({'actor':this[_0x16ec5b(0x1b9)]});await _0x2f233b['pInit']();const _0x204a45=this[_0x16ec5b(0x16f)][_0x16ec5b(0x1f1)][_0x16ec5b(0x267)][_0x16ec5b(0x269)][_0x16ec5b(0x205)]();for(let _0x4c52a8=0x0;_0x4c52a8<_0x388e59[_0x16ec5b(0x1fa)];++_0x4c52a8){const {ix:_0x6f4414,cls:_0x56b770,sc:_0x2905a2,isPrimary:_0xb3f595}=_0x388e59[_0x4c52a8],_0x1b5ac2=MiscUtil[_0x16ec5b(0x238)](_0x56b770),_0x369be5=_0x2905a2?MiscUtil['copy'](_0x2905a2):null;if(_0x369be5)delete _0x369be5[_0x16ec5b(0x193)];if(_0x369be5)_0x1b5ac2[_0x16ec5b(0x290)]=[_0x369be5];else _0x1b5ac2['subclasses']=[];_0x1b5ac2[_0x16ec5b(0x194)]=await this[_0x16ec5b(0x16f)][_0x16ec5b(0x21a)][_0x6f4414][_0x16ec5b(0x212)]()['data'];if(!_0x1b5ac2[_0x16ec5b(0x194)][_0x16ec5b(0x1fa)])continue;const _0x5230a1=Math[_0x16ec5b(0x22a)](..._0x1b5ac2[_0x16ec5b(0x194)])+0x1;_0x1b5ac2[_0x16ec5b(0x1c3)]=_0xb3f595?Charactermancer_Class_ProficiencyImportModeSelect[_0x16ec5b(0x23f)]:Charactermancer_Class_ProficiencyImportModeSelect[_0x16ec5b(0x17f)];if(this[_0x16ec5b(0x16f)][_0x16ec5b(0x289)][_0x6f4414])_0x1b5ac2['_foundryHpIncreaseMode']=await this['_compClass'][_0x16ec5b(0x289)][_0x6f4414][_0x16ec5b(0x212)]()[_0x16ec5b(0x245)];_0x1b5ac2[_0x16ec5b(0x200)]=[];for(const _0x1008a0 of this['_compClass'][_0x16ec5b(0x19a)][_0x6f4414]){const _0x34354c=await _0x1008a0[_0x16ec5b(0x212)](),_0x5d4a97={'data':{}};await Charactermancer_FeatureOptionsSelect[_0x16ec5b(0x256)]({'actor':this[_0x16ec5b(0x1b9)],'formData':_0x34354c}),await Charactermancer_FeatureOptionsSelect[_0x16ec5b(0x26a)]({'actor':this['_actor'],'actorUpdate':_0x5d4a97,'formData':_0x34354c,'configGroup':_0x16ec5b(0x216)});if(_0x34354c?.[_0x16ec5b(0x245)]?.[_0x16ec5b(0x268)]?.[_0x16ec5b(0x1fa)])_0x1b5ac2[_0x16ec5b(0x200)][_0x16ec5b(0x1a9)](..._0x34354c[_0x16ec5b(0x245)][_0x16ec5b(0x268)]);await Charactermancer_FeatureOptionsSelect[_0x16ec5b(0x1e5)](this[_0x16ec5b(0x1b9)],_0x5d4a97,_0x34354c);if(Object[_0x16ec5b(0x1ac)](_0x5d4a97[_0x16ec5b(0x245)])[_0x16ec5b(0x1fa)]||Object[_0x16ec5b(0x1ac)](_0x5d4a97[_0x16ec5b(0x218)]||{})['length'])await UtilDocuments[_0x16ec5b(0x1ce)](this[_0x16ec5b(0x1b9)],_0x5d4a97);}_0x1b5ac2[_0x16ec5b(0x200)]['forEach'](_0x184337=>delete _0x184337?.[_0x16ec5b(0x202)]?.['additionalSpells']);this[_0x16ec5b(0x1b5)]&&(_0x1b5ac2[_0x16ec5b(0x264)]=this[_0x16ec5b(0x20f)],_0x1b5ac2['_foundryConFinal']=this[_0x16ec5b(0x1d6)]);_0x1b5ac2[_0x16ec5b(0x263)]=!![],_0x1b5ac2[_0x16ec5b(0x275)]=!![];const _0x4aef1=_0xb3f595?[_0x16ec5b(0x1f5),_0x16ec5b(0x1c0)]:[_0x16ec5b(0x246),'proficienciesGained','skills'];await this[_0x16ec5b(0x1a5)]([this[_0x16ec5b(0x16f)][_0x16ec5b(0x1c5)][_0x6f4414]],_0x1b5ac2,..._0x4aef1),delete _0x1b5ac2[_0x16ec5b(0x294)],await _0x2f233b[_0x16ec5b(0x239)](_0x1b5ac2,{'filterValues':_0x204a45,'isCharactermancer':!![]});for(const _0x2750c8 of this[_0x16ec5b(0x16f)]['compsClassFeatureOptionsSelect'][_0x6f4414]){const _0x5acf8b=await _0x2750c8[_0x16ec5b(0x212)]();await Charactermancer_FeatureOptionsSelect['pDoApplyAdditionalSpellsFormDataToActor']({'actor':this[_0x16ec5b(0x1b9)],'formData':_0x5acf8b,'abilityAbv':_0x2905a2?.[_0x16ec5b(0x270)]||_0x56b770[_0x16ec5b(0x270)]});}}}_0x207f76[_0x16ec5b(0x1e4)]({'message':_0x16ec5b(0x29f),'count':_0xdc375['_']});if(_0x207f76[_0x16ec5b(0x296)])return _0x207f76[_0x16ec5b(0x1e4)]({'message':'Build\x20cancelled.','count':_0xdc375['_']});}async[_0x48d901(0x170)](_0x5789fa){const _0x34b79d=_0x48d901,{progressWidget:_0x2a5b31,ptrTaskProgress:_0x21c336}=_0x5789fa;_0x2a5b31[_0x34b79d(0x1e4)]({'message':_0x34b79d(0x16b),'count':++_0x21c336['_']});const _0x290699=this[_0x34b79d(0x28e)][_0x34b79d(0x1df)]({'isAllowStub':![]});if(_0x290699){const _0x582158=await this[_0x34b79d(0x28e)]['compBackgroundFeatures'][_0x34b79d(0x212)](),_0x16fc5b=_0x582158?.['data']?.[_0x34b79d(0x20a)]??MiscUtil[_0x34b79d(0x238)](_0x290699),_0x39f945=new ImportListBackground({'actor':this[_0x34b79d(0x1b9)]});await _0x39f945[_0x34b79d(0x1ec)]();if(this[_0x34b79d(0x28e)][_0x34b79d(0x1a7)])_0x16fc5b[_0x34b79d(0x280)]=_0x582158;else _0x16fc5b[_0x34b79d(0x280)]={'isFormComplete':!![]};_0x16fc5b['_foundryIsSkipCustomizeSkills']=!![],_0x16fc5b[_0x34b79d(0x184)]=!![],await this[_0x34b79d(0x1a5)]([this[_0x34b79d(0x28e)][_0x34b79d(0x237)]],_0x16fc5b,_0x34b79d(0x1af)),await this[_0x34b79d(0x258)]({'comps':[this['_compBackground'][_0x34b79d(0x22f)]?this[_0x34b79d(0x28e)][_0x34b79d(0x1b0)]:this[_0x34b79d(0x28e)]['compBackgroundLanguageProficiencies']],'toObj':_0x16fc5b,'path':[_0x34b79d(0x26e)]}),await this[_0x34b79d(0x258)]({'comps':[this[_0x34b79d(0x28e)][_0x34b79d(0x22f)]?this[_0x34b79d(0x28e)]['compBackgroundLanguageToolProficiencies']:this[_0x34b79d(0x28e)][_0x34b79d(0x29b)]],'toObj':_0x16fc5b,'path':[_0x34b79d(0x1de)]}),await this[_0x34b79d(0x258)]({'comps':[this[_0x34b79d(0x28e)][_0x34b79d(0x17a)]],'toObj':_0x16fc5b,'path':['expertise']}),await this[_0x34b79d(0x258)]({'comps':[this[_0x34b79d(0x28e)]['compBackgroundArmorProficiencies']],'toObj':_0x16fc5b,'path':[_0x34b79d(0x204)]}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comps':[this['_compBackground'][_0x34b79d(0x28a)]],'toObj':_0x16fc5b,'path':[_0x34b79d(0x1cb)]}),await this[_0x34b79d(0x258)]({'comps':[this[_0x34b79d(0x28e)][_0x34b79d(0x23c)]],'toObj':_0x16fc5b,'path':['immune'],'isLegacy':!![]}),await this[_0x34b79d(0x258)]({'comps':[this['_compBackground'][_0x34b79d(0x248)]],'toObj':_0x16fc5b,'path':[_0x34b79d(0x174)],'isLegacy':!![]}),await this[_0x34b79d(0x258)]({'comps':[this[_0x34b79d(0x28e)][_0x34b79d(0x1e9)]],'toObj':_0x16fc5b,'path':[_0x34b79d(0x17d)],'isLegacy':!![]}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comps':[this[_0x34b79d(0x28e)][_0x34b79d(0x1e8)]],'toObj':_0x16fc5b,'path':['conditionImmune'],'isLegacy':!![]}),this['_compBackground']['compBackgroundCharacteristics']?_0x16fc5b['_foundryFormDataCharacteristics']=await this[_0x34b79d(0x28e)]['compBackgroundCharacteristics'][_0x34b79d(0x212)]():_0x16fc5b[_0x34b79d(0x29d)]=!![],delete _0x16fc5b[_0x34b79d(0x294)],delete _0x16fc5b[_0x34b79d(0x193)],delete _0x16fc5b[_0x34b79d(0x209)],await _0x39f945[_0x34b79d(0x24c)](_0x16fc5b,{'isCharactermancer':!![]});}_0x2a5b31[_0x34b79d(0x1e4)]({'message':_0x34b79d(0x234),'count':_0x21c336['_']});if(_0x2a5b31['isCancelled'])return _0x2a5b31['setProgress']({'message':_0x34b79d(0x23a),'count':_0x21c336['_']});}async[_0x48d901(0x1e1)](_0x2a1a78){const _0x2da68c=_0x48d901,{progressWidget:_0x5e8506,ptrTaskProgress:_0x4d8472}=_0x2a1a78;_0x5e8506[_0x2da68c(0x1e4)]({'message':_0x2da68c(0x1c4),'count':++_0x4d8472['_']});const _0x3c5f5d=await this[_0x2da68c(0x19d)][_0x2da68c(0x1bc)]();if(_0x3c5f5d?.['isAnyData']){const _0x43747f=this['_compAbility'][_0x2da68c(0x262)][_0x2da68c(0x1a1)](),_0x28282d=new ImportListFeat({'actor':this[_0x2da68c(0x1b9)]});await _0x28282d['pInit']();for(const _0x3490ef of[_0x2da68c(0x207),_0x2da68c(0x1ba),_0x2da68c(0x20a),_0x2da68c(0x249)]){if(!_0x3c5f5d?.[_0x3490ef])continue;for(const {feat:_0x5f6b85,formDatasFeatureOptionsSelect:_0x434aae,ix:_0x1410d3}of _0x3c5f5d[_0x3490ef][_0x2da68c(0x245)]){if(!_0x5f6b85)continue;if(_0x43747f[_0x2da68c(0x209)][_0x3490ef]?.[_0x1410d3]){const _0x24ceb0=_0x43747f[_0x2da68c(0x209)][_0x3490ef]?.[_0x1410d3];_0x5f6b85['ability']=[_0x24ceb0['abilityChosen']][_0x2da68c(0x241)](Boolean),_0x5f6b85[_0x2da68c(0x213)]=_0x5f6b85[_0x2da68c(0x207)][0x0]||{},delete _0x5f6b85[_0x2da68c(0x217)],Renderer[_0x2da68c(0x197)][_0x2da68c(0x20c)](_0x5f6b85);}for(const _0x3aa635 of _0x434aae){const _0x174cbc={'data':{}};await Charactermancer_FeatureOptionsSelect['pDoApplyResourcesFormDataToActor']({'actor':this['_actor'],'formData':_0x3aa635}),await Charactermancer_FeatureOptionsSelect[_0x2da68c(0x26a)]({'actor':this[_0x2da68c(0x1b9)],'actorUpdate':_0x174cbc,'formData':_0x3aa635,'configGroup':_0x2da68c(0x1f0)}),await Charactermancer_FeatureOptionsSelect['pDoApplyProficiencyFormDataToActorUpdate'](this[_0x2da68c(0x1b9)],_0x174cbc,_0x3aa635);if(Object['keys'](_0x174cbc[_0x2da68c(0x245)])[_0x2da68c(0x1fa)])await this[_0x2da68c(0x1b9)]['update'](_0x174cbc);let _0x133caa=null;if(_0x43747f[_0x2da68c(0x209)][_0x3490ef]?.[_0x1410d3]){const _0x1bf9fb=_0x43747f[_0x2da68c(0x209)][_0x3490ef]?.[_0x1410d3];_0x133caa=Object[_0x2da68c(0x1ac)](_0x1bf9fb['abilityChosen']||{})[0x0];}await Charactermancer_FeatureOptionsSelect['pDoApplyAdditionalSpellsFormDataToActor']({'actor':this[_0x2da68c(0x1b9)],'formData':_0x3aa635,'parentAbilityAbv':_0x133caa});if(_0x3aa635?.[_0x2da68c(0x245)]?.[_0x2da68c(0x268)]?.[_0x2da68c(0x1fa)])for(let _0x4f088d=0x0;_0x4f088d<_0x3aa635['data'][_0x2da68c(0x268)][_0x2da68c(0x1fa)];++_0x4f088d){const _0x10159c=_0x3aa635[_0x2da68c(0x245)][_0x2da68c(0x268)][_0x4f088d],_0x4a9047=_0x10159c[_0x2da68c(0x251)]==='feat'&&_0x4f088d===0x0?MiscUtil[_0x2da68c(0x238)](_0x5f6b85):MiscUtil[_0x2da68c(0x238)](_0x10159c[_0x2da68c(0x202)]);delete _0x4a9047[_0x2da68c(0x207)],delete _0x4a9047[_0x2da68c(0x1af)],delete _0x4a9047[_0x2da68c(0x26e)],delete _0x4a9047[_0x2da68c(0x1de)],delete _0x4a9047[_0x2da68c(0x1cb)],delete _0x4a9047[_0x2da68c(0x204)],delete _0x4a9047[_0x2da68c(0x201)],delete _0x4a9047[_0x2da68c(0x244)],delete _0x4a9047['damageResistances'],delete _0x4a9047[_0x2da68c(0x293)],delete _0x4a9047[_0x2da68c(0x1ab)],delete _0x4a9047[_0x2da68c(0x27d)],delete _0x4a9047[_0x2da68c(0x1f7)],delete _0x4a9047[_0x2da68c(0x250)],delete _0x4a9047[_0x2da68c(0x193)],await _0x28282d[_0x2da68c(0x24c)](_0x4a9047,{'isCharactermancer':!![],'isLeaf':!![]});}}}}}_0x5e8506['setProgress']({'message':_0x2da68c(0x23d),'count':_0x4d8472['_']});if(_0x5e8506[_0x2da68c(0x296)])return _0x5e8506[_0x2da68c(0x1e4)]({'message':_0x2da68c(0x23a),'count':_0x4d8472['_']});}async[_0x48d901(0x253)](_0x2a5396){const _0x507045=_0x48d901,{progressWidget:_0x50c7eb,ptrTaskProgress:_0x54750e}=_0x2a5396;_0x50c7eb[_0x507045(0x1e4)]({'message':_0x507045(0x242),'count':++_0x54750e['_']});const _0x1a7ab3=this[_0x507045(0x1d9)][_0x507045(0x22e)]||this[_0x507045(0x1d9)][_0x507045(0x16c)][_0x507045(0x205)]();for(let _0x1e6ff1=0x0;_0x1e6ff1<this[_0x507045(0x16f)][_0x507045(0x2a6)][_0x507045(0x233)]+0x1;++_0x1e6ff1){const {propIxClass:_0x3224a4,propIxSubclass:_0x47bd0f}=ActorCharactermancerBaseComponent[_0x507045(0x274)](_0x1e6ff1),_0x5a8af6=this[_0x507045(0x16f)][_0x507045(0x229)]({'propIxClass':_0x3224a4});if(!_0x5a8af6)continue;const _0x2019bf=this[_0x507045(0x16f)][_0x507045(0x25a)]({'cls':_0x5a8af6,'propIxSubclass':_0x47bd0f});if(this['_compSpell'][_0x507045(0x297)][_0x1e6ff1]){const _0x53b836=await this[_0x507045(0x1d9)][_0x507045(0x297)][_0x1e6ff1][_0x507045(0x212)](_0x1a7ab3);await Charactermancer_Spell['pApplyFormDataToActor'](this['_actor'],_0x53b836,{'cls':_0x5a8af6,'sc':_0x2019bf});}if(this[_0x507045(0x1d9)][_0x507045(0x17b)][_0x1e6ff1]){const _0x2b4dee=await this['_compSpell'][_0x507045(0x17b)][_0x1e6ff1][_0x507045(0x212)]();await this[_0x507045(0x17e)]({'formData':_0x2b4dee,'abilityAbv':_0x5a8af6[_0x507045(0x270)]});}if(!_0x2019bf)continue;if(this['_compSpell'][_0x507045(0x16a)][_0x1e6ff1]){const _0xaef827=await this[_0x507045(0x1d9)][_0x507045(0x16a)][_0x1e6ff1]['pGetFormData']();await this['_pHandleSaveClick_pDoImportAdditionalSpells']({'formData':_0xaef827,'abilityAbv':_0x2019bf?.[_0x507045(0x270)]||_0x5a8af6[_0x507045(0x270)]});}}const _0x4e09f8=[this[_0x507045(0x1d9)][_0x507045(0x22d)],this['_compSpell'][_0x507045(0x27b)]];for(const _0x51d4da of _0x4e09f8){if(!_0x51d4da)continue;const _0x19d040=await _0x51d4da[_0x507045(0x212)]();await this[_0x507045(0x17e)]({'formData':_0x19d040});}_0x50c7eb[_0x507045(0x1e4)]({'message':_0x507045(0x173),'count':_0x54750e['_']});if(_0x50c7eb[_0x507045(0x296)])return _0x50c7eb[_0x507045(0x1e4)]({'message':'Build\x20cancelled.','count':_0x54750e['_']});}async['_pHandleSaveClick_equipment'](_0x3f1fea){const _0x31f922=_0x48d901,{progressWidget:_0x17d68f,ptrTaskProgress:_0x4f55fd}=_0x3f1fea;_0x17d68f['setProgress']({'message':'Importing\x20equipment...','count':++_0x4f55fd['_']});const _0x4d30f7=await this[_0x31f922(0x228)][_0x31f922(0x27e)][_0x31f922(0x212)](),_0x1f1c72=await this['_compEquipment'][_0x31f922(0x1cd)]['pGetFormData'](),_0x5da252=await this[_0x31f922(0x228)][_0x31f922(0x171)][_0x31f922(0x212)]();if(_0x4d30f7?.[_0x31f922(0x245)]?.[_0x31f922(0x179)])await Charactermancer_StartingEquipment['pUpdateActorCurrency'](this[_0x31f922(0x1b9)],_0x4d30f7);if(_0x1f1c72?.[_0x31f922(0x245)]?.['equipmentItemEntries'])await Charactermancer_StartingEquipment[_0x31f922(0x1e6)](this[_0x31f922(0x1b9)],_0x1f1c72);if(_0x5da252?.['data']?.[_0x31f922(0x21f)])await Charactermancer_StartingEquipment['pImportEquipmentItemEntries'](this[_0x31f922(0x1b9)],_0x5da252);_0x17d68f[_0x31f922(0x1e4)]({'message':'Imported\x20equipment.','count':_0x4f55fd['_']});if(_0x17d68f[_0x31f922(0x296)])return _0x17d68f[_0x31f922(0x1e4)]({'message':_0x31f922(0x23a),'count':_0x4f55fd['_']});}async[_0x48d901(0x1a5)](_0x65007,_0x161ee6,..._0x330cfd){const _0x57e8b3=_0x48d901;MiscUtil[_0x57e8b3(0x178)](_0x161ee6,..._0x330cfd),_0x65007=(_0x65007||[])['filter'](Boolean);if(!_0x65007[_0x57e8b3(0x1fa)])return;const _0x2e815f={};for(const _0x5d5507 of _0x65007){const _0x168223=await _0x5d5507[_0x57e8b3(0x212)]();Object['keys'](Parser[_0x57e8b3(0x266)])[_0x57e8b3(0x241)](_0x4cbe54=>_0x168223[_0x57e8b3(0x245)]?.[_0x57e8b3(0x1af)]?.[_0x4cbe54])[_0x57e8b3(0x16e)](_0x3953bf=>_0x2e815f[_0x3953bf]=!![]);}Object[_0x57e8b3(0x1ac)](_0x2e815f)['length']&&MiscUtil['set'](_0x161ee6,..._0x330cfd,[_0x2e815f]);}async[_0x48d901(0x258)]({comps:_0x8a3a9,toObj:_0x4b17af,path:_0x375d96,isLegacy:isLegacy=![]}){const _0x47eef2=_0x48d901,_0x7ecdc=_0x375d96[_0x47eef2(0x1bf)]();MiscUtil[_0x47eef2(0x178)](_0x4b17af,..._0x375d96),_0x8a3a9=_0x8a3a9[_0x47eef2(0x241)](Boolean);if(!_0x8a3a9[_0x47eef2(0x1fa)])return;const _0x119631=(await _0x8a3a9[_0x47eef2(0x292)](_0x14a648=>_0x14a648[_0x47eef2(0x212)]()))['map'](_0x32cc76=>_0x32cc76?.['data']?.[_0x7ecdc])[_0x47eef2(0x241)](Boolean);if(isLegacy){const _0x4da8b4=_0x119631[_0x47eef2(0x282)](_0x32c869=>Object['keys'](_0x32c869));if(_0x4da8b4[_0x47eef2(0x1fa)])MiscUtil[_0x47eef2(0x295)](_0x4b17af,..._0x375d96,_0x4da8b4);}else{const _0x4b61a2=_0x119631[_0x47eef2(0x29a)](_0x390713=>_0x390713);if(Object[_0x47eef2(0x1ac)](_0x4b61a2)[_0x47eef2(0x1fa)])MiscUtil[_0x47eef2(0x295)](_0x4b17af,..._0x375d96,[_0x4b61a2]);}}async[_0x48d901(0x17e)]({formData:_0x2a3558,abilityAbv:_0x1aea81,parentAbilityAbv:_0x10bb19}){const _0x15a1bb=_0x48d901;await Charactermancer_AdditionalSpellsSelect[_0x15a1bb(0x19f)](this[_0x15a1bb(0x1b9)],_0x2a3558,{'abilityAbv':_0x1aea81,'parentAbilityAbv':_0x10bb19});}async['_pHandleSaveClick_postSave'](_0x4a3abc){const _0x4a295d=_0x48d901,{progressWidget:_0x15f135,ptrTaskProgress:_0x3047c5}=_0x4a3abc;_0x15f135[_0x4a295d(0x1e4)]({'message':_0x4a295d(0x26d),'count':++_0x3047c5['_']});if(this[_0x4a295d(0x272)])this[_0x4a295d(0x272)]();}},ActorCharactermancer[_0x48d901(0x29e)][_0x48d901(0x283)]=class{constructor({progressWidget:_0x46f6c4,ptrTaskProgress:_0x3dd72b}){const _0x4d87b6=_0x48d901;this[_0x4d87b6(0x1b6)]=_0x46f6c4,this[_0x4d87b6(0x210)]=_0x3dd72b;}};export{ActorCharactermancerSourceSelector,ActorCharactermancerBaseComponent};