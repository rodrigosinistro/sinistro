const _0x5863bb=_0x3b24;(function(_0x29faca,_0x5da62b){const _0x42fc05=_0x3b24,_0x3171f8=_0x29faca();while(!![]){try{const _0xf57b81=parseInt(_0x42fc05(0x1ca))/0x1*(-parseInt(_0x42fc05(0x1fd))/0x2)+parseInt(_0x42fc05(0x1f7))/0x3+-parseInt(_0x42fc05(0x1ce))/0x4*(parseInt(_0x42fc05(0x1e2))/0x5)+-parseInt(_0x42fc05(0x1dc))/0x6+-parseInt(_0x42fc05(0x222))/0x7*(parseInt(_0x42fc05(0x1f3))/0x8)+parseInt(_0x42fc05(0x197))/0x9*(parseInt(_0x42fc05(0x209))/0xa)+-parseInt(_0x42fc05(0x1aa))/0xb*(-parseInt(_0x42fc05(0x1e4))/0xc);if(_0xf57b81===_0x5da62b)break;else _0x3171f8['push'](_0x3171f8['shift']());}catch(_0x5b747d){_0x3171f8['push'](_0x3171f8['shift']());}}}(_0x320d,0xb2005));import{SharedConsts}from'../shared/SharedConsts.js';import{LGT,Util}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{UtilEvents}from'./UtilEvents.js';import{UtilCanvas}from'./UtilCanvas.js';import{FolderPathBuilder}from'./FolderPathBuilder.js';import{ChooseImporter}from'./ChooseImporter.js';import{UtilFolders}from'./UtilFolders.js';import{UtilCompendium}from'./UtilCompendium.js';import{Vetools}from'./Vetools.js';import{UtilGameSettings}from'./UtilGameSettings.js';function _0x3b24(_0x393572,_0x307bdf){const _0x320dc6=_0x320d();return _0x3b24=function(_0x3b2436,_0x234036){_0x3b2436=_0x3b2436-0x197;let _0x29297b=_0x320dc6[_0x3b2436];return _0x29297b;},_0x3b24(_0x393572,_0x307bdf);}import{UtilCompat}from'./UtilCompat.js';import{UtilApplications}from'./UtilApplications.js';const _IMG=_0x5863bb(0x1d1);function _0x320d(){const _0x3441b=['</li>','grid','size','_pGetFoundryForm','join','_preInit_registerKeybinds','Imported\x20loot\x20to\x20items\x20directory.','quantity','error','1690YJqBkI','Error\x20occurred\x20during\x20item\x20linking!\x20','notifications','_pHandleBoardDrop','_pImportToCompendium','flat','<button\x20title=\x22Import\x20to\x20Compendium\x22\x20class=\x22btn\x20btn-xs\x20btn-default\x22><i\x20class=\x22fas\x20fa-fw\x20fa-atlas\x22></i></button>','getImporter','items','MODULE_NAME_FAKE','pGetItemsFromHomebrew','Yes','constructor','click','embeddedDocument','LootGeneratorApp__open','Imported\x20loot','all','metadata','_pDoLogToChat','<button\x20class=\x22btn\x20btn-primary\x20mr-2\x22>OK</button>','[data-name=\x22wrp-lhs\x22]','getMaxWindowHeight','concat','pImportToJournal','7jzmhyU','find','data','createEmbeddedDocuments','NotesLayer','PG_ITEMS','name','key','withUnpatchedDiceRendering','render','pAddCurrencyToActor','filter','create','loot','75177yDfoGu','<li\x20class=\x22py-1\x22>','Create\x20Compendium','(Unnamed\x20','JournalEntry','/template/LootGeneratorApp.hbs','info','@Item[','users','Item','drop','map','get','imported','activateTab','flags','val','_pImportToFolder','isTemp','33Dffxxs','Loot\x20Generator','<button\x20title=\x22Import\x20to\x20Journal\x22\x20class=\x22btn\x20btn-xs\x20btn-default\x22><i\x20class=\x22fas\x20fa-fw\x20fa-book-open\x22></i></button>','isItemPilesActive','pGetShowApplicationModal','_pRender','register','getElementById','item','activateListeners','length','_pImportLoot_pGetCacheImporter','_er','_getSummaryHtml',']</li>','getSnappedPosition','stripTags','userId','getPackByCollection','FLAG_TYPE__LOOT','pImportLoot','entityInfos','getAvailablePacks','Imported\x20loot\x20to\x20compendium\x20\x22','Only\x20one\x20of\x20\x22pack\x22\x20or\x20\x22actor\x22\x20may\x20be\x20specified!','_lootGenUi','bind','Unhandled\x20imported\x20document\x20type--','getDatetimeStr','keybindings','pack',']</p>','24083AsuCFR','package','_pLoadSpells','type','114364mnukpP','API','pInit','icons/containers/chest/chest-worn-oak-tan.webp','actor','_pImportToJournal','currency','then','journal','sidebar','_pImportLoot','push','@ActorEmbeddedItem[','<button\x20class=\x22btn\x20btn-default\x22>Cancel</button>','7607346rELcrh','\x0a\x09\x09</ul>','\x0a\x09\x09\x09\x09</div>','entries','getDropJson','DRAG_TYPE_LOOT','20qyejZr','_pLoadItems','6669540yNNGOA','contents','pImportToItemPile','dateTimeGenerated','Enter','Note','spell','<li\x20class=\x22py-1\x22>Currency:\x20','isGM','scene','label','change','Loot\x20(','Open\x20Loot\x20Generator','\x0a\x09\x09\x09','9137608qCjHrd','pGetBrewProcessed','mergeMap','Import\x20Loot\x20to\x20Items\x20Folder','1318260twxwQx','\x20to\x20actor\x20\x22','MODULE_NAME','init','STR_SEE_CONSOLE','document','22Svghxj','getPosCanvasSpace','\x0a\x09\x09\x09\x09\x09'];_0x320d=function(){return _0x3441b;};return _0x320d();}class LootGenUiFvtt extends LootGenUi{static[_0x5863bb(0x1b6)](..._0x2ae304){const _0x1596fa=_0x5863bb;return Vetools[_0x1596fa(0x22a)](()=>Renderer[_0x1596fa(0x1a3)]()['setFirstSection'](!![])['render'](..._0x2ae304));}}class LootGeneratorApp extends Application{static['preInit'](){const _0x19647a=_0x5863bb;this[_0x19647a(0x205)]();}static[_0x5863bb(0x205)](){const _0x6a108c=_0x5863bb;game[_0x6a108c(0x1c7)][_0x6a108c(0x1b0)](SharedConsts[_0x6a108c(0x1f9)],_0x6a108c(0x218),{'name':_0x6a108c(0x1f1),'editable':[],'onDown':()=>{const _0x3cd690=new this();return _0x3cd690['render'](!![]),!![];},'restricted':!![]});}static[_0x5863bb(0x1fa)](){const _0x3e0bdb=_0x5863bb;!UtilGameSettings['getSafe']('core','noCanvas')&&document[_0x3e0bdb(0x1b1)]('board')['addEventListener'](_0x3e0bdb(0x1a1),this[_0x3e0bdb(0x20c)][_0x3e0bdb(0x1c4)](this));}constructor(){const _0x1db9d0=_0x5863bb;super({'title':_0x1db9d0(0x1ab),'template':SharedConsts['MODULE_LOCATION']+_0x1db9d0(0x19c),'width':0x3c0,'height':Util[_0x1db9d0(0x21f)](),'resizable':!![]}),this[_0x1db9d0(0x1c3)]=null;}['activateListeners'](_0x42989c){const _0x55f3d2=_0x5863bb;super[_0x55f3d2(0x1b3)](_0x42989c),this['_pRender'](_0x42989c)['then'](null);}async[_0x5863bb(0x1af)](_0x385f80){const _0x203833=_0x5863bb;this[_0x203833(0x1c3)]=new LootGenUiFvtt({'spells':await this['_pLoadSpells'](),'items':await this[_0x203833(0x1e3)](),'ClsLootGenOutput':LootGenOutputFvtt});const _0x1abd4b=_0x385f80[_0x203833(0x223)](_0x203833(0x21e)),_0x5179b8=_0x385f80[_0x203833(0x223)]('[data-name=\x22wrp-rhs\x22]');await this['_lootGenUi']['pInit'](),this[_0x203833(0x1c3)][_0x203833(0x22b)]({'$stgLhs':_0x1abd4b,'$stgRhs':_0x5179b8});}async[_0x5863bb(0x1cc)](){const _0x1b2843=_0x5863bb,[_0x221133,_0x151611]=await Promise[_0x1b2843(0x21a)]([DataUtil[_0x1b2843(0x1ea)]['pLoadAll'](),BrewUtil2[_0x1b2843(0x1f4)]()]);return _0x221133['concat'](_0x151611?.[_0x1b2843(0x1ea)]||[]);}async[_0x5863bb(0x1e3)](){const _0x2593d7=_0x5863bb,_0x8d7cca=await Renderer[_0x2593d7(0x1b2)]['pBuildList'](),_0x3748c0=await BrewUtil2[_0x2593d7(0x1f4)](),_0x2e6d98=await Renderer[_0x2593d7(0x1b2)][_0x2593d7(0x213)](_0x3748c0);return _0x8d7cca[_0x2593d7(0x220)](_0x2e6d98);}static async['pImportLoot']({loot:_0x282d4b,actor:actor=null,isLogToChat:isLogToChat=![],isNotify:isNotify=![],folderId:_0x3db6f9,pack:_0x2e9f9f,isSkipCurrencies:isSkipCurrencies=![]}){const _0x51a0a8=_0x5863bb;if(_0x2e9f9f&&actor)throw new Error(_0x51a0a8(0x1c2));try{const _0x445e1b=await this[_0x51a0a8(0x1d8)]({'loot':_0x282d4b,'actor':actor,'isLogToChat':isLogToChat,'folderId':_0x3db6f9,'pack':_0x2e9f9f,'isSkipCurrencies':isSkipCurrencies});if(isNotify)ui[_0x51a0a8(0x20b)][_0x51a0a8(0x19d)](_0x51a0a8(0x219)+(actor?_0x51a0a8(0x1f8)+actor[_0x51a0a8(0x228)]+'\x22':'')+'!');return _0x445e1b;}catch(_0x2f8932){ui[_0x51a0a8(0x20b)]['error']('Failed\x20to\x20import\x20loot'+(actor?_0x51a0a8(0x1f8)+actor['name']+'\x22':'')+'.\x20'+VeCt[_0x51a0a8(0x1fb)]),setTimeout(()=>{throw _0x2f8932;});}}static async[_0x5863bb(0x1d8)]({loot:_0x5e3dd0,actor:_0x198ab2,isLogToChat:_0x29b382,folderId:_0x43953c,pack:_0x2b3c60,isSkipCurrencies:_0x53a3fa}){const _0x4386d7=_0x5863bb,_0x55b392={},_0xe8afc={};if(_0x5e3dd0[_0x4386d7(0x1a9)])_0xe8afc['isTemp']=!![];if(_0x5e3dd0[_0x4386d7(0x1d4)]&&!_0x53a3fa){if(_0x198ab2)await UtilActors[_0x4386d7(0x22c)]({'currency':_0x5e3dd0['currency'],'actor':_0x198ab2});else{const _0x4a3098=await this[_0x4386d7(0x1b5)]({'cacheImporter':_0x55b392,'page':UrlUtil[_0x4386d7(0x227)],'actor':_0x198ab2,'pack':_0x2b3c60}),_0x212f05={..._0xe8afc,'folderId':_0x43953c};await _0x4a3098['pImportCurrency'](_0x5e3dd0['currency'],_0x212f05);}}const _0x226ee0=[];for(const {page:_0x2cc822,entity:_0x46533c,options:_0x6fde08}of _0x5e3dd0[_0x4386d7(0x1bf)]||[]){const _0x507f6c=await this['_pImportLoot_pGetCacheImporter']({'cacheImporter':_0x55b392,'page':_0x2cc822,'actor':_0x198ab2,'pack':_0x2b3c60}),_0x31d7a4={..._0xe8afc,..._0x6fde08||{},'folderId':_0x43953c},_0x272b9e=await _0x507f6c['pImportEntry'](_0x46533c,_0x31d7a4);_0x226ee0['push']({'importSummary':_0x272b9e,'count':_0x6fde08?.['quantity']});}const {errorMessage:_0x15bcf7,htmlSummary:_0x1c8552}=this[_0x4386d7(0x1b7)]({'loot':_0x5e3dd0,'importSummaries':_0x226ee0});_0x15bcf7&&(console[_0x4386d7(0x208)](...LGT,_0x15bcf7),ui[_0x4386d7(0x20b)][_0x4386d7(0x208)](_0x4386d7(0x20a)+VeCt[_0x4386d7(0x1fb)]));if(_0x29b382)await this['_pDoLogToChat']({'loot':_0x5e3dd0,'htmlSummary':_0x1c8552,'actor':_0x198ab2});return _0x226ee0;}static async['_pImportLoot_pGetCacheImporter']({cacheImporter:_0x4acb3c,page:_0x1ac863,actor:_0x359f24,pack:_0x48a2df}){const _0x10076e=_0x5863bb;if(!_0x4acb3c[_0x1ac863]){_0x4acb3c[_0x1ac863]=ChooseImporter[_0x10076e(0x210)](_0x1ac863,_0x359f24);if(_0x48a2df)_0x4acb3c[_0x1ac863][_0x10076e(0x1c8)]=_0x48a2df;await _0x4acb3c[_0x1ac863][_0x10076e(0x1d0)]();}return _0x4acb3c[_0x1ac863];}static[_0x5863bb(0x1b7)]({loot:_0x3f4be7,importSummaries:_0x26de92}){const _0x264e48=_0x5863bb;let _0x1a66fd='';const _0x28d4b0=_0x26de92[_0x264e48(0x1a2)](({importSummary:_0x160f20,count:_0x3617b2})=>{const _0x121c52=_0x264e48;return _0x3617b2=_0x3617b2??0x1,(_0x160f20[_0x121c52(0x1a4)]||[])[_0x121c52(0x1a2)](_0x2a3c9d=>{const _0x26fd83=_0x121c52,_0x1a1e92=_0x3617b2===0x1?'':_0x3617b2+'×\x20';if(_0x2a3c9d[_0x26fd83(0x217)]&&_0x2a3c9d['actor'])return _0x26fd83(0x198)+_0x1a1e92+_0x26fd83(0x1da)+_0x2a3c9d[_0x26fd83(0x1d2)]['id']+']['+_0x2a3c9d[_0x26fd83(0x217)]['id']+_0x26fd83(0x1b8);if(_0x2a3c9d[_0x26fd83(0x1fc)]){if(_0x2a3c9d[_0x26fd83(0x1c8)])return _0x26fd83(0x198)+_0x1a1e92+'@Compendium['+_0x2a3c9d['pack']['metadata'][_0x26fd83(0x1cb)]+'.'+_0x2a3c9d[_0x26fd83(0x1c8)][_0x26fd83(0x21b)][_0x26fd83(0x228)]+'.'+_0x2a3c9d[_0x26fd83(0x1fc)]['id']+']</li>';return _0x26fd83(0x198)+_0x1a1e92+_0x26fd83(0x19e)+_0x2a3c9d[_0x26fd83(0x1fc)]['id']+_0x26fd83(0x1b8);}_0x1a66fd=_0x26fd83(0x1c5)+Object[_0x26fd83(0x1df)](_0x2a3c9d)[_0x26fd83(0x1a2)](([_0x1438e,_0x154ff8])=>_0x1438e+'='+!!_0x154ff8)[_0x26fd83(0x204)](',\x20');});})[_0x264e48(0x20e)](),_0xa2032a='<ul>\x0a\x09\x09\x09'+(_0x3f4be7[_0x264e48(0x1d4)]?_0x264e48(0x1eb)+Parser['getDisplayCurrency'](_0x3f4be7[_0x264e48(0x1d4)])+_0x264e48(0x200):'')+'\x0a\x09\x09\x09'+_0x28d4b0[_0x264e48(0x204)]('')+_0x264e48(0x1dd);return{'errorMessage':_0x1a66fd,'htmlSummary':_0xa2032a};}static async[_0x5863bb(0x21c)]({loot:_0xc0c07b,htmlSummary:_0x36f793,actor:_0x4d066a}){const _0x12641b=_0x5863bb;await ChatMessage['create']({'content':'<div>\x0a\x09\x09\x09\x09\x09'+(_0x4d066a?'<p><i>Added\x20to\x20the\x20inventory\x20of:</i>\x20@Actor['+_0x4d066a['id']+_0x12641b(0x1c9):'')+_0x12641b(0x1ff)+_0x36f793+_0x12641b(0x1de),'user':game[_0x12641b(0x1bb)],'type':0x4,'speaker':{'alias':'Loot\x20Generator'},'whisper':game[_0x12641b(0x19f)][_0x12641b(0x1e5)][_0x12641b(0x22d)](_0x12fdde=>_0x12fdde[_0x12641b(0x1ec)]||_0x12fdde===game['user'])[_0x12641b(0x1a2)](_0x3cb2f9=>_0x3cb2f9['id'])});}static async['patcher_pHandleActorDrop'](..._0x439a42){const _0x1c47e6=_0x5863bb,_0x6a7b93=_0x439a42[0x0],_0x32ce2b=UtilEvents['getDropJson'](_0x6a7b93);if(_0x32ce2b?.['type']===VeCt[_0x1c47e6(0x1e1)])return await LootGeneratorApp[_0x1c47e6(0x1be)]({'loot':_0x32ce2b['data'],'actor':this['actor']}),!![];if(_0x32ce2b?.[_0x1c47e6(0x1cd)]===_0x1c47e6(0x19b)){const _0x169b33=game[_0x1c47e6(0x1d6)][_0x1c47e6(0x1a3)](_0x32ce2b['id']);if(_0x169b33?.[_0x1c47e6(0x224)]?.[_0x1c47e6(0x1a6)]?.[SharedConsts[_0x1c47e6(0x212)]]?.[_0x1c47e6(0x1cd)]===LootGenOutputFvtt[_0x1c47e6(0x1bd)])return await LootGeneratorApp[_0x1c47e6(0x1be)]({'loot':_0x169b33[_0x1c47e6(0x224)][_0x1c47e6(0x1a6)][SharedConsts[_0x1c47e6(0x212)]][_0x1c47e6(0x22f)],'actor':this[_0x1c47e6(0x1d2)]}),!![];}}static[_0x5863bb(0x20c)](_0x31f8ef){const _0x5c5621=_0x5863bb,_0x1a16ab=UtilEvents[_0x5c5621(0x1e0)](_0x31f8ef);if(_0x1a16ab?.[_0x5c5621(0x1cd)]!==VeCt[_0x5c5621(0x1e1)])return;if(UtilCompat[_0x5c5621(0x1ad)]())return LootGenOutputFvtt[_0x5c5621(0x1e6)]({'loot':_0x1a16ab[_0x5c5621(0x224)],'evt':_0x31f8ef})['then'](null),![];const _0x3cfda5=UtilCanvas[_0x5c5621(0x1fe)](_0x31f8ef,_0x5c5621(0x226)),_0x4e920f=canvas['grid'][_0x5c5621(0x1b9)](_0x3cfda5['x'],_0x3cfda5['y']);return LootGenOutputFvtt[_0x5c5621(0x221)]({'loot':_0x1a16ab[_0x5c5621(0x224)]})[_0x5c5621(0x1d5)](async _0x2a7b8f=>{const _0x2ecd43=_0x5c5621;await canvas[_0x2ecd43(0x1ed)][_0x2ecd43(0x225)](_0x2ecd43(0x1e9),[{'entryId':_0x2a7b8f['id'],'icon':_IMG,'iconSize':canvas['grid'][_0x2ecd43(0x202)],'text':'','x':_0x4e920f['x']-canvas[_0x2ecd43(0x201)][_0x2ecd43(0x202)]/0x2,'y':_0x4e920f['y']-canvas[_0x2ecd43(0x201)][_0x2ecd43(0x202)]/0x2}]);}),![];}}class LootGenOutputFvtt extends LootGenOutput{['_$getEleTitleSplit'](){const _0x58b817=_0x5863bb,_0x229c90=$(_0x58b817(0x1ac))[_0x58b817(0x216)](()=>this[_0x58b817(0x1d3)]()),_0x15617d=$('<button\x20title=\x22Import\x20to\x20Items\x20Folder\x22\x20class=\x22btn\x20btn-xs\x20btn-default\x22><i\x20class=\x22fas\x20fa-fw\x20fa-folder\x22></i></button>')['click'](async()=>this[_0x58b817(0x215)][_0x58b817(0x1a8)]({'loot':await this['_pGetFoundryForm']()})),_0x71c510=$(_0x58b817(0x20f))['click'](()=>this[_0x58b817(0x20d)]());return $$`<div class="ve-flex-v-center btn-group">
			${_0x15617d}
			${_0x229c90}
			${_0x71c510}
		</div>`;}static async['pImportToJournal']({loot:_0x2c2152}){const _0x5cee26=_0x5863bb,_0x2647bc=[];for(const {page:_0x45bb54,entity:_0x5efd47,options:_0x575d83}of _0x2c2152[_0x5cee26(0x1bf)]||[]){const _0x50f081=_0x45bb54===UrlUtil[_0x5cee26(0x227)]?_0x5cee26(0x1b2):_0x5cee26(0x1ea),_0x5f3056=_0x575d83?.[_0x5cee26(0x207)]??0x1,_0x43bfc8=_0x5f3056===0x1?'':_0x5f3056+'×\x20';_0x2647bc[_0x5cee26(0x1d9)]('<li\x20class=\x22py-1\x22>'+_0x43bfc8+'@'+_0x50f081+'['+_0x5efd47['name']+'|'+_0x5efd47['source']+']{'+_0x5efd47['name']+'}</li>');}const _0x526f74='<ul>\x0a\x09\x09\x09'+(_0x2c2152['currency']?'<li\x20class=\x22py-1\x22>Currency:\x20'+Parser['getDisplayCurrency'](_0x2c2152[_0x5cee26(0x1d4)])+_0x5cee26(0x200):'')+_0x5cee26(0x1f2)+_0x2647bc[_0x5cee26(0x204)]('')+'\x0a\x09\x09</ul>',_0x4def87={'name':_0x5cee26(0x1f0)+Renderer[_0x5cee26(0x1ba)](_0x2c2152[_0x5cee26(0x228)])+')','permission':{'default':0x0},'entryTime':Date['now'](),'content':_0x526f74,'img':_IMG,'flags':{[SharedConsts[_0x5cee26(0x212)]]:{'type':LootGenOutputFvtt[_0x5cee26(0x1bd)],'loot':_0x2c2152}}};ui[_0x5cee26(0x1d7)][_0x5cee26(0x1a5)]('journal');const _0x1d579c=await CONFIG[_0x5cee26(0x19b)]['documentClass'][_0x5cee26(0x22e)](_0x4def87,{'renderSheet':![],'temporary':![]});ui[_0x5cee26(0x20b)][_0x5cee26(0x19d)]('Imported\x20loot\x20to\x20journal\x20entry\x20\x22'+_0x1d579c[_0x5cee26(0x228)]+'\x22');}async['_pImportToJournal'](){const _0xb2c30e=_0x5863bb,_0x47b47d=await this[_0xb2c30e(0x203)]();await this[_0xb2c30e(0x215)][_0xb2c30e(0x221)]({'loot':_0x47b47d});}static async[_0x5863bb(0x1a8)]({loot:_0x30106a,isSkipCurrencies:isSkipCurrencies=![]}){const _0x1761f7=_0x5863bb,{$modalInner:_0x636f45,doClose:_0x81a7a2,pGetResolved:_0x3a8437,doAutoResize:_0x2e6ac0}=await UtilApplications[_0x1761f7(0x1ae)]({'title':_0x1761f7(0x1f6)}),_0x28a435=$$`<div class="w-100 ve-flex-col"></div>`,_0x3ca421=new FolderPathBuilder({'defaultFolderPathSpec':['Loot',_0x30106a['type'],_0x1761f7(0x19a)+DatetimeUtil[_0x1761f7(0x1c6)]({'date':new Date(_0x30106a[_0x1761f7(0x1e7)]),'isPlainText':!![]})+')'],'fnOnRowKeydown':_0xdaeb38=>{const _0x4aeb77=_0x1761f7;if(_0xdaeb38[_0x4aeb77(0x229)]!==_0x4aeb77(0x1e8))return;_0x3b9156[_0x4aeb77(0x216)]();},'folderType':_0x1761f7(0x19b)});_0x3ca421[_0x1761f7(0x22b)](_0x28a435);const _0x3b9156=$(_0x1761f7(0x21d))['click'](()=>_0x81a7a2(!![],_0x3ca421['getFolderPathStrings']())),_0x724f63=$(_0x1761f7(0x1db))[_0x1761f7(0x216)](()=>_0x81a7a2(![]));$$(_0x636f45)`<div class="ve-flex-col w-100 h-100 pt-2">
			${_0x28a435}

			<div class="ve-flex-v-center ve-flex-h-right no-shrink pb-1 pt-1 px-1 mt-auto mr-3">${_0x3b9156}${_0x724f63}</div>
		</div>`,_0x2e6ac0();const [_0x559c85,_0x5cc515]=await _0x3a8437();if(!_0x559c85||!_0x5cc515)return;const _0x2b8f10=await UtilFolders['pCreateFoldersGetId']({'folderType':'Item','folderNames':_0x5cc515});ui[_0x1761f7(0x1d7)][_0x1761f7(0x1a5)](_0x1761f7(0x211));const _0x13ed0b=await LootGeneratorApp[_0x1761f7(0x1be)]({'loot':_0x30106a,'folderId':_0x2b8f10,'isSkipCurrencies':isSkipCurrencies});return ui[_0x1761f7(0x20b)][_0x1761f7(0x19d)](_0x5cc515[_0x1761f7(0x1b4)]?'Imported\x20loot\x20to\x20items\x20folder\x20\x22'+_0x5cc515[_0x1761f7(0x204)]('/')+'\x22.':_0x1761f7(0x206)),_0x13ed0b;}async['_pImportToCompendium'](){const _0x140382=_0x5863bb;let _0x1876a0=null;if(!UtilCompendium[_0x140382(0x1c0)]({'folderType':'Item'})[_0x140382(0x1b4)]){const _0xfff34e=await InputUiUtil['pGetUserBoolean']({'title':_0x140382(0x199),'htmlDescription':'No\x20unlocked\x20\x22Item\x22-type\x20compendiums\x20currently\x20exist.\x20Would\x20you\x20like\x20to\x20create\x20one?','textYes':_0x140382(0x214),'textNo':'No'});if(!_0xfff34e)return;_0x1876a0=await UtilCompendium['pGetUserCreatePack']({'folderType':_0x140382(0x1a0)});if(!_0x1876a0)return;}if(!_0x1876a0){const {$modalInner:_0x4830cb,doClose:_0x48f930,pGetResolved:_0x557128,doAutoResize:_0x4141ec}=await UtilApplications[_0x140382(0x1ae)]({'title':'Import\x20Loot\x20to\x20Items\x20Compendium'}),_0x5430fa=()=>_0x1876a0=UtilCompendium[_0x140382(0x1bc)]({'collection':_0x51e648[_0x140382(0x1a7)]()}),_0x51e648=UtilCompendium['$getSelCompendium']({'folderType':_0x140382(0x1a0)})[_0x140382(0x1ef)](()=>_0x5430fa());_0x5430fa();const _0x27467e=$(_0x140382(0x21d))[_0x140382(0x216)](()=>_0x48f930(!![])),_0x110cbf=$(_0x140382(0x1db))[_0x140382(0x216)](()=>_0x48f930(![]));$$(_0x4830cb)`<div class="ve-flex-col w-100 h-100 pt-2">
				${_0x51e648}
				<div class="ve-flex-v-center ve-flex-h-right no-shrink pb-1 pt-1 px-1 mt-auto mr-3">${_0x27467e}${_0x110cbf}</div>
			</div>`,_0x4141ec();const [_0x15a811]=await _0x557128();if(!_0x15a811)_0x1876a0=null;}if(!_0x1876a0)return;const _0x4245eb=await this[_0x140382(0x203)]();ui[_0x140382(0x1d7)][_0x140382(0x1a5)]('compendium');const _0x345c79=await LootGeneratorApp[_0x140382(0x1be)]({'loot':_0x4245eb,'pack':_0x1876a0});return ui[_0x140382(0x20b)]['info'](_0x140382(0x1c1)+_0x1876a0[_0x140382(0x21b)][_0x140382(0x1ee)]+'\x22'),_0x345c79;}static async[_0x5863bb(0x1e6)]({loot:_0x422526,evt:_0x252d00}){const _0x14a36c=_0x5863bb,_0x3e8138=UtilCanvas['getPosCanvasSpace'](_0x252d00,'TokenLayer'),_0x1cef27=canvas['grid'][_0x14a36c(0x1b9)](_0x3e8138['x'],_0x3e8138['y']),_0x166b61=await this['_pImportToFolder']({'loot':_0x422526,'isSkipCurrencies':!![]}),_0x1a092b=_0x166b61[_0x14a36c(0x1a2)](({importSummary:_0x303131})=>(_0x303131?.[_0x14a36c(0x1a4)]||[])[_0x14a36c(0x1a2)](_0xd52fd1=>_0xd52fd1[_0x14a36c(0x1fc)])[_0x14a36c(0x22d)](Boolean))[_0x14a36c(0x20e)](),_0x334e95=await ItemPiles[_0x14a36c(0x1cf)]['createItemPile'](_0x1cef27,{'items':_0x1a092b}),_0x271c0e=await fromUuid(_0x334e95);if(!_0x422526['currency'])return;const _0x2a186a=Object[_0x14a36c(0x1df)](_0x422526[_0x14a36c(0x1d4)])[_0x14a36c(0x1f5)](([_0x4e5bb7,_0x586a64])=>({['data.currency.'+_0x4e5bb7]:_0x586a64}));await ItemPiles[_0x14a36c(0x1cf)]['addAttributes'](_0x271c0e,_0x2a186a);}}LootGenOutputFvtt['_STO_K_FOLDER_PATH_SPEC']='LootGenOutputFvtt.folderKeyPathSpec',LootGenOutputFvtt['FLAG_TYPE__LOOT']=_0x5863bb(0x22f);export{LootGeneratorApp};