const _0x23f437=_0x3afa;(function(_0x5eee43,_0x20598a){const _0x3b7ff2=_0x3afa,_0x43c6a3=_0x5eee43();while(!![]){try{const _0x49af83=parseInt(_0x3b7ff2(0xcd))/0x1*(parseInt(_0x3b7ff2(0xdd))/0x2)+parseInt(_0x3b7ff2(0xa6))/0x3+-parseInt(_0x3b7ff2(0xbd))/0x4+parseInt(_0x3b7ff2(0xa2))/0x5+-parseInt(_0x3b7ff2(0xbf))/0x6*(-parseInt(_0x3b7ff2(0xb3))/0x7)+parseInt(_0x3b7ff2(0xdc))/0x8*(-parseInt(_0x3b7ff2(0xae))/0x9)+-parseInt(_0x3b7ff2(0xd7))/0xa;if(_0x49af83===_0x20598a)break;else _0x43c6a3['push'](_0x43c6a3['shift']());}catch(_0x298a65){_0x43c6a3['push'](_0x43c6a3['shift']());}}}(_0x1bee,0x8f037));import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';function _0x1bee(){const _0x13f107=['traits','14cJXYPG','getAdditionalRollDataBase','users','data','_init_player_bindCharacterUpdateHook','isRefreshOtherOwnedSheets','type','map','entries','prof','2381044wOAaBK','babele','182076tCvuqI','slugify','classes','character','render','details','length','class','includes','mergeMap','toLowerCase','abilities','isOwner','user','1zMaQyI','attack','rsak','name','int','getFlag','_PLAYER_CONTROLLED_NON_CHARS_WALKER','element','_source','ENTITY_PERMISSIONS','2778000MATKPL','.userchar.','sheet','_PLAYER_CONTROLLED_NON_CHARS_SENTINEL','filter','4629440tIhNBB','2316766ccvPxn','attributes','actor','prepareData','_getUserChar','parent','MODULE_NAME_FAKE','resources','mod','spellcasting','1455145HDyGWG','OWNER','forEach','set','3318300uEIAce','updateActor','get','currency','isGM','getWalker','actors','bonuses','18uLmreG','spells','skills','walk'];_0x1bee=function(){return _0x13f107;};return _0x1bee();}import{UtilCompat}from'./UtilCompat.js';class Patcher_RollData{static['init'](){const _0x469e4b=_0x3afa;if(game[_0x469e4b(0xcc)][_0x469e4b(0xaa)])return;this[_0x469e4b(0xb7)]();}static['_init_player_bindCharacterUpdateHook'](){const _0x4dcde5=_0x3afa;Hooks['on'](_0x4dcde5(0xa7),_0x25eb06=>{const _0x2f226a=_0x4dcde5;if(!Config[_0x2f226a(0xa8)](_0x2f226a(0x9a),_0x2f226a(0xb8)))return;if(game[_0x2f226a(0xcc)][_0x2f226a(0xc2)]?.['id']!==_0x25eb06?.['id'])return;const _0x91acff=game[_0x2f226a(0xac)]['contents']['filter'](_0x136465=>{const _0x8c0eb1=_0x2f226a;if(game['user'][_0x8c0eb1(0xc2)]['id']===_0x136465['id']||!_0x136465[_0x8c0eb1(0xcb)])return![];let _0x22e681=![];return Patcher_RollData[_0x8c0eb1(0xd3)][_0x8c0eb1(0xb1)](_0x136465[_0x8c0eb1(0xb6)][_0x8c0eb1(0xd5)],{'string':_0x25da47=>{const _0x157889=_0x8c0eb1;if(!_0x25da47[_0x157889(0xc7)](Patcher_RollData[_0x157889(0xda)]))return;return _0x22e681=!![];}}),_0x22e681;});_0x91acff[_0x2f226a(0xa4)](_0x4f4ce5=>{const _0x2e216e=_0x2f226a;_0x4f4ce5[_0x2e216e(0x9b)]();if(_0x4f4ce5[_0x2e216e(0xd9)]?.[_0x2e216e(0xd4)]?.[_0x2e216e(0xc5)])_0x4f4ce5[_0x2e216e(0xd9)][_0x2e216e(0xc3)]();});});}static[_0x23f437(0xb4)](_0x1ba313){const _0x4a5d51=_0x23f437,_0x19fd90=Patcher_RollData[_0x4a5d51(0x9c)](_0x1ba313),_0x1e650d=_0x19fd90?.['data']?.[_0x4a5d51(0xb6)]?.[_0x4a5d51(0xde)]?.[_0x4a5d51(0xbc)];let _0x2c970f,_0x475e80=null;if(_0x19fd90){const _0x8d4349=_0x19fd90?_0x19fd90[_0x4a5d51(0xb6)]?.[_0x4a5d51(0xb6)][_0x4a5d51(0xde)][_0x4a5d51(0xa1)]||_0x4a5d51(0xd1):null,_0xbc40fc=(_0x19fd90['data']?.[_0x4a5d51(0xb6)]?.[_0x4a5d51(0xca)]?.[_0x8d4349][_0x4a5d51(0xa0)]??0x0)+(_0x1e650d??0x0);_0x2c970f=_0xbc40fc+Number(_0x19fd90[_0x4a5d51(0xb6)]?.[_0x4a5d51(0xb6)]?.[_0x4a5d51(0xad)]?.[_0x4a5d51(0xcf)]?.[_0x4a5d51(0xce)])||0x0,_0x475e80=_0xbc40fc+Number(_0x19fd90[_0x4a5d51(0xb6)]?.[_0x4a5d51(0xb6)]?.[_0x4a5d51(0xad)]?.['msak']?.['attack'])||0x0;}return{'name':_0x1ba313[_0x4a5d51(0xd0)],[SharedConsts[_0x4a5d51(0x9e)]]:{'name':{[_0x1ba313['name'][_0x4a5d51(0xc9)]()['replace'](/[^a-zA-Z0-9]/g,'')]:0x1},'user':{'id':game['user']['id']},'userchar':{'id':_0x19fd90?.['id'],'pb':_0x1e650d,'spellAttackRanged':_0x2c970f,'spellAttackMelee':_0x475e80,...[_0x4a5d51(0xca),_0x4a5d51(0xde),_0x4a5d51(0xc1),_0x4a5d51(0xc4),_0x4a5d51(0xb2),_0x4a5d51(0xa9),_0x4a5d51(0xb0),_0x4a5d51(0xaf),_0x4a5d51(0xad),_0x4a5d51(0x9f),'movement'][_0x4a5d51(0xc8)](_0x338712=>({[_0x338712]:MiscUtil[_0x4a5d51(0xa8)](_0x19fd90,_0x4a5d51(0xb6),_0x4a5d51(0xb6),_0x338712)}))}}};}static[_0x23f437(0x9c)](_0x2f2635){const _0x1035bb=_0x23f437;if(!game['user']['isGM'])return game['user'][_0x1035bb(0xc2)];for(let _0x4a832c=0x0;_0x4a832c<0x64&&_0x2f2635?.[_0x1035bb(0x9d)];++_0x4a832c)_0x2f2635=_0x2f2635[_0x1035bb(0x9d)];if(!_0x2f2635)return null;if(game[_0x1035bb(0xb5)]['contents']['some'](_0x17b965=>_0x17b965[_0x1035bb(0xc2)]?.['id']===_0x2f2635['id']))return _0x2f2635;const _0x3c7590=_0x2f2635['data']?.['permission'],_0x139919=Object[_0x1035bb(0xbb)](_0x3c7590)[_0x1035bb(0xdb)](([_0x4ac758,_0x510adb])=>_0x510adb>=CONST[_0x1035bb(0xd6)][_0x1035bb(0xa3)]&&!game[_0x1035bb(0xb5)][_0x1035bb(0xa8)](_0x4ac758)?.['isGM'])[_0x1035bb(0xba)](([_0x51e6f0])=>_0x51e6f0);if(_0x139919[_0x1035bb(0xc5)]!==0x1)return null;return game[_0x1035bb(0xb5)][_0x1035bb(0xa8)](_0x139919[0x0])?.[_0x1035bb(0xc2)];}static['addBabeleCompatibilityRollData'](_0x3e0a64,_0x3224fc){const _0x371173=_0x23f437;if(!UtilCompat['isBabeleActive']())return;_0x3224fc['items'][_0x371173(0xdb)](_0x984c3=>_0x984c3[_0x371173(0xb9)]===_0x371173(0xc6))[_0x371173(0xa4)](_0x9e55c9=>{const _0x3b08be=_0x371173,_0x35d6ce=_0x9e55c9[_0x3b08be(0xd2)](_0x3b08be(0xbe),'originalName');if(!_0x35d6ce||_0x35d6ce===_0x9e55c9[_0x3b08be(0xd0)])return;const _0x2c0691=_0x35d6ce[_0x3b08be(0xc0)]({'strict':!![]});if(_0x3e0a64?.[_0x3b08be(0xc1)]?.[_0x2c0691])return;MiscUtil[_0x3b08be(0xa5)](_0x3e0a64,'classes',_0x2c0691,_0x9e55c9['data'][_0x3b08be(0xb6)]);});}}function _0x3afa(_0x216d3b,_0x10068c){const _0x1beea0=_0x1bee();return _0x3afa=function(_0x3afa70,_0x2793af){_0x3afa70=_0x3afa70-0x9a;let _0x9773f=_0x1beea0[_0x3afa70];return _0x9773f;},_0x3afa(_0x216d3b,_0x10068c);}Patcher_RollData[_0x23f437(0xd3)]=MiscUtil[_0x23f437(0xab)]({'isNoModification':!![],'isBreakOnReturn':!![]}),Patcher_RollData[_0x23f437(0xda)]='@'+SharedConsts[_0x23f437(0x9e)]+_0x23f437(0xd8);export{Patcher_RollData};