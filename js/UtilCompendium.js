const _0x54a965=_0x29f3;function _0x29f3(_0x59ac89,_0x1b07c9){const _0x8a45bc=_0x8a45();return _0x29f3=function(_0x29f349,_0x56699c){_0x29f349=_0x29f349-0x1f2;let _0x500421=_0x8a45bc[_0x29f349];return _0x500421;},_0x29f3(_0x59ac89,_0x1b07c9);}(function(_0x49b576,_0x2c520b){const _0x18181d=_0x29f3,_0x1f62f7=_0x49b576();while(!![]){try{const _0x104160=parseInt(_0x18181d(0x224))/0x1+parseInt(_0x18181d(0x24a))/0x2*(-parseInt(_0x18181d(0x20c))/0x3)+-parseInt(_0x18181d(0x24f))/0x4*(parseInt(_0x18181d(0x20f))/0x5)+-parseInt(_0x18181d(0x285))/0x6*(-parseInt(_0x18181d(0x208))/0x7)+-parseInt(_0x18181d(0x251))/0x8*(parseInt(_0x18181d(0x1fc))/0x9)+parseInt(_0x18181d(0x24c))/0xa*(-parseInt(_0x18181d(0x253))/0xb)+-parseInt(_0x18181d(0x261))/0xc*(-parseInt(_0x18181d(0x216))/0xd);if(_0x104160===_0x2c520b)break;else _0x1f62f7['push'](_0x1f62f7['shift']());}catch(_0xc4f7c7){_0x1f62f7['push'](_0x1f62f7['shift']());}}}(_0x8a45,0x3c7a3));import{Config}from'./Config.js';import{SharedConsts}from'../shared/SharedConsts.js';function _0x8a45(){const _0x355e6d=['PG_SPELLS','optionalfeature','getPackByCollection','(Invalid)','srd','sort','$getSelCompendium','mystery-man.svg','MODULE_NAME_FAKE','has','SHARED_REPLACEMENTS_REGEX','48lcYAEq','deepKeys','_isCompendiumCached','split','monster','find','stringToSlug','name','unlock','setDiff','baseCacheId','classFeature','_COMPENDIUM_ACTOR_CACHES_LOCK','warn','\x20took\x20more\x20than\x20','_COMPENDIUM_CACHES_LOCK','</option>','_pGetCacheAndGetActorItemCompendiumData','locked','<select\x20class=\x22block\x20ve-foundry-button\x20m-0\x22>\x0a\x09\x09\x09','subclass','pGetCompendiumImage','getCompendiumPaths','Item','_pHandleCompendiumUpdate','_pCacheCompendium','getOrSet','backgroundFeature','fnGetAliases','monsterFeature','originalName','\x0a\x09\x09</select>','isIgnoreSrd','_PLUT_CACHES','push','entries','1467324mKwKNu','join','_COMPENDIUM_CONFIG_PREV_VALUES','map','string','_pFlushCompendiumCaches_','_getReplacementDataCompendiums','system','getIndex','img','deleteObjectPath','_COMPENDIUM_CACHE_KEY_DATA','babele','PACK_NAME_ITEMS','_pGetPlutoniumCompendiumId_generic','774HcltMp','\x20seconds!\x20This\x20usually\x20means\x20the\x20compendium\x20is\x20inaccessible.\x20Cancelling\x20compendium\x20load.','table','additionalDataCompendiumFeatures','_getCleanCompendiumContentName','_pHandleConfigUpdate','collection','HK_CONFIG_UPDATE','additionalDataCompendiumSubclasses','isBabeleActive','filter','toLowerCase','7tBEUQB','_state','importRace','get','1204881YpzwEC','pGetUserString','_addHookBase','173495qrUiPq','_pGetCacheAndGetCompendiumData','trim','_pCacheActorItemCompendium','_COMPENDIUM_CACHES','<div\x20class=\x22w-100\x20italic\x22></div>','pDelay','2720497UrBcCA','<option\x20value=\x22','data','importCreature','every','page','pLock','packs','pGetCompendiumData','flags','metadata','race','_COMPENDIUM_ACTOR_CACHES','PG_ITEMS','207012EpmuhV','additionalDataCompendium','SRD_COMPENDIUMS_CREATURES','_PLUT_CACHES_LOCKS','Unhandled\x20page\x20\x22','length','importSpell','items','_getAdditionalDataCompendiums','_getCompendiumsFromString','keys','cacheId','world','spell','text','Enter\x20New\x20\x22','_getCachedCompendiumData','_displayName','pGetUserCreatePack','createCompendium','Unknown\x20cache\x20ID\x20\x22','_getCompendiumDocOriginalName','getAvailablePacks','getDocuments','copy','_pFlushCompendiumCaches','importItem','updateCompendium','background','label','importClass','MODULE_NAME','then','importOptionalFeature','pGetActorItemCompendiumImage','\x22\x20Compendium\x20Name','___','item','2eLKieJ','_COMPENDIUM_CACHE_KEY_IMAGE','470djIABo','raceFeature','replacementDataCompendium','28GdIpXa','getFlag','20248jMyUrg','forEach','41833CmfYsV','PACK_NAME_SPELLS','init'];_0x8a45=function(){return _0x355e6d;};return _0x8a45();}import{ConfigConsts}from'./ConfigConsts.js';import{UtilCompat}from'./UtilCompat.js';import{UtilHooks}from'./UtilHooks.js';import{LGT}from'./Util.js';class UtilCompendium{static[_0x54a965(0x255)](){const _0x13b75c=_0x54a965;UtilHooks['on'](UtilHooks[_0x13b75c(0x203)],()=>this[_0x13b75c(0x201)]()),this['_pHandleConfigUpdate']()[_0x13b75c(0x244)](null),Hooks['on'](_0x13b75c(0x23f),_0x47bf0a=>this[_0x13b75c(0x279)]({'pack':_0x47bf0a}));}static async['_pHandleConfigUpdate'](){const _0x3c7414=_0x54a965;await this[_0x3c7414(0x23d)]();}static async[_0x54a965(0x279)]({pack:_0x3652a5}){await this['_pFlushCompendiumCaches']({'pack':_0x3652a5});}static async['_pFlushCompendiumCaches']({pack:_0x5ab79f}={}){const _0x3bb635=_0x54a965;await this[_0x3bb635(0x270)][_0x3bb635(0x21c)]();try{this[_0x3bb635(0x1f2)]({'pack':_0x5ab79f});}finally{this[_0x3bb635(0x270)][_0x3bb635(0x269)]();}}static[_0x54a965(0x1f2)]({pack:_0x44573c}={}){const _0x4e3bff=_0x54a965;if(_0x44573c){Config[_0x4e3bff(0x277)]()[_0x4e3bff(0x252)](([_0x5ef597,_0x5ccd2d])=>{const _0x55bd9e=_0x4e3bff,_0x30c8ed=Config[_0x55bd9e(0x20b)](_0x5ef597,_0x5ccd2d)||'',_0x11bef7=new Set(this[_0x55bd9e(0x22d)](_0x30c8ed)['map'](_0x549544=>_0x549544[_0x55bd9e(0x202)]));if(!_0x11bef7[_0x55bd9e(0x25f)](_0x44573c['collection']))return;Object[_0x55bd9e(0x284)](this[_0x55bd9e(0x213)])[_0x55bd9e(0x252)](([_0x388e12,_0x486cb0])=>{const _0x1d5d28=_0x55bd9e;Object[_0x1d5d28(0x22e)](_0x486cb0)['filter'](_0x15d467=>_0x15d467===_0x44573c['collection'])[_0x1d5d28(0x252)](_0x303878=>MiscUtil[_0x1d5d28(0x1f7)](this[_0x1d5d28(0x213)],_0x388e12,_0x303878));});});return;}Config['getCompendiumPaths']()[_0x4e3bff(0x252)](_0x476695=>{const _0xefd954=_0x4e3bff,[_0x25664d,_0x4a1e5d]=_0x476695,_0x53f9df=_0x476695[_0xefd954(0x286)](_0xefd954(0x248)),_0x5dff9d=this[_0xefd954(0x287)][_0x53f9df]||'',_0xec49fa=Config[_0xefd954(0x20b)](_0x25664d,_0x4a1e5d)||'';if(_0x5dff9d[_0xefd954(0x211)]()!==_0xec49fa[_0xefd954(0x211)]()){const _0x175b7e=CollectionUtil[_0xefd954(0x26a)](new Set(this['_getCompendiumsFromString'](_0x5dff9d)['map'](_0x178cf3=>_0x178cf3['collection'])),new Set(this[_0xefd954(0x22d)](_0xec49fa)[_0xefd954(0x288)](_0x4de5ae=>_0x4de5ae[_0xefd954(0x202)])));Object[_0xefd954(0x284)](this[_0xefd954(0x213)])[_0xefd954(0x252)](([_0x5cb47e,_0x694713])=>{const _0x1990f1=_0xefd954;Object['keys'](_0x694713)[_0x1990f1(0x206)](_0x28c62d=>_0x175b7e[_0x1990f1(0x25f)](_0x28c62d))[_0x1990f1(0x252)](_0x293c82=>MiscUtil[_0x1990f1(0x1f7)](this[_0x1990f1(0x213)],_0x5cb47e,_0x293c82));});}this[_0xefd954(0x287)][_0x53f9df]=_0xec49fa;});}static async[_0x54a965(0x21e)](_0x4541e2,_0x4322ad){const _0x22969f=_0x54a965;_0x4322ad=_0x4322ad||UtilCompat[_0x22969f(0x205)]();const _0x1eae20=0xa,_0x29e32b=await Promise[_0x22969f(0x221)]([_0x4322ad?_0x4541e2[_0x22969f(0x23b)]():_0x4541e2[_0x22969f(0x1f5)](),MiscUtil[_0x22969f(0x215)](_0x1eae20*0x3e8,null)]);if(!_0x29e32b)return console[_0x22969f(0x26e)](...LGT,'Loading\x20of\x20'+_0x4541e2?.[_0x22969f(0x220)]?.[_0x22969f(0x1f4)]+'.'+_0x4541e2?.[_0x22969f(0x220)]?.[_0x22969f(0x268)]+_0x22969f(0x26f)+_0x1eae20+_0x22969f(0x1fd)),[];return _0x29e32b;}static async[_0x54a965(0x276)](_0x4b9cd3,_0xfbb447,_0x37f320){const _0x5c7b66=_0x54a965;return this['_pGetCacheAndGetCompendiumData'](this[_0x5c7b66(0x24b)],this['_getAdditionalDataCompendiums']({'entityType':_0x4b9cd3}),_0x4b9cd3,_0xfbb447,_0x37f320);}static async[_0x54a965(0x210)](_0x573d00,_0x214402,_0x264a1c,_0x4052d3,_0x162342){const _0x39b298=_0x54a965;_0x162342=_0x162342||{};if(!_0x214402?.['length'])return null;if(!_0x162342[_0x39b298(0x281)]&&!_0x4052d3[_0x39b298(0x25a)])return null;let _0x1f63b2=[];if(_0x4052d3['name'])_0x1f63b2[_0x39b298(0x283)]((typeof _0x4052d3[_0x39b298(0x25a)]===_0x39b298(0x289)?_0x4052d3[_0x39b298(0x25a)]:_0x4052d3[_0x39b298(0x268)])[_0x39b298(0x207)]()[_0x39b298(0x211)]());if(_0x4052d3[_0x39b298(0x235)])_0x1f63b2[_0x39b298(0x283)](_0x4052d3[_0x39b298(0x235)]['toLowerCase']()[_0x39b298(0x211)]());if(_0x162342[_0x39b298(0x262)]){_0x1f63b2=_0x1f63b2['map'](_0x127743=>({'name':_0x127743}));if(_0x162342[_0x39b298(0x27d)]){const _0x520985=_0x162342[_0x39b298(0x27d)](_0x4052d3);_0x520985['forEach'](_0x8d1081=>_0x8d1081[_0x39b298(0x268)]=_0x8d1081[_0x39b298(0x268)]?_0x8d1081[_0x39b298(0x268)][_0x39b298(0x207)]()[_0x39b298(0x211)]():_0x8d1081[_0x39b298(0x268)]),_0x1f63b2['unshift'](..._0x520985);}}else{if(_0x162342[_0x39b298(0x27d)])_0x1f63b2[_0x39b298(0x283)](..._0x162342[_0x39b298(0x27d)](_0x4052d3)[_0x39b298(0x288)](_0x49f8b3=>_0x49f8b3[_0x39b298(0x207)]()['trim']()));}_0x162342['deepKeys']&&(_0x573d00={'baseCacheId':_0x573d00,'deepKeys':_0x162342[_0x39b298(0x262)],'cacheId':[_0x573d00,..._0x162342[_0x39b298(0x262)][_0x39b298(0x25b)](SortUtil['ascSortLower'])][_0x39b298(0x286)]('__')});await this[_0x39b298(0x270)][_0x39b298(0x21c)]();try{for(const _0x4e6d1d of _0x1f63b2){for(const _0x4d5217 of _0x214402){!this[_0x39b298(0x263)](this['_COMPENDIUM_CACHES'],_0x573d00,_0x4d5217)&&await this[_0x39b298(0x27a)](this[_0x39b298(0x213)],_0x573d00,_0x4d5217);const _0x438201=this[_0x39b298(0x234)](this[_0x39b298(0x213)],_0x573d00,_0x4d5217,_0x4e6d1d);if(_0x438201)return _0x438201;}}}finally{this[_0x39b298(0x270)]['unlock']();}}static[_0x54a965(0x22d)](_0x1dc5a0){const _0x302333=_0x54a965;if(!_0x1dc5a0)return[];return _0x1dc5a0=typeof _0x1dc5a0==='string'?_0x1dc5a0[_0x302333(0x264)](',')[_0x302333(0x288)](_0x5c40bc=>_0x5c40bc[_0x302333(0x211)]()[_0x302333(0x207)]()):_0x1dc5a0[_0x302333(0x288)](_0x6bb1df=>_0x6bb1df[_0x302333(0x207)]()),_0x1dc5a0[_0x302333(0x288)](_0x5631af=>game['packs'][_0x302333(0x266)](_0x52a818=>_0x52a818['collection'][_0x302333(0x207)]()===_0x5631af))['filter'](Boolean);}static[_0x54a965(0x22c)]({entityType:_0x5e97f9}){const _0x54730d=_0x54a965;switch(_0x5e97f9){case _0x54730d(0x231):return this[_0x54730d(0x22d)](Config[_0x54730d(0x20b)](_0x54730d(0x22a),_0x54730d(0x225)));case _0x54730d(0x265):return this[_0x54730d(0x22d)](Config[_0x54730d(0x20b)]('importCreature',_0x54730d(0x225)));case'item':return this[_0x54730d(0x22d)](Config[_0x54730d(0x20b)](_0x54730d(0x23e),'additionalDataCompendium'));case'class':return this[_0x54730d(0x22d)](Config[_0x54730d(0x20b)](_0x54730d(0x242),'additionalDataCompendiumClasses'));case _0x54730d(0x275):return this[_0x54730d(0x22d)](Config['get'](_0x54730d(0x242),_0x54730d(0x204)));case _0x54730d(0x26c):return this['_getCompendiumsFromString'](Config[_0x54730d(0x20b)](_0x54730d(0x242),_0x54730d(0x1ff)));case'subclassFeature':return this[_0x54730d(0x22d)](Config[_0x54730d(0x20b)](_0x54730d(0x242),_0x54730d(0x1ff)));case _0x54730d(0x257):return this[_0x54730d(0x22d)](Config[_0x54730d(0x20b)](_0x54730d(0x245),'additionalDataCompendium'));case'race':return this[_0x54730d(0x22d)](Config[_0x54730d(0x20b)](_0x54730d(0x20a),_0x54730d(0x225)));case _0x54730d(0x24d):return this[_0x54730d(0x22d)](Config['get'](_0x54730d(0x20a),'additionalDataCompendiumFeatures'));case'monsterFeature':return this['_getCompendiumsFromString'](Config[_0x54730d(0x20b)](_0x54730d(0x219),'additionalDataCompendiumFeatures'));case _0x54730d(0x240):return this[_0x54730d(0x22d)](Config['get']('importBackground',_0x54730d(0x225)));case _0x54730d(0x27c):return this['_getCompendiumsFromString'](Config[_0x54730d(0x20b)]('importBackground',_0x54730d(0x1ff)));case _0x54730d(0x1fe):return this['_getCompendiumsFromString'](Config[_0x54730d(0x20b)]('importTable',_0x54730d(0x225)));default:return null;}}static[_0x54a965(0x1f3)]({entityType:_0x1b836d}){const _0x4339fa=_0x54a965;switch(_0x1b836d){case'spell':return this[_0x4339fa(0x22d)](Config[_0x4339fa(0x20b)]('importSpell',_0x4339fa(0x24e)));case _0x4339fa(0x249):return this[_0x4339fa(0x22d)](Config[_0x4339fa(0x20b)](_0x4339fa(0x23e),'replacementDataCompendium'));default:return null;}}static async[_0x54a965(0x246)](_0xf271aa,_0x277911,_0x4c7609){const _0x2f6d83=_0x54a965;return this[_0x2f6d83(0x272)](this[_0x2f6d83(0x24b)],_0xf271aa,_0x277911,_0x4c7609);}static async[_0x54a965(0x272)](_0x4a53d4,_0x59fcc6,_0x5a3247,_0x3a6f8f){const _0x160b1d=_0x54a965;_0x3a6f8f=_0x3a6f8f||{};let _0x104f94=[];if(_0x5a3247[_0x160b1d(0x268)])_0x104f94['push']((typeof _0x5a3247[_0x160b1d(0x25a)]==='string'?_0x5a3247['srd']:_0x5a3247['name'])[_0x160b1d(0x207)]()[_0x160b1d(0x211)]());if(_0x5a3247[_0x160b1d(0x235)])_0x104f94['push'](_0x5a3247[_0x160b1d(0x235)]['toLowerCase']()['trim']());if(_0x3a6f8f[_0x160b1d(0x27d)])_0x104f94[_0x160b1d(0x283)](..._0x3a6f8f['fnGetAliases'](_0x5a3247)['map'](_0x155f72=>_0x155f72[_0x160b1d(0x207)]()['trim']()));let _0x5e4fa2;switch(_0x4a53d4){case this['_COMPENDIUM_CACHE_KEY_IMAGE']:{switch(_0x59fcc6){case'monsterFeature':_0x5e4fa2=this[_0x160b1d(0x22d)](Config[_0x160b1d(0x20b)](_0x160b1d(0x219),_0x160b1d(0x225)));break;default:return null;}break;}case this['_COMPENDIUM_CACHE_KEY_DATA']:{switch(_0x59fcc6){case _0x160b1d(0x27e):_0x5e4fa2=this[_0x160b1d(0x22d)](ConfigConsts[_0x160b1d(0x226)]);break;default:return null;}break;}default:throw new Error('Unknown\x20cache\x20ID\x20\x22'+_0x4a53d4+'\x22');}if(!_0x5e4fa2['length'])return null;await this[_0x160b1d(0x26d)]['pLock']();try{for(const _0x7087f4 of _0x104f94){for(const _0x5af1e3 of _0x5e4fa2){!this[_0x160b1d(0x263)](this[_0x160b1d(0x222)],_0x4a53d4,_0x5af1e3)&&await this[_0x160b1d(0x212)](this[_0x160b1d(0x222)],_0x4a53d4,_0x5af1e3);const _0x4221e8=this[_0x160b1d(0x234)](this['_COMPENDIUM_ACTOR_CACHES'],_0x4a53d4,_0x5af1e3,_0x7087f4);if(_0x4221e8)return _0x4221e8;}}}finally{this['_COMPENDIUM_ACTOR_CACHES_LOCK'][_0x160b1d(0x269)]();}}static async['getCompendiumEntity'](_0x575eaa,_0x1742ea,_0x5c256b={}){const _0x43db15=_0x54a965;return this[_0x43db15(0x210)](this['_COMPENDIUM_CACHE_KEY_DATA'],this[_0x43db15(0x1f3)]({'entityType':_0x575eaa}),_0x575eaa,_0x1742ea,{..._0x5c256b,'isIgnoreSrd':!![]});}static async['getSrdCompendiumEntity'](_0x17e259,_0x441bee,_0x22652d){const _0x28c320=_0x54a965;return this[_0x28c320(0x210)](this[_0x28c320(0x1f8)],this[_0x28c320(0x22c)]({'entityType':_0x17e259}),_0x17e259,_0x441bee,_0x22652d);}static[_0x54a965(0x263)](_0x2ee8b2,_0x1b0f1d,_0x44603e){const _0xb4ec2d=_0x54a965;return _0x1b0f1d=_0x1b0f1d[_0xb4ec2d(0x22f)]||_0x1b0f1d,!!MiscUtil[_0xb4ec2d(0x20b)](_0x2ee8b2,_0x1b0f1d,_0x44603e[_0xb4ec2d(0x202)]);}static async[_0x54a965(0x27a)](_0x19cb84,_0x3513e2,_0x363d41){const _0x4e65c1=_0x54a965;let _0x21ee56;if(_0x3513e2['baseCacheId'])_0x21ee56=!![];else switch(_0x3513e2){case this[_0x4e65c1(0x24b)]:_0x21ee56=![];break;case this[_0x4e65c1(0x1f8)]:_0x21ee56=!![];break;default:throw new Error(_0x4e65c1(0x238)+_0x3513e2+'\x22');}const _0x1f9bb3=await this[_0x4e65c1(0x21e)](_0x363d41,_0x21ee56),_0xfc77e2=MiscUtil[_0x4e65c1(0x27b)](_0x19cb84,_0x3513e2['cacheId']||_0x3513e2,_0x363d41['collection'],{});if(!_0x1f9bb3)return;if(_0x3513e2[_0x4e65c1(0x26b)])_0x1f9bb3['forEach'](_0x174ea0=>_0xfc77e2[this[_0x4e65c1(0x200)](this[_0x4e65c1(0x239)](_0x174ea0))]=MiscUtil[_0x4e65c1(0x23c)](_0x174ea0[_0x4e65c1(0x218)]));else switch(_0x3513e2){case this[_0x4e65c1(0x24b)]:_0x1f9bb3['forEach'](_0x567adf=>_0xfc77e2[this[_0x4e65c1(0x200)](this[_0x4e65c1(0x239)](_0x567adf))]=_0x567adf[_0x4e65c1(0x1f6)]);break;case this[_0x4e65c1(0x1f8)]:_0x1f9bb3[_0x4e65c1(0x252)](_0x12b56f=>_0xfc77e2[this[_0x4e65c1(0x200)](this['_getCompendiumDocOriginalName'](_0x12b56f))]=MiscUtil['copy'](_0x12b56f[_0x4e65c1(0x218)]));break;default:throw new Error(_0x4e65c1(0x238)+_0x3513e2+'\x22');}}static async['_pCacheActorItemCompendium'](_0x432303,_0x192a0d,_0x2fe16e){const _0xc2ed05=_0x54a965,_0x566694=await this['pGetCompendiumData'](_0x2fe16e,!![]),_0x12384f=MiscUtil[_0xc2ed05(0x27b)](_0x432303,_0x192a0d[_0xc2ed05(0x22f)]||_0x192a0d,_0x2fe16e[_0xc2ed05(0x202)],{});if(!_0x566694)return;_0x566694[_0xc2ed05(0x252)](_0x41c236=>{const _0x53c94b=_0xc2ed05;_0x41c236[_0x53c94b(0x22b)][_0x53c94b(0x252)](_0x3605eb=>{const _0x48748b=_0x53c94b,_0x32e980=this['_getCleanCompendiumContentName'](this[_0x48748b(0x239)](_0x3605eb));switch(_0x192a0d){case this['_COMPENDIUM_CACHE_KEY_IMAGE']:{if(!_0x3605eb[_0x48748b(0x1f6)]||_0x3605eb[_0x48748b(0x1f6)][_0x48748b(0x207)]()['includes'](_0x48748b(0x25d)))return;_0x12384f[_0x32e980]=_0x12384f[_0x32e980]||_0x3605eb[_0x48748b(0x1f6)];break;}case this[_0x48748b(0x1f8)]:_0x12384f[_0x32e980]=_0x12384f[_0x32e980]||MiscUtil[_0x48748b(0x23c)](_0x3605eb[_0x48748b(0x218)]);break;default:throw new Error(_0x48748b(0x238)+_0x192a0d+'\x22');}});});}static['_getCachedCompendiumData'](_0x2c79f5,_0x56a2b5,_0x57d598,_0x19cff8){const _0x130496=_0x54a965,_0x1d624f=MiscUtil[_0x130496(0x20b)](_0x2c79f5,_0x56a2b5[_0x130496(0x22f)]||_0x56a2b5,_0x57d598[_0x130496(0x202)]);if(!_0x1d624f)return null;const _0x5c068e=_0x1d624f[_0x19cff8[_0x130496(0x268)]||_0x19cff8];if(!_0x5c068e||typeof _0x19cff8===_0x130496(0x289))return _0x5c068e;const _0x5e69c2=Object[_0x130496(0x284)](_0x19cff8)[_0x130496(0x206)](([_0x4b1ea6])=>_0x4b1ea6!==_0x130496(0x268))[_0x130496(0x21a)](([_0x10b35b,_0x56d480])=>{const _0x4b2895=_0x130496;if(typeof _0x56d480===_0x4b2895(0x289))_0x56d480=_0x56d480[_0x4b2895(0x207)]()[_0x4b2895(0x211)]();let _0x98266c;const _0x51a6a3=_0x10b35b['split']('.');for(const _0x20d6fa of _0x51a6a3){_0x98266c=(_0x98266c||_0x5c068e)[_0x20d6fa];if(_0x98266c===undefined)return![];}if(typeof _0x98266c==='string')_0x98266c=this['_getCleanCompendiumContentName'](_0x98266c);return _0x98266c===_0x56d480;});if(!_0x5e69c2)return null;switch(_0x56a2b5[_0x130496(0x26b)]){case this[_0x130496(0x24b)]:return _0x5c068e['img'];case this[_0x130496(0x1f8)]:return _0x5c068e;default:throw new Error(_0x130496(0x238)+_0x56a2b5[_0x130496(0x26b)]+'\x22');}}static[_0x54a965(0x239)](_0x994ed7){const _0x33efe3=_0x54a965;if(!UtilCompat[_0x33efe3(0x205)]())return _0x994ed7[_0x33efe3(0x268)];return _0x994ed7[_0x33efe3(0x250)](_0x33efe3(0x1f9),_0x33efe3(0x27f))||_0x994ed7[_0x33efe3(0x268)];}static['_getCleanCompendiumContentName'](_0x48acec){const _0x360e1a=_0x54a965;return _0x48acec[_0x360e1a(0x211)]()['toLowerCase']()['replace'](CleanUtil[_0x360e1a(0x260)],_0x36a2c7=>CleanUtil['SHARED_REPLACEMENTS'][_0x36a2c7]);}static['pGetPlutoniumCompendiumId'](_0xe0d714,_0x50b770){const _0x3253d7=_0x54a965;switch(_0xe0d714){case UrlUtil['PG_BESTIARY']:return this[_0x3253d7(0x1fb)]({'page':_0xe0d714,'hash':_0x50b770,'packName':SharedConsts['PACK_NAME_CREATURES']});case UrlUtil[_0x3253d7(0x223)]:return this[_0x3253d7(0x1fb)]({'page':_0xe0d714,'hash':_0x50b770,'packName':SharedConsts[_0x3253d7(0x1fa)]});case UrlUtil[_0x3253d7(0x256)]:return this['_pGetPlutoniumCompendiumId_generic']({'page':_0xe0d714,'hash':_0x50b770,'packName':SharedConsts[_0x3253d7(0x254)]});default:throw new Error(_0x3253d7(0x228)+_0xe0d714+'\x22');}}static async[_0x54a965(0x1fb)]({page:_0x52add4,hash:_0xff77fc,packName:_0x330dd8}){const _0x278ea8=_0x54a965,_0x1b0deb=game[_0x278ea8(0x21d)][_0x278ea8(0x20b)](SharedConsts[_0x278ea8(0x243)]+'.'+_0x330dd8);if(!_0x1b0deb)return null;if(!UtilCompendium[_0x278ea8(0x282)][_0x330dd8]){const _0x16aa12=UtilCompendium[_0x278ea8(0x227)][_0x330dd8]||new VeLock();try{await _0x16aa12[_0x278ea8(0x21c)]();if(!UtilCompendium['_PLUT_CACHES'][_0x330dd8])UtilCompendium[_0x278ea8(0x282)][_0x330dd8]=await _0x1b0deb[_0x278ea8(0x23b)]();}finally{_0x16aa12[_0x278ea8(0x269)]();}}const _0x3c53dc=UtilCompendium[_0x278ea8(0x282)][_0x330dd8]['find'](_0x13bffe=>_0x13bffe[_0x278ea8(0x218)]?.[_0x278ea8(0x21f)]?.[SharedConsts[_0x278ea8(0x25e)]]?.[_0x278ea8(0x21b)]===_0x52add4&&_0x13bffe[_0x278ea8(0x218)]?.[_0x278ea8(0x21f)]?.[SharedConsts[_0x278ea8(0x25e)]]?.['hash']===_0xff77fc);if(!_0x3c53dc)return null;return{'packName':_0x330dd8,'packPackage':SharedConsts[_0x278ea8(0x243)],'packId':_0x3c53dc['id']};}static[_0x54a965(0x23a)]({folderType:_0x36f78e}){const _0x2c5460=_0x54a965;return game['packs']['filter'](_0x3085fd=>!_0x3085fd[_0x2c5460(0x273)]&&_0x3085fd[_0x2c5460(0x220)]['type']===_0x36f78e);}static async[_0x54a965(0x236)]({folderType:_0x37fe89}){const _0x9d128=_0x54a965,_0x159b21=$(_0x9d128(0x214)),_0x2956ea=await InputUiUtil[_0x9d128(0x20d)]({'title':_0x9d128(0x233)+_0x37fe89+_0x9d128(0x247),'fnIsValid':_0x2ed41b=>Parser[_0x9d128(0x267)](_0x2ed41b)[_0x9d128(0x229)],'$elePost':$$`<label class="mb-2 split-v-center ve-muted">
					<div class="mr-2 bold no-wrap">Compendium ID:</div>
					${_0x159b21}
				</label>`,'cbPostRender':({comp:_0x1c7815,propValue:_0x18d8c9})=>{const _0x3c97d7=_0x9d128,_0x4e7d75=()=>_0x159b21[_0x3c97d7(0x232)](_0x1c7815[_0x3c97d7(0x209)][_0x18d8c9]?Parser[_0x3c97d7(0x267)](_0x1c7815[_0x3c97d7(0x209)][_0x18d8c9])||_0x3c97d7(0x259):'—');_0x1c7815[_0x3c97d7(0x20e)](_0x18d8c9,_0x4e7d75),_0x4e7d75();}});if(!_0x2956ea||!_0x2956ea[_0x9d128(0x211)]())return null;return CompendiumCollection[_0x9d128(0x237)]({'entity':_0x9d128(0x278),'label':_0x2956ea,'name':Parser[_0x9d128(0x267)](_0x2956ea),'package':_0x9d128(0x230)});}static[_0x54a965(0x25c)]({availablePacks:availablePacks=null,folderType:folderType=null}){const _0x3f3b41=_0x54a965;return availablePacks=availablePacks||this[_0x3f3b41(0x23a)]({'folderType':folderType}),$(_0x3f3b41(0x274)+availablePacks[_0x3f3b41(0x288)](_0x5e58a3=>_0x3f3b41(0x217)+_0x5e58a3[_0x3f3b41(0x202)]+'\x22>'+_0x5e58a3[_0x3f3b41(0x220)][_0x3f3b41(0x241)]+_0x3f3b41(0x271))['join']('')+_0x3f3b41(0x280));}static[_0x54a965(0x258)]({collection:_0x326bc3}){const _0x78d67c=_0x54a965;if(_0x326bc3==null)return null;return game['packs'][_0x78d67c(0x266)](_0x13bc82=>_0x13bc82[_0x78d67c(0x202)]===_0x326bc3);}}UtilCompendium[_0x54a965(0x24b)]=_0x54a965(0x1f6),UtilCompendium[_0x54a965(0x1f8)]=_0x54a965(0x218),UtilCompendium[_0x54a965(0x287)]={},UtilCompendium[_0x54a965(0x213)]={},UtilCompendium[_0x54a965(0x270)]=new VeLock(),UtilCompendium['_COMPENDIUM_ACTOR_IMAGE_LAST_VALUES']={},UtilCompendium['_COMPENDIUM_ACTOR_CACHES']={},UtilCompendium[_0x54a965(0x26d)]=new VeLock(),UtilCompendium[_0x54a965(0x282)]={},UtilCompendium['_PLUT_CACHES_LOCKS']={};export{UtilCompendium};