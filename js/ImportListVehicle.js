const _0x4ac083=_0x6805;(function(_0x292c5a,_0x3b117e){const _0x44bef9=_0x6805,_0x2d2127=_0x292c5a();while(!![]){try{const _0x20a82f=parseInt(_0x44bef9(0x1c1))/0x1+-parseInt(_0x44bef9(0x1aa))/0x2*(parseInt(_0x44bef9(0x214))/0x3)+parseInt(_0x44bef9(0x1af))/0x4+parseInt(_0x44bef9(0x1b0))/0x5*(-parseInt(_0x44bef9(0x1d4))/0x6)+parseInt(_0x44bef9(0x201))/0x7*(-parseInt(_0x44bef9(0x1e5))/0x8)+-parseInt(_0x44bef9(0x1c0))/0x9+parseInt(_0x44bef9(0x1ae))/0xa;if(_0x20a82f===_0x3b117e)break;else _0x2d2127['push'](_0x2d2127['shift']());}catch(_0x58aed5){_0x2d2127['push'](_0x2d2127['shift']());}}}(_0x1ca2,0x9476d));import{ImportListActor}from'./ImportListActor.js';import{Vetools}from'./Vetools.js';function _0x1ca2(){const _0x432a09=['98HWwrsi','join','_pImportEntry_fillData_Cargo','vehicles','ascSort','SHIP','_pImportEntry_pFillBase','_pAddShipOther','_configGroup','_pAddInfWarTrait','sea','pSerialAwaitMap','_pAddShipAction','MODULE_NAME','spelldc','_pImportEntry_fillConditionsDamage','pSyncStateFrom','sort','source','3JBnWQG','pGetFluff','Custom\x20URL','Unknown\x20vehicle\x20terrain\x20type\x20\x22','INFWAR','attributes','pInit','getInfwarCreatureCapacity','DataSourceFile','isUseTokenImageAsPortrait','med','permissions','Vehicles','permission','actors','_pImportEntry_fillData_Traits','vehicle','pGetVehicleSideData','Import\x20Vehicles','pGetShipEquipmentItem','control','VET_SIZE_TO_ABV','_pImportEntry_fillData_Attributes','1015334tOzcKr','modules/','capacity','copy','314980ulHkbH','3324960SocmgC','5AMzZtl','reaction','pGetShipOtherItem','water','DataSourceUrl','isImportBioImages','ImportEntryOpts','terrain','speed','defaultPermission','toLocaleString','cargo','size','string','_pAddShipWeapon','items','3380805YPgnMc','1100746aPSqJg','get','feat','_pAddInfWarReaction','object','other','dimensions','actor','isStreamerMode','_pack','warn','getAbilityModNumber','_pImportEntry_pFillItems_ship','OBJECT','DATA_URL_VEHICLES','hull','_pGetSources','pGetTokenUrl','_pAddInfWarActionStation','2344170ygpLjA','_pImportEntry_pFillItems','CREATURE','_pImportEntry_pFillToken','tokenUrl','PG_VEHICLES','Upload\x20File','getShipMovement','biography','_pAddShipEquipment','_pImportEntry_fillData_Currency','vehicleType','registerImpl','actionStation','land','/media/icon/gears.svg','_pImportEntry_pGetImportMetadata','46496CpxYVP','push','data','_pImportEntry_getVehicleType','air','_pImportEntry_pFillData_Details','DISPLAY_NAME_TYPE_PLURAL','actionThresholds','trait','Unhandled\x20vehicle\x20type\x20\x22','_pImportEntry','_pImportEntry_pFillFolder','pGetItemActorPassive','fluff','SOURCE_TYP_CUSTOM','details','weight','pAddActorItems','capCargo','getShipCreatureCapacity','weapon','actions','foundryVehicle','SOURCE_TYP_OFFICIAL_ALL','movement','entries','length','importVehicle'];_0x1ca2=function(){return _0x432a09;};return _0x1ca2();}import{Config}from'./Config.js';import{DataConverter}from'./DataConverter.js';import{UtilActors}from'./UtilActors.js';import{ImportListCreature}from'./ImportListCreature.js';import{DataConverterVehicle}from'./DataConverterVehicle.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilDataSource}from'./UtilDataSource.js';import{ImportListObject}from'./ImportListObject.js';import{LGT}from'./Util.js';import{UtilDataConverter}from'./UtilDataConverter.js';function _0x6805(_0x8dc6de,_0x3524d3){const _0x1ca2ba=_0x1ca2();return _0x6805=function(_0x6805b5,_0x3df9bd){_0x6805b5=_0x6805b5-0x194;let _0x2d42fd=_0x1ca2ba[_0x6805b5];return _0x2d42fd;},_0x6805(_0x8dc6de,_0x3524d3);}class ImportListVehicle extends ImportListActor{static ['ID']='vehicles';static [_0x4ac083(0x1eb)]=_0x4ac083(0x19f);static ['_']=this[_0x4ac083(0x1e0)](this);constructor(_0x45741f){const _0x4bd1cf=_0x4ac083;_0x45741f=_0x45741f||{},super({'title':_0x4bd1cf(0x1a5)},_0x45741f,{'props':[_0x4bd1cf(0x1a3)],'dirsHomebrew':['vehicle'],'propsBrewAdditionalData':[_0x4bd1cf(0x1fb)],'fnLoadSideData':Vetools[_0x4bd1cf(0x1a4)],'titleSearch':_0x4bd1cf(0x204),'sidebarTab':_0x4bd1cf(0x1a1),'gameProp':_0x4bd1cf(0x1a1),'defaultFolderPath':['Vehicles'],'pageFilter':new PageFilterVehicles(),'page':UrlUtil[_0x4bd1cf(0x1d9)],'isPreviewable':!![],'isDedupable':!![],'configGroup':_0x4bd1cf(0x200)},{'actorType':'vehicle','DataConverter':DataConverterVehicle});}async[_0x4ac083(0x1d1)](){const _0x232e72=_0x4ac083;return[new UtilDataSource[(_0x232e72(0x1b4))](Config[_0x232e72(0x1c2)]('ui',_0x232e72(0x1c9))?'SRD':'5etools',Vetools[_0x232e72(0x1cf)],{'filterTypes':[UtilDataSource[_0x232e72(0x1fc)]],'isDefault':!![]}),new UtilDataSource[(_0x232e72(0x1b4))](_0x232e72(0x195),'',{'filterTypes':[UtilDataSource[_0x232e72(0x1f3)]]}),new UtilDataSource[(_0x232e72(0x19b))](_0x232e72(0x1da),{'filterTypes':[UtilDataSource[_0x232e72(0x1f3)]]}),...await this['_pGetSourcesHomebrew']()];}async[_0x4ac083(0x1e4)](_0x51ee8d,_0x5788ee,_0x5dbdeb){const _0x19007b=_0x4ac083,_0x386dee={},_0x3bccf1=await Renderer[_0x19007b(0x1a3)][_0x19007b(0x194)](_0x5788ee),_0x32a710=new ImportListVehicle[(_0x19007b(0x1b6))]({'actor':_0x51ee8d,'fluff':_0x3bccf1});await this[_0x19007b(0x207)](_0x5788ee,_0x386dee,_0x32a710[_0x19007b(0x1f2)],{'isUseTokenImageAsPortrait':Config[_0x19007b(0x1c2)](this[_0x19007b(0x209)],_0x19007b(0x19c))}),_0x386dee['data']={},await this[_0x19007b(0x1f0)](_0x5788ee,_0x386dee,_0x5dbdeb);if(_0x5dbdeb[_0x19007b(0x1b9)]!=null)_0x386dee[_0x19007b(0x1a0)]={'default':_0x5dbdeb[_0x19007b(0x1b9)]};else _0x386dee[_0x19007b(0x1a0)]={'default':Config[_0x19007b(0x1c2)](this[_0x19007b(0x209)],_0x19007b(0x19e))};return _0x386dee[_0x19007b(0x1e7)][_0x19007b(0x1df)]=this[_0x19007b(0x1e8)](_0x5788ee),this['_pImportEntry_fillData_Abilities'](_0x5788ee,_0x386dee[_0x19007b(0x1e7)],_0x32a710),this[_0x19007b(0x1a9)](_0x5788ee,_0x386dee[_0x19007b(0x1e7)],_0x32a710),await this['_pImportEntry_pFillData_Details'](_0x5788ee,_0x386dee['data'],_0x32a710),this[_0x19007b(0x1a2)](_0x5788ee,_0x386dee[_0x19007b(0x1e7)],_0x32a710),this[_0x19007b(0x1de)](_0x5788ee,_0x386dee[_0x19007b(0x1e7)],_0x32a710),this[_0x19007b(0x203)](_0x5788ee,_0x386dee[_0x19007b(0x1e7)],_0x32a710),await this[_0x19007b(0x1d7)]({'importable':_0x5788ee,'actor':_0x386dee}),{'dataBuilderOpts':_0x32a710,'actorData':_0x386dee};}[_0x4ac083(0x1e8)](_0x1531cb){const _0x1f5465=_0x4ac083;if(_0x1531cb['terrain']?.[_0x1f5465(0x1ff)]){const _0x3e99d1=_0x1531cb[_0x1f5465(0x1b7)][0x0];switch(_0x3e99d1){case _0x1f5465(0x1e2):return'land';case _0x1f5465(0x20b):return _0x1f5465(0x1b3);case _0x1f5465(0x1e9):return _0x1f5465(0x1e9);default:console[_0x1f5465(0x1cb)](...LGT,_0x1f5465(0x196)+_0x3e99d1+'\x22');}}switch(_0x1531cb[_0x1f5465(0x1df)]){case _0x1f5465(0x197):return _0x1f5465(0x1e2);case _0x1f5465(0x206):return _0x1f5465(0x20b);default:throw new Error(_0x1f5465(0x1ee)+_0x1531cb[_0x1f5465(0x1df)]+'\x22');}}async['_pImportEntry'](_0x2eab56,_0x62286a){const _0x417294=_0x4ac083;_0x62286a=_0x62286a||{};if(_0x2eab56['vehicleType']===_0x417294(0x1d6)){const _0x12954f=new ImportListCreature({});return await _0x12954f[_0x417294(0x199)](),await _0x12954f[_0x417294(0x211)](this),_0x2eab56=MiscUtil[_0x417294(0x1ad)](_0x2eab56),_0x2eab56[_0x417294(0x1d8)]=await Vetools[_0x417294(0x1d2)](_0x417294(0x1a3),_0x2eab56),_0x12954f[_0x417294(0x1ef)](_0x2eab56,_0x62286a);}else{if(_0x2eab56[_0x417294(0x1df)]===_0x417294(0x1ce)){const _0x47533d=new ImportListObject({});return await _0x47533d[_0x417294(0x199)](),await _0x47533d[_0x417294(0x211)](this),_0x2eab56=MiscUtil[_0x417294(0x1ad)](_0x2eab56),_0x2eab56[_0x417294(0x1d8)]=await Vetools[_0x417294(0x1d2)](_0x417294(0x1c5),_0x2eab56),_0x47533d[_0x417294(0x1ef)](_0x2eab56,_0x62286a);}}return super[_0x417294(0x1ef)](_0x2eab56,_0x62286a);}['_pImportEntry_fillData_Attributes'](_0x1d3fe0,_0x5c9fb9){const _0x4694e0=_0x4ac083,_0x36c73a={};_0x36c73a['init']={'value':0x0,'bonus':0x0,'mod':0x0,'prof':0x0,'total':0x0},_0x36c73a[_0x4694e0(0x20f)]=null,_0x36c73a[_0x4694e0(0x1fd)]=DataConverterVehicle[_0x4694e0(0x1db)](_0x1d3fe0),_0x36c73a[_0x4694e0(0x1b8)]=DataConverterVehicle['getVehicleSpeed'](_0x1d3fe0);switch(_0x1d3fe0[_0x4694e0(0x1df)]){case'INFWAR':{const _0x641837=Parser[_0x4694e0(0x1cc)](_0x1d3fe0['dex']);_0x36c73a['ac']={'flat':0x13+_0x641837,'motionless':'19'},_0x36c73a['hp']={'value':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,'hp','hp')||0x0,'min':0x0,'max':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,'hp','hp')||0x0,'temp':0x0,'tempmax':0x0,'dt':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,'hp','dt')||0x0,'mt':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,'hp','mt')||0x0},_0x36c73a[_0x4694e0(0x1fa)]={'stations':!![],'value':0x0,'thresholds':{0x0:0x0,0x1:0x0,0x2:0x0}},_0x36c73a['capacity']={'creature':Renderer[_0x4694e0(0x1a3)][_0x4694e0(0x19a)](_0x1d3fe0),'cargo':typeof _0x1d3fe0[_0x4694e0(0x1f7)]===_0x4694e0(0x1bd)?0x0:_0x1d3fe0[_0x4694e0(0x1f7)]};break;}case _0x4694e0(0x206):{_0x36c73a['ac']={'flat':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,_0x4694e0(0x1d0),'ac')||null,'motionless':''},_0x36c73a['hp']={'value':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,_0x4694e0(0x1d0),'hp')||null,'min':null,'max':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,_0x4694e0(0x1d0),'hp')||null,'temp':null,'tempmax':null,'dt':MiscUtil[_0x4694e0(0x1c2)](_0x1d3fe0,_0x4694e0(0x1d0),'dt')||null,'mt':null};let _0x246737=0x0;const _0xbed3e3={0x0:0x0,0x1:0x0,0x2:0x0};_0x1d3fe0[_0x4694e0(0x1ec)]&&Object[_0x4694e0(0x1fe)](_0x1d3fe0['actionThresholds'])[_0x4694e0(0x212)](([_0x289ab3],[_0x18753e])=>SortUtil[_0x4694e0(0x205)](Number(_0x18753e),Number(_0x289ab3)))['slice'](0x0,0x3)['forEach'](([_0x552dae,_0x2f4f91],_0x2adefe)=>{_0xbed3e3[_0x2adefe]=_0x2f4f91;});_0x36c73a[_0x4694e0(0x1fa)]={'stations':![],'value':_0x246737,'thresholds':_0xbed3e3},_0x36c73a[_0x4694e0(0x1ac)]={'creature':Renderer[_0x4694e0(0x1a3)][_0x4694e0(0x1f8)](_0x1d3fe0),'cargo':typeof _0x1d3fe0[_0x4694e0(0x1f7)]===_0x4694e0(0x1bd)?0x0:_0x1d3fe0[_0x4694e0(0x1f7)]};break;}default:throw new Error('Unhandled\x20vehicle\x20type\x20\x22'+_0x1d3fe0[_0x4694e0(0x1df)]+'\x22');}_0x5c9fb9[_0x4694e0(0x198)]=_0x36c73a;}async[_0x4ac083(0x1ea)](_0x1081da,_0x5b4e29,_0x407408){const _0x32b6fd=_0x4ac083,_0x23d9db={};_0x23d9db[_0x32b6fd(0x1dc)]={'value':await this['_pGetBiographyValue'](_0x1081da,_0x407408[_0x32b6fd(0x1f2)],{'isImportText':Config['get'](this[_0x32b6fd(0x209)],'isImportBio'),'isImportImages':Config['get'](this[_0x32b6fd(0x209)],_0x32b6fd(0x1b5))})},_0x23d9db[_0x32b6fd(0x213)]=UtilDataConverter['getSourceWithPagePart'](_0x1081da),_0x5b4e29[_0x32b6fd(0x1f4)]=_0x23d9db;}[_0x4ac083(0x1a2)](_0x154153,_0x5a4373){const _0x39c582=_0x4ac083,_0x2e5b26={};_0x2e5b26[_0x39c582(0x1bc)]=UtilActors[_0x39c582(0x1a8)][_0x154153[_0x39c582(0x1bc)]]||_0x39c582(0x19d);switch(_0x154153[_0x39c582(0x1df)]){case'INFWAR':{_0x2e5b26[_0x39c582(0x1c7)]=_0x154153[_0x39c582(0x1f5)][_0x39c582(0x1ba)]()+'\x20lb.';break;}case _0x39c582(0x206):{_0x2e5b26['dimensions']=_0x154153[_0x39c582(0x1c7)]?_0x154153[_0x39c582(0x1c7)][_0x39c582(0x202)]('\x20by\x20'):'';break;}default:throw new Error(_0x39c582(0x1ee)+_0x154153[_0x39c582(0x1df)]+'\x22');}this[_0x39c582(0x210)](_0x154153,_0x2e5b26),_0x5a4373['traits']=_0x2e5b26;}[_0x4ac083(0x1de)](_0x35c1a5,_0x362129){_0x362129['currency']={'pp':0x0,'gp':0x0,'ep':0x0,'sp':0x0,'cp':0x0};}async[_0x4ac083(0x1d5)](_0x19dd0a,_0x261f10,_0x12e1c7,_0x1798eb){const _0x38d243=_0x4ac083;await this[_0x38d243(0x1cd)](_0x19dd0a,_0x261f10,_0x12e1c7,_0x1798eb),await this['_pImportEntry_pFillItems_infWar'](_0x19dd0a,_0x261f10,_0x12e1c7,_0x1798eb);const _0x36b45d=_0x1798eb['isTemp']||this[_0x38d243(0x1ca)]!=null;await UtilActors[_0x38d243(0x1f6)](_0x12e1c7[_0x38d243(0x1c8)],_0x12e1c7[_0x38d243(0x1bf)],{'isTemporary':_0x36b45d});}async[_0x4ac083(0x1cd)](_0x48cfe8,_0x3c66eb,_0x9d5c6b,_0x4d5c46){const _0x578184=_0x4ac083;_0x48cfe8[_0x578184(0x1a7)]&&await _0x48cfe8[_0x578184(0x1a7)]['pSerialAwaitMap'](_0x49b32e=>this[_0x578184(0x1dd)](_0x48cfe8,_0x3c66eb,_0x9d5c6b,_0x4d5c46,_0x49b32e,_0x578184(0x1a7))),_0x48cfe8['movement']&&await _0x48cfe8[_0x578184(0x1fd)][_0x578184(0x20c)](_0x67dc27=>this[_0x578184(0x1dd)](_0x48cfe8,_0x3c66eb,_0x9d5c6b,_0x4d5c46,_0x67dc27,_0x578184(0x1fd))),_0x48cfe8[_0x578184(0x1f9)]&&await _0x48cfe8[_0x578184(0x1f9)]['pSerialAwaitMap'](_0x2f0a51=>this[_0x578184(0x1be)](_0x48cfe8,_0x3c66eb,_0x9d5c6b,_0x4d5c46,_0x2f0a51)),_0x48cfe8[_0x578184(0x1c6)]&&await _0x48cfe8[_0x578184(0x1c6)]['pSerialAwaitMap'](_0x5adfd1=>this[_0x578184(0x208)](_0x48cfe8,_0x3c66eb,_0x9d5c6b,_0x4d5c46,_0x5adfd1)),_0x48cfe8['action']&&await this[_0x578184(0x20d)](_0x48cfe8,_0x3c66eb,_0x9d5c6b,_0x4d5c46,_0x48cfe8['action']);}async[_0x4ac083(0x1dd)](_0x64bf9d,_0x1474f2,_0xea76e8,_0x25e02e,_0x30f1d0,_0x4caada){const _0x14d7bc=_0x4ac083,_0xf8d8c8=await DataConverterVehicle[_0x14d7bc(0x1a6)](_0x64bf9d,_0x30f1d0,_0x4caada);if(!_0xf8d8c8)return;_0xea76e8[_0x14d7bc(0x1bf)][_0x14d7bc(0x1e6)](_0xf8d8c8);}async[_0x4ac083(0x1be)](_0x48e287,_0x2dcdfa,_0xa337a8,_0x5591ed,_0x260a63){const _0x51bc55=_0x4ac083,_0x4a04c3=await DataConverterVehicle['pGetShipWeaponItem'](_0x48e287,_0x260a63);if(!_0x4a04c3)return;_0xa337a8[_0x51bc55(0x1bf)][_0x51bc55(0x1e6)](_0x4a04c3);}async[_0x4ac083(0x208)](_0xa3753,_0x443602,_0xfed0d5,_0x5dab6b,_0x8458a7){const _0x36fd3e=_0x4ac083,_0x2e3145=await DataConverterVehicle[_0x36fd3e(0x1b2)](_0xa3753,_0x8458a7);if(!_0x2e3145)return;_0xfed0d5[_0x36fd3e(0x1bf)][_0x36fd3e(0x1e6)](_0x2e3145);}async[_0x4ac083(0x20d)](_0x52ecb2,_0x7daeda,_0x8b4c5c,_0x594222,_0xf2a6e3){const _0x281f50=_0x4ac083,_0x458c07=await DataConverterVehicle['pGetShipActionItems'](_0x52ecb2,_0xf2a6e3);if(!_0x458c07||!_0x458c07[_0x281f50(0x1ff)])return;_0x8b4c5c['items'][_0x281f50(0x1e6)](..._0x458c07);}async['_pImportEntry_pFillItems_infWar'](_0x5401db,_0x174395,_0x46079a,_0x201f0a){const _0x835748=_0x4ac083;_0x5401db['trait']&&await _0x5401db[_0x835748(0x1ed)][_0x835748(0x20c)](_0x752d7c=>this['_pAddInfWarTrait'](_0x5401db,_0x174395,_0x46079a,_0x201f0a,_0x752d7c)),_0x5401db[_0x835748(0x1e1)]&&await _0x5401db[_0x835748(0x1e1)][_0x835748(0x20c)](_0x3168c9=>this['_pAddInfWarActionStation'](_0x5401db,_0x174395,_0x46079a,_0x201f0a,_0x3168c9)),_0x5401db[_0x835748(0x1b1)]&&await _0x5401db[_0x835748(0x1b1)][_0x835748(0x20c)](_0x2d38fd=>this[_0x835748(0x1c4)](_0x5401db,_0x174395,_0x46079a,_0x201f0a,_0x2d38fd));}async[_0x4ac083(0x20a)](_0x248032,_0xbde862,_0x139d2f,_0x4332c1,_0x47927d){const _0x6503ac=_0x4ac083,_0x83894c=await DataConverter[_0x6503ac(0x1f1)](_0x47927d,{'fvttType':_0x6503ac(0x1c3),'mode':'vehicle','entity':_0x248032,'source':_0x248032[_0x6503ac(0x213)],'actor':{'data':_0xbde862},'img':_0x6503ac(0x1ab)+SharedConsts['MODULE_NAME']+_0x6503ac(0x1e3)});_0x139d2f['items'][_0x6503ac(0x1e6)](_0x83894c);}async[_0x4ac083(0x1d3)](_0x2ce866,_0x2eae31,_0x3fbaa1,_0x4c3ae6,_0x381b49){const _0x74fefe=_0x4ac083,_0x595ec4=await DataConverterVehicle['pGetInfWarActionItem'](_0x2ce866,_0x381b49);if(!_0x595ec4)return;_0x3fbaa1['items'][_0x74fefe(0x1e6)](_0x595ec4);}async[_0x4ac083(0x1c4)](_0x352dd8,_0xfdc1ab,_0xb34c4c,_0x53b51d,_0xbc5b8d){const _0x1bb4e2=_0x4ac083,_0x40dc8c=await DataConverter['pGetItemActorPassive'](_0xbc5b8d,{'activationType':_0x1bb4e2(0x1b1),'activationCost':0x1,'fvttType':_0x1bb4e2(0x1c3),'mode':_0x1bb4e2(0x1a3),'entity':_0x352dd8,'source':_0x352dd8[_0x1bb4e2(0x213)],'actor':{'data':_0xfdc1ab},'img':_0x1bb4e2(0x1ab)+SharedConsts[_0x1bb4e2(0x20e)]+_0x1bb4e2(0x1e3)});_0xb34c4c[_0x1bb4e2(0x1bf)][_0x1bb4e2(0x1e6)](_0x40dc8c);}[_0x4ac083(0x203)](_0x183e54,_0x5c99df){const _0x33b682=_0x4ac083;_0x5c99df[_0x33b682(0x1bb)]={'crew':[],'passengers':[]};}}ImportListVehicle['ImportEntryOpts']=class extends ImportListActor[_0x4ac083(0x1b6)]{};export{ImportListVehicle};