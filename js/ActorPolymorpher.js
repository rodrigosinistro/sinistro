const _0x109b88=_0x2e0a;(function(_0xaee568,_0x410b16){const _0x243230=_0x2e0a,_0x58137d=_0xaee568();while(!![]){try{const _0x38f216=parseInt(_0x243230(0x18a))/0x1*(parseInt(_0x243230(0x14f))/0x2)+parseInt(_0x243230(0x130))/0x3+parseInt(_0x243230(0x131))/0x4+-parseInt(_0x243230(0x150))/0x5*(parseInt(_0x243230(0x15d))/0x6)+-parseInt(_0x243230(0x188))/0x7*(parseInt(_0x243230(0x12f))/0x8)+-parseInt(_0x243230(0x139))/0x9*(-parseInt(_0x243230(0x176))/0xa)+-parseInt(_0x243230(0x194))/0xb;if(_0x38f216===_0x410b16)break;else _0x58137d['push'](_0x58137d['shift']());}catch(_0x299359){_0x58137d['push'](_0x58137d['shift']());}}}(_0x3e6b,0xeaa37));function _0x3e6b(){const _0x1e19d0=['Select\x20Source\x20(Polymorphing\x20Actor\x20\x22','2xPzSdh','40DvVhwx','Customize\x20and\x20Select...','systems/dnd5e/templates/apps/polymorph-prompt.html','info','get','body','\x20has\x20transformed\x20back\x20into\x20their\x20original\x20form,\x20and\x20requests\x20you\x20delete\x20their\x20temporary\x20polymorphed\x20actor\x20\x22','originalActor','<i\x20class=\x22fas\x20fa-fw\x20fa-times\x22></i>','init','_pOpen','userId','This\x20actor\x20does\x20not\x20appear\x20to\x20be\x20transformedâ€”this\x20may\x20be\x20a\x20bug!','410556JyGDiD','_init_player','dialog','delete','Deleted\x20actor\x20\x22','DND5E.Polymorph','Open\x20Polymorpher\x20Targeting\x20Current\x20Sheet','checked','getCurrentImportableSheetDocumentMeta','isToken','buttonsAdditional','data','\x22\x20not\x20found!','notfications','Select','Creature','accept','escapeQuotes','users','Creatures','\x20requests\x20you\x20delete\x20their\x20temporary\x20polymorph\x20template\x20actor\x20\x22','attr','minimumRolePolymorph','notifications','_init_gm','745910fmRyHN','closest','btn-run-mods','user','.sheet.actor','settings','DND5E.PolymorphWildShape','pGetUserChoice','warn','getSafe','ImportList','Open\x20List','pGetUserBoolean','input','i18n','<i\x20class=\x22fas\x20fa-fw\x20fa-paw\x22></i>','Open\x20Polymorpher\x20Targeting\x20Player\x20Character','transformOptions','203kvnuna','Are\x20You\x20Sure?','563689kZBVPw','.\x22\x20Proceed?</p><div><button\x20data-plut-poly-actor-delete=\x22','set','localize','click','data-plut-poly-actor-delete','map','Actor','_pSendPlayerUndoTransformationRequest','dnd5e','15646301PEzHPY','allowPolymorphing','replace','filter','_preInit_registerKeybinds','you\x20lack\x20actor\x20creation\x20permissions','Cannot\x20polymorph:\x20','flags','<i\x20class=\x22fas\x20fa-fw\x20fa-check\x22></i>','folder','_isActorTransformed','ChatMessage','actor-','data-plut-poly-temp-actor-delete','MODULE_NAME','.restore-transformation','keybindings','transformTokens','actor','Select\x20Creature','Configure\x20and\x20Open\x20List','preInit','<i\x20class=\x22fas\x20fa-fw\x20fa-pastafarianism\x22></i>','isGM','DND5E','mix','_pDeleteRequestMessage','\x22\x20contains\x20more\x20contents\x20than\x20expected.<br>Delete\x20it\x20anyway?','collection','<p>','DND5E.PolymorphPromptTitle','content','Actor\x20\x22','instance','This\x20actor\x20does\x20not\x20appear\x20to\x20be\x20transformed.\x20Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20actor,\x20which\x20may\x20be\x20an\x20original\x20actor?','length','_doFakeActorDrop','getPlayerActor','222672hJoyop','3121554sITUPg','1971420phHiVd','ACTOR_CREATE','_pSendPlayerDeleteTempActorRequest','name','currentTarget','Delete\x20Temp\x20Folder?','system-wide\x20player\x20polymorphing\x20is\x20disabled','creatures-actorPolymorpher','198bsFgdY','utils','contents','polymorphSettings','.\x22\x20Proceed?</p><div><button\x20data-plut-poly-temp-actor-delete=\x22','with','\x22>Delete</button></div>','actorPolymorpher','The\x20temp\x20folder\x20\x22','canUserCreateFolders','tools','register','ActorPolymorpher__openForCurrentSheet','sounds/notify.wav','getData','each','can','Cancel','tempFolderName','transformInto','create'];_0x3e6b=function(){return _0x1e19d0;};return _0x3e6b();}import{ImportListCreature}from'./ImportListCreature.js';import{MixinUserChooseImporter}from'./ImportList.js';import{UtilGameSettings}from'./UtilGameSettings.js';import{Config}from'./Config.js';import{Util}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilKeybinding}from'./UtilKeybinding.js';class ActorPolymorpher{static[_0x109b88(0x11e)](){const _0x5985b1=_0x109b88;this[_0x5985b1(0x198)]();}static[_0x109b88(0x198)](){const _0x29855b=_0x109b88,_0x31fbf0=()=>{const _0x2cf519=_0x2e0a,_0x359eea=UtilKeybinding[_0x2cf519(0x12e)]({'minRole':Config[_0x2cf519(0x154)](_0x2cf519(0x143),_0x2cf519(0x173))});if(!_0x359eea)return!![];return this[_0x2cf519(0x15a)]({'actor':_0x359eea}),!![];},_0x56ba8d=()=>{const _0x56efa8=_0x2e0a,_0x413597=UtilKeybinding[_0x56efa8(0x165)]({'isRequireActor':!![],'isRequireOwnership':!![],'minRole':Config[_0x56efa8(0x154)](_0x56efa8(0x143),_0x56efa8(0x173))});if(!_0x413597?.[_0x56efa8(0x1a6)])return!![];return this[_0x56efa8(0x15a)]({..._0x413597}),!![];};game[_0x29855b(0x1a4)][_0x29855b(0x144)](SharedConsts[_0x29855b(0x1a2)],'ActorPolymorpher__openForCharacter',{'name':_0x29855b(0x186),'editable':[],'onDown':()=>_0x31fbf0()}),game[_0x29855b(0x1a4)]['register'](SharedConsts[_0x29855b(0x1a2)],_0x29855b(0x145),{'name':_0x29855b(0x163),'editable':[],'onDown':()=>_0x56ba8d()});}static[_0x109b88(0x159)](){const _0x18fdc5=_0x109b88;if(game[_0x18fdc5(0x179)][_0x18fdc5(0x120)])this[_0x18fdc5(0x175)]();else this['_init_player']();}static['_isActorTransformed'](_0x3ccfad){const _0x5bdcbe=_0x109b88;if(MiscUtil[_0x5bdcbe(0x154)](_0x3ccfad['data'][_0x5bdcbe(0x19b)],'dnd5e',_0x5bdcbe(0x157)))return!![];if(MiscUtil[_0x5bdcbe(0x154)](_0x3ccfad[_0x5bdcbe(0x168)][_0x5bdcbe(0x19b)],'dnd5e',_0x5bdcbe(0x187)))return!![];return![];}static[_0x109b88(0x192)]({actorId:_0xdb8ea6}){const _0x46d644=_0x109b88,_0x4f6f83=CONFIG[_0x46d644(0x191)][_0x46d644(0x125)][_0x46d644(0x12a)][_0x46d644(0x154)](_0xdb8ea6);return ChatMessage[_0x46d644(0x14d)]({'sound':_0x46d644(0x146),'content':'<p>'+game[_0x46d644(0x179)][_0x46d644(0x134)]+_0x46d644(0x156)+_0x4f6f83[_0x46d644(0x134)][_0x46d644(0x16e)]()+_0x46d644(0x18b)+_0xdb8ea6+_0x46d644(0x13f),'user':game['userId'],'type':0x4,'whisper':game[_0x46d644(0x16f)][_0x46d644(0x13b)][_0x46d644(0x197)](_0x314bb8=>_0x314bb8[_0x46d644(0x120)])[_0x46d644(0x190)](_0x544aaf=>_0x544aaf['id'])});}static[_0x109b88(0x133)]({actorId:_0x428203}){const _0x2430ef=_0x109b88,_0x2b3814=CONFIG[_0x2430ef(0x191)]['collection']['instance'][_0x2430ef(0x154)](_0x428203);return ChatMessage[_0x2430ef(0x14d)]({'sound':_0x2430ef(0x146),'content':_0x2430ef(0x126)+game[_0x2430ef(0x179)][_0x2430ef(0x134)]+_0x2430ef(0x171)+_0x2b3814[_0x2430ef(0x134)][_0x2430ef(0x16e)]()+_0x2430ef(0x13d)+_0x428203+'\x22>Delete</button></div>','user':game[_0x2430ef(0x15b)],'type':0x4,'whisper':game['users']['contents'][_0x2430ef(0x197)](_0x286d54=>_0x286d54['isGM'])[_0x2430ef(0x190)](_0xc329af=>_0xc329af['id'])});}static async['_pDeleteRequestMessage']({ele:_0x58f52a}){const _0x4f7544=_0x109b88,_0x146c18=$(_0x58f52a)[_0x4f7544(0x177)]('[data-message-id]')[_0x4f7544(0x172)]('data-message-id');if(!_0x146c18)return;const _0x315585=CONFIG[_0x4f7544(0x19f)][_0x4f7544(0x125)]['instance'][_0x4f7544(0x154)](_0x146c18);if(_0x315585)await _0x315585[_0x4f7544(0x160)]();}static[_0x109b88(0x15e)](){const _0x1a8dcc=_0x109b88;$(document[_0x1a8dcc(0x155)])['on'](_0x1a8dcc(0x18e),_0x1a8dcc(0x1a3),_0x40b01d=>{const _0x2c76ec=_0x1a8dcc,_0x378394=$(_0x40b01d['currentTarget'])[_0x2c76ec(0x177)](_0x2c76ec(0x17a))['attr']('id')[_0x2c76ec(0x196)](_0x2c76ec(0x1a0),''),_0x36649a=CONFIG['Actor'][_0x2c76ec(0x125)]['instance'][_0x2c76ec(0x154)](_0x378394);if(!this[_0x2c76ec(0x19e)](_0x36649a)){const _0x67db05=_0x2c76ec(0x15c);console[_0x2c76ec(0x17e)](_0x67db05),ui[_0x2c76ec(0x16a)][_0x2c76ec(0x17e)](_0x67db05);}this['_pSendPlayerUndoTransformationRequest']({'actorId':_0x378394});});}static['_init_gm'](){const _0x3e7f5e=_0x109b88;$(document['body'])['on'](_0x3e7f5e(0x18e),'[data-plut-poly-actor-delete]',async _0xcd9285=>{const _0x5722fb=_0x3e7f5e,_0x5cc53f=$(_0xcd9285[_0x5722fb(0x135)])[_0x5722fb(0x172)](_0x5722fb(0x18f)),_0x4df266=CONFIG[_0x5722fb(0x191)][_0x5722fb(0x125)][_0x5722fb(0x12a)][_0x5722fb(0x154)](_0x5cc53f);if(!_0x4df266)return ui[_0x5722fb(0x174)][_0x5722fb(0x17e)](_0x5722fb(0x129)+_0x5cc53f+_0x5722fb(0x169));if(!this['_isActorTransformed'](_0x4df266)){const _0x22913d=await InputUiUtil[_0x5722fb(0x182)]({'title':_0x5722fb(0x189),'htmlDescription':_0x5722fb(0x12b)});if(!_0x22913d)return;}await _0x4df266[_0x5722fb(0x160)](),ui['notifications']['info'](_0x5722fb(0x161)+_0x4df266['name']+'\x22'),await this[_0x5722fb(0x123)]({'ele':_0xcd9285[_0x5722fb(0x135)]});})['on']('click','[data-plut-poly-temp-actor-delete]',async _0x1b0049=>{const _0x1d468f=_0x3e7f5e,_0x3d99bd=$(_0x1b0049[_0x1d468f(0x135)])[_0x1d468f(0x172)](_0x1d468f(0x1a1)),_0x1c65a1=CONFIG['Actor'][_0x1d468f(0x125)][_0x1d468f(0x12a)][_0x1d468f(0x154)](_0x3d99bd);if(!_0x1c65a1)return ui[_0x1d468f(0x174)][_0x1d468f(0x17e)]('Actor\x20\x22'+_0x3d99bd+_0x1d468f(0x169));await _0x1c65a1[_0x1d468f(0x160)](),ui[_0x1d468f(0x174)][_0x1d468f(0x153)](_0x1d468f(0x161)+_0x1c65a1['name']+'\x22'),await this['_pDeleteRequestMessage']({'ele':_0x1b0049[_0x1d468f(0x135)]});});}static async['pHandleButtonClick'](_0x322a86,_0x6c797e,_0x16b5ac,_0x4b8df1){const _0x15b867=_0x109b88;return this[_0x15b867(0x15a)]({'actor':_0x6c797e[_0x15b867(0x1a6)]});}static async['_pOpen']({actor:_0x2927f0}){const _0x398cfa=_0x109b88;if(!game['user'][_0x398cfa(0x120)]){const _0x3d8f8d=[game[_0x398cfa(0x179)][_0x398cfa(0x149)](_0x398cfa(0x132))?'':_0x398cfa(0x199),UtilGameSettings['getSafe'](_0x398cfa(0x193),_0x398cfa(0x195))?'':_0x398cfa(0x137)]['filter'](Boolean);if(_0x3d8f8d['length'])return ui[_0x398cfa(0x174)]['warn'](_0x398cfa(0x19a)+_0x3d8f8d['join'](';\x20'));}const _0x46bd55=await ActorPolymorpher[_0x398cfa(0x180)][_0x398cfa(0x17d)]({'id':_0x398cfa(0x138),'name':_0x398cfa(0x170),'singleName':_0x398cfa(0x16c),'wizardTitleWindow':_0x398cfa(0x14e)+_0x2927f0[_0x398cfa(0x134)]+'\x22)','wizardTitlePanel3':_0x398cfa(0x1a8),'wizardTitleButtonOpenImporter':_0x398cfa(0x181)},_0x398cfa(0x140));if(_0x46bd55==null)return;try{await this['_doFakeActorDrop'](_0x2927f0,_0x46bd55);}catch(_0x45743c){console['error'](_0x45743c);}if(Util['Fvtt'][_0x398cfa(0x142)]()){if(_0x46bd55[_0x398cfa(0x19d)]['children'][_0x398cfa(0x12c)]||_0x46bd55['folder'][_0x398cfa(0x128)][_0x398cfa(0x12c)]>0x1){const _0x39e5b7=await InputUiUtil[_0x398cfa(0x182)]({'title':_0x398cfa(0x136),'htmlDescription':_0x398cfa(0x141)+Config[_0x398cfa(0x154)]('import',_0x398cfa(0x14b))+_0x398cfa(0x124)});if(!_0x39e5b7)return;}await _0x46bd55['folder'][_0x398cfa(0x160)]({'deleteSubfolders':!![],'deleteContents':!![]});return;}this[_0x398cfa(0x133)]({'actorId':_0x46bd55['id']});}static async[_0x109b88(0x12d)](_0x23f1de,_0x5b9f9d){const _0x3d80dd=_0x109b88,_0x2e2e41=_0x10a72f=>{const _0x3e86f5=_0x2e0a,_0x4d1ccb={};_0x10a72f['find'](_0x3e86f5(0x183))[_0x3e86f5(0x148)]((_0x102b9e,_0x47be0d)=>{const _0xad044e=_0x3e86f5;_0x4d1ccb[_0x47be0d[_0xad044e(0x134)]]=_0x47be0d[_0xad044e(0x164)];});const _0x1aa5b4=foundry[_0x3e86f5(0x13a)]['mergeObject'](UtilGameSettings[_0x3e86f5(0x17f)](_0x3e86f5(0x193),_0x3e86f5(0x13c))||{},_0x4d1ccb);return game[_0x3e86f5(0x17b)][_0x3e86f5(0x18c)](_0x3e86f5(0x193),_0x3e86f5(0x13c),_0x1aa5b4),_0x1aa5b4;};return new Dialog({'title':game[_0x3d80dd(0x184)][_0x3d80dd(0x18d)](_0x3d80dd(0x127)),'content':{'options':UtilGameSettings['getSafe'](_0x3d80dd(0x193),_0x3d80dd(0x13c)),'i18n':CONFIG[_0x3d80dd(0x121)][_0x3d80dd(0x13c)],'isToken':_0x23f1de[_0x3d80dd(0x166)]},'default':_0x3d80dd(0x16d),'buttons':{'accept':{'icon':_0x3d80dd(0x19c),'label':game[_0x3d80dd(0x184)][_0x3d80dd(0x18d)]('DND5E.PolymorphAcceptSettings'),'callback':_0x4686dd=>_0x23f1de[_0x3d80dd(0x14c)](_0x5b9f9d,_0x2e2e41(_0x4686dd))},'wildshape':{'icon':_0x3d80dd(0x185),'label':game[_0x3d80dd(0x184)][_0x3d80dd(0x18d)](_0x3d80dd(0x17c)),'callback':_0x2b0c0a=>_0x23f1de[_0x3d80dd(0x14c)](_0x5b9f9d,{'keepBio':!![],'keepClass':!![],'keepMental':!![],'mergeSaves':!![],'mergeSkills':!![],'transformTokens':_0x2e2e41(_0x2b0c0a)[_0x3d80dd(0x1a5)]})},'polymorph':{'icon':_0x3d80dd(0x11f),'label':game['i18n']['localize'](_0x3d80dd(0x162)),'callback':_0x18748d=>_0x23f1de[_0x3d80dd(0x14c)](_0x5b9f9d,{'transformTokens':_0x2e2e41(_0x18748d)['transformTokens']})},'cancel':{'icon':_0x3d80dd(0x158),'label':game[_0x3d80dd(0x184)][_0x3d80dd(0x18d)](_0x3d80dd(0x14a))}}},{'classes':[_0x3d80dd(0x15f),_0x3d80dd(0x193)],'width':0x258,'template':_0x3d80dd(0x152)})['render'](!![]);}}ActorPolymorpher[_0x109b88(0x180)]=class extends MiscUtil[_0x109b88(0x122)](ImportListCreature)[_0x109b88(0x13e)](MixinUserChooseImporter){constructor(_0x8e74b){const _0x563c54=_0x109b88;super(_0x8e74b,{'title':_0x563c54(0x1a7)},{'titleButtonRun':_0x563c54(0x16b),'isNotDroppable':![]},{'isForceImportToTempDirectory':!![]});}[_0x109b88(0x147)](){const _0x3c57d4=_0x109b88,_0x203916=super['getData']();return _0x203916[_0x3c57d4(0x167)]=[{'name':_0x3c57d4(0x178),'text':_0x3c57d4(0x151)}],_0x203916;}};function _0x2e0a(_0xba253f,_0x49c073){const _0x3e6b1e=_0x3e6b();return _0x2e0a=function(_0x2e0a84,_0x38222e){_0x2e0a84=_0x2e0a84-0x11e;let _0x49f765=_0x3e6b1e[_0x2e0a84];return _0x49f765;},_0x2e0a(_0xba253f,_0x49c073);}export{ActorPolymorpher};