const _0x2e9507=_0x2e67;(function(_0x115496,_0x26253d){const _0x40b5c6=_0x2e67,_0x1eeece=_0x115496();while(!![]){try{const _0x508bc7=-parseInt(_0x40b5c6(0x1eb))/0x1+-parseInt(_0x40b5c6(0x164))/0x2+parseInt(_0x40b5c6(0x10e))/0x3*(parseInt(_0x40b5c6(0x236))/0x4)+parseInt(_0x40b5c6(0x143))/0x5+parseInt(_0x40b5c6(0x1fc))/0x6+parseInt(_0x40b5c6(0x145))/0x7+-parseInt(_0x40b5c6(0x1a1))/0x8;if(_0x508bc7===_0x26253d)break;else _0x1eeece['push'](_0x1eeece['shift']());}catch(_0x31f0e6){_0x1eeece['push'](_0x1eeece['shift']());}}}(_0x4722,0x3e8d9));import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';import{JqueryExtension}from'./JqueryExtension.js';import{Config}from'./Config.js';import{GameStorage}from'./GameStorage.js';import{LGT,Util}from'./Util.js';import{UtilNotifications}from'./UtilNotifications.js';import{UtilHooks}from'./UtilHooks.js';import{UtilApplications}from'./UtilApplications.js';class NotAxios{static async[_0x2e9507(0x122)](_0x5b6ec3){const _0x170447=_0x2e9507;return{'data':await(await fetch(_0x5b6ec3))[_0x170447(0x1d6)]()};}}function _0x4722(){const _0x3d37ab=['ascSortLower','HOMEBREW_INDEX__PROP','HOMEBREW_INDEX__SOURCE','PG_SPELLS','data/deities.json','_MAX_Z_INDEX','STR_SEE_CONSOLE','209052tzCaEm','image','_pGetAdventureBookIndex','toLowerCase','pGetCharCreationOptionSideData','every','URL_TO_HASH_BUILDER','origin','pGetImageUrlFromFluff','filter','_pGetShowModal','DATA_URL_PSIONICS','data/','external','getBookUrl','info','getSpellUrl','item','pLoadPropIndex','pGetActionSideData','_pGetHomebrewIndices','P_GET_BACKEND_VERSION','HOMEBREW_INDEX__ABBREVIATION','MIN_Z_INDEX','img','getAdventureUrl','hasToken','data/foundry-races.json','_getHomebrewName','data/foundry-optionalfeatures.json','some','_isCustomBaseSiteUrl','pGetIconLookup','pLoadImporterSourceSpecial','loadJSON','pBuildList','baseUrl','Z_INDEX_MAX_FOUNDRY','pDoPreload','DATA_URL_VARIANTRULES','pOptionallySaveImageToServerAndGetUrl','notifyOnce','legacyDiceToString','image/','blob','\x20The\x20original\x20image\x20URL\x20will\x20be\x20used\x20instead.','localHomebrew','_pSaveImageToServerAndGetUrl_pCreateDirectories','Failed\x20to\x20load\x20homebrew\x20index!\x20','data/feats.json','—falling\x20back\x20on\x20alternate\x20loader\x20(backend\x20mod).','internal','localImageDirectoryPath','getRollableEntryDice','_CACHED_RENDERER_HOVER_CACHE_AND_GET','getInternalImageUrl','abbreviations','data/charcreationoptions.json','[[/r\x20','now','href','6703432hHsFBq','source','_versionBase_source','pGetRaceSideData','monster','loadRawJSON','pSaveImageToServerAndGetUrl','pGetShowApplicationModal','Could\x20not\x20check\x20for\x20existing\x20files\x20when\x20saving\x20imported\x20images\x20to\x20server!','\x22blob\x22\x20and\x20\x22originalUrl\x22\x20arguments\x20are\x20mutually\x20exclusive!','_meta','data/bestiary/foundry.json','getBlankTokenUrl','import','MODULE_NAME','setBaseUrl','_canUploadFiles','pGetChangelog','entries','isNoLocalData','\x20index','%27','_CACHED_MONSTER_DO_BIND_COMPACT_CONTENT_HANDLERS','data/conditionsdiseases.json','isUseLocalImages','pGetRaces','getImageUrl','pGet','data-plut-hover-preload-options=\x22','init','RUN_TIME','has','modules/','getContent','isNonstandardSource','replace','initClasses','createDirectory','data/spells/foundry.json','startsWith','setBaseMediaUrl','DATA_URL_DEITIES','data/foundry-objects.json','\x22\x20data-plut-hover-preload-id=\x22','_initSourceLookup','_pDoCacheLocalBrew','data/foundry-actions.json','doToast','published','_pGetTokenUrl','_VET_SOURCE_LOOKUP','HOMEBREW_COLLECTION_INDEX','parse','json','Loaded\x20homebrew\x20index.','pathname','pGetCultBoonSideData','data/foundry-psionics.json','icon-','data/foundry-conditionsdiseases.json','_PATCHED_GET_ROLLABLE_ENTRY_DICE','DATA_URL_CHAR_CREATION_OPTIONS','data/foundry-rewards.json','post','Failed\x20to\x20load\x20local\x20homebrew','error','_BASE_SITE_URL','_isSaveableToServerUrl','/index.json','data/optionalfeatures.json','data/cultsboons.json','https://github.com/TheGiddyLimit/plutonium-next/tags','includes','_pGetLocalHomebrewList','243475CyGhUw','pHasTokenUrl','book','danger','data/psionics.json','warn','data/foundry-cultsboons.json','pAddToHomebrew','pGetRewardSideData','isLoadLocalHomebrewIndex','_RELEASE_URL','pGetLocalHomebrewSources','pGetWithCache','special','\x22\x20data-plut-hover-preload=\x22','_pSaveImageToServerAndGetUrl_','getFileUrl','2564832NSauxP','Could\x20not\x20directly\x20load\x20image\x20from\x20','unlock','data/actions.json','getMakePredefinedHover','image/jpg','rollerClick','url','!\x20Does\x20the\x20','$getHoverContent_fluff','notifications','pGetConditionDiseaseSideData','warning','doBindCompactContentHandlers','toMessage','baseURI','test','data/objects.json','1970-01-01','pRollEntry','race','https://example.com/','path','getTokenUrl','fnRender','cacheKey','can','data/foundry-feats.json','min','_isLocalUrl','_getAdventureBookUrl','getCreatureUrl','isExcluded','baseBrewUrl','browse','all','data/bestiary/','_pSaveImageToServerAndGetUrl_pGetBlob','vehicle','data/bestiary/index.json','DATA_URL_ACTIONS','pGetItemSideData','pGetClassSubclassSideData','DATA_URL_VEHICLES','pGetClassSubclassFeatures','type','pGetClient','?t=','data/backgrounds.json','trim','add','string','length','trap','data-plut-hover=\x22','images','brew','hover','4IQqlsm','CACHE_REQUESTS_IN_FLIGHT','pLoadBrewBySource','pGetVehicleUpgradeSideData','data/recipes.json','Unhandled\x20entity\x20type\x20\x22','DATA_URL_TRAPS_HAZARDS','$getHoverContent_statsCode','content','\x22\x20when\x20saving\x20imported\x20images\x20to\x20server!','pGetObjectSideData','data/foundry-trapshazards.json','getImageSavedToServerUrl','pAddBrewFromMemory','pGetOptionalFeatureSideData','options','push','CACHED_REQUESTS','stringify','keys','DATA_URL_CONDITIONSDISEASES','_LOCK_DOWNLOAD_IMAGE','baseMediaUrls','_CACHED_GET_ROLLABLE_ENTRY_DICE','pGetPsionicsSideData','_RE_HTTP_URL','EEXIST','data/changelog.json','bind','spell','$getHoverContent_miscCode','pSerialAwaitMap','pGetHomebrewSources','606399nGkcnU','getDirProp','DATA_URL_OBJECTS','baseSiteUrl','localHomebrewDirectoryPath','pGetSpellSideData','See\x20the\x20console\x20(F12\x20or\x20CTRL+SHIFT+J)\x20for\x20details.','object','backendEndpoint','DATA_URL_BACKGROUNDS','toRoll','_url','target','_versionBase_hasToken','img/','last','slice','SOURCE_JSON_TO_FULL','data/foundry-vehicles.json','pGetTokenUrl','get','prompt','adventure','pGetFeatSideData','data/spells/index.json','token','withUnpatchedDiceRendering','upload','pGetCreatureSideData','map','data/class/foundry.json','pGetRollableTables','application/json','isNoHomebrewIndexes','log','pGetTrapHazardSideData','data/vehicles.json','isAdmin','forEach','BASE_SITE_URL','.json','pGetVehicleSideData','then','doMonkeyPatchPreConfig','pDoMetaMerge','flat','split','BESTIARY_TOKEN_LOOKUP','_storage','data','tokenUrl','pGetPackageIndex','pCacheAndGet','2422565BoOPKu','toImport','2296203oXvUXX','pGetAllCreatures','copy','$getHoverContent_stats','_pubDate','sources','files','getCleanDiceString','abbreviation','pGetItems','\x22\x20exist?','join','pLock','data/languages.json','name','_isSaveTypedImagesToServer','\x20\x22<data_dir>/','pGetSpellIndex','Missing\x20getter!','user','$getHoverContent_generic','prop','_versionBase_name','HK_CONFIG_UPDATE'];_0x4722=function(){return _0x3d37ab;};return _0x4722();}function _0x2e67(_0x2d2388,_0x18a496){const _0x472202=_0x4722();return _0x2e67=function(_0x2e67ff,_0x325fb2){_0x2e67ff=_0x2e67ff-0xf8;let _0x4c2758=_0x472202[_0x2e67ff];return _0x4c2758;},_0x2e67(_0x2d2388,_0x18a496);}class Vetools{static async[_0x2e9507(0x18a)](){const _0x44266b=_0x2e9507;if(Config[_0x44266b(0x122)](_0x44266b(0x1ae),_0x44266b(0x12f)))return;Vetools[_0x44266b(0x178)]()[_0x44266b(0x138)](({source:_0x35f7c3,prop:_0x7ced92,abbreviation:_0x235ee5})=>{const _0x24c362=_0x44266b;Vetools[_0x24c362(0x15e)]=_0x7ced92,Vetools['HOMEBREW_INDEX__SOURCE']=_0x35f7c3,Vetools['HOMEBREW_INDEX__ABBREVIATION']=_0x235ee5,console[_0x24c362(0x130)](...LGT,_0x24c362(0x1d7));})['catch'](_0x452ccb=>{const _0x2517b5=_0x44266b;Vetools[_0x2517b5(0x15e)]={},Vetools[_0x2517b5(0x15f)]={},Vetools[_0x2517b5(0x17a)]={},ui['notifications'][_0x2517b5(0x1e2)](_0x2517b5(0x194)+VeCt[_0x2517b5(0x163)]),setTimeout(()=>{throw _0x452ccb;});});}static[_0x2e9507(0x128)](_0x1e5626){const _0x2be781=_0x2e9507;Renderer[_0x2be781(0x199)]=Vetools[_0x2be781(0x104)];const _0x528b3e=_0x1e5626();return Renderer['getRollableEntryDice']=Vetools[_0x2be781(0x1dd)],_0x528b3e;}static['withCustomDiceRenderingPatch'](_0x45fab5,_0x15773d){const _0x528aed=_0x2e9507;Renderer[_0x528aed(0x199)]=_0x15773d;const _0x4505bb=_0x45fab5();return Renderer[_0x528aed(0x199)]=Vetools['_PATCHED_GET_ROLLABLE_ENTRY_DICE'],_0x4505bb;}static[_0x2e9507(0x14c)](_0xd711ec){const _0x5b0f46=_0x2e9507;return _0xd711ec[_0x5b0f46(0x1c4)](/×/g,'*')['replace'](/÷/g,'/')[_0x5b0f46(0x1c4)](/#\$.*?\$#/g,'0');}static[_0x2e9507(0x139)](){const _0x39f171=_0x2e9507;VeCt['STR_SEE_CONSOLE']=_0x39f171(0x114),StorageUtil['pSet']=GameStorage['pSetClient'][_0x39f171(0x109)](GameStorage),StorageUtil['pGet']=GameStorage[_0x39f171(0x22a)]['bind'](GameStorage);}static['doMonkeyPatchPostConfig'](){const _0x2bcb38=_0x2e9507;JqueryExtension[_0x2bcb38(0x1be)](),this[_0x2bcb38(0x1cd)](),UtilsChangelog[_0x2bcb38(0x1f5)]=_0x2bcb38(0x1e8);const _0x105161=()=>{const _0x5cffd4=_0x2bcb38;Renderer['get']()[_0x5cffd4(0x1b0)](Vetools[_0x5cffd4(0x135)]);if(Config[_0x5cffd4(0x122)](_0x5cffd4(0x1ae),_0x5cffd4(0x1b9))){const _0x342c0e=(Config[_0x5cffd4(0x122)](_0x5cffd4(0x1ae),'localImageDirectoryPath')+'/')['replace'](/\/+$/,'/');Renderer[_0x5cffd4(0x122)]()['setBaseMediaUrl'](_0x5cffd4(0x17c),_0x342c0e);return;}if(this[_0x5cffd4(0x183)]()){Renderer['get']()['setBaseMediaUrl'](_0x5cffd4(0x17c),Vetools[_0x5cffd4(0x135)]);return;}Renderer[_0x5cffd4(0x122)]()[_0x5cffd4(0x1c9)](_0x5cffd4(0x17c),null);};_0x105161(),UtilHooks['on'](UtilHooks[_0x2bcb38(0x15c)],_0x105161),Renderer[_0x2bcb38(0x235)][_0x2bcb38(0x17b)]=Consts[_0x2bcb38(0x189)]+0x1,Renderer[_0x2bcb38(0x235)][_0x2bcb38(0x162)]=Renderer[_0x2bcb38(0x235)][_0x2bcb38(0x17b)]+0xa,Vetools[_0x2bcb38(0x104)]=Renderer['getRollableEntryDice'],Vetools[_0x2bcb38(0x1dd)]=(_0x2cf8cb,_0x39ed28,_0x2eea3a,{isAddHandlers:isAddHandlers=!![],pluginResults:pluginResults=null}={})=>{const _0x112125=_0x2bcb38,_0x3edfc7=MiscUtil[_0x112125(0x147)](_0x2cf8cb);typeof _0x3edfc7[_0x112125(0x118)]!==_0x112125(0x22f)&&(_0x3edfc7[_0x112125(0x118)]=Renderer[_0x112125(0x18e)](_0x3edfc7[_0x112125(0x118)]));if(_0x3edfc7[_0x112125(0x123)]){const _0x342e09=Math[_0x112125(0x218)](...Object[_0x112125(0x100)](_0x3edfc7[_0x112125(0x123)][_0x112125(0xfc)])[_0x112125(0x12b)](_0x76fbb6=>Number(_0x76fbb6))[_0x112125(0x16d)](_0x119e29=>_0x3edfc7[_0x112125(0x123)][_0x112125(0xfc)][_0x119e29]));_0x3edfc7['toRoll']=_0x3edfc7[_0x112125(0x123)][_0x112125(0xfc)][_0x342e09];}const _0x5e86fa=this[_0x112125(0x14c)](_0x3edfc7[_0x112125(0x118)]);if(Config[_0x112125(0x122)](_0x112125(0x1ae),'isRendererDiceDisabled'))return _0x2eea3a||_0x5e86fa;return _0x112125(0x19e)+_0x5e86fa+']]'+(_0x5e86fa[_0x112125(0x167)]()[_0x112125(0x22d)]()!==_0x2eea3a[_0x112125(0x167)]()[_0x112125(0x22d)]()?'\x20('+_0x2eea3a+')':'');},Renderer[_0x2bcb38(0x199)]=Vetools[_0x2bcb38(0x1dd)];const _0x3b175d={},_0x5be401=[_0x2bcb38(0x148),_0x2bcb38(0x205),_0x2bcb38(0x23d),_0x2bcb38(0x10b),_0x2bcb38(0x159)];_0x5be401[_0x2bcb38(0x134)](_0xd6ee91=>{const _0x34f9d0=_0x2bcb38;_0x3b175d[_0xd6ee91]=Renderer[_0x34f9d0(0x235)][_0xd6ee91],Renderer['hover'][_0xd6ee91]=(..._0xf2dc33)=>{const _0x388b68=_0x34f9d0;Renderer[_0x388b68(0x199)]=Vetools[_0x388b68(0x104)];const _0x3618fd=_0x3b175d[_0xd6ee91](..._0xf2dc33);return Renderer['getRollableEntryDice']=Vetools['_PATCHED_GET_ROLLABLE_ENTRY_DICE'],_0x3618fd;};});const _0x5a2adc=Renderer[_0x2bcb38(0x235)][_0x2bcb38(0x200)][_0x2bcb38(0x109)](Renderer[_0x2bcb38(0x235)]);Renderer['hover']['getMakePredefinedHover']=(_0x46d013,_0x25dbaf)=>{const _0x2886a4=_0x2bcb38,_0x2b8569=_0x5a2adc(_0x46d013,_0x25dbaf);return _0x2b8569['html']=_0x2886a4(0x232)+!![]+_0x2886a4(0x1f9)+!![]+_0x2886a4(0x1cc)+_0x2b8569['id']+'\x22\x20'+(_0x25dbaf?_0x2886a4(0x1bd)+JSON[_0x2886a4(0xff)](_0x25dbaf)['qq']()+'\x22':''),_0x2b8569;},Renderer['dice'][_0x2bcb38(0x202)]=(_0x28619c,_0x85b63d,_0xc1e194,_0x156cf8)=>{const _0x5410f7=_0x2bcb38,_0x356e86=JSON[_0x5410f7(0x1d5)](_0xc1e194);if(_0x356e86[_0x5410f7(0x118)])new Roll(_0x356e86['toRoll'])[_0x5410f7(0x20a)]();},Renderer['dice'][_0x2bcb38(0x20f)]=(_0x5e67d0,_0x2793dc,_0x56c7f1)=>{const _0x56656e=_0x2bcb38;if(_0x5e67d0['toRoll'])new Roll(_0x5e67d0[_0x56656e(0x118)])[_0x56656e(0x20a)]();},Vetools[_0x2bcb38(0x1b7)]=Renderer['monster']['doBindCompactContentHandlers'],Renderer[_0x2bcb38(0x1a5)][_0x2bcb38(0x209)]=_0x22ad39=>{const _0x4f2ae5=_0x2bcb38,_0x1cfe6f={..._0x22ad39};return _0x1cfe6f[_0x4f2ae5(0x214)]=(..._0x334ffe)=>Vetools[_0x4f2ae5(0x128)](()=>_0x22ad39[_0x4f2ae5(0x214)](..._0x334ffe)),Vetools[_0x4f2ae5(0x1b7)](_0x1cfe6f);},JqueryUtil[_0x2bcb38(0x1d0)]=_0x408d66=>{const _0x33a55a=_0x2bcb38;typeof _0x408d66===_0x33a55a(0x22f)&&(_0x408d66={'content':_0x408d66,'type':_0x33a55a(0x173)});_0x408d66['type']=_0x408d66['type']||'info';switch(_0x408d66[_0x33a55a(0x229)]){case _0x33a55a(0x208):return ui['notifications'][_0x33a55a(0x1f0)](_0x408d66[_0x33a55a(0x23e)]);case _0x33a55a(0x1ee):return ui[_0x33a55a(0x206)]['error'](_0x408d66[_0x33a55a(0x23e)]);default:return ui['notifications'][_0x33a55a(0x173)](_0x408d66[_0x33a55a(0x23e)]);}},InputUiUtil[_0x2bcb38(0x16e)]=_0x4c3d82=>UtilApplications[_0x2bcb38(0x1a8)](_0x4c3d82),DataUtil[_0x2bcb38(0x186)]=async _0x32d051=>Vetools[_0x2bcb38(0x1f7)](_0x32d051),Vetools[_0x2bcb38(0x19a)]=Renderer['hover'][_0x2bcb38(0x142)]['bind'](Renderer[_0x2bcb38(0x235)]),Renderer[_0x2bcb38(0x235)][_0x2bcb38(0x142)]=async function(_0x119786,_0x249d52,..._0x4df122){const _0x28e0ee=_0x2bcb38,_0x338530=(''+_0x249d52)[_0x28e0ee(0x167)]();if(!Vetools[_0x28e0ee(0x1d3)][_0x338530])await Vetools[_0x28e0ee(0x1ce)]();return Vetools[_0x28e0ee(0x19a)](_0x119786,_0x249d52,..._0x4df122);},BrewUtil2[_0x2bcb38(0x13e)]=new StorageUtilMemory();}static[_0x2e9507(0x1cd)](){const _0x5db7f0=_0x2e9507;Object[_0x5db7f0(0x100)](Parser[_0x5db7f0(0x11f)])[_0x5db7f0(0x134)](_0x598e9b=>Vetools[_0x5db7f0(0x1d3)][_0x598e9b[_0x5db7f0(0x167)]()]=!![]);}static async['_pDoCacheLocalBrew'](){const _0x3a519f=_0x2e9507;await this[_0x3a519f(0x1f6)]();}static async[_0x2e9507(0x1f2)](_0x37bc0f){const _0x2bfd32=_0x2e9507,_0x152cc1=MiscUtil['get'](_0x37bc0f,_0x2bfd32(0x1ab),_0x2bfd32(0x14a));if(!_0x152cc1||!(_0x152cc1 instanceof Array)||!_0x152cc1[_0x2bfd32(0x169)](_0x41ef74=>!Parser['SOURCE_JSON_TO_ABV'][_0x41ef74[_0x2bfd32(0x1d6)]]))return;await BrewUtil2[_0x2bfd32(0xfa)](_0x37bc0f);}static async['pGetWithCache'](_0x3650f4){const _0x3d5d54=_0x2e9507;if(!_0x3650f4[_0x3d5d54(0x1e9)]('?'))_0x3650f4=_0x3650f4+_0x3d5d54(0x22b)+Consts[_0x3d5d54(0x1bf)];const _0x573091=_0x3650f4['split'](Vetools['_RE_HTTP_URL'])[_0x3d5d54(0x16d)](Boolean);_0x573091[_0x573091[_0x3d5d54(0x230)]-0x1]=_0x573091[_0x3d5d54(0x11d)]()[_0x3d5d54(0x1c4)](/\/+/g,'/'),_0x3650f4=_0x573091['join']('');const _0xef96e6=_0x3650f4[_0x3d5d54(0x13c)]('?')[0x0];if(Vetools[_0x3d5d54(0x237)][_0xef96e6])return await Vetools[_0x3d5d54(0x237)][_0xef96e6],Vetools[_0x3d5d54(0xfe)][_0xef96e6];return Vetools[_0x3d5d54(0x237)][_0xef96e6]=((async()=>{const _0x185f19=_0x3d5d54;let _0xcdcca8;if(!Config[_0x185f19(0x122)](_0x185f19(0x1ae),_0x185f19(0x1b4))&&_0x3650f4[_0x185f19(0x1c8)](Vetools[_0x185f19(0x135)]+_0x185f19(0x170))){const _0x570922=_0x3650f4['split'](Vetools['BASE_SITE_URL'])[_0x185f19(0x11e)](0x1)[_0x185f19(0x150)](Vetools[_0x185f19(0x135)]),_0x5e466e=_0x185f19(0x1c1)+SharedConsts[_0x185f19(0x1af)]+'/'+_0x570922;_0xcdcca8=(await NotAxios[_0x185f19(0x122)](_0x5e466e))[_0x185f19(0x13f)];}else _0xcdcca8=(await NotAxios['get'](_0x3650f4))[_0x185f19(0x13f)];return DataUtil['_mutAddProps'](_0xcdcca8),await Vetools[_0x185f19(0x1f2)](_0xcdcca8),await DataUtil[_0x185f19(0x13a)](_0xef96e6,_0xcdcca8),Vetools['CACHED_REQUESTS'][_0xef96e6]=_0xcdcca8;})()),await Vetools[_0x3d5d54(0x237)][_0xef96e6],Vetools[_0x3d5d54(0xfe)][_0xef96e6];}static async[_0x2e9507(0x185)](_0xa86463){const _0x23953a=_0x2e9507;let _0x1de997;if(_0xa86463[_0x23953a(0x1f8)]['cacheKey'])_0x1de997=Vetools[_0x23953a(0xfe)][_0xa86463[_0x23953a(0x1f8)]['cacheKey']]||(Vetools[_0x23953a(0xfe)][_0xa86463[_0x23953a(0x1f8)][_0x23953a(0x215)]]=await _0xa86463[_0x23953a(0x1f8)][_0x23953a(0x1bc)]());else _0x1de997=await _0xa86463[_0x23953a(0x1f8)][_0x23953a(0x1bc)]();return _0x1de997;}static async[_0x2e9507(0x1b2)](){const _0x2d27eb=_0x2e9507;return Vetools[_0x2d27eb(0x1f7)](Vetools['BASE_SITE_URL']+_0x2d27eb(0x108));}static async[_0x2e9507(0x141)](){const _0x20cd8e=_0x2e9507;return Vetools[_0x20cd8e(0x1f7)](Config[_0x20cd8e(0x122)]('importAdventure','indexUrl'));}static async[_0x2e9507(0x156)](){const _0x3c62f0=_0x2e9507;return Vetools[_0x3c62f0(0x1f7)](Vetools[_0x3c62f0(0x135)]+_0x3c62f0(0x126));}static['getSpellUrl'](_0xcb73bb){const _0x45b85b=_0x2e9507;return Vetools[_0x45b85b(0x135)]+'data/spells/'+_0xcb73bb;}static async['pGetCreatureIndex'](){const _0x10ec1c=_0x2e9507;return Vetools['pGetWithCache'](Vetools[_0x10ec1c(0x135)]+_0x10ec1c(0x223));}static[_0x2e9507(0x21b)](_0x5c19ef){const _0x555b22=_0x2e9507;return Vetools[_0x555b22(0x135)]+_0x555b22(0x220)+_0x5c19ef;}static async[_0x2e9507(0x14e)](_0xc41fd8){const _0x524f8c=_0x2e9507;return{'item':await Renderer[_0x524f8c(0x175)][_0x524f8c(0x187)]({'isAddGroups':!!_0xc41fd8})};}static async['pGetItemFluff'](){const _0x14930f=_0x2e9507,_0x575b73=Vetools[_0x14930f(0x135)]+'data/fluff-items.json';return Vetools[_0x14930f(0x1f7)](_0x575b73);}static async[_0x2e9507(0x1ba)](_0x404b99){const _0x1b0e13=_0x2e9507;return DataUtil[_0x1b0e13(0x210)]['loadJSON'](_0x404b99);}static async['pGetClasses'](){const _0x4f9a74=_0x2e9507;return DataUtil['class'][_0x4f9a74(0x1a6)]();}static async[_0x2e9507(0x228)](){const _0xecc119=_0x2e9507;return DataUtil['class'][_0xecc119(0x1a6)]();}static async[_0x2e9507(0x12d)](){const _0x2d0eea=_0x2e9507;return DataUtil['table'][_0x2d0eea(0x186)]();}static async[_0x2e9507(0x166)](_0x47d086,{prop:_0x16b7b0,fnGetUrl:_0x2a156c}){const _0x12179a=_0x2e9507,_0x41d645=Vetools['BASE_SITE_URL']+_0x12179a(0x170)+_0x47d086,_0x1cb513=await Vetools[_0x12179a(0x1f7)](_0x41d645);return _0x1cb513[_0x16b7b0][_0x12179a(0x134)](_0x50855b=>{const _0x9f3a39=_0x12179a;_0x50855b[_0x9f3a39(0x149)]=new Date(_0x50855b[_0x9f3a39(0x1d1)]||_0x9f3a39(0x20e)),_0x50855b[_0x9f3a39(0x119)]=_0x2a156c(_0x50855b['id']);}),_0x1cb513;}static async['pGetAdventureIndex'](){const _0x131dc8=_0x2e9507;return this[_0x131dc8(0x166)]('adventures.json',{'prop':_0x131dc8(0x124),'fnGetUrl':Vetools[_0x131dc8(0x17d)][_0x131dc8(0x109)](Vetools)});}static async['pGetBookIndex'](){const _0x40ea39=_0x2e9507;return this['_pGetAdventureBookIndex']('books.json',{'prop':_0x40ea39(0x1ed),'fnGetUrl':Vetools[_0x40ea39(0x172)][_0x40ea39(0x109)](Vetools)});}static[_0x2e9507(0x21a)](_0x4de930,_0x5b03a5){const _0x5a8e71=_0x2e9507;return Vetools[_0x5a8e71(0x135)]+_0x5a8e71(0x170)+_0x4de930+'/'+_0x4de930+'-'+_0x5b03a5[_0x5a8e71(0x167)]()+_0x5a8e71(0x136);}static['getAdventureUrl'](_0x1ddc15){const _0x29fbfc=_0x2e9507;return this[_0x29fbfc(0x21a)]('adventure',_0x1ddc15);}static['getBookUrl'](_0x105787){const _0x1b859c=_0x2e9507;return this[_0x1b859c(0x21a)](_0x1b859c(0x1ed),_0x105787);}static[_0x2e9507(0x16c)](_0x1cb78c){const _0x1b854a=_0x2e9507;if(!_0x1cb78c?.[_0x1b854a(0x233)]?.['length'])return;const _0x42ed60=_0x1cb78c[_0x1b854a(0x233)][0x0];if(!_0x42ed60?.['href'])return;if(_0x42ed60['href'][_0x1b854a(0x229)]==='internal')return _0x42ed60['href'][_0x1b854a(0x212)]?''+Vetools['getInternalImageUrl'](_0x42ed60[_0x1b854a(0x1a0)][_0x1b854a(0x212)]):null;if(_0x42ed60[_0x1b854a(0x1a0)][_0x1b854a(0x229)]===_0x1b854a(0x171))return _0x42ed60[_0x1b854a(0x1a0)]['url']?_0x42ed60[_0x1b854a(0x1a0)][_0x1b854a(0x203)]:null;}static async[_0x2e9507(0x1ec)](_0x38a10d,_0x593682){const _0x2df96f=_0x2e9507;return(await Vetools[_0x2df96f(0x1d2)](_0x38a10d,_0x593682))[_0x2df96f(0x17e)];}static async[_0x2e9507(0x121)](_0x210ccf,_0x4eb944){const _0x6a9158=_0x2e9507;return(await Vetools['_pGetTokenUrl'](_0x210ccf,_0x4eb944))[_0x6a9158(0x203)];}static['_isSaveableToServerUrl'](_0x5645ee){const _0x4c744e=_0x2e9507;return _0x5645ee&&typeof _0x5645ee===_0x4c744e(0x22f)&&Vetools['_RE_HTTP_URL'][_0x4c744e(0x20c)](_0x5645ee);}static['_isSaveTypedImagesToServer']({imageType:imageType=_0x2e9507(0x165)}={}){const _0x51e52c=_0x2e9507;switch(imageType){case _0x51e52c(0x165):return Config[_0x51e52c(0x122)](_0x51e52c(0x1ae),'isSaveImagesToServer');case _0x51e52c(0x127):return Config[_0x51e52c(0x122)](_0x51e52c(0x1ae),'isSaveTokensToServer');default:throw new Error('Unhandled\x20type\x20\x22'+imageType+'\x22!');}}static async[_0x2e9507(0x1d2)](_0xdfca0a,_0xf623ab){const _0x3a2833=_0x2e9507;if(_0xf623ab[_0x3a2833(0x140)])return{'url':_0xf623ab[_0x3a2833(0x140)],'hasToken':!![]};const _0xbc4aff={'url':this[_0x3a2833(0x1ad)](),'hasToken':![]};switch(_0xdfca0a){case _0x3a2833(0x1a5):case _0x3a2833(0x222):case _0x3a2833(0x115):{const _0x355ed7={'monster':Renderer[_0x3a2833(0x1a5)][_0x3a2833(0x213)],'vehicle':Renderer['vehicle'][_0x3a2833(0x213)],'object':Renderer[_0x3a2833(0x115)]['getTokenUrl']},_0x340902=_0x355ed7[_0xdfca0a];if(!_0x340902)throw new Error(_0x3a2833(0x157));if(_0xf623ab[_0x3a2833(0x17e)])return{'url':_0x340902(_0xf623ab),'hasToken':!![]};if(_0xf623ab[_0x3a2833(0x11b)])return{'url':_0x340902({'name':_0xf623ab[_0x3a2833(0x15b)],'source':_0xf623ab[_0x3a2833(0x1a3)]}),'hasToken':!![]};return _0xbc4aff;}case _0x3a2833(0x231):return _0xbc4aff;default:throw new Error(_0x3a2833(0x23b)+_0xdfca0a+'\x22');}}static[_0x2e9507(0x1ad)](){const _0x1464d0=_0x2e9507;return UrlUtil['link']((Renderer[_0x1464d0(0x122)]()['baseMediaUrls']['img']||Renderer[_0x1464d0(0x122)]()[_0x1464d0(0x188)])+'img/blank.png');}static[_0x2e9507(0x1bb)](_0x35038e){const _0x2ce952=_0x2e9507;if(_0x35038e?.['href'][_0x2ce952(0x229)]===_0x2ce952(0x197))return Vetools[_0x2ce952(0x19b)](_0x35038e[_0x2ce952(0x1a0)][_0x2ce952(0x212)],{'isSkipEncode':!![]});return _0x35038e[_0x2ce952(0x1a0)]?.[_0x2ce952(0x203)];}static[_0x2e9507(0x19b)](_0x4e13a5,{isSkipEncode:isSkipEncode=![]}={}){const _0x255a90=_0x2e9507;if(!_0x4e13a5)return null;const _0x4c3497=isSkipEncode?_0x40637e=>_0x40637e:encodeURI,_0x3feade=_0x4c3497(Renderer[_0x255a90(0x122)]()[_0x255a90(0x103)][_0x255a90(0x17c)]||Renderer[_0x255a90(0x122)]()[_0x255a90(0x188)])+_0x255a90(0x11c)+_0x4c3497(_0x4e13a5);if(isSkipEncode)return _0x3feade;return _0x3feade[_0x255a90(0x1c4)](/'/g,_0x255a90(0x1b6));}static async[_0x2e9507(0x18c)](_0x53a6dc,{imageType:imageType=_0x2e9507(0x165)}={}){const _0x6ba168=_0x2e9507;if(this[_0x6ba168(0x219)]({'originalUrl':_0x53a6dc}))return _0x53a6dc;if(!this[_0x6ba168(0x154)]({'imageType':imageType}))return _0x53a6dc;return this[_0x6ba168(0x1a7)]({'originalUrl':_0x53a6dc});}static[_0x2e9507(0x219)]({originalUrl:_0x141680}){const _0x447f8f=_0x2e9507;return new URL(document[_0x447f8f(0x20b)])['origin']===new URL(_0x141680,document[_0x447f8f(0x20b)])[_0x447f8f(0x16b)];}static['getImageSavedToServerUrl']({originalUrl:_0x9cdb12,path:_0x281eae,isSaveToRoot:isSaveToRoot=![]}={}){const _0x54dc62=_0x2e9507;if(!_0x281eae&&!this['_isSaveableToServerUrl'](_0x9cdb12))return _0x9cdb12;const _0x577f72=new URL(_0x281eae?_0x54dc62(0x211)+_0x281eae:_0x9cdb12)[_0x54dc62(0x1d8)];return(''+(isSaveToRoot?'':Config[_0x54dc62(0x122)](_0x54dc62(0x1ae),_0x54dc62(0x198))+'/')+decodeURI(_0x577f72))[_0x54dc62(0x1c4)](/\/+/g,'/');}static async[_0x2e9507(0x1a7)]({originalUrl:_0x356f58,blob:_0x1be323,force:force=![],path:path=null,isSaveToRoot:isSaveToRoot=![]}={}){const _0x122ebd=_0x2e9507;if(_0x1be323&&_0x356f58)throw new Error(_0x122ebd(0x1aa));if(!_0x1be323&&!this[_0x122ebd(0x1e4)](_0x356f58))return _0x356f58;let _0x4704ca;try{await Vetools[_0x122ebd(0x102)][_0x122ebd(0x151)](),_0x4704ca=await this[_0x122ebd(0x1fa)]({'originalUrl':_0x356f58,'blob':_0x1be323,'force':force,'path':path,'isSaveToRoot':isSaveToRoot});}finally{Vetools[_0x122ebd(0x102)][_0x122ebd(0x1fe)]();}return _0x4704ca;}static async[_0x2e9507(0x1fa)]({originalUrl:_0x378b6e,blob:_0x100381,force:force=![],path:path=null,isSaveToRoot:isSaveToRoot=![]}={}){const _0xec10b3=_0x2e9507;if(_0x100381&&_0x378b6e)throw new Error(_0xec10b3(0x1aa));const _0x28b98a=this[_0xec10b3(0xf9)]({'originalUrl':_0x378b6e,'path':path,'isSaveToRoot':isSaveToRoot}),_0x143d8e=_0x28b98a[_0xec10b3(0x13c)]('/'),_0x2ca03e=_0x143d8e[_0xec10b3(0x11e)](0x0,-0x1)[_0xec10b3(0x150)]('/');let _0x53b6ee=null,_0x2f0928=![];try{_0x53b6ee=await FilePicker[_0xec10b3(0x21e)](_0xec10b3(0x13f),_0x2ca03e);if(_0x53b6ee?.[_0xec10b3(0x11a)])_0x2f0928=!![];}catch(_0x4b4891){if(!/^Directory .*? does not exist/[_0xec10b3(0x20c)](''+_0x4b4891)){const _0x261ecd=_0xec10b3(0x1a9);if(!force&&_0x100381)throw new Error(_0x261ecd);const _0x2ba3ed=''+_0x261ecd+(force?'':_0xec10b3(0x191));return UtilNotifications['notifyOnce']({'type':'warn','message':_0x2ba3ed}),force?_0x28b98a:_0x378b6e;}}if(_0x53b6ee?.[_0xec10b3(0x14b)]&&_0x53b6ee?.[_0xec10b3(0x14b)]['map'](_0x10c215=>decodeURI(_0x10c215))['includes'](_0x28b98a))return _0x28b98a;if(!this['_canUploadFiles']()){if(!force&&_0x100381)throw new Error('Your\x20permission\x20levels\x20do\x20not\x20allow\x20you\x20to\x20upload\x20files!');const _0x1505b2='You\x20have\x20the\x20\x22Save\x20Imported\x20Images\x20to\x20Server\x22\x20config\x20option\x20enabled,\x20but\x20your\x20permission\x20levels\x20do\x20not\x20allow\x20you\x20to\x20upload\x20files!'+(force?'':_0xec10b3(0x191));return UtilNotifications['notifyOnce']({'type':'warn','message':_0x1505b2}),force?_0x28b98a:_0x378b6e;}if(!_0x2f0928)try{await this[_0xec10b3(0x193)](_0x28b98a);}catch(_0x15febd){const _0x2e9af4='Could\x20not\x20create\x20required\x20directories\x20when\x20saving\x20imported\x20images\x20to\x20server!';if(!force&&_0x100381)throw new Error(_0x2e9af4);const _0x44f4c5=''+_0x2e9af4+(force?'':_0xec10b3(0x191));return UtilNotifications[_0xec10b3(0x18d)]({'type':_0xec10b3(0x1f0),'message':_0x44f4c5}),force?_0x28b98a:_0x378b6e;}try{_0x100381=_0x100381||await this[_0xec10b3(0x221)](_0x378b6e);}catch(_0x4da010){const _0x3cd77b='Failed\x20to\x20download\x20image\x20\x22'+_0x378b6e+_0xec10b3(0x23f)+(force?'':'\x20The\x20original\x20image\x20URL\x20will\x20be\x20used\x20instead.')+'\x20'+VeCt[_0xec10b3(0x163)];return UtilNotifications[_0xec10b3(0x18d)]({'type':_0xec10b3(0x1f0),'message':_0x3cd77b}),console[_0xec10b3(0x1e2)](...LGT,_0x4da010),force?_0x28b98a:_0x378b6e;}const _0x3d472c=_0x143d8e[_0xec10b3(0x11d)]();let _0x125f67=_0xec10b3(0x18f)+(_0x3d472c[_0xec10b3(0x13c)]('.')[_0xec10b3(0x11d)]()||'')[_0xec10b3(0x22d)]()[_0xec10b3(0x167)]();if(_0x125f67===_0xec10b3(0x201))_0x125f67='image/jpeg';const _0x296444=await FilePicker[_0xec10b3(0x129)]('data',_0x2ca03e,new File([_0x100381],_0x3d472c,{'lastModified':Date[_0xec10b3(0x19f)](),'type':_0x125f67}));if(_0x296444?.['path'])return decodeURI(_0x296444[_0xec10b3(0x212)]);return force?_0x28b98a:_0x378b6e;}static async[_0x2e9507(0x221)](_0x3d2ef2){const _0xf4bb7b=_0x2e9507,_0x3a69c1=await Config[_0xf4bb7b(0x179)];try{const _0x1e1b40=await fetch(_0x3d2ef2);return _0x1e1b40[_0xf4bb7b(0x190)]();}catch(_0x43e00f){if(!_0x3a69c1)throw _0x43e00f;console[_0xf4bb7b(0x1f0)](...LGT,_0xf4bb7b(0x1fd)+_0x3d2ef2+_0xf4bb7b(0x196));}const _0x4635e5=await fetch(Config[_0xf4bb7b(0x116)],{'method':_0xf4bb7b(0x1e0),'headers':{'Content-Type':_0xf4bb7b(0x12e)},'body':JSON[_0xf4bb7b(0xff)]({'type':'getBinaryData','url':_0x3d2ef2})});return _0x4635e5[_0xf4bb7b(0x190)]();}static async[_0x2e9507(0x193)](_0x20d5dd){const _0x1ef1b8=_0x2e9507,_0x21c5e7=_0x20d5dd[_0x1ef1b8(0x13c)]('/')[_0x1ef1b8(0x11e)](0x0,-0x1);if(!_0x21c5e7['length'])return;for(let _0xb20e16=0x0;_0xb20e16<_0x21c5e7[_0x1ef1b8(0x230)];++_0xb20e16){const _0x3a9b85=_0x21c5e7['slice'](0x0,_0xb20e16+0x1);try{await FilePicker[_0x1ef1b8(0x1c6)](_0x1ef1b8(0x13f),_0x3a9b85[_0x1ef1b8(0x150)]('/'));}catch(_0x15dace){if((''+_0x15dace)[_0x1ef1b8(0x1c8)](_0x1ef1b8(0x107)))continue;throw new Error(_0x15dace);}}}static[_0x2e9507(0x1b1)](){const _0x40189f=_0x2e9507;return game[_0x40189f(0x133)]||game[_0x40189f(0x158)]&&game[_0x40189f(0x158)][_0x40189f(0x216)]('FILES_UPLOAD');}static async['pGetAllSpells']({isFilterNonStandard:isFilterNonStandard=![],additionalSourcesBrew:additionalSourcesBrew=[],isIncludeLoadedBrew:isIncludeLoadedBrew=![],isApplyBlacklist:isApplyBlacklist=![]}={}){const _0x136d6e=_0x2e9507,_0x371e5d=await Vetools['pGetSpellIndex'](),_0x1e9f5a=await Promise[_0x136d6e(0x21f)](Object['entries'](_0x371e5d)[_0x136d6e(0x16d)](([_0x5529e3])=>!isFilterNonStandard||!SourceUtil['isNonstandardSource'](_0x5529e3))[_0x136d6e(0x12b)](([_0x449007,_0x3e85ad])=>Vetools['pGetWithCache'](Vetools[_0x136d6e(0x174)](_0x3e85ad))));if(additionalSourcesBrew?.[_0x136d6e(0x230)])for(const _0x3f189c of additionalSourcesBrew){const _0xcac375=await DataUtil[_0x136d6e(0x238)](_0x3f189c);if(!_0xcac375)continue;_0x1e9f5a['push'](_0xcac375);}if(isIncludeLoadedBrew){const _0x315ccf=await BrewUtil2['pGetBrewProcessed']();_0x1e9f5a[_0x136d6e(0xfd)]({'spell':_0x315ccf?.['spell']||[]});}let _0x475753=_0x1e9f5a['map'](_0x36369b=>MiscUtil[_0x136d6e(0x147)](_0x36369b[_0x136d6e(0x10a)]||[]))[_0x136d6e(0x13b)]();return isApplyBlacklist&&(_0x475753=_0x475753[_0x136d6e(0x16d)](_0x220bba=>!ExcludeUtil[_0x136d6e(0x21c)](UrlUtil[_0x136d6e(0x16a)][UrlUtil[_0x136d6e(0x160)]](_0x220bba),_0x136d6e(0x10a),_0x220bba['source'],{'isNoCount':!![]}))),_0x475753[_0x136d6e(0x134)](_0x25f297=>{const _0x57b9df=_0x136d6e;Renderer[_0x57b9df(0x10a)][_0x57b9df(0x1c5)](_0x25f297);}),{'spell':_0x475753};}static async[_0x2e9507(0x146)](_0x73f333=![]){const _0x4f18ac=_0x2e9507,_0x23a788=await Vetools['pGetCreatureIndex'](),_0x3c1186=await Promise[_0x4f18ac(0x21f)](Object[_0x4f18ac(0x1b3)](_0x23a788)[_0x4f18ac(0x16d)](([_0x3c81fc])=>!_0x73f333||!SourceUtil[_0x4f18ac(0x1c3)](_0x3c81fc))[_0x4f18ac(0x12b)](async([_0x4baabf,_0x39a1d5])=>({'source':_0x4baabf,'json':await Vetools[_0x4f18ac(0x1f7)](Vetools[_0x4f18ac(0x21b)](_0x39a1d5))})));return{'monster':_0x3c1186['map'](_0x556eb1=>{const _0x500e6a=_0x4f18ac;return MiscUtil[_0x500e6a(0x147)](_0x556eb1['json'][_0x500e6a(0x1a5)][_0x500e6a(0x16d)](_0x123094=>_0x123094[_0x500e6a(0x1a2)]===_0x556eb1[_0x500e6a(0x1a2)]));})[_0x4f18ac(0x13b)]()};}static async['_pGetHomebrewIndices'](){const _0x5f3e50=_0x2e9507,_0x3fc9bb={'source':{},'prop':{},'abbreviations':{}};try{const [_0x10caa3,_0x452a34,_0xbd5822]=await Promise[_0x5f3e50(0x21f)]([DataUtil['brew']['pLoadSourceIndex'](Config[_0x5f3e50(0x122)](_0x5f3e50(0x1ae),_0x5f3e50(0x21d))),DataUtil['brew'][_0x5f3e50(0x176)](Config[_0x5f3e50(0x122)](_0x5f3e50(0x1ae),'baseBrewUrl')),DataUtil[_0x5f3e50(0x234)]['pLoadAbbreviationIndex'](Config['get'](_0x5f3e50(0x1ae),'baseBrewUrl'))]);_0x3fc9bb[_0x5f3e50(0x1a2)]=_0x10caa3,_0x3fc9bb[_0x5f3e50(0x15a)]=_0x452a34,_0x3fc9bb['abbreviation']=_0xbd5822;}catch(_0xc1bc75){ui[_0x5f3e50(0x206)][_0x5f3e50(0x1e2)]('Failed\x20to\x20load\x20homebrew\x20index!\x20'+VeCt[_0x5f3e50(0x163)]),setTimeout(()=>{throw _0xc1bc75;});}return _0x3fc9bb;}static async[_0x2e9507(0x10d)](..._0x1ebdbb){const _0x4b3cc3=_0x2e9507,_0x418be4=Config[_0x4b3cc3(0x122)]('import',_0x4b3cc3(0x21d)),_0x4eafe=new Set();return _0x1ebdbb['map'](_0x2dcd35=>{const _0x22f759=_0x4b3cc3;return Object[_0x22f759(0x100)](Vetools['HOMEBREW_INDEX__PROP'][BrewUtil2[_0x22f759(0x10f)](_0x2dcd35)]||{})[_0x22f759(0x12b)](_0x47a789=>{const _0x2eded7=_0x22f759;if(_0x4eafe['has'](_0x47a789))return null;return _0x4eafe[_0x2eded7(0x22e)](_0x47a789),{'url':DataUtil[_0x2eded7(0x234)][_0x2eded7(0x1fb)](_0x47a789,_0x418be4),'name':this['_getHomebrewName'](_0x47a789),'abbreviations':Vetools['HOMEBREW_INDEX__ABBREVIATION'][_0x47a789]||[]};});})[_0x4b3cc3(0x13b)]()['filter'](Boolean)['sort']((_0x4e65fa,_0x43b964)=>SortUtil[_0x4b3cc3(0x15d)](_0x4e65fa[_0x4b3cc3(0x153)],_0x43b964[_0x4b3cc3(0x153)]));}static['_getHomebrewName'](_0x472040){const _0x2b3a10=_0x2e9507;return _0x472040[_0x2b3a10(0x13c)]('/')[_0x2b3a10(0x11e)](-0x1)[_0x2b3a10(0x150)]('')[_0x2b3a10(0x1c4)](/\.json$/i,'');}static async[_0x2e9507(0x1f6)](..._0x1226fb){const _0x23ebbc=_0x2e9507;try{const _0xa27b20=await Vetools[_0x23ebbc(0x1ea)](),_0x4382de=[..._0xa27b20||[],...Config['get'](_0x23ebbc(0x1ae),_0x23ebbc(0x192))];if(!_0x4382de[_0x23ebbc(0x230)])return[];const _0x56285f=await _0x4382de[_0x23ebbc(0x10c)](async _0x3f5c26=>({'url':_0x3f5c26,'data':await Vetools[_0x23ebbc(0x1f7)](_0x3f5c26),'name':this[_0x23ebbc(0x180)](_0x3f5c26)})),_0x541942=new Set(_0x1226fb[_0x23ebbc(0x12b)](_0xdebf51=>BrewUtil2[_0x23ebbc(0x10f)](_0xdebf51)));return _0x56285f[_0x23ebbc(0x16d)](({data:_0x2d3d44})=>{const _0x26d7de=_0x23ebbc,_0x3cd3f8=new Set([...Object[_0x26d7de(0x100)](_0x2d3d44||{})['filter'](_0x25e4e2=>!_0x25e4e2[_0x26d7de(0x1c8)]('_')),...Object[_0x26d7de(0x100)](_0x2d3d44?.['_meta']?.['includes']||{})]);return[..._0x541942][_0x26d7de(0x182)](_0x5338e9=>_0x3cd3f8[_0x26d7de(0x1c0)](_0x5338e9));})[_0x23ebbc(0x12b)](_0xb6f4c=>{const _0x34cfac=_0x23ebbc;return _0xb6f4c[_0x34cfac(0x19c)]=(_0xb6f4c[_0x34cfac(0x13f)]?.[_0x34cfac(0x1ab)]?.[_0x34cfac(0x14a)]||[])[_0x34cfac(0x12b)](_0x2fb4c3=>_0x2fb4c3[_0x34cfac(0x14d)])['filter'](Boolean),_0xb6f4c;})[_0x23ebbc(0x12b)](({name:_0x547c39,url:_0x7cc73f,abbreviations:_0x51758e})=>({'name':_0x547c39,'url':_0x7cc73f,'abbreviations':_0x51758e}));}catch(_0x5c54f3){const _0x2f1f75='Failed\x20to\x20load\x20local\x20homebrew\x20index!';console[_0x23ebbc(0x1e2)](...LGT,_0x2f1f75,_0x5c54f3),ui[_0x23ebbc(0x206)]['error'](_0x2f1f75+'\x20'+VeCt['STR_SEE_CONSOLE']);}return[];}static async[_0x2e9507(0x1ea)](){const _0x4871d0=_0x2e9507;if(!Config[_0x4871d0(0x122)](_0x4871d0(0x1ae),_0x4871d0(0x1f4)))return null;const _0x1cd8dd=Config[_0x4871d0(0x122)](_0x4871d0(0x1ae),'isUseLocalHomebrewIndexJson');if(_0x1cd8dd){const _0x1469ef=(Config[_0x4871d0(0x122)](_0x4871d0(0x1ae),_0x4871d0(0x112))+_0x4871d0(0x1e5))[_0x4871d0(0x1c4)](/\/+/g,'/'),_0x79898e=await Vetools[_0x4871d0(0x1f7)](_0x1469ef);if(!_0x79898e?.[_0x4871d0(0x144)])return[];return _0x79898e[_0x4871d0(0x144)][_0x4871d0(0x12b)](_0x3a5113=>{const _0x33e123=_0x4871d0;if(Vetools[_0x33e123(0x106)]['test'](_0x3a5113))return _0x3a5113;return[..._0x1469ef[_0x33e123(0x13c)]('/')[_0x33e123(0x11e)](0x0,-0x1),_0x3a5113][_0x33e123(0x150)]('/');});}try{const _0x4016eb=await FilePicker['browse'](_0x4871d0(0x13f),Config[_0x4871d0(0x122)](_0x4871d0(0x1ae),_0x4871d0(0x112)));if(!_0x4016eb?.[_0x4871d0(0x14b)]?.['length'])return null;return _0x4016eb['files'][_0x4871d0(0x12b)](_0x349ad7=>decodeURIComponent(_0x349ad7));}catch(_0x3eced3){const _0x557ed8=_0x4871d0(0x1e1)+(_0x1cd8dd?_0x4871d0(0x1b5):'')+_0x4871d0(0x204)+(_0x1cd8dd?'file':'directory')+_0x4871d0(0x155)+Config['get'](_0x4871d0(0x1ae),_0x4871d0(0x112))+(_0x1cd8dd?_0x4871d0(0x1e5):'')+_0x4871d0(0x14f);return console[_0x4871d0(0x1e2)](...LGT,_0x557ed8,_0x3eced3),ui[_0x4871d0(0x206)][_0x4871d0(0x1e2)](_0x557ed8+'\x20'+VeCt['STR_SEE_CONSOLE']),null;}}static[_0x2e9507(0x1c2)](_0x4e0216,_0x985ae){const _0x1e5a64=_0x2e9507;if(!_0x985ae)return _0x4e0216;return _0x985ae['map'](_0x47004f=>{return _0x4e0216[_0x47004f]=_0x4e0216[_0x47004f]||[],_0x4e0216[_0x47004f];})[_0x1e5a64(0x13b)]();}static async[_0x2e9507(0x113)](){const _0x475a18=_0x2e9507;return Vetools['pGetWithCache'](Vetools['BASE_SITE_URL']+_0x475a18(0x1c7));}static async[_0x2e9507(0xfb)](){const _0x117b56=_0x2e9507;return Vetools[_0x117b56(0x1f7)](Vetools[_0x117b56(0x135)]+_0x117b56(0x181));}static async[_0x2e9507(0x226)](){const _0x2c4512=_0x2e9507;return Vetools[_0x2c4512(0x1f7)](Vetools[_0x2c4512(0x135)]+_0x2c4512(0x12c));}static async[_0x2e9507(0x1a4)](){const _0x27a7fa=_0x2e9507;return Vetools[_0x27a7fa(0x1f7)](Vetools[_0x27a7fa(0x135)]+_0x27a7fa(0x17f));}static async[_0x2e9507(0x225)](){const _0x1545f1=_0x2e9507;return Vetools[_0x1545f1(0x1f7)](Vetools[_0x1545f1(0x135)]+'data/foundry-items.json');}static async[_0x2e9507(0x125)](){const _0x5094fb=_0x2e9507;return Vetools['pGetWithCache'](Vetools['BASE_SITE_URL']+_0x5094fb(0x217));}static async[_0x2e9507(0x1f3)](){const _0x45839e=_0x2e9507;return Vetools['pGetWithCache'](Vetools[_0x45839e(0x135)]+_0x45839e(0x1df));}static async[_0x2e9507(0x177)](){const _0x582686=_0x2e9507;return Vetools['pGetWithCache'](Vetools[_0x582686(0x135)]+_0x582686(0x1cf));}static async[_0x2e9507(0x239)](){const _0x1976e4=_0x2e9507;return Vetools[_0x1976e4(0x1f7)](Vetools[_0x1976e4(0x135)]+_0x1976e4(0x120));}static async[_0x2e9507(0x12a)](){const _0x4b83b7=_0x2e9507;return Vetools['pGetWithCache'](Vetools[_0x4b83b7(0x135)]+_0x4b83b7(0x1ac));}static async['pGeBackgroundSideData'](){return Vetools['pGetWithCache'](Vetools['BASE_SITE_URL']+'data/foundry-backgrounds.json');}static async[_0x2e9507(0x105)](){const _0x561abd=_0x2e9507;return Vetools['pGetWithCache'](Vetools[_0x561abd(0x135)]+_0x561abd(0x1da));}static async[_0x2e9507(0x207)](){const _0x18559b=_0x2e9507;return{}||Vetools[_0x18559b(0x1f7)](Vetools['BASE_SITE_URL']+_0x18559b(0x1dc));}static async[_0x2e9507(0x240)](){const _0x21b2ea=_0x2e9507;return{}||Vetools['pGetWithCache'](Vetools[_0x21b2ea(0x135)]+_0x21b2ea(0x1cb));}static async[_0x2e9507(0x137)](){const _0x28d44f=_0x2e9507;return{}||Vetools[_0x28d44f(0x1f7)](Vetools['BASE_SITE_URL']+'data/foundry-vehicles.json');}static async[_0x2e9507(0x168)](){const _0x5355d1=_0x2e9507;return{}||Vetools[_0x5355d1(0x1f7)](Vetools['BASE_SITE_URL']+'data/foundry-charcreationoptions.json');}static async[_0x2e9507(0x1d9)](){const _0x1cbe73=_0x2e9507;return{}||Vetools['pGetWithCache'](Vetools[_0x1cbe73(0x135)]+_0x1cbe73(0x1f1));}static async[_0x2e9507(0x131)](){const _0x28c341=_0x2e9507;return{}||Vetools[_0x28c341(0x1f7)](Vetools['BASE_SITE_URL']+_0x28c341(0xf8));}static async[_0x2e9507(0x184)](_0x26686e){const _0x4df72c=_0x2e9507,_0x5225cd=_0x4df72c(0x1db)+_0x26686e+'s.json',_0x5888b4='modules/'+SharedConsts['MODULE_NAME']+'/data/'+_0x5225cd;return Vetools['pGetWithCache'](_0x5888b4);}static get['BASE_SITE_URL'](){const _0x18f552=_0x2e9507;if(this[_0x18f552(0x183)]())return Util['getCleanServerUrl'](Config[_0x18f552(0x122)](_0x18f552(0x1ae),_0x18f552(0x111)));return Vetools[_0x18f552(0x1e3)];}static[_0x2e9507(0x183)](){const _0x4a8d22=_0x2e9507,_0x219c6b=Config[_0x4a8d22(0x122)]('import',_0x4a8d22(0x111));return!!(_0x219c6b&&_0x219c6b[_0x4a8d22(0x22d)]());}static get['DATA_URL_FEATS'](){const _0x1e4400=_0x2e9507;return Vetools['BASE_SITE_URL']+_0x1e4400(0x195);}static get[_0x2e9507(0x117)](){const _0x52e35f=_0x2e9507;return Vetools[_0x52e35f(0x135)]+_0x52e35f(0x22c);}static get[_0x2e9507(0x18b)](){const _0x38b4a5=_0x2e9507;return Vetools[_0x38b4a5(0x135)]+'data/variantrules.json';}static get[_0x2e9507(0x16f)](){const _0xe3e4fa=_0x2e9507;return Vetools[_0xe3e4fa(0x135)]+_0xe3e4fa(0x1ef);}static get['DATA_URL_OPTIONALFEATURES'](){const _0x52317d=_0x2e9507;return Vetools[_0x52317d(0x135)]+_0x52317d(0x1e6);}static get[_0x2e9507(0x101)](){const _0x159047=_0x2e9507;return Vetools[_0x159047(0x135)]+_0x159047(0x1b8);}static get[_0x2e9507(0x227)](){const _0x53222b=_0x2e9507;return Vetools[_0x53222b(0x135)]+_0x53222b(0x132);}static get['DATA_URL_REWARDS'](){const _0x2a1f0a=_0x2e9507;return Vetools[_0x2a1f0a(0x135)]+'data/rewards.json';}static get[_0x2e9507(0x110)](){const _0x572259=_0x2e9507;return Vetools['BASE_SITE_URL']+_0x572259(0x20d);}static get[_0x2e9507(0x1ca)](){const _0x17ce17=_0x2e9507;return Vetools['BASE_SITE_URL']+_0x17ce17(0x161);}static get['DATA_URL_RECIPES'](){const _0x307bdc=_0x2e9507;return Vetools[_0x307bdc(0x135)]+_0x307bdc(0x23a);}static get[_0x2e9507(0x1de)](){const _0x2ffe2d=_0x2e9507;return Vetools[_0x2ffe2d(0x135)]+_0x2ffe2d(0x19d);}static get['DATA_URL_CULTSBOONS'](){const _0x15fd7d=_0x2e9507;return Vetools[_0x15fd7d(0x135)]+_0x15fd7d(0x1e7);}static get[_0x2e9507(0x224)](){const _0x497e78=_0x2e9507;return Vetools[_0x497e78(0x135)]+_0x497e78(0x1ff);}static get['DATA_URL_LANGUAGES'](){const _0x5745df=_0x2e9507;return Vetools['BASE_SITE_URL']+_0x5745df(0x152);}static get[_0x2e9507(0x23c)](){const _0xd47770=_0x2e9507;return Vetools[_0xd47770(0x135)]+'data/trapshazards.json';}}Vetools['CACHED_REQUESTS']={},Vetools[_0x2e9507(0x237)]={},Vetools['_RE_HTTP_URL']=/(^https?:\/\/)/,Vetools[_0x2e9507(0x1e3)]='https://5etools-mirror-1.github.io/',Vetools['BESTIARY_FLUFF_INDEX']=null,Vetools[_0x2e9507(0x13d)]=null,Vetools[_0x2e9507(0x1d4)]={},Vetools['_CACHED_GET_ROLLABLE_ENTRY_DICE']=null,Vetools[_0x2e9507(0x1dd)]=null,Vetools[_0x2e9507(0x1b7)]=null,Vetools['_CACHED_RENDERER_HOVER_CACHE_AND_GET']=null,Vetools[_0x2e9507(0x15f)]={},Vetools[_0x2e9507(0x15e)]={},Vetools[_0x2e9507(0x17a)]={},Vetools[_0x2e9507(0x102)]=new VeLock(),Vetools[_0x2e9507(0x1d3)]={};export{Vetools};