const _0x23bbbd=_0x550a;(function(_0x319aeb,_0x191ce4){const _0x4b9a9a=_0x550a,_0x10cc58=_0x319aeb();while(!![]){try{const _0x145a3f=-parseInt(_0x4b9a9a(0x11f))/0x1+-parseInt(_0x4b9a9a(0x14d))/0x2+parseInt(_0x4b9a9a(0x156))/0x3+-parseInt(_0x4b9a9a(0x131))/0x4*(parseInt(_0x4b9a9a(0x113))/0x5)+parseInt(_0x4b9a9a(0x142))/0x6+-parseInt(_0x4b9a9a(0x132))/0x7*(parseInt(_0x4b9a9a(0x155))/0x8)+-parseInt(_0x4b9a9a(0x127))/0x9*(-parseInt(_0x4b9a9a(0x11d))/0xa);if(_0x145a3f===_0x191ce4)break;else _0x10cc58['push'](_0x10cc58['shift']());}catch(_0x448af2){_0x10cc58['push'](_0x10cc58['shift']());}}}(_0x2058,0x8f1e8));import{UtilApplications}from'./UtilApplications.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';function _0x2058(){const _0x2b1239=['243IVNLHD','/media/icon/mighty-force.svg','utils','actor','getCleanEntityName','importFeat','proxy','_pGetEffectsRawSideLoaded_','_SIDE_DATA','getNameWithSourcePart','12NUfplK','7WNklGG','isAddPermission','MODULE_NAME_FAKE','_SIDE_LOAD_OPTS','_pGetPreloadSideData','\x0a\x09\x09\x09\x09','init','pGetDereferencedFeatFeatureItem','setImplSideData','isActorItem','_pGetFlagsSideLoaded','<p><i>Prerequisite:\x20','copy','entries','get','_pGetEffectsSideLoaded','4937430YwTIvS','feat','PG_FEATS','_IMG_FALLBACK','render','pGetFeatItemEffects','_getFeatFlags','getCleanedFeature_tmpOptionalfeatureList','</i></p>','MODULE_NAME','isImportDescription','49412ehANfG','foundryFeat','propDroppable','source','_pGetSaveImagePath','_pGetSideLoadedMatch','modules/','getSourceWithPagePart','4278936ZUXsug','1321497aXRixg','permissions','setFirstSection','1525465rhWFaK','permission','_pGetImgCustom','URL_TO_HASH_BUILDER','pGetInitFeatFeatureLoadeds','prerequisite','mutEffectsDisabledTransfer','_pGetDataSideLoaded','isAddDataFlags','pGetIconImage','442450EZFVMT','getExpandedEffects','396951NpqWxD','defaultPermission','mutActorUpdate','length','hover','getPrerequisiteHtml','pMutActorUpdateFeat','filterValues'];_0x2058=function(){return _0x2b1239;};return _0x2058();}import{UtilActiveEffects}from'./UtilActiveEffects.js';import{DataConverterFeature}from'./DataConverterFeature.js';function _0x550a(_0x30d976,_0x32fde7){const _0x20586f=_0x2058();return _0x550a=function(_0x550a57,_0x48aa6c){_0x550a57=_0x550a57-0x113;let _0x58ac53=_0x20586f[_0x550a57];return _0x58ac53;},_0x550a(_0x30d976,_0x32fde7);}import{PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{UtilDataConverter}from'./UtilDataConverter.js';import{DataConverter}from'./DataConverter.js';import{Charactermancer_Feature_Util}from'./UtilCharactermancerFeature.js';class DataConverterFeat extends DataConverterFeature{static ['_SIDE_LOAD_OPTS']={'propBrew':_0x23bbbd(0x14e),'fnLoadJson':async()=>this[_0x23bbbd(0x136)](),'propJson':_0x23bbbd(0x143)};static [_0x23bbbd(0x145)]=_0x23bbbd(0x153)+SharedConsts[_0x23bbbd(0x14b)]+_0x23bbbd(0x128);static[_0x23bbbd(0x138)](){const _0x157a45=_0x23bbbd;PageFilterClassesFoundry[_0x157a45(0x13a)]('feat',this);}static async[_0x23bbbd(0x139)](_0x44018d){const _0x549c1e=_0x23bbbd;if(_0x44018d['entries'])return MiscUtil[_0x549c1e(0x13e)](_0x44018d);const _0x557046=UrlUtil[_0x549c1e(0x116)][UrlUtil['PG_FEATS']](_0x44018d);return Renderer[_0x549c1e(0x123)]['pCacheAndGet'](UrlUtil[_0x549c1e(0x144)],_0x44018d[_0x549c1e(0x150)],_0x557046,{'isCopy':!![]});}static async[_0x23bbbd(0x117)](_0x5cc285,{actor:actor=null}={}){const _0x52d9cd=_0x23bbbd,_0x273791=DataUtil[_0x52d9cd(0x12d)]['getUid'](_0x52d9cd(0x143),_0x5cc285,{'isMaintainCase':!![]}),_0x339323={'feat':_0x273791};return await PageFilterClassesFoundry['pInitFeatLoadeds']({'feat':_0x339323,'raw':_0x5cc285,'actor':actor}),_0x339323;}static async['pGetFeatItem'](_0x311f8f,_0x1dd8dd){const _0x40c29a=_0x23bbbd;_0x1dd8dd=_0x1dd8dd||{};if(_0x1dd8dd[_0x40c29a(0x12a)])_0x1dd8dd[_0x40c29a(0x13b)]=!![];const _0x3d56b1=Charactermancer_Feature_Util[_0x40c29a(0x149)](_0x311f8f),_0x25137a=await UtilDataConverter['pGetWithDescriptionPlugins'](()=>{const _0x5ee6c5=_0x40c29a,_0x3be27f=Renderer[_0x5ee6c5(0x129)][_0x5ee6c5(0x124)](_0x3d56b1[_0x5ee6c5(0x118)]);return Renderer['feat']['initFullEntries'](_0x3d56b1),'<div>\x0a\x09\x09\x09\x09'+(_0x3be27f?_0x5ee6c5(0x13d)+_0x3be27f+_0x5ee6c5(0x14a):'')+_0x5ee6c5(0x137)+Renderer[_0x5ee6c5(0x140)]()[_0x5ee6c5(0x158)](!![])[_0x5ee6c5(0x146)]({'entries':_0x3d56b1['_fullEntries']||_0x3d56b1[_0x5ee6c5(0x13f)]},0x2)+'\x0a\x09\x09\x09</div>';}),_0x475f58=await this[_0x40c29a(0x151)](_0x3d56b1),_0x39f1fd=await this[_0x40c29a(0x11a)](_0x3d56b1),_0x142447=await this[_0x40c29a(0x13c)](_0x3d56b1),_0x3fea58=_0x1dd8dd[_0x40c29a(0x13b)]?[]:await this[_0x40c29a(0x141)]({'ent':_0x3d56b1,'img':_0x475f58});DataConverter[_0x40c29a(0x119)](_0x3fea58,_0x40c29a(0x12c));const _0x4d89e4={'name':UtilApplications[_0x40c29a(0x12b)](UtilDataConverter[_0x40c29a(0x130)](_0x3d56b1,{'isActorItem':_0x1dd8dd[_0x40c29a(0x13b)]})),'data':{'source':UtilDataConverter[_0x40c29a(0x154)](_0x3d56b1),'description':{'value':Config['get'](_0x40c29a(0x12c),_0x40c29a(0x14c))?_0x25137a:'','chat':'','unidentified':''},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':0x0,'units':''},'target':{'value':0x0,'units':'','type':''},'range':{'value':0x0,'long':0x0,'units':null},'uses':{'value':0x0,'max':0x0,'per':''},'ability':'','actionType':'','attackBonus':null,'chatFlavor':'','critical':{'threshold':null,'damage':''},'damage':{'parts':[],'versatile':''},'formula':'','save':{'ability':'','dc':null},'requirements':Renderer[_0x40c29a(0x129)][_0x40c29a(0x124)](_0x3d56b1[_0x40c29a(0x118)],{'isTextOnly':!![],'isSkipPrefix':!![]}),'recharge':{'value':0x0,'charged':!![]},..._0x39f1fd},'permission':{'default':0x0},'type':'feat','img':_0x475f58,'flags':{...this[_0x40c29a(0x148)](_0x3d56b1,_0x1dd8dd),..._0x142447},'effects':_0x3fea58};if(_0x1dd8dd[_0x40c29a(0x120)]!=null)_0x4d89e4[_0x40c29a(0x114)]={'default':_0x1dd8dd[_0x40c29a(0x120)]};else{if(_0x1dd8dd[_0x40c29a(0x133)])_0x4d89e4[_0x40c29a(0x114)]={'default':Config[_0x40c29a(0x140)](_0x40c29a(0x12c),_0x40c29a(0x157))};}return _0x4d89e4;}static[_0x23bbbd(0x115)](_0x4506ca){const _0x505202=_0x23bbbd;return this[_0x505202(0x11c)](_0x505202(0x143),_0x4506ca);}static[_0x23bbbd(0x148)](_0x18cf57,_0x1a3060){const _0x3ff66c=_0x23bbbd;_0x1a3060=_0x1a3060||{};const _0x5778fa={[SharedConsts[_0x3ff66c(0x134)]]:{'page':UrlUtil[_0x3ff66c(0x144)],'source':_0x18cf57[_0x3ff66c(0x150)],'hash':UrlUtil['URL_TO_HASH_BUILDER'][UrlUtil['PG_FEATS']](_0x18cf57)}};return _0x1a3060[_0x3ff66c(0x11b)]&&(_0x5778fa[SharedConsts[_0x3ff66c(0x134)]][_0x3ff66c(0x14f)]=_0x3ff66c(0x143),_0x5778fa[SharedConsts['MODULE_NAME_FAKE']]['filterValues']=_0x1a3060[_0x3ff66c(0x126)]),_0x5778fa;}static async[_0x23bbbd(0x125)](_0x1a5c31,_0x525980,_0x58d3a3,_0x160910){const _0x455a21=_0x23bbbd,_0x1ed7c7=await this['pGetSideLoadedMatch'](_0x58d3a3);this[_0x455a21(0x121)](_0x1a5c31,_0x525980,_0x58d3a3,{'sideData':_0x1ed7c7});}static async['pGetSideLoadedMatch'](_0x341123){const _0x4e90da=_0x23bbbd;return this[_0x4e90da(0x152)](_0x341123,this[_0x4e90da(0x135)]);}static async['pHasFeatSideLoadedEffects'](_0x541aa4,_0x21fa38){const _0x41fd05=_0x23bbbd;return(await this[_0x41fd05(0x12e)](_0x21fa38,this[_0x41fd05(0x135)]))?.[_0x41fd05(0x122)]>0x0;}static async[_0x23bbbd(0x147)](_0x32feba,_0x3b2ede,_0x432141,{additionalData:_0x3d5c0b,img:_0x360271}={}){const _0x3a52e8=_0x23bbbd,_0xd4747f=await this[_0x3a52e8(0x12e)](_0x3b2ede,this['_SIDE_LOAD_OPTS']);return UtilActiveEffects[_0x3a52e8(0x11e)](_0xd4747f||[],{'actor':_0x32feba,'sheetItem':_0x432141,'parentName':_0x3b2ede['name'],'additionalData':_0x3d5c0b,'img':_0x360271});}static async['_pGetPreloadSideData'](){const _0x3f789b=_0x23bbbd;if(!this['_SIDE_DATA'])this['_SIDE_DATA']=await Vetools['pGetFeatSideData']();return this[_0x3f789b(0x12f)];}}export{DataConverterFeat};