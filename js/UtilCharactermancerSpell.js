const _0x57bdb7=_0x2ccc;(function(_0xb19e1e,_0x520160){const _0x490ec3=_0x2ccc,_0x71c639=_0xb19e1e();while(!![]){try{const _0x4d6b90=-parseInt(_0x490ec3(0x23d))/0x1*(parseInt(_0x490ec3(0x25a))/0x2)+parseInt(_0x490ec3(0x213))/0x3*(-parseInt(_0x490ec3(0x1fe))/0x4)+parseInt(_0x490ec3(0x28b))/0x5*(-parseInt(_0x490ec3(0x2ca))/0x6)+parseInt(_0x490ec3(0x2a9))/0x7+-parseInt(_0x490ec3(0x234))/0x8+-parseInt(_0x490ec3(0x291))/0x9+parseInt(_0x490ec3(0x239))/0xa;if(_0x4d6b90===_0x520160)break;else _0x71c639['push'](_0x71c639['shift']());}catch(_0x16bf5e){_0x71c639['push'](_0x71c639['shift']());}}}(_0x436c,0x2bf03));import{SharedConsts}from'../shared/SharedConsts.js';import{UtilActors}from'./UtilActors.js';import{UtilApplications}from'./UtilApplications.js';import{Util}from'./Util.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{UtilDataConverter}from'./UtilDataConverter.js';function _0x436c(){const _0x2d627d=['mode','className','MODULE_NAME_FAKE','_getSpellDataLookup','mutateAndAddToFilters','\x0a\x09\x09\x09\x09\x09','_subclassShortName','<button\x0a\x09\x09\x09\x09\x09class=\x22btn\x20manc__list-row-button\x20manc-sp__btn-prepare\x20','isAvailableExpandedSpell_','ix_always_prepared_','_getExistingSpellLookup_isOnSpellList','_IMPORT_LIST_SPELL','alwaysKnownSpellsClass','hover','pulseFixedLearned','cacheSelectedListItem','manc-sp__is-learn-caster','_existingCasterMeta','PACT_CASTER_MAX_SPELL_LEVEL','proxy','_getProps','data-plut-is-existing-spell=\x22true\x22','searchText','addHookIsMaxLearnedSpells','sourceJsonToStyle','<div\x20class=\x22ve-flex-vh-center\x20italic\x20ve-muted\x20ve-small\x20mt-1\x22>No\x20matching\x20spells</div>','updated','_render_bindLevelledSpellHooks','_getBrewClassSubclassSpellCache_addItem','<div\x20class=\x22ve-flex-col\x20h-100\x20w-50\x22></div>','alwaysPreparedSpellsBackground','<div\x20class=\x22fltr__mini-view\x20btn-group\x22></div>','_spellDataLookup','querySelectorAll','isAvailableSubclassSpell_','data','always','set','_actor','brewSubclassSpells','pImportEntry','_$dispNoRows','alwaysKnownSpellsRace','init','trimState','spells','flat','push','\x22\x0a\x09\x09\x09\x09\x09','subSubclass','unpackUid','ele','\x0a\x09\x09\x09\x09>Prep.</button>','manc-sp__is-max-learned-cantrips','forEach','\x0a\x09\x09\x09\x09>Learn</button>\x0a\x0a\x09\x09\x09\x09','_proxyAssignSimple','\x22\x0a\x09\x09\x09\x09\x09name=\x22btn-prepare\x22\x0a\x09\x09\x09\x09\x09title=\x22','expandedSpellsClass','append','classList','[+]','dataset','_getSpellUid','toLowerCase','ve-flex-v-center\x20manc__list-row\x20clickable\x20veapp__list-row\x20veapp__list-row-hoverable','_className','</div>\x0a\x09\x09\x09<div\x20class=\x22col-0-5\x20text-center\x20bold\x20imp-sp__disp-conc\x22\x20title=\x22Concentration\x22>','slug','spSchoolAndSubschoolsAbvsToFull','usesMax','ixPrepared','_addHookBase','$wrpsPreparedLearned','innerHTML','handleAlwaysKnownSpells_','spellDatas','subclassName','Cantrips\x20learned:\x20','manc-sp__is-max-learned-spells','sourceJsonToFull','modalTitle','toggleClass','_handleAlwaysStateSpells_','ixAlwaysPrepared','<input\x20type=\x22search\x22\x20class=\x22search\x20w-100\x20form-control\x22\x20placeholder=\x22Find\x20spell...\x22>','_lastSearchTermSpells','_spellLevel','_isWithinLevelRange','23848oyRODf','_getCntSpellsKnown','_state','casterProgression','alwaysPreparedSpellsRace','_compsLevel','</div>\x0a\x09\x09\x09<div\x20class=\x22col-2-6\x20text-right\x22>','_getTotalSpellsKnown','disabled','subclass','replace','fixedLearnedProgression','ixViewedSpell','state','bindTypingEnd','pact','handleFilterChange','(Previously\x20Added\x20Spell)','addHookFixedLearnedProgression','ix_prepared_','.manc-sp__btn-learn-cantrip','138FetbNJ','\x0a\x09\x09\x09</div>\x0a\x09\x09','[‒]','text','add','addHookSpellLevelHigh','expandedSpellsRace','val','parentClassName','isUpdateOnly','pInitFilterBox','click','empty','addEventListener','expandedSpellsBackground','$getHoverContent_stats','sum','_isConc','items','_normalisedRange','\x22\x20title=\x22','cntPrepared','pRender','getMaxWindowHeight','remove','addHookIsPreparedCaster','preparationMode','filterBox','_handleListItemBtnLearnClick_do_doLearn','isNonstandardSource','stringToSlug','subSubclassName','get','1377360xfsllr','getMaxWindowWidth','EVNT_VALCHANGE','preventDefault','pSetSpellItemIsPrepared','8415880drgksN','class','_list','appendTo','17OsUUGj','alwaysKnownSpellsBackground','includes','brewClassSpells','btn-prepare','_cacheBrewClassSpells','addHookMaxLearnedCantrips','subclassSource','alwaysPreparedSpellsSubclass','usesPer','_existingSpellLookup','addHookIsMaxLearnedCantrips','visibleItems','spell','name','MIN_SAFE_INTEGER','handleSearch','<button\x20class=\x22btn-5et\x20veapp__btn-list-reset\x22>Reset</button>','PG_SPELLS','getItemSource','pageFilter','_render_pFilterBox','\x20text-center\x22\x20title=\x22','manc-sp__is-max-learned-spells--is-over-limit','URL_TO_HASH_BUILDER','isOverLearnFixedSpellsLimitOfLevel_','_getFormSubData_getSpellImportOpts','trim','isAlwaysPreparedSpell_','24404wKvJgB','actor','getSpellsKnown','isOverLearnCantripsLimit_','usesValue','expandedSpellsSubclass','canPrepareMore_','time','manc-sp__is-max-prepared-spells--is-over-limit','_cacheFilterValues','MAX_SAFE_INTEGER','spLevelToFullLevelText','button','stopPropagation','fixedLearnedProgressionDefault','spellLevelHigh','search','map','_getMappedClassDetails','fromSubclass','pGetUserInput','title=\x22(Previously\x20Learned\x20Spell)\x22','range','./ImportListSpell.js','hideVe','<div\x20class=\x22ve-flex-v-stretch\x20input-group\x20no-shrink\x22>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-3-2\x20pr-1\x20sort\x22\x20data-sort=\x22name\x22>Name</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22time\x22>Time</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22school\x22>School</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-0-5\x20px-1\x20sort\x22\x20data-sort=\x22concentration\x22\x20title=\x22Concentration\x22>C.</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-0-5\x20px-1\x20sort\x22\x20data-sort=\x22ritual\x22\x20title=\x22Ritual\x22>R.</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-2-6\x20px-1\x20sort\x22\x20data-sort=\x22range\x22>Range</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22source\x22>Source</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-6\x20pl-1\x22\x20disabled>&nbsp;</button>\x0a\x09\x09</div>','_$wrpsPreparedLearned','_hasBrewSubclassSpell','cntLearnedCantrips','isIncludeUaEtcSpellLists','toDisplay','</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20sp__school-','getTblTimeStr','prepared','active','isAlwaysPrepared','alwaysKnownSpellsSubclass','toggleVe','plut-is-existing-spell','getExistingSpellMeta_','_render_bindCantripHooks','filter','cntLearnedSpells','alwaysPreparedSpellsClass','length','addHookSpellLevelLow','parent','addItem','_isAvailableSpell','15qlNjSb','<div\x20class=\x22mx-1\x22>—</div>','Charactermancer_Spell_Modal.filter','getValues','manc-sp__btn-learn-cantrip','meta','625131ShrVgX','<button\x20class=\x22btn\x20btn-5et\x22\x20title=\x22Toggle\x20Filter\x20Summary\x20Display\x22><span\x20class=\x22glyphicon\x20glyphicon-resize-small\x22></span></button>','list-multi-selected','classSource','isAlwaysKnownSpell_','level','btn-learn-cantrip','_getBrewClassSubclassSpellCache','Select\x20Cantrips','some','_cacheSelectedListItem','_handleAlwaysPreparedSpells','sourceJsonToAbv','fromClassList','_getExistingSpellLookup','preparation','toggle','bind','getFormSubData','<div\x20class=\x22ve-flex-vh-center\x20w-100\x20h-100\x20italic\x22>Select\x20a\x20spell\x20to\x20view</div>','_hasBrewClassSpell','_canLearnMoreFixedSpellsOfLevel','page','join','2318463gfZUje','Prepare','_subclassName','_getListItem','_handleListItemBtnLearnClick_doFixed','sort','spSchoolAbvToFull','canLearnMoreFixedSpellsOfLevel_','spSchoolAndSubschoolsAbvsShort','handleAlwaysPreparedSpells_','contains','then','maxPrepared','isLearnedFixedSpellCasterAtLevel_','render','pGetFormData','_spellDatas','_resetLevelSpells','_subclassSource','source','canLearnMoreCantrips_','spellcastingAbility','_$wrpRows','</div>\x0a\x0a\x09\x09\x09<div\x20class=\x22ve-flex-vh-center\x20col-1-6\x20pr-0\x22>\x0a\x09\x09\x09\x09<button\x0a\x09\x09\x09\x09\x09class=\x22btn\x20manc__list-row-button\x20','isLearned','_existingClass','<button\x20class=\x22btn-5et\x20veapp__btn-filter\x22>Filter</button>','_classSource','</div>\x0a\x09\x09\x09<div\x20class=\x22col-0-5\x20text-center\x20bold\x20imp-sp__disp-ritual\x22\x20title=\x22Ritual\x22>','_parent','getCombinedClasses','flags','isOverPrepareLimit_','539022lQJJpD','_isLearnedFixedSpellCasterAtLevel','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','isPreparedCaster','spellLevelLow','\x0a\x09\x09\x09<div\x20class=\x22col-3-2\x20pl-0\x22>','html','brewSubSubclassSpells','ixAlwaysKnownSpell','parentClassSource','.manc-sp__btn-prepare','maxPreparedSpells','hash','addHookIsMaxPrepared','maxLevel','Unhandled\x20button\x20name:\x20\x22','maxLearnedCantrips','isPrepared','constructor','_handleAlwaysKnownSpells','school','fromClassListVariant','btnPrepare','ExistingSpell','btn-learn-spell','isAvailableClassSpell_','manc-sp__is-max-prepared-spells','_pageFilter'];_0x436c=function(){return _0x2d627d;};return _0x436c();}class Charactermancer_Spell_SpellMeta{constructor({ix:_0x1fc663,spell:_0x58c1a7,isPrepared:_0x4097fa,isLearned:_0x3864bc,isUpdateOnly:_0x56c1be,existingItemId:_0x2b7a0c,preparationMode:_0x43a579,usesValue:_0x312fbb,usesMax:_0x366c23,usesPer:_0x48fe58}){const _0x9535fb=_0x2ccc;this['ix']=_0x1fc663,this[_0x9535fb(0x24a)]=_0x58c1a7,this[_0x9535fb(0x2db)]=_0x4097fa,this[_0x9535fb(0x2c1)]=_0x3864bc,this[_0x9535fb(0x21c)]=_0x56c1be,this['existingItemId']=_0x2b7a0c,this[_0x9535fb(0x22d)]=_0x43a579,this[_0x9535fb(0x25e)]=_0x312fbb,this[_0x9535fb(0x1eb)]=_0x366c23,this[_0x9535fb(0x246)]=_0x48fe58;}}class Charactermancer_Spell extends BaseComponent{static async['pApplyFormDataToActor'](_0x46fe12,_0x414da8,{cls:_0x1c1c6c,sc:_0x4a67d0}){const _0x378362=_0x2ccc,_0x9bd3e1=_0x414da8?.[_0x378362(0x1c8)]?.[_0x378362(0x1d2)]||[];for(let _0x3d97b0=0x0;_0x3d97b0<_0x9bd3e1[_0x378362(0x286)];++_0x3d97b0){const {spell:_0x5c5450,isPrepared:_0x3fb145,isUpdateOnly:_0x249eba,existingItemId:_0xeece39,preparationMode:_0x55c8d2,usesValue:_0x26a8de,usesMax:_0x5115c2,usesPer:_0x1e01f4,castAtLevel:_0x3c059f}=_0x9bd3e1[_0x3d97b0];if(_0x249eba&&_0xeece39){await DataConverterSpell[_0x378362(0x238)](_0x46fe12['items']['get'](_0xeece39),_0x3fb145);continue;}if(!Charactermancer_Spell[_0x378362(0x2f1)]||Charactermancer_Spell[_0x378362(0x2f1)][_0x378362(0x25b)]!==_0x46fe12){const {ImportListSpell:_0x161b08}=await import(_0x378362(0x271));Charactermancer_Spell['_IMPORT_LIST_SPELL']=new _0x161b08({'actor':_0x46fe12}),await Charactermancer_Spell[_0x378362(0x2f1)]['pInit']();}await Charactermancer_Spell[_0x378362(0x2f1)][_0x378362(0x1cd)](_0x5c5450,{'isCharactermancer':!![],'opts_pGetSpellItem':{'isActorItem':!![],'isPrepared':_0x3fb145,'ability':_0x4a67d0?.[_0x378362(0x2be)]||_0x1c1c6c['spellcastingAbility'],'preparationMode':_0x55c8d2,'usesValue':_0x26a8de,'usesMax':_0x5115c2,'usesPer':_0x1e01f4,'castAtLevel':_0x3c059f,'parentClassName':_0x1c1c6c[_0x378362(0x24b)],'parentClassSource':_0x1c1c6c[_0x378362(0x2bc)],'parentSubclassName':_0x4a67d0?.[_0x378362(0x24b)],'parentSubclassShortName':_0x4a67d0?.['shortName'],'parentSubclassSource':_0x4a67d0?.['source']}});}}constructor(_0x316b75){const _0x1dffc8=_0x2ccc;_0x316b75=_0x316b75||{},super(),this[_0x1dffc8(0x1cb)]=_0x316b75[_0x1dffc8(0x25b)],this[_0x1dffc8(0x2c2)]=_0x316b75['existingClass'],this[_0x1dffc8(0x1b6)]=_0x316b75['existingCasterMeta'],this['_spellDatas']=_0x316b75['spellDatas'],this['_className']=_0x316b75[_0x1dffc8(0x2e7)],this['_classSource']=_0x316b75[_0x1dffc8(0x294)],this[_0x1dffc8(0x2ab)]=_0x316b75['subclassName'],this[_0x1dffc8(0x2ec)]=_0x316b75['subclassShortName'],this['_subclassSource']=_0x316b75[_0x1dffc8(0x244)],this['_compsLevel']=[...new Array(_0x316b75['maxLevel']!=null?_0x316b75[_0x1dffc8(0x2d8)]+0x1:0xa)]['map']((_0x3c3560,_0x3a4964)=>new Charactermancer_Spell_Level({'spellDatas':_0x316b75[_0x1dffc8(0x1f1)],'spellLevel':_0x3a4964,'parent':this})),this[_0x1dffc8(0x2e5)]=_0x316b75[_0x1dffc8(0x251)],this[_0x1dffc8(0x274)]=_0x316b75[_0x1dffc8(0x1ee)],this[_0x1dffc8(0x1c5)]=this[_0x1dffc8(0x2e9)](),this['_existingSpellLookup']=this['_getExistingSpellLookup'](),this['_cacheSelectedListItem']=null,this[_0x1dffc8(0x263)]=null,this[_0x1dffc8(0x242)]=Charactermancer_Spell[_0x1dffc8(0x298)](_0x316b75[_0x1dffc8(0x240)],_0x316b75[_0x1dffc8(0x1cc)],_0x316b75[_0x1dffc8(0x2d1)]);}[_0x57bdb7(0x2e9)](){const _0x35c3ee=_0x57bdb7,_0x1e2eb1={'hash':{},'slug':{}};return this[_0x35c3ee(0x2b9)][_0x35c3ee(0x1db)](_0x475d2f=>{const _0x85efd3=_0x35c3ee;MiscUtil['set'](_0x1e2eb1,_0x85efd3(0x2d6),UrlUtil[_0x85efd3(0x255)][UrlUtil[_0x85efd3(0x24f)]](_0x475d2f),_0x475d2f),MiscUtil[_0x85efd3(0x1ca)](_0x1e2eb1,'slug',Parser[_0x85efd3(0x231)](Parser['sourceJsonToAbv'](_0x475d2f['source'])),Parser[_0x85efd3(0x231)](_0x475d2f[_0x85efd3(0x24b)]),_0x475d2f);}),_0x1e2eb1;}[_0x57bdb7(0x29f)](){const _0x5bb76a=_0x57bdb7;if(!this['_existingClass']||!this['_existingCasterMeta'])return null;const _0x46323b=this[_0x5bb76a(0x1cb)]['items'][_0x5bb76a(0x283)](_0x362fe8=>_0x362fe8['type']==='spell'),_0x35e02c={},_0x53627b={},_0x39a6d2={};return[..._0x46323b][_0x5bb76a(0x2ae)]((_0x1cf749,_0x4c17d1)=>{const _0x4de325=_0x5bb76a,_0x3308a4=_0x1cf749[_0x4de325(0x1c8)][_0x4de325(0x2c8)]?.[SharedConsts['MODULE_NAME_FAKE']],_0x4f876b=_0x4c17d1[_0x4de325(0x1c8)][_0x4de325(0x2c8)]?.[SharedConsts[_0x4de325(0x2e8)]],_0x260976=_0x3308a4?.[_0x4de325(0x21b)]&&_0x3308a4?.[_0x4de325(0x2d3)]?0x1:0x0,_0x2082b1=_0x4f876b?.['parentClassName']&&_0x4f876b?.[_0x4de325(0x2d3)]?0x1:0x0;return _0x2082b1-_0x260976;})[_0x5bb76a(0x1db)](_0x4a809d=>{const _0x2fae10=_0x5bb76a,_0x22d907=Number(_0x4a809d[_0x2fae10(0x1c8)][_0x2fae10(0x1c8)][_0x2fae10(0x296)]||0x0),_0x5dc39c=(_0x4a809d[_0x2fae10(0x24b)]||'')['trim']()[_0x2fae10(0x1e5)](),_0x1f8017=UtilDataConverter[_0x2fae10(0x250)](_0x4a809d),_0x2aeedf=(_0x1f8017[_0x2fae10(0x2bc)]||'')[_0x2fae10(0x1e5)](),_0xff46a2=_0x4a809d[_0x2fae10(0x1c8)]['flags']?.[SharedConsts[_0x2fae10(0x2e8)]],_0x3fabe1=_0xff46a2?.[_0x2fae10(0x21b)],_0x1d3041=_0xff46a2?.[_0x2fae10(0x2d3)],_0x56e17c=_0x4a809d[_0x2fae10(0x1c8)][_0x2fae10(0x1c8)][_0x2fae10(0x2a0)]?.[_0x2fae10(0x2e6)]===_0x2fae10(0x27b)&&_0x4a809d['data']['data'][_0x2fae10(0x2a0)]?.['prepared'],_0x24bfbf=_0x4a809d['data'][_0x2fae10(0x1c8)][_0x2fae10(0x2a0)]?.['mode']==='always';if(_0x3fabe1&&_0x1d3041&&_0x3fabe1!==this[_0x2fae10(0x2c2)]['name']&&_0x1d3041!==this[_0x2fae10(0x2c2)]['source'])return;if(_0x3fabe1&&_0x1d3041&&_0x3fabe1===this[_0x2fae10(0x2c2)][_0x2fae10(0x24b)]&&_0x1d3041===this[_0x2fae10(0x2c2)][_0x2fae10(0x2bc)]){const _0x5b32b3=_0x22d907===0x0||_0x22d907!==0x0&&this[_0x2fae10(0x1b6)]['fixedLearnedProgression']!=null,_0x774b3f=this[_0x2fae10(0x1b6)][_0x2fae10(0x2d5)]!=null&&_0x56e17c;if(_0x5b32b3)_0x35e02c[_0x22d907]=(_0x35e02c[_0x22d907]||0x0)+0x1;if(_0x774b3f)_0x53627b[_0x22d907]=(_0x53627b[_0x22d907]||0x0)+0x1;MiscUtil['set'](_0x39a6d2,_0x22d907,_0x2aeedf,_0x5dc39c,new Charactermancer_Spell[(_0x2fae10(0x2e1))]({'item':_0x4a809d,'isLearned':_0x5b32b3,'isPrepared':_0x774b3f,'isAlwaysPrepared':_0x24bfbf}));return;}const _0x2ec645=_0x22d907===0x0||(_0x4a809d['data'][_0x2fae10(0x1c8)][_0x2fae10(0x2a0)]?.[_0x2fae10(0x2e6)]===_0x2fae10(0x27b)||_0x4a809d[_0x2fae10(0x1c8)][_0x2fae10(0x1c8)][_0x2fae10(0x2a0)]?.[_0x2fae10(0x2e6)]===_0x2fae10(0x20d)),_0x5c86ad=_0x22d907===0x0?_0x2ec645&&this[_0x2fae10(0x1b6)]['maxLearnedCantrips']!=null&&(_0x35e02c[_0x22d907]||0x0)<this[_0x2fae10(0x1b6)][_0x2fae10(0x2da)]:_0x2ec645&&this[_0x2fae10(0x2a6)]({'lvl':_0x22d907,'fixedLearnedProgression':this[_0x2fae10(0x1b6)][_0x2fae10(0x209)],'cntSpellsKnown':_0x35e02c[_0x22d907]||0x0}),_0x4e49ae=_0x56e17c&&this[_0x2fae10(0x1b6)][_0x2fae10(0x2d5)]!=null&&(_0x53627b[_0x22d907]||0x0)<this[_0x2fae10(0x1b6)][_0x2fae10(0x2d5)];if(!this[_0x2fae10(0x2f0)](_0x4a809d))return;if(!_0x5c86ad&&this['_isLearnedFixedSpellCasterAtLevel']({'lvl':_0x22d907,'fixedLearnedProgression':this[_0x2fae10(0x1b6)]['fixedLearnedProgression']}))return;if(_0x5c86ad)_0x35e02c[_0x22d907]=(_0x35e02c[_0x22d907]||0x0)+0x1;if(_0x4e49ae)_0x53627b[_0x22d907]=(_0x53627b[_0x22d907]||0x0)+0x1;MiscUtil['set'](_0x39a6d2,_0x22d907,_0x2aeedf,_0x5dc39c,new Charactermancer_Spell[(_0x2fae10(0x2e1))]({'item':_0x4a809d,'isLearned':_0x5c86ad,'isPrepared':_0x4e49ae,'isAlwaysPrepared':_0x24bfbf}));}),_0x39a6d2;}['_getExistingSpellLookup_isOnSpellList'](_0x4e58b8){const _0xba8165=_0x57bdb7,_0x33585c=_0x4e58b8[_0xba8165(0x1c8)]['flags']?.[SharedConsts[_0xba8165(0x2e8)]];if(_0x33585c?.[_0xba8165(0x2a7)]&&_0x33585c?.['source']&&_0x33585c?.['hash']){const _0x432e5e=this[_0xba8165(0x1c5)]['hash'][_0x33585c['hash']];if(!_0x432e5e)return![];return this[_0xba8165(0x2e3)](_0x432e5e)||this[_0xba8165(0x1c7)](_0x432e5e)||this[_0xba8165(0x2ee)](_0x432e5e);}const _0x3f3124=UtilDataConverter[_0xba8165(0x250)](_0x4e58b8)[_0xba8165(0x2bc)]||SRC_PHB,_0x46089a=_0x4e58b8[_0xba8165(0x24b)][_0xba8165(0x258)]()[_0xba8165(0x208)](/\s+/g,'\x20')['toLowerCase'](),_0x55a7cb=MiscUtil[_0xba8165(0x233)](this['_spellDataLookup'][_0xba8165(0x1e9)],Parser[_0xba8165(0x231)](_0x3f3124),Parser['stringToSlug'](_0x46089a));if(!_0x55a7cb)return![];return this['isAvailableClassSpell_'](_0x55a7cb)||this[_0xba8165(0x1c7)](_0x55a7cb)||this['isAvailableExpandedSpell_'](_0x55a7cb);}static[_0x57bdb7(0x298)](_0xc220b2,_0x38b738,_0x81a1ef){const _0x221671=_0x57bdb7,_0x2e9ab6={};return(_0xc220b2||[])[_0x221671(0x1db)](_0x4b7603=>this['_getBrewClassSubclassSpellCache_addItem'](_0x2e9ab6,_0x4b7603)),(_0x38b738||[])[_0x221671(0x1db)](_0x49adc7=>this['_getBrewClassSubclassSpellCache_addItem'](_0x2e9ab6,_0x49adc7)),(_0x81a1ef||[])['forEach'](_0x5e9a48=>this[_0x221671(0x1c1)](_0x2e9ab6,_0x5e9a48)),_0x2e9ab6;}static[_0x57bdb7(0x1c1)](_0x1e8713,_0x4dd5f6){const _0x3b5391=_0x57bdb7;if(typeof _0x4dd5f6==='string'){const {name:_0x34d660,source:_0x259962}=DataUtil[_0x3b5391(0x1b8)][_0x3b5391(0x1d7)]('spell',_0x4dd5f6[_0x3b5391(0x258)](),_0x3b5391(0x24a),{'isLower':!![]});MiscUtil['set'](_0x1e8713,'spell',_0x259962,_0x34d660,!![]);return;}if(_0x4dd5f6['name'])return MiscUtil[_0x3b5391(0x1ca)](_0x1e8713,_0x3b5391(0x24a),(_0x4dd5f6[_0x3b5391(0x2bc)]||SRC_PHB)['trim']()[_0x3b5391(0x1e5)](),_0x4dd5f6[_0x3b5391(0x24b)]['trim']()[_0x3b5391(0x1e5)](),!![]);if(_0x4dd5f6[_0x3b5391(0x2e7)]){let _0x1f6c7a='class';const _0x2e8959=_0x4dd5f6[_0x3b5391(0x294)]||SRC_PHB,_0x20a53b=[_0x2e8959,_0x4dd5f6[_0x3b5391(0x2e7)]];if(_0x4dd5f6[_0x3b5391(0x1f2)]){_0x1f6c7a=_0x3b5391(0x207);const _0x10caf8=_0x4dd5f6['subclassSource']||_0x2e8959;_0x20a53b[_0x3b5391(0x1d4)](_0x10caf8,_0x4dd5f6[_0x3b5391(0x1f2)]),_0x4dd5f6[_0x3b5391(0x232)]&&(_0x1f6c7a=_0x3b5391(0x1d6),_0x20a53b[_0x3b5391(0x1d4)](_0x4dd5f6[_0x3b5391(0x232)]));}MiscUtil[_0x3b5391(0x1ca)](_0x1e8713,_0x1f6c7a,..._0x20a53b[_0x3b5391(0x26b)](_0x44bce6=>_0x44bce6['trim']()[_0x3b5391(0x1e5)]()),!![]);}}get['pageFilter'](){const _0x63dfbe=_0x57bdb7;return this[_0x63dfbe(0x2e5)];}set[_0x57bdb7(0x1f2)](_0x297743){this['_subclassName']=_0x297743;}set['subclassShortName'](_0xc3455f){const _0x473c2a=_0x57bdb7;this[_0x473c2a(0x2ec)]=_0xc3455f;}set[_0x57bdb7(0x244)](_0x3316bc){const _0x55b417=_0x57bdb7;this[_0x55b417(0x2bb)]=_0x3316bc;}get[_0x57bdb7(0x2f5)](){const _0x564da2=_0x57bdb7;return this[_0x564da2(0x29b)];}set[_0x57bdb7(0x2f5)](_0x339e4f){const _0x5ec59b=_0x57bdb7;this[_0x5ec59b(0x29b)]=_0x339e4f;}get['isPreparedCaster'](){const _0x559767=_0x57bdb7;return this['_state'][_0x559767(0x2b5)]!=null;}set[_0x57bdb7(0x2ce)](_0x2783c7){const _0x33ab84=_0x57bdb7;this['_state'][_0x33ab84(0x2ce)]=_0x2783c7;}get[_0x57bdb7(0x2ce)](){const _0x1828a4=_0x57bdb7;return this[_0x1828a4(0x200)]['spellLevelLow'];}set[_0x57bdb7(0x269)](_0x29a48a){const _0x72baab=_0x57bdb7;this[_0x72baab(0x200)][_0x72baab(0x269)]=_0x29a48a;}get[_0x57bdb7(0x269)](){const _0xc01b41=_0x57bdb7;return this['_state'][_0xc01b41(0x269)];}get['ixViewedSpell'](){const _0x41ec1a=_0x57bdb7;return this['_state'][_0x41ec1a(0x20a)];}set[_0x57bdb7(0x20a)](_0x31a538){const _0x54820d=_0x57bdb7;this[_0x54820d(0x200)][_0x54820d(0x20a)]=_0x31a538;}get[_0x57bdb7(0x2da)](){const _0x34f26d=_0x57bdb7;return this[_0x34f26d(0x200)][_0x34f26d(0x2da)];}set[_0x57bdb7(0x2da)](_0x60f443){const _0x3f42bb=_0x57bdb7;this['_state'][_0x3f42bb(0x2da)]=_0x60f443;}get[_0x57bdb7(0x209)](){const _0x27d67c=_0x57bdb7;return this[_0x27d67c(0x200)]['fixedLearnedProgression'];}set['fixedLearnedProgression'](_0x428115){const _0x78e8a1=_0x57bdb7;this[_0x78e8a1(0x200)][_0x78e8a1(0x209)]=_0x428115;}get[_0x57bdb7(0x268)](){const _0x1ee948=_0x57bdb7;return this[_0x1ee948(0x200)][_0x1ee948(0x268)];}set['fixedLearnedProgressionDefault'](_0x1a3030){const _0x46a5ec=_0x57bdb7;this['_state'][_0x46a5ec(0x268)]=_0x1a3030;}get[_0x57bdb7(0x2f4)](){const _0x115573=_0x57bdb7;return this['_state'][_0x115573(0x2f4)];}set[_0x57bdb7(0x2f4)](_0x90c59c){const _0x2e3104=_0x57bdb7;this[_0x2e3104(0x200)][_0x2e3104(0x2f4)]=_0x90c59c;}set[_0x57bdb7(0x2b5)](_0x1228bb){const _0x45bcb2=_0x57bdb7;this[_0x45bcb2(0x200)][_0x45bcb2(0x2b5)]=_0x1228bb;if(_0x1228bb!=null)this[_0x45bcb2(0x200)]['maxLearned']=null;}get[_0x57bdb7(0x284)](){const _0x1481e4=_0x57bdb7;return this[_0x1481e4(0x200)][_0x1481e4(0x284)];}set[_0x57bdb7(0x284)](_0x383010){const _0x4a9765=_0x57bdb7;this[_0x4a9765(0x200)]['cntLearnedSpells']=_0x383010;}get[_0x57bdb7(0x276)](){const _0x4b1509=_0x57bdb7;return this[_0x4b1509(0x200)][_0x4b1509(0x276)];}set[_0x57bdb7(0x276)](_0x1738d6){const _0x4375f3=_0x57bdb7;this[_0x4375f3(0x200)][_0x4375f3(0x276)]=_0x1738d6;}get['cntPrepared'](){const _0x3f93dc=_0x57bdb7;return this[_0x3f93dc(0x200)]['cntPrepared'];}set[_0x57bdb7(0x228)](_0x103254){const _0x43a77e=_0x57bdb7;this[_0x43a77e(0x200)][_0x43a77e(0x228)]=_0x103254;}get[_0x57bdb7(0x201)](){const _0x259379=_0x57bdb7;return this['_state'][_0x259379(0x201)];}set[_0x57bdb7(0x201)](_0x5333ca){const _0x18c8f8=_0x57bdb7;this[_0x18c8f8(0x200)][_0x18c8f8(0x201)]=_0x5333ca;}set[_0x57bdb7(0x277)](_0x16ce49){const _0x34f88d=_0x57bdb7;this['_state'][_0x34f88d(0x277)]=_0x16ce49;}['addHookMaxLearnedCantrips'](_0x53afdb){const _0x58a0f7=_0x57bdb7;this[_0x58a0f7(0x1ed)]('maxLearnedCantrips',_0x53afdb);}[_0x57bdb7(0x287)](_0x543e08){this['_addHookBase']('spellLevelLow',_0x543e08);}[_0x57bdb7(0x218)](_0x11f4fd){const _0xfac0cb=_0x57bdb7;this[_0xfac0cb(0x1ed)](_0xfac0cb(0x269),_0x11f4fd);}[_0x57bdb7(0x210)](_0x4b84d1){const _0x155da9=_0x57bdb7;this[_0x155da9(0x1ed)](_0x155da9(0x209),_0x4b84d1);}[_0x57bdb7(0x22c)](_0x4cdaf0){const _0x133c50=_0x57bdb7;this[_0x133c50(0x1ed)](_0x133c50(0x2b5),_0x4cdaf0);}[_0x57bdb7(0x1bc)](_0x2c2bba){const _0x3a2f9e=_0x57bdb7;this[_0x3a2f9e(0x1ed)](_0x3a2f9e(0x209),_0x2c2bba),this['_addHookBase'](_0x3a2f9e(0x2f4),_0x2c2bba),this['_addHookBase'](_0x3a2f9e(0x2ce),_0x2c2bba),this[_0x3a2f9e(0x1ed)](_0x3a2f9e(0x269),_0x2c2bba);}[_0x57bdb7(0x248)](_0x1d2530){const _0x11979e=_0x57bdb7;this[_0x11979e(0x1ed)](_0x11979e(0x276),_0x1d2530),this[_0x11979e(0x1ed)](_0x11979e(0x2da),_0x1d2530);}[_0x57bdb7(0x2d7)](_0x251758){const _0x33872c=_0x57bdb7;this[_0x33872c(0x1ed)](_0x33872c(0x228),_0x251758),this[_0x33872c(0x1ed)](_0x33872c(0x2b5),_0x251758);}[_0x57bdb7(0x2b6)](_0x4ec3b4){const _0x2e0612=_0x57bdb7;return this[_0x2e0612(0x2cb)]({'lvl':_0x4ec3b4,'fixedLearnedProgression':this[_0x2e0612(0x200)][_0x2e0612(0x268)]});}['_isLearnedFixedSpellCasterAtLevel']({lvl:_0x5c8c77,fixedLearnedProgression:_0x10a225}){return _0x5c8c77>0x0&&_0x10a225!=null&&_0x10a225[_0x5c8c77-0x1]>0x0;}[_0x57bdb7(0x2b0)](_0x259a3a){const _0x2ec558=_0x57bdb7;return this[_0x2ec558(0x2a6)]({'lvl':_0x259a3a,'fixedLearnedProgression':this['_state']['fixedLearnedProgression'],'cntSpellsKnown':this[_0x2ec558(0x203)][_0x259a3a][_0x2ec558(0x25c)]()[_0x2ec558(0x286)]});}['_canLearnMoreFixedSpellsOfLevel']({lvl:_0x209924,fixedLearnedProgression:_0x4466e6,cntSpellsKnown:_0x19a9ee}){if(!_0x4466e6)return![];if(!_0x4466e6[_0x209924-0x1])return![];return _0x19a9ee<_0x4466e6[_0x209924-0x1];}['isOverLearnFixedSpellsLimitOfLevel_'](_0x4aadaa){const _0x5a16dc=_0x57bdb7;if(!this['_state'][_0x5a16dc(0x209)])return![];if(!this[_0x5a16dc(0x200)][_0x5a16dc(0x209)][_0x4aadaa-0x1])return![];const _0x5efa75=this[_0x5a16dc(0x203)][_0x4aadaa][_0x5a16dc(0x25c)]();return _0x5efa75[_0x5a16dc(0x286)]>this[_0x5a16dc(0x200)][_0x5a16dc(0x209)][_0x4aadaa-0x1];}[_0x57bdb7(0x2bd)](){const _0x292404=_0x57bdb7;return this[_0x292404(0x200)][_0x292404(0x276)]<(this[_0x292404(0x200)][_0x292404(0x2da)]||0x0);}['isOverLearnCantripsLimit_'](){const _0x2ae769=_0x57bdb7;return this['_state'][_0x2ae769(0x276)]>(this[_0x2ae769(0x200)]['maxLearnedCantrips']||0x0);}['canPrepareMore_'](){const _0x3f91c4=_0x57bdb7;return this[_0x3f91c4(0x200)][_0x3f91c4(0x228)]<(this[_0x3f91c4(0x200)]['maxPrepared']||0x0);}[_0x57bdb7(0x2c9)](){const _0x10e26a=_0x57bdb7;return this['_state']['cntPrepared']>(this[_0x10e26a(0x200)]['maxPrepared']||0x0);}['_getCntSpellsKnown'](){const _0x32e88f=_0x57bdb7;return this[_0x32e88f(0x203)][_0x32e88f(0x26b)](_0x422001=>_0x422001['getSpellsKnown']()[_0x32e88f(0x286)])[_0x32e88f(0x223)]();}[_0x57bdb7(0x205)](){const _0x5a7749=_0x57bdb7;return(this[_0x5a7749(0x200)][_0x5a7749(0x209)]||[])['sum']();}[_0x57bdb7(0x2b7)](_0x6001a4,_0x5a5a6a){const _0x3fc016=_0x57bdb7,_0x3d1fb0=()=>{const _0x29b177=_0x2ccc,_0x3fb203=[this[_0x29b177(0x200)]['maxLearnedCantrips']?_0x29b177(0x1f3)+this[_0x29b177(0x200)][_0x29b177(0x276)]+'/'+this[_0x29b177(0x200)]['maxLearnedCantrips']:null,this[_0x29b177(0x200)][_0x29b177(0x209)]?'Spells\x20learned:\x20'+this[_0x29b177(0x1ff)]()+'/'+this['_getTotalSpellsKnown']():null,this[_0x29b177(0x200)][_0x29b177(0x2b5)]?'Prepared:\x20'+this[_0x29b177(0x200)][_0x29b177(0x228)]+'/'+this['_state'][_0x29b177(0x2b5)]:null][_0x29b177(0x283)](Boolean);(this[_0x29b177(0x274)]||[])['forEach'](_0x3db6b4=>{const _0x790fcb=_0x29b177;_0x3db6b4[_0x790fcb(0x27f)](_0x3fb203[_0x790fcb(0x286)])[_0x790fcb(0x2d0)](_0x3fb203[_0x790fcb(0x2a8)](_0x790fcb(0x28c)));});};this[_0x3fc016(0x1ed)](_0x3fc016(0x228),_0x3d1fb0),this[_0x3fc016(0x1ed)]('maxPrepared',_0x3d1fb0),this[_0x3fc016(0x1ed)](_0x3fc016(0x209),_0x3d1fb0),this[_0x3fc016(0x1ed)](_0x3fc016(0x2f4),_0x3d1fb0),this[_0x3fc016(0x1ed)](_0x3fc016(0x276),_0x3d1fb0),this[_0x3fc016(0x1ed)](_0x3fc016(0x2da),_0x3d1fb0),_0x3d1fb0();const _0x4bcf1e=()=>this[_0x3fc016(0x29c)]();this[_0x3fc016(0x1ed)](_0x3fc016(0x202),_0x4bcf1e),this[_0x3fc016(0x1ed)](_0x3fc016(0x1c3),_0x4bcf1e),this[_0x3fc016(0x1ed)](_0x3fc016(0x285),_0x4bcf1e),this[_0x3fc016(0x1ed)](_0x3fc016(0x245),_0x4bcf1e),_0x4bcf1e();const _0x26af6=()=>this[_0x3fc016(0x20e)]();this[_0x3fc016(0x1ed)](_0x3fc016(0x219),_0x26af6),this[_0x3fc016(0x1ed)](_0x3fc016(0x221),_0x26af6),this[_0x3fc016(0x1ed)](_0x3fc016(0x1df),_0x26af6),this[_0x3fc016(0x1ed)](_0x3fc016(0x25f),_0x26af6),this['_addHookBase'](_0x3fc016(0x277),_0x26af6),_0x26af6();const _0x378444=()=>this[_0x3fc016(0x2dd)]();this[_0x3fc016(0x1ed)](_0x3fc016(0x1cf),_0x378444),this[_0x3fc016(0x1ed)](_0x3fc016(0x23e),_0x378444),this[_0x3fc016(0x1ed)](_0x3fc016(0x2f2),_0x378444),this[_0x3fc016(0x1ed)]('alwaysKnownSpellsSubclass',_0x378444),_0x378444(),this['_compsLevel']['forEach'](_0x57246d=>_0x57246d[_0x3fc016(0x2b7)](_0x6001a4));const _0x37df8e=()=>{const _0x4cadf6=_0x3fc016;_0x5a5a6a[_0x4cadf6(0x21f)]();const _0x2fc4a2=this['_spellDatas'][this[_0x4cadf6(0x200)][_0x4cadf6(0x20a)]];if(!_0x2fc4a2)return _0x5a5a6a[_0x4cadf6(0x1e0)](_0x4cadf6(0x2a4));_0x5a5a6a[_0x4cadf6(0x1e0)](Renderer[_0x4cadf6(0x2f3)][_0x4cadf6(0x222)](UrlUtil['PG_SPELLS'],MiscUtil['copy'](_0x2fc4a2)));};this[_0x3fc016(0x1ed)](_0x3fc016(0x20a),_0x37df8e),_0x37df8e();}[_0x57bdb7(0x29c)](){const _0x5a40ad=_0x57bdb7;this[_0x5a40ad(0x203)][_0x5a40ad(0x1db)](_0x168f04=>_0x168f04[_0x5a40ad(0x2b2)]());}[_0x57bdb7(0x2dd)](){const _0x2d577a=_0x57bdb7;this[_0x2d577a(0x203)][_0x2d577a(0x1db)](_0x5b798d=>_0x5b798d[_0x2d577a(0x1f0)]());}[_0x57bdb7(0x20e)](_0x33f589){const _0x20a9db=_0x57bdb7;this['_cacheFilterValues']=_0x33f589||this[_0x20a9db(0x263)];if(!this[_0x20a9db(0x263)])return;this[_0x20a9db(0x203)][_0x20a9db(0x1db)](_0x3fc6ff=>_0x3fc6ff[_0x20a9db(0x20e)](this[_0x20a9db(0x263)]));}[_0x57bdb7(0x24d)](_0x2471b1){const _0x4f5dfa=_0x57bdb7;this[_0x4f5dfa(0x203)][_0x4f5dfa(0x1db)](_0x3243c1=>_0x3243c1['handleSearch'](_0x2471b1));}[_0x57bdb7(0x281)](_0x1d8e0c){const _0x538cc5=_0x57bdb7;if(!this['_existingCasterMeta']||!this[_0x538cc5(0x247)])return null;const _0x522ef7=_0x1d8e0c[_0x538cc5(0x24b)]['toLowerCase'](),_0x32ddca=_0x1d8e0c['source'][_0x538cc5(0x1e5)](),_0x3b7383=Parser['sourceJsonToAbv'](_0x1d8e0c[_0x538cc5(0x2bc)])[_0x538cc5(0x1e5)]();return this[_0x538cc5(0x247)][_0x1d8e0c[_0x538cc5(0x296)]]?.[_0x32ddca]?.[_0x522ef7]||this[_0x538cc5(0x247)][_0x1d8e0c[_0x538cc5(0x296)]]?.[_0x3b7383]?.[_0x522ef7];}[_0x57bdb7(0x2e3)](_0x323fef){const _0x522410=_0x57bdb7;if(!this[_0x522410(0x1e7)]||!this[_0x522410(0x2c4)])return![];const _0x440296=Renderer['spell']['getCombinedClasses'](_0x323fef,_0x522410(0x29e)),_0x407c57=Renderer[_0x522410(0x24a)][_0x522410(0x2c7)](_0x323fef,_0x522410(0x2df))['filter'](_0x44a88d=>this[_0x522410(0x200)][_0x522410(0x277)]?!![]:!SourceUtil[_0x522410(0x230)](_0x44a88d['definedInSource'])),{className:_0x23c711,classSource:_0x321f3d}=this['constructor'][_0x522410(0x26c)]({'className':this[_0x522410(0x1e7)],'classSource':this[_0x522410(0x2c4)]});if(!_0x440296['some'](_0x5c2cf9=>_0x5c2cf9['name']===_0x23c711&&_0x5c2cf9[_0x522410(0x2bc)]===_0x321f3d)&&!_0x407c57[_0x522410(0x29a)](_0x4a6217=>_0x4a6217['name']===_0x23c711&&_0x4a6217[_0x522410(0x2bc)]===_0x321f3d)&&!this['_hasBrewClassSpell'](_0x323fef,_0x440296,_0x407c57))return![];return!![];}[_0x57bdb7(0x1c7)](_0x20aed1){const _0x4adce7=_0x57bdb7;if(!this['_subclassName']&&!this[_0x4adce7(0x2ec)]||!this[_0x4adce7(0x2bb)])return![];const _0x31f05a=Renderer[_0x4adce7(0x24a)][_0x4adce7(0x2c7)](_0x20aed1,_0x4adce7(0x26d)),_0x5360ac=this[_0x4adce7(0x2ec)]||this[_0x4adce7(0x2ab)];if(!_0x31f05a[_0x4adce7(0x29a)](_0x4bcbe6=>_0x4bcbe6?.['class']['name']===this['_className']&&_0x4bcbe6?.[_0x4adce7(0x23a)][_0x4adce7(0x2bc)]===this['_classSource']&&_0x4bcbe6?.[_0x4adce7(0x207)][_0x4adce7(0x24b)]===_0x5360ac&&_0x4bcbe6?.[_0x4adce7(0x207)][_0x4adce7(0x2bc)]===this[_0x4adce7(0x2bb)])&&!this[_0x4adce7(0x275)](_0x20aed1,_0x31f05a))return![];return!![];}[_0x57bdb7(0x2a5)](_0x3db76c,_0x33b9e6,_0x13cbce){const _0x16323f=_0x57bdb7;if(MiscUtil['get'](this['_cacheBrewClassSpells'],_0x16323f(0x24a),_0x3db76c[_0x16323f(0x2bc)][_0x16323f(0x1e5)](),_0x3db76c[_0x16323f(0x24b)][_0x16323f(0x1e5)]()))return!![];if(_0x33b9e6[_0x16323f(0x29a)](_0x559740=>MiscUtil[_0x16323f(0x233)](this[_0x16323f(0x242)],'class',_0x559740[_0x16323f(0x2bc)][_0x16323f(0x1e5)](),_0x559740[_0x16323f(0x24b)]['toLowerCase']())))return!![];if(_0x13cbce[_0x16323f(0x29a)](_0x234c93=>MiscUtil[_0x16323f(0x233)](this[_0x16323f(0x242)],'class',_0x234c93[_0x16323f(0x2bc)][_0x16323f(0x1e5)](),_0x234c93[_0x16323f(0x24b)][_0x16323f(0x1e5)]())))return!![];return![];}['_hasBrewSubclassSpell'](_0x4fa835,_0x480564){const _0x380a85=_0x57bdb7;if(MiscUtil[_0x380a85(0x233)](this[_0x380a85(0x242)],'spell',_0x4fa835[_0x380a85(0x2bc)][_0x380a85(0x1e5)](),_0x4fa835['name'][_0x380a85(0x1e5)]()))return!![];if(_0x480564['some'](_0x1ea825=>!_0x1ea825['subSubclass']&&MiscUtil['get'](this['_cacheBrewClassSpells'],'subclass',_0x1ea825[_0x380a85(0x23a)][_0x380a85(0x2bc)][_0x380a85(0x1e5)](),_0x1ea825[_0x380a85(0x23a)][_0x380a85(0x24b)][_0x380a85(0x1e5)](),_0x1ea825['subclass'][_0x380a85(0x2bc)][_0x380a85(0x1e5)](),_0x1ea825[_0x380a85(0x207)]['name'][_0x380a85(0x1e5)]())))return!![];if(_0x480564[_0x380a85(0x29a)](_0x20ad0f=>_0x20ad0f[_0x380a85(0x1d6)]&&MiscUtil[_0x380a85(0x233)](this[_0x380a85(0x242)],'subSubclass',_0x20ad0f['class'][_0x380a85(0x2bc)]['toLowerCase'](),_0x20ad0f[_0x380a85(0x23a)][_0x380a85(0x24b)][_0x380a85(0x1e5)](),_0x20ad0f[_0x380a85(0x207)]['source'][_0x380a85(0x1e5)](),_0x20ad0f[_0x380a85(0x207)]['name']['toLowerCase'](),_0x20ad0f['subclass'][_0x380a85(0x1d6)][_0x380a85(0x1e5)]())))return!![];return![];}[_0x57bdb7(0x259)](_0x3aee42){const _0x3dc1d2=_0x57bdb7,_0x364294=this['constructor'][_0x3dc1d2(0x1e4)](_0x3aee42);if(this[_0x3dc1d2(0x200)][_0x3dc1d2(0x202)]['includes'](_0x364294))return!![];if(this['_state'][_0x3dc1d2(0x1c3)]['includes'](_0x364294))return!![];if(this[_0x3dc1d2(0x200)][_0x3dc1d2(0x285)][_0x3dc1d2(0x23f)](_0x364294))return!![];if(this[_0x3dc1d2(0x200)][_0x3dc1d2(0x245)][_0x3dc1d2(0x23f)](_0x364294))return!![];return![];}['isAvailableExpandedSpell_'](_0x44bcc6){const _0x589c86=_0x57bdb7,_0x1aab0d=this['constructor'][_0x589c86(0x1e4)](_0x44bcc6);if(this['_state']['expandedSpellsRace'][_0x589c86(0x23f)](_0x1aab0d))return!![];if(this['_state']['expandedSpellsBackground'][_0x589c86(0x23f)](_0x1aab0d))return!![];if(this['_state'][_0x589c86(0x1df)][_0x589c86(0x23f)](_0x1aab0d))return!![];if(this['_state'][_0x589c86(0x25f)]['includes'](_0x1aab0d))return!![];return![];}['isAlwaysKnownSpell_'](_0x533737){const _0x4aac0c=_0x57bdb7,_0x1dc715=this[_0x4aac0c(0x2dc)]['_getSpellUid'](_0x533737);if(this['_state'][_0x4aac0c(0x1cf)]['includes'](_0x1dc715))return!![];if(this[_0x4aac0c(0x200)][_0x4aac0c(0x23e)][_0x4aac0c(0x23f)](_0x1dc715))return!![];if(this[_0x4aac0c(0x200)][_0x4aac0c(0x2f2)][_0x4aac0c(0x23f)](_0x1dc715))return!![];if(this[_0x4aac0c(0x200)][_0x4aac0c(0x27e)][_0x4aac0c(0x23f)](_0x1dc715))return!![];return![];}static[_0x57bdb7(0x1e4)](_0x35bd9e){const _0xb6ff48=_0x57bdb7;return _0x35bd9e[_0xb6ff48(0x24b)]['toLowerCase']()+'|'+_0x35bd9e['source']['toLowerCase']();}set[_0x57bdb7(0x202)](_0x492f93){const _0x5a1fa9=_0x57bdb7;this[_0x5a1fa9(0x200)]['alwaysPreparedSpellsRace']=_0x492f93;}set[_0x57bdb7(0x1c3)](_0x92769a){const _0x446746=_0x57bdb7;this[_0x446746(0x200)]['alwaysPreparedSpellsBackground']=_0x92769a;}set[_0x57bdb7(0x285)](_0x3a5d1f){const _0x2d2da2=_0x57bdb7;this[_0x2d2da2(0x200)][_0x2d2da2(0x285)]=_0x3a5d1f;}set['alwaysPreparedSpellsSubclass'](_0x3d94df){const _0x3a5322=_0x57bdb7;this[_0x3a5322(0x200)][_0x3a5322(0x245)]=_0x3d94df;}set[_0x57bdb7(0x219)](_0x422504){const _0x1a7f7e=_0x57bdb7;this[_0x1a7f7e(0x200)][_0x1a7f7e(0x219)]=_0x422504;}set[_0x57bdb7(0x221)](_0x161b5a){this['_state']['expandedSpellsBackground']=_0x161b5a;}set[_0x57bdb7(0x1df)](_0x36ab25){const _0x49c280=_0x57bdb7;this[_0x49c280(0x200)][_0x49c280(0x1df)]=_0x36ab25;}set['expandedSpellsSubclass'](_0x3371c5){const _0x4bb583=_0x57bdb7;this[_0x4bb583(0x200)][_0x4bb583(0x25f)]=_0x3371c5;}set[_0x57bdb7(0x1cf)](_0x4d155a){const _0x11e9f1=_0x57bdb7;this[_0x11e9f1(0x200)]['alwaysKnownSpellsRace']=_0x4d155a;}set['alwaysKnownSpellsBackground'](_0x2c038e){const _0x2fbcb2=_0x57bdb7;this[_0x2fbcb2(0x200)][_0x2fbcb2(0x23e)]=_0x2c038e;}set['alwaysKnownSpellsClass'](_0x48af78){const _0x3733b4=_0x57bdb7;this[_0x3733b4(0x200)][_0x3733b4(0x2f2)]=_0x48af78;}set[_0x57bdb7(0x27e)](_0x3cab7a){const _0x4638ed=_0x57bdb7;this['_state'][_0x4638ed(0x27e)]=_0x3cab7a;}async[_0x57bdb7(0x2b8)](_0x449465){const _0x3a672f=_0x57bdb7;return{'isFormComplete':(this['_state'][_0x3a672f(0x276)]===this['_state']['maxLearnedCantrips']||0x0)&&(this[_0x3a672f(0x200)]['cntPrepared']===this[_0x3a672f(0x200)][_0x3a672f(0x2b5)]||0x0),'data':{'spells':this[_0x3a672f(0x203)]['map'](_0xcf57d1=>_0xcf57d1[_0x3a672f(0x2a3)](_0x449465))[_0x3a672f(0x1d3)]()}};}['_getDefaultState'](){return{'spellLevelLow':null,'spellLevelHigh':null,'ixViewedSpell':null,'cntLearnedCantrips':0x0,'maxLearnedCantrips':null,'fixedLearnedProgression':null,'pulseFixedLearned':![],'cntPrepared':0x0,'maxPrepared':null,'alwaysPreparedSpellsRace':[],'alwaysPreparedSpellsBackground':[],'alwaysPreparedSpellsClass':[],'alwaysPreparedSpellsSubclass':[],'alwaysPreparedSpellsFeat':{},'expandedSpellsRace':[],'expandedSpellsBackground':[],'expandedSpellsClass':[],'expandedSpellsSubclass':[],'expandedSpellsFeat':{},'alwaysKnownSpellsRace':[],'alwaysKnownSpellsBackground':[],'alwaysKnownSpellsClass':[],'alwaysKnownSpellsSubclass':[],'alwaysKnownSpellsFeat':{},'casterProgression':null,'isIncludeUaEtcSpellLists':![]};}static[_0x57bdb7(0x26c)]({className:_0x4d24a8,classSource:_0x3b2806}){return Charactermancer_Spell['_CLASS_MAP']?.[_0x3b2806]?.[_0x4d24a8]||{'className':_0x4d24a8,'classSource':_0x3b2806};}}Charactermancer_Spell[_0x57bdb7(0x2f1)]=null,Charactermancer_Spell['_CLASS_MAP']={[SRC_UATRR]:{'Ranger\x20(Revised)':{'className':'Ranger','classSource':SRC_PHB}}},Charactermancer_Spell[_0x57bdb7(0x2e1)]=class{constructor({item:_0x1881d5,isLearned:_0xfad3d9,isPrepared:_0xf8157d,isAlwaysPrepared:_0x14b967}){const _0x2b141b=_0x57bdb7;this['item']=_0x1881d5,this[_0x2b141b(0x2c1)]=_0xfad3d9,this[_0x2b141b(0x2db)]=_0xf8157d,this[_0x2b141b(0x27d)]=_0x14b967;}};class Charactermancer_Spell_Modal extends Charactermancer_Spell{constructor(_0x36517b){const _0x4ebe52=_0x57bdb7;_0x36517b[_0x4ebe52(0x251)]=new PageFilterSpells(),super(_0x36517b);}static[_0x57bdb7(0x26e)](_0x279177){const _0x60354f=_0x57bdb7,_0x3ebfb3=new this(_0x279177);return _0x3ebfb3['maxLearnedCantrips']=_0x279177[_0x60354f(0x2da)],UtilApplications['pGetImportCompApplicationFormData']({'comp':_0x3ebfb3,'width':Util[_0x60354f(0x235)](0x4b0),'height':Util[_0x60354f(0x22a)]()});}get[_0x57bdb7(0x1f6)](){const _0x361465=_0x57bdb7;return _0x361465(0x299);}[_0x57bdb7(0x229)](_0x1688db){const _0x5a1aa3=_0x57bdb7,_0x580d38=$(_0x5a1aa3(0x1c2)),_0xe8f2a=$(_0x5a1aa3(0x1c2)),_0x40c04e=this[_0x5a1aa3(0x252)](_0x580d38);return _0xe8f2a['append']('<i\x20class=\x22ve-muted\x20text-center\x22>Select\x20a\x20spell\x20to\x20view\x20it\x20here.</i>'),$$`<div class="split w-100 h-100">
			${_0x580d38}
			<div class="vr-1 h-100"></div>
			${_0xe8f2a}
		</div>`[_0x5a1aa3(0x23c)](_0x1688db),super[_0x5a1aa3(0x2b7)](_0x580d38,_0xe8f2a),_0x40c04e[_0x5a1aa3(0x2b4)](()=>{const _0x46b731=_0x5a1aa3;this[_0x46b731(0x20e)](this['_pageFilter']['filterBox']['getValues']());});}[_0x57bdb7(0x252)](_0x191d43){const _0x229d14=_0x57bdb7,_0x125a88=$(_0x229d14(0x2c3)),_0x14f3c0=$(_0x229d14(0x292)),_0x11e2f6=$(_0x229d14(0x1fa)),_0x2b5910=$(_0x229d14(0x24e))[_0x229d14(0x21e)](()=>_0x11e2f6[_0x229d14(0x21a)]('')['keyup']()),_0x553e07=$(_0x229d14(0x1c4));return $$(_0x191d43)`
			<div class="ve-flex-v-stretch input-group input-group--top no-shrink">
				${_0x125a88}
				${_0x14f3c0}
				${_0x11e2f6}
				${_0x2b5910}
			</div>
			${_0x553e07}
			<div class="ve-flex-v-stretch input-group input-group--bottom mb-1 no-shrink">
				<button class="btn-5et w-100" disabled></button>
			</div>
		`,this[_0x229d14(0x2e5)][_0x229d14(0x21d)]({'$iptSearch':_0x11e2f6,'$btnReset':_0x2b5910,'$btnOpen':_0x125a88,'$btnToggleSummaryHidden':_0x14f3c0,'$wrpMiniPills':_0x553e07,'namespace':_0x229d14(0x28d)})[_0x229d14(0x2b4)](()=>{const _0x2cf4b1=_0x229d14;this[_0x2cf4b1(0x2b9)]['forEach'](_0x11ab6b=>this['_pageFilter'][_0x2cf4b1(0x2ea)](_0x11ab6b)),this[_0x2cf4b1(0x2e5)][_0x2cf4b1(0x1d1)](),this[_0x2cf4b1(0x2e5)][_0x2cf4b1(0x22e)]['render'](),UiUtil[_0x2cf4b1(0x20c)]({'$ipt':_0x11e2f6,'fnKeyup':()=>{const _0x31c602=_0x2cf4b1,_0x298df2=List['getCleanSearchTerm'](_0x11e2f6['val']());if(this[_0x31c602(0x1fb)]===_0x298df2)return;this[_0x31c602(0x1fb)]=_0x298df2,this['handleSearch'](_0x298df2);}}),this['_pageFilter'][_0x2cf4b1(0x22e)]['on'](FilterBox[_0x2cf4b1(0x236)],()=>{const _0x6912c0=_0x2cf4b1;this[_0x6912c0(0x20e)](this[_0x6912c0(0x2e5)][_0x6912c0(0x22e)][_0x6912c0(0x28e)]());});});}}class Charactermancer_Spell_Level extends BaseComponent{constructor(_0x4164b9){const _0x2e3eac=_0x57bdb7;super(),_0x4164b9=_0x4164b9||{},this['_spellDatas']=_0x4164b9[_0x2e3eac(0x1f1)],this['_spellLevel']=_0x4164b9['spellLevel'],this[_0x2e3eac(0x2c6)]=_0x4164b9[_0x2e3eac(0x288)],this[_0x2e3eac(0x2bf)]=null,this[_0x2e3eac(0x1ce)]=null,this['_list']=null;}[_0x57bdb7(0x28a)](_0x496d0e){const _0x58af3b=_0x57bdb7;return _0x496d0e[_0x58af3b(0x296)]===this[_0x58af3b(0x1fc)];}['render'](_0x423fdf){const _0x2b2f27=_0x57bdb7;this[_0x2b2f27(0x2bf)]=$$`<div class="ve-flex-col manc__list mt-1 mb-3"></div>`,this[_0x2b2f27(0x1ce)]=$(_0x2b2f27(0x1be))[_0x2b2f27(0x272)]();const _0x32d987=()=>{const _0x1e0088=_0x2b2f27;this[_0x1e0088(0x1ce)][_0x1e0088(0x27f)](!this[_0x1e0088(0x23b)][_0x1e0088(0x249)]['length']&&_0x100c04['text']()!==_0x1e0088(0x1e2));},_0x1224d6=$(_0x2b2f27(0x273));this[_0x2b2f27(0x23b)]=new List({'$wrpList':this[_0x2b2f27(0x2bf)],'fnSort':PageFilterSpells['sortSpells'],'fnSearch':(_0xf27f33,_0x46d066)=>{const _0x518b5a=_0x2b2f27,{ixLearned:_0x57abe7,ixPrepared:_0x18fa2f,ixAlwaysPrepared:_0x268ef5,ixAlwaysKnownSpell:_0xfb3a33}=this[_0x518b5a(0x2dc)]['_getProps'](_0xf27f33['ix']);if([_0x57abe7,_0x18fa2f,_0x268ef5,_0xfb3a33]['some'](_0x21fbdb=>this[_0x518b5a(0x200)][_0x21fbdb]))return!![];return _0xf27f33[_0x518b5a(0x1bb)][_0x518b5a(0x23f)](_0x46d066);}}),SortUtil['initBtnSortHandlers'](_0x1224d6,this[_0x2b2f27(0x23b)]),this[_0x2b2f27(0x23b)]['on'](_0x2b2f27(0x1bf),()=>_0x32d987());const _0x100c04=$(_0x2b2f27(0x2cc))[_0x2b2f27(0x21e)](()=>{const _0x2b431d=_0x2b2f27;_0x100c04[_0x2b431d(0x216)](_0x100c04[_0x2b431d(0x216)]()===_0x2b431d(0x1e2)?_0x2b431d(0x215):_0x2b431d(0x1e2)),this[_0x2b431d(0x2bf)][_0x2b431d(0x27f)](),_0x1224d6[_0x2b431d(0x27f)](),_0x32d987();}),_0x5c6e2c=$$`<div class="ve-flex-col w-100">
			<div class="split-v-center">
				<div class="bold">${Parser[_0x2b2f27(0x265)](this[_0x2b2f27(0x1fc)])}</div>
				${_0x100c04}
			</div>
			${_0x1224d6}
			${this[_0x2b2f27(0x1ce)]}
			${this[_0x2b2f27(0x2bf)]}
		</div>`['appendTo'](_0x423fdf),_0x1004e2=this['_spellDatas'][_0x2b2f27(0x286)];for(let _0x5148d0=0x0;_0x5148d0<_0x1004e2;++_0x5148d0){const _0x21e631=this[_0x2b2f27(0x2b9)][_0x5148d0];if(!this[_0x2b2f27(0x28a)](_0x21e631))continue;const _0x420d22=this[_0x2b2f27(0x2ac)](_0x21e631,_0x5148d0);if(!_0x420d22)continue;this[_0x2b2f27(0x23b)][_0x2b2f27(0x289)](_0x420d22);}this[_0x2b2f27(0x23b)][_0x2b2f27(0x1d0)]();const _0x21d850=()=>{const _0x55f8c7=_0x2b2f27,_0x158ddf=this['_isWithinLevelRange']();_0x5c6e2c[_0x55f8c7(0x27f)](_0x158ddf);if(!_0x158ddf)this[_0x55f8c7(0x2ba)]();};this[_0x2b2f27(0x2c6)][_0x2b2f27(0x243)](_0x21d850),this[_0x2b2f27(0x2c6)][_0x2b2f27(0x287)](_0x21d850),this[_0x2b2f27(0x2c6)][_0x2b2f27(0x218)](_0x21d850),this[_0x2b2f27(0x2c6)][_0x2b2f27(0x210)](_0x21d850),_0x21d850();if(this[_0x2b2f27(0x1fc)]===0x0)this[_0x2b2f27(0x282)]();else this['_render_bindLevelledSpellHooks']();}[_0x57bdb7(0x282)](){const _0x30620e=_0x57bdb7,_0x7eed43=()=>{const _0x2d6000=_0x2ccc;this['_$wrpRows'][_0x2d6000(0x1f7)](_0x2d6000(0x1da),!this[_0x2d6000(0x2c6)]['canLearnMoreCantrips_']()),this['_$wrpRows'][_0x2d6000(0x1f7)]('manc-sp__is-max-learned-cantrips--is-over-limit',this['_parent'][_0x2d6000(0x25d)]());};this['_parent'][_0x30620e(0x248)](_0x7eed43),_0x7eed43();}[_0x57bdb7(0x1c0)](){const _0x55e716=_0x57bdb7,_0x144be0=()=>this[_0x55e716(0x2bf)]['toggleClass']('manc-sp__is-prepared-caster',this['_parent'][_0x55e716(0x2cd)]);this[_0x55e716(0x2c6)][_0x55e716(0x22c)](_0x144be0),_0x144be0();const _0x4b76e0=()=>{const _0x422a90=_0x55e716,_0x561dc1=this['_parent'][_0x422a90(0x2b6)](this[_0x422a90(0x1fc)]);let _0x6aecaa=!![],_0x822864=!![];if(_0x561dc1){if(this[_0x422a90(0x2c6)][_0x422a90(0x2b0)](this[_0x422a90(0x1fc)]))_0x6aecaa=![];if(!this[_0x422a90(0x2c6)][_0x422a90(0x256)](this['_spellLevel']))_0x822864=![];}this[_0x422a90(0x2bf)][_0x422a90(0x1f7)](_0x422a90(0x2f6),_0x561dc1),this['_$wrpRows'][_0x422a90(0x1f7)](_0x422a90(0x1f4),_0x561dc1&&_0x6aecaa),this[_0x422a90(0x2bf)]['toggleClass'](_0x422a90(0x254),_0x561dc1&&_0x822864);};this[_0x55e716(0x2c6)][_0x55e716(0x1bc)](_0x4b76e0),_0x4b76e0();const _0x5d816e=()=>{const _0x324d58=_0x55e716;this['_$wrpRows']['toggleClass'](_0x324d58(0x2e4),!this[_0x324d58(0x2c6)][_0x324d58(0x260)]()),this[_0x324d58(0x2bf)][_0x324d58(0x1f7)](_0x324d58(0x262),this[_0x324d58(0x2c6)][_0x324d58(0x2c9)]());};this['_parent']['addHookIsMaxPrepared'](_0x5d816e),_0x5d816e();}['_isWithinLevelRange'](){const _0x29d592=_0x57bdb7;if(this[_0x29d592(0x1fc)]!==0x0&&this[_0x29d592(0x2c6)][_0x29d592(0x209)]!=null&&this[_0x29d592(0x2c6)]['fixedLearnedProgression'][this['_spellLevel']-0x1])return!![];if(this[_0x29d592(0x1fc)]===0x0)return!!this[_0x29d592(0x2c6)][_0x29d592(0x2da)];return this[_0x29d592(0x1fc)]>=(this[_0x29d592(0x2c6)][_0x29d592(0x2ce)]??Number[_0x29d592(0x264)])&&this[_0x29d592(0x1fc)]<=(this[_0x29d592(0x2c6)][_0x29d592(0x269)]??Number[_0x29d592(0x24c)]);}[_0x57bdb7(0x2ac)](_0x1a544a,_0x20577d){const _0x28dc7e=_0x57bdb7,{ixLearned:_0x117a3a,ixPrepared:_0x1f1456,ixAlwaysPrepared:_0x5ba8f4,ixAlwaysKnownSpell:_0x52bbe8}=this[_0x28dc7e(0x2dc)][_0x28dc7e(0x1b9)](_0x20577d),_0x41e617=this[_0x28dc7e(0x2c6)][_0x28dc7e(0x281)](_0x1a544a);if(_0x41e617){if(_0x41e617['isLearned']){this[_0x28dc7e(0x200)][_0x117a3a]=!![];if(_0x1a544a[_0x28dc7e(0x296)]===0x0)this[_0x28dc7e(0x2c6)][_0x28dc7e(0x276)]++;}_0x41e617[_0x28dc7e(0x2db)]&&!_0x41e617[_0x28dc7e(0x27d)]&&(this[_0x28dc7e(0x200)][_0x1f1456]=!![],this[_0x28dc7e(0x2c6)][_0x28dc7e(0x228)]++),_0x41e617[_0x28dc7e(0x27d)]&&(this['_state'][_0x5ba8f4]=!![]);}const _0x1a298b=document['createElement']('div');_0x1a298b[_0x28dc7e(0x2e7)]=_0x28dc7e(0x1e6),_0x1a298b['dataset']['ix']=_0x20577d;const _0x1d5600=Parser[_0x28dc7e(0x29d)](_0x1a544a['source']),_0x144ca0=PageFilterSpells[_0x28dc7e(0x27a)](_0x1a544a[_0x28dc7e(0x261)][0x0]),_0x5c9629=Parser[_0x28dc7e(0x2b1)](_0x1a544a[_0x28dc7e(0x2de)],_0x1a544a['subschools']),_0x5dc78d=_0x1a544a[_0x28dc7e(0x224)]?'×':'',_0x576fa7=_0x1a544a[_0x28dc7e(0x290)]?.['ritual']?'×':'',_0x2ae113=Parser['spRangeToFull'](_0x1a544a[_0x28dc7e(0x270)]),_0x313b15=_0x41e617||this[_0x28dc7e(0x200)][_0x52bbe8],_0x2ace89=_0x41e617&&(this[_0x28dc7e(0x1fc)]===0x0||_0x41e617[_0x28dc7e(0x2c1)]),_0x3f9ed3=_0x2ace89||this[_0x28dc7e(0x200)][_0x5ba8f4];_0x1a298b[_0x28dc7e(0x1ef)]=_0x28dc7e(0x2cf)+_0x1a544a[_0x28dc7e(0x24b)]+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20text-center\x22>'+_0x144ca0+_0x28dc7e(0x279)+_0x1a544a[_0x28dc7e(0x2de)]+_0x28dc7e(0x253)+Parser[_0x28dc7e(0x1ea)](_0x1a544a[_0x28dc7e(0x2de)],_0x1a544a['subschools'])+'\x22\x20'+Parser['spSchoolAbvToStyle'](_0x1a544a[_0x28dc7e(0x2de)])+'>'+_0x5c9629+_0x28dc7e(0x1e8)+_0x5dc78d+_0x28dc7e(0x2c5)+_0x576fa7+_0x28dc7e(0x204)+_0x2ae113+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20text-center\x20'+Parser['sourceJsonToColor'](_0x1a544a[_0x28dc7e(0x2bc)])+_0x28dc7e(0x227)+Parser[_0x28dc7e(0x1f5)](_0x1a544a['source'])+'\x22\x20'+BrewUtil2[_0x28dc7e(0x1bd)](_0x1a544a[_0x28dc7e(0x2bc)])+'>'+_0x1d5600+_0x28dc7e(0x2c0)+(this[_0x28dc7e(0x1fc)]===0x0?_0x28dc7e(0x28f):'manc-sp__btn-learn-spell')+'\x20'+(this[_0x28dc7e(0x200)][_0x117a3a]||_0x41e617?.[_0x28dc7e(0x2c1)]||this[_0x28dc7e(0x200)][_0x52bbe8]?_0x28dc7e(0x27c):'')+'\x22\x0a\x09\x09\x09\x09\x09name=\x22'+(this[_0x28dc7e(0x1fc)]===0x0?_0x28dc7e(0x297):_0x28dc7e(0x2e2))+_0x28dc7e(0x1d5)+(_0x313b15?_0x28dc7e(0x206):'')+_0x28dc7e(0x2eb)+(_0x41e617?_0x28dc7e(0x1ba):'')+_0x28dc7e(0x2eb)+(_0x41e617?_0x28dc7e(0x26f):'')+_0x28dc7e(0x1dc)+(this[_0x28dc7e(0x1fc)]!==0x0?_0x28dc7e(0x2ed)+(this['_state'][_0x1f1456]||this['_state'][_0x5ba8f4]||_0x41e617?.[_0x28dc7e(0x2db)]||_0x41e617?.[_0x28dc7e(0x27d)]?_0x28dc7e(0x27c):'')+_0x28dc7e(0x1de)+(_0x2ace89?_0x28dc7e(0x20f):_0x28dc7e(0x2aa))+_0x28dc7e(0x1d5)+(_0x3f9ed3?'disabled':'')+'\x0a\x09\x09\x09\x09\x09'+(_0x2ace89?_0x28dc7e(0x1ba):'')+_0x28dc7e(0x1d9):'')+_0x28dc7e(0x214);const _0x2f0a14=_0x1a298b[_0x28dc7e(0x1c6)](_0x28dc7e(0x266)),[_0x68de2a,_0x28841c]=_0x2f0a14,_0x17056e=new ListItem(_0x20577d,_0x1a298b,_0x1a544a['name'],{'source':_0x1d5600,'level':_0x1a544a['level'],'time':_0x144ca0,'school':Parser[_0x28dc7e(0x2af)](_0x1a544a['school']),'concentration':_0x5dc78d,'ritual':_0x576fa7,'normalisedTime':_0x1a544a['_normalisedTime'],'normalisedRange':_0x1a544a[_0x28dc7e(0x226)]},{'btnLearn':_0x68de2a,'btnPrepare':_0x28841c});return _0x2f0a14['forEach'](_0x2f9eab=>{const _0x308448=_0x28dc7e;_0x2f9eab[_0x308448(0x220)]('click',_0x1f63bd=>{const _0x5041db=_0x308448;_0x1f63bd[_0x5041db(0x267)](),_0x1f63bd[_0x5041db(0x237)]();const _0x267b36=_0x2f9eab['classList'][_0x5041db(0x2b3)](_0x5041db(0x27c));switch(_0x2f9eab[_0x5041db(0x24b)]){case'btn-learn-cantrip':{if(!_0x267b36&&!this[_0x5041db(0x2c6)]['canLearnMoreCantrips_']())return;_0x2f9eab[_0x5041db(0x1e1)][_0x5041db(0x2a1)](_0x5041db(0x27c)),this[_0x5041db(0x200)][_0x117a3a]=!this['_state'][_0x117a3a];if(this[_0x5041db(0x200)][_0x117a3a])this['_parent'][_0x5041db(0x276)]++;else this['_parent'][_0x5041db(0x276)]--;break;}case'btn-learn-spell':{this[_0x5041db(0x2ad)]({'btnLearn':_0x68de2a,'btnPrepare':_0x28841c,'isActive':_0x267b36,'ixPrepared':_0x1f1456,'ixLearned':_0x117a3a});break;}case _0x5041db(0x241):{if(!_0x267b36&&!this['_parent'][_0x5041db(0x260)]())return;if(!_0x267b36&&this[_0x5041db(0x2c6)][_0x5041db(0x2b6)](this[_0x5041db(0x1fc)])&&!this['_state'][_0x117a3a]){const _0x205cd4=this[_0x5041db(0x2ad)]({'btnLearn':_0x68de2a,'btnPrepare':_0x28841c,'isActive':this['_state'][_0x117a3a],'ixPrepared':_0x1f1456,'ixLearned':_0x117a3a});if(!_0x205cd4)return;}_0x2f9eab[_0x5041db(0x1e1)][_0x5041db(0x2a1)](_0x5041db(0x27c)),this[_0x5041db(0x200)][_0x1f1456]=!this[_0x5041db(0x200)][_0x1f1456];if(this[_0x5041db(0x200)][_0x1f1456])this['_parent'][_0x5041db(0x228)]++;else this[_0x5041db(0x2c6)]['cntPrepared']--;break;}default:throw new Error(_0x5041db(0x2d9)+_0x2f9eab[_0x5041db(0x24b)]+'\x22');}});}),_0x1a298b[_0x28dc7e(0x220)](_0x28dc7e(0x21e),_0x375237=>{const _0x583e59=_0x28dc7e;_0x375237[_0x583e59(0x267)](),_0x375237['preventDefault']();if(this['_parent'][_0x583e59(0x2f5)])this[_0x583e59(0x2c6)][_0x583e59(0x2f5)][_0x583e59(0x1d8)][_0x583e59(0x1e1)][_0x583e59(0x22b)](_0x583e59(0x293));_0x1a298b[_0x583e59(0x1e1)][_0x583e59(0x217)](_0x583e59(0x293)),this[_0x583e59(0x2c6)]['ixViewedSpell']=_0x20577d,this[_0x583e59(0x2c6)][_0x583e59(0x2f5)]=_0x17056e;}),_0x17056e;}[_0x57bdb7(0x22f)]({btnLearn:_0x551a95,btnPrepare:_0x1892d3,isActive:_0x42c88e,ixPrepared:_0x14a1ba,ixLearned:_0x285033}){const _0x1ec67a=_0x57bdb7;_0x42c88e&&this['_parent']['isPreparedCaster']&&this[_0x1ec67a(0x200)][_0x14a1ba]&&(this[_0x1ec67a(0x200)][_0x14a1ba]=![],_0x1892d3[_0x1ec67a(0x1e1)]['remove'](_0x1ec67a(0x27c)),this[_0x1ec67a(0x2c6)][_0x1ec67a(0x228)]--),_0x551a95[_0x1ec67a(0x1e1)][_0x1ec67a(0x2a1)]('active'),this[_0x1ec67a(0x200)][_0x285033]=!this[_0x1ec67a(0x200)][_0x285033];}[_0x57bdb7(0x2ad)]({btnLearn:_0x5ec794,btnPrepare:_0x1e4e4c,isActive:_0x149a6c,ixPrepared:_0x536b40,ixLearned:_0x3020f1}){const _0x56268c=_0x57bdb7;if(!_0x149a6c&&!this[_0x56268c(0x2c6)][_0x56268c(0x2b0)](this[_0x56268c(0x1fc)]))return![];return this['_handleListItemBtnLearnClick_do_doLearn']({'btnLearn':_0x5ec794,'btnPrepare':_0x1e4e4c,'isActive':_0x149a6c,'ixPrepared':_0x536b40,'ixLearned':_0x3020f1}),this[_0x56268c(0x2c6)][_0x56268c(0x2f4)]=!this[_0x56268c(0x2c6)][_0x56268c(0x2f4)],!![];}[_0x57bdb7(0x20e)](_0x3ee46b){const _0x4ec78a=_0x57bdb7;if(!this[_0x4ec78a(0x23b)])return;this['_list'][_0x4ec78a(0x283)](_0x528be5=>{const _0x156b2c=_0x4ec78a,_0x28358f=this[_0x156b2c(0x2b9)][_0x528be5['ix']];if(!this[_0x156b2c(0x2c6)][_0x156b2c(0x2e3)](_0x28358f)&&!this[_0x156b2c(0x2c6)]['isAvailableSubclassSpell_'](_0x28358f)&&!this['_parent'][_0x156b2c(0x2ee)](_0x28358f))return![];const {ixLearned:_0x32679c,ixPrepared:_0x43ce63,ixAlwaysPrepared:_0xec2a24,ixAlwaysKnownSpell:_0x4d758f}=this['constructor']['_getProps'](_0x528be5['ix']);if([_0x32679c,_0x43ce63,_0xec2a24,_0x4d758f][_0x156b2c(0x29a)](_0x288d6a=>this[_0x156b2c(0x200)][_0x288d6a]))return!![];return this[_0x156b2c(0x2c6)]['pageFilter'][_0x156b2c(0x278)](_0x3ee46b,_0x28358f);});}['handleSearch'](_0x1061ce){const _0x98a161=_0x57bdb7;this['_list'][_0x98a161(0x26a)](_0x1061ce);}[_0x57bdb7(0x2b2)](){const _0x1b6761=_0x57bdb7;return this[_0x1b6761(0x1f8)]({'propIx':_0x1b6761(0x1ec),'propIxAlways':_0x1b6761(0x1f9),'propBtn':_0x1b6761(0x2e0),'propExistingSpellMetaAlways':_0x1b6761(0x27d),'fnParentCheckAlways':this[_0x1b6761(0x2c6)][_0x1b6761(0x259)][_0x1b6761(0x2a2)](this['_parent'])});}[_0x57bdb7(0x1f0)](){const _0x56d633=_0x57bdb7;return this[_0x56d633(0x1f8)]({'propIx':'ixLearned','propIxAlways':_0x56d633(0x2d2),'propBtn':'btnLearn','fnParentCheckAlways':this['_parent'][_0x56d633(0x295)]['bind'](this['_parent'])});}['_handleAlwaysStateSpells_']({propIx:_0xe62515,propIxAlways:_0x1647f3,propBtn:_0x4b0ac2,propExistingSpellMetaAlways:_0x5ab5,fnParentCheckAlways:_0x36bb8a,fnFilterSpell:_0x4dc92b}){const _0x453349=_0x57bdb7;if(!this[_0x453349(0x23b)])return;this[_0x453349(0x23b)][_0x453349(0x225)][_0x453349(0x1db)](_0x1db9cd=>{const _0x5d275b=_0x453349,_0x417132=this[_0x5d275b(0x2b9)][_0x1db9cd['ix']];if(_0x4dc92b&&!_0x4dc92b(_0x417132))return;const _0xac79c0=this[_0x5d275b(0x2c6)][_0x5d275b(0x281)](_0x417132);if(_0xac79c0?.['isLearned']||_0xac79c0?.[_0x5d275b(0x2db)])return;const _0x234c54=this[_0x5d275b(0x2dc)][_0x5d275b(0x1b9)](_0x1db9cd['ix']),_0x54bc45=_0x234c54[_0xe62515],_0x420c6d=_0x234c54[_0x1647f3],_0x47f15a=_0x5ab5&&_0xac79c0?.[_0x5ab5]||_0x36bb8a(_0x417132);_0x47f15a?(this['_state'][_0x54bc45]&&(this['_state'][_0x234c54[_0xe62515]]=![],this[_0x5d275b(0x2c6)][_0x5d275b(0x228)]--),!this[_0x5d275b(0x200)][_0x420c6d]&&_0x1db9cd[_0x5d275b(0x1c8)][_0x4b0ac2]&&(_0x1db9cd[_0x5d275b(0x1c8)][_0x4b0ac2][_0x5d275b(0x1e1)][_0x5d275b(0x217)](_0x5d275b(0x27c)),_0x1db9cd[_0x5d275b(0x1c8)][_0x4b0ac2][_0x5d275b(0x206)]=!![])):this[_0x5d275b(0x200)][_0x420c6d]&&_0x1db9cd[_0x5d275b(0x1c8)][_0x4b0ac2]&&(_0x1db9cd[_0x5d275b(0x1c8)][_0x4b0ac2][_0x5d275b(0x1e1)][_0x5d275b(0x22b)](_0x5d275b(0x27c)),_0x1db9cd[_0x5d275b(0x1c8)][_0x4b0ac2]['disabled']=![]),this[_0x5d275b(0x200)][_0x420c6d]=_0x47f15a;});}static[_0x57bdb7(0x1b9)](_0x39026e){const _0x991d2e=_0x57bdb7;return{'ixLearned':'ix_learned_'+_0x39026e,'ixPrepared':_0x991d2e(0x211)+_0x39026e,'ixAlwaysPrepared':_0x991d2e(0x2ef)+_0x39026e,'ixAlwaysKnownSpell':'ix_always_known_spell_'+_0x39026e};}[_0x57bdb7(0x2ba)](){const _0x3b01c8=_0x57bdb7;let _0x3ebfa7=0x0,_0x9c180b=0x0;const _0x4bd9aa={},_0x52eaa5=this[_0x3b01c8(0x2b9)][_0x3b01c8(0x286)];for(let _0x237844=0x0;_0x237844<_0x52eaa5;++_0x237844){const _0x382861=this[_0x3b01c8(0x2b9)][_0x237844];if(!this[_0x3b01c8(0x28a)](_0x382861))continue;const _0x1da7ec=this[_0x3b01c8(0x2c6)][_0x3b01c8(0x281)](_0x382861);if(_0x1da7ec)continue;const {ixLearned:_0x3420af,ixPrepared:_0x4fdbb6,ixAlwaysPrepared:_0x39315c,ixAlwaysKnownSpell:_0x1d89e5}=this[_0x3b01c8(0x2dc)][_0x3b01c8(0x1b9)](_0x237844);this['_state'][_0x3420af]&&(_0x4bd9aa[_0x3420af]=![],_0x3ebfa7++);this[_0x3b01c8(0x200)][_0x4fdbb6]&&(_0x4bd9aa[_0x4fdbb6]=![],_0x9c180b++);if(this[_0x3b01c8(0x200)][_0x39315c])_0x4bd9aa[_0x39315c]=![];if(this[_0x3b01c8(0x200)][_0x1d89e5])_0x4bd9aa[_0x1d89e5]=![];}this[_0x3b01c8(0x1dd)](_0x3b01c8(0x20b),_0x4bd9aa),_0x3ebfa7&&(this[_0x3b01c8(0x1fc)]===0x0?(this[_0x3b01c8(0x2c6)][_0x3b01c8(0x276)]-=_0x3ebfa7,this[_0x3b01c8(0x2bf)][0x0]['querySelectorAll'](_0x3b01c8(0x212))[_0x3b01c8(0x1db)](_0x71a389=>{const _0x529df1=_0x3b01c8;if(_0x71a389[_0x529df1(0x1e3)]?.['plut-is-existing-spell'])return;_0x71a389[_0x529df1(0x1e1)][_0x529df1(0x22b)]('active');})):(this[_0x3b01c8(0x2c6)]['cntLearnedSpells']-=_0x3ebfa7,this[_0x3b01c8(0x2bf)][0x0]['querySelectorAll']('.manc-sp__btn-learn-spell')['forEach'](_0x4f663e=>{const _0x36371d=_0x3b01c8;if(_0x4f663e[_0x36371d(0x1e3)]?.[_0x36371d(0x280)])return;_0x4f663e[_0x36371d(0x1e1)][_0x36371d(0x22b)]('active');}))),_0x9c180b&&(this[_0x3b01c8(0x2c6)]['cntPrepared']-=_0x9c180b,this['_$wrpRows'][0x0][_0x3b01c8(0x1c6)](_0x3b01c8(0x2d4))['forEach'](_0x4c1b2e=>{const _0x53fa04=_0x3b01c8;if(_0x4c1b2e[_0x53fa04(0x1e3)]?.[_0x53fa04(0x280)])return;_0x4c1b2e[_0x53fa04(0x1e1)]['remove']('active');}));}[_0x57bdb7(0x25c)](){const _0x2d14f9=_0x57bdb7;if(!this[_0x2d14f9(0x1fd)]()||this['_spellLevel']===0x0)return[];const _0x5a0cad=[],_0x58cc39=this[_0x2d14f9(0x2b9)][_0x2d14f9(0x286)];for(let _0x47cc58=0x0;_0x47cc58<_0x58cc39;++_0x47cc58){const _0x4721a1=this['_spellDatas'][_0x47cc58];if(!this[_0x2d14f9(0x28a)](_0x4721a1))continue;if(!this['_parent'][_0x2d14f9(0x2e3)](_0x4721a1)&&!this[_0x2d14f9(0x2c6)][_0x2d14f9(0x1c7)](_0x4721a1)&&!this['_parent'][_0x2d14f9(0x2ee)](_0x4721a1))continue;const {ixLearned:_0x5c05ee}=this[_0x2d14f9(0x2dc)]['_getProps'](_0x47cc58);if(!this[_0x2d14f9(0x200)][_0x5c05ee])continue;_0x5a0cad[_0x2d14f9(0x1d4)]({'ix':_0x47cc58,'spell':this[_0x2d14f9(0x2b9)][_0x47cc58]});}return _0x5a0cad;}[_0x57bdb7(0x2a3)](_0x2b8fe2){const _0x192aa2=_0x57bdb7;if(!this[_0x192aa2(0x1fd)]())return[];const _0x1f7422=[],_0x35d133=this['_parent'][_0x192aa2(0x2b6)](this['_spellLevel']),_0x361d8a=this[_0x192aa2(0x2b9)][_0x192aa2(0x286)];for(let _0x322e7b=0x0;_0x322e7b<_0x361d8a;++_0x322e7b){const _0x184e09=this[_0x192aa2(0x2b9)][_0x322e7b];if(!this[_0x192aa2(0x28a)](_0x184e09))continue;if(!this['_parent'][_0x192aa2(0x2e3)](_0x184e09)&&!this[_0x192aa2(0x2c6)][_0x192aa2(0x1c7)](_0x184e09)&&!this[_0x192aa2(0x2c6)]['isAvailableExpandedSpell_'](_0x184e09))continue;const {ixLearned:_0x4bcd58,ixPrepared:_0x77232f,ixAlwaysPrepared:_0x263acd,ixAlwaysKnownSpell:_0x1340b5}=this[_0x192aa2(0x2dc)]['_getProps'](_0x322e7b);if(this[_0x192aa2(0x200)][_0x263acd]||this[_0x192aa2(0x200)][_0x1340b5])continue;const _0xcd232c=this[_0x192aa2(0x200)][_0x4bcd58],_0x68a06b=this['_state'][_0x77232f]||this['_spellLevel']===0x0&&_0xcd232c;if(this[_0x192aa2(0x1fc)]===0x0&&!_0xcd232c)continue;let _0x522f63=![];const _0x3b9e4a=this[_0x192aa2(0x2c6)][_0x192aa2(0x281)](_0x184e09);if(_0x3b9e4a){if(this[_0x192aa2(0x1fc)]===0x0)continue;if(_0x35d133)continue;_0x522f63=_0x3b9e4a[_0x192aa2(0x2db)]!==_0x68a06b;if(!_0x522f63)continue;}if(!_0xcd232c&&_0x35d133)continue;if(this[_0x192aa2(0x2c6)][_0x192aa2(0x2cd)]&&!_0xcd232c&&!_0x68a06b&&!this[_0x192aa2(0x2c6)]['pageFilter'][_0x192aa2(0x278)](_0x2b8fe2,_0x184e09))continue;const _0x276581=this[_0x192aa2(0x257)]({'isLearned':_0xcd232c});_0x1f7422[_0x192aa2(0x1d4)](new Charactermancer_Spell_SpellMeta({..._0x276581,'ix':_0x322e7b,'spell':this['_spellDatas'][_0x322e7b],'isPrepared':_0x68a06b,'isLearned':_0xcd232c,'isUpdateOnly':_0x522f63,'existingItemId':_0x3b9e4a?.['item']?.['id']}));}return _0x1f7422;}[_0x57bdb7(0x257)]({isLearned:_0x45f639}){const _0xc09c5e=_0x57bdb7;let _0x5cd6f0=_0xc09c5e(0x1c9),_0x25f68c=null,_0x379541=null,_0x28c612=null;if(this[_0xc09c5e(0x2c6)]['casterProgression']===_0xc09c5e(0x20d)){if(_0x45f639){if(this['_spellLevel']>UtilActors[_0xc09c5e(0x1b7)])_0x5cd6f0='atwill',_0x25f68c=0x1,_0x379541=0x1,_0x28c612='lr';else _0x5cd6f0=_0xc09c5e(0x20d);}}else _0x5cd6f0=this['_parent'][_0xc09c5e(0x2cd)]?_0xc09c5e(0x27b):_0xc09c5e(0x1c9);return{'preparationMode':_0x5cd6f0,'usesValue':_0x25f68c,'usesMax':_0x379541,'usesPer':_0x28c612};}}function _0x2ccc(_0x1cef86,_0x2f0c3d){const _0x436c3d=_0x436c();return _0x2ccc=function(_0x2cccf6,_0x1d5b54){_0x2cccf6=_0x2cccf6-0x1b6;let _0x3732dd=_0x436c3d[_0x2cccf6];return _0x3732dd;},_0x2ccc(_0x1cef86,_0x2f0c3d);}export{Charactermancer_Spell,Charactermancer_Spell_Modal};