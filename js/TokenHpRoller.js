const _0x52c06d=_0x34ec;(function(_0x59111c,_0x3939f3){const _0x143c90=_0x34ec,_0x498df7=_0x59111c();while(!![]){try{const _0x364e6e=parseInt(_0x143c90(0x12f))/0x1+-parseInt(_0x143c90(0x12b))/0x2+-parseInt(_0x143c90(0x112))/0x3*(parseInt(_0x143c90(0x117))/0x4)+-parseInt(_0x143c90(0x116))/0x5+-parseInt(_0x143c90(0x11e))/0x6+parseInt(_0x143c90(0x10b))/0x7*(parseInt(_0x143c90(0x12c))/0x8)+parseInt(_0x143c90(0x129))/0x9;if(_0x364e6e===_0x3939f3)break;else _0x498df7['push'](_0x498df7['shift']());}catch(_0x17bb41){_0x498df7['push'](_0x498df7['shift']());}}}(_0x26bc,0x9bfae));function _0x34ec(_0x4a907d,_0x34dc8a){const _0x26bc4c=_0x26bc();return _0x34ec=function(_0x34ec6d,_0x211830){_0x34ec6d=_0x34ec6d-0x10a;let _0x3c2fdb=_0x26bc4c[_0x34ec6d];return _0x3c2fdb;},_0x34ec(_0x4a907d,_0x34dc8a);}function _0x26bc(){const _0x28279f=['C_TOKEN_NPC_HP_ROLL_MODE_MIN','formula','race','27910710pMrbDD','\x22\x20(','2437418nZmVZp','8erzdMP','C_TOKEN_NPC_HP_ROLL_MODE_NONE','C_TOKEN_NPC_HP_ROLL_MODE_GM','1189981imKJUF','C_TOKEN_NPC_HP_ROLL_MODE_STANDARD','init','1070279KAqqOR','\x22\x20for\x20token\x20\x22','isGM','attributes','isOwner','name','npcHpRollMode','9NipghS','warn','user','gmroll','4193440HbNKWA','1227172YsewKX','C_TOKEN_NPC_HP_ROLL_MODE_BLIND','total','pUpdateDocument','blindroll','get','data','4964388SdgZMb','npc','actor','isLinked','pDelay','evaluate','bars',')!\x20The\x20default\x20HP\x20value\x20will\x20be\x20used\x20instead.'];_0x26bc=function(){return _0x28279f;};return _0x26bc();}import{LGT}from'./Util.js';import{Config}from'./Config.js';import{ConfigConsts}from'./ConfigConsts.js';import{UtilDocuments}from'./UtilDocuments.js';class TokenHpRoller{static[_0x52c06d(0x10a)](){Hooks['on']('createToken',async _0xf7e606=>{const _0x442afa=_0x34ec;if(!game[_0x442afa(0x114)][_0x442afa(0x10d)]||!_0xf7e606[_0x442afa(0x10f)])return;const _0x5aefe2=Config[_0x442afa(0x11c)]('tokens',_0x442afa(0x111));if(_0x5aefe2===ConfigConsts[_0x442afa(0x12d)])return;if(_0xf7e606['actor']?.['type']!==_0x442afa(0x11f)||_0xf7e606[_0x442afa(0x121)]||!_0xf7e606[_0x442afa(0x120)]?.[_0x442afa(0x11d)]?.[_0x442afa(0x11d)]?.[_0x442afa(0x10e)]?.['hp']?.[_0x442afa(0x127)])return;const _0x16b54b=new Roll(_0xf7e606[_0x442afa(0x120)][_0x442afa(0x11d)]['data'][_0x442afa(0x10e)]['hp']['formula']);try{await _0x16b54b[_0x442afa(0x123)]({'minimize':_0x5aefe2===ConfigConsts[_0x442afa(0x126)],'maximize':_0x5aefe2===ConfigConsts['C_TOKEN_NPC_HP_ROLL_MODE_MAX']});const _0x52335c=this['_getMessageRollMode'](_0x5aefe2);if(_0x52335c)_0x16b54b['toMessage']({},{'rollMode':_0x52335c});}catch(_0x464fa6){console[_0x442afa(0x113)](...LGT,'Failed\x20to\x20roll\x20HP\x20formula\x20\x22'+_0xf7e606[_0x442afa(0x120)]['data'][_0x442afa(0x11d)][_0x442afa(0x10e)]['hp'][_0x442afa(0x127)]+_0x442afa(0x10c)+_0xf7e606[_0x442afa(0x110)]+_0x442afa(0x12a)+_0xf7e606['id']+_0x442afa(0x125));return;}await Promise[_0x442afa(0x128)]([this['_pDoWaitForTokenBars'](_0xf7e606),MiscUtil['pDelay'](0x12c)]),await UtilDocuments[_0x442afa(0x11a)](_0xf7e606['actor'],{'data':{'attributes':{'hp':{'value':_0x16b54b[_0x442afa(0x119)],'max':_0x16b54b[_0x442afa(0x119)]}}}});});}static async['_pDoWaitForTokenBars'](_0x31fb60){const _0x11f2e5=_0x52c06d;for(let _0x197278=0x0;_0x197278<0x64;++_0x197278){if(_0x31fb60[_0x11f2e5(0x124)])break;await MiscUtil[_0x11f2e5(0x122)](0xa);}}static['_getMessageRollMode'](_0x3fe41d){const _0x173ee8=_0x52c06d;switch(_0x3fe41d){case ConfigConsts[_0x173ee8(0x130)]:return'roll';case ConfigConsts[_0x173ee8(0x12e)]:return _0x173ee8(0x115);case ConfigConsts[_0x173ee8(0x118)]:return _0x173ee8(0x11b);case ConfigConsts['C_TOKEN_NPC_HP_ROLL_MODE_SELF']:return'selfroll';default:return null;}}}export{TokenHpRoller};