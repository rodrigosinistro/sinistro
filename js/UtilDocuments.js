const _0x16ae14=_0x277f;function _0x277f(_0x3865d6,_0xe6955d){const _0x3c527b=_0x3c52();return _0x277f=function(_0x277f2c,_0x39f7de){_0x277f2c=_0x277f2c-0xd7;let _0x10ffed=_0x3c527b[_0x277f2c];return _0x10ffed;},_0x277f(_0x3865d6,_0xe6955d);}(function(_0x2dae1f,_0x5299f8){const _0x344b14=_0x277f,_0x48dea1=_0x2dae1f();while(!![]){try{const _0x5394e5=parseInt(_0x344b14(0xf7))/0x1*(-parseInt(_0x344b14(0xf6))/0x2)+parseInt(_0x344b14(0xf2))/0x3+parseInt(_0x344b14(0xd9))/0x4*(parseInt(_0x344b14(0xe9))/0x5)+-parseInt(_0x344b14(0xd7))/0x6*(parseInt(_0x344b14(0xf3))/0x7)+parseInt(_0x344b14(0xda))/0x8+-parseInt(_0x344b14(0xe3))/0x9+parseInt(_0x344b14(0xe8))/0xa*(-parseInt(_0x344b14(0xf0))/0xb);if(_0x5394e5===_0x5299f8)break;else _0x48dea1['push'](_0x48dea1['shift']());}catch(_0xbc5c69){_0x48dea1['push'](_0x48dea1['shift']());}}}(_0x3c52,0x56747));function _0x3c52(){const _0x29802b=['3339464nXUhDc','embed','ImportedEmbeddedDocument','Non-diff\x20and\x20non-recursive\x20temporary\x20document\x20updates\x20are\x20unsupported!','recursive','forEach','isUpdate','data','document','594288iejtNu','\x22\x20not\x20found\x20in\x20parent\x20document!','mergeObject','raw','\x20with\x20id\x20\x22','8080RTfpad','204195eNaqzk','length','effects','createEmbeddedDocuments','set','create','Number\x20of\x20returned\x20items\x20did\x20not\x20match\x20number\x20of\x20input\x20items!','968uXuTDA','pUpdateEmbeddedDocuments','1416468UFqvbh','5572sTpPDu','pCreateEmbeddedDocuments','metadata','4jFlcNQ','90203HkGSkZ','diff','map','find','updateEmbeddedDocuments','pUpdateDocument','_id','copy','_source','name','isTempDocument','get','collection','randomID','update','2874tHbxcM','utils','16IVpwRP'];_0x3c52=function(){return _0x29802b;};return _0x3c52();}class UtilDocuments{static async[_0x16ae14(0xfc)](_0x3b6f66,_0x636dfd,{isTemporary:isTemporary=![]}={},_0x404555){const _0x32d0cc=_0x16ae14;if(this[_0x32d0cc(0x101)]({'doc':_0x3b6f66,'isTemporary':isTemporary})){if(_0x404555?.[_0x32d0cc(0xf8)]===![]||_0x404555?.[_0x32d0cc(0xde)]===![])throw new Error(_0x32d0cc(0xdd));return foundry['utils']['mergeObject'](_0x3b6f66[_0x32d0cc(0xe1)],_0x636dfd),_0x3b6f66;}return _0x3b6f66[_0x32d0cc(0x105)](_0x636dfd,_0x404555);}static[_0x16ae14(0x101)]({isTemporary:_0x392e61,doc:_0xa7ff3f}){return _0x392e61||_0xa7ff3f['id']==null;}static async[_0x16ae14(0xf4)](_0x5be890,_0x2e725d,{isTemporary:isTemporary=![],propData:propData=null,ClsEmbed:_0x23a6e,embedName:embedName=null},_0x137c4e={}){const _0x51f488=_0x16ae14;if(!_0x2e725d?.[_0x51f488(0xea)])return[];propData=propData||_0x23a6e[_0x51f488(0xf5)][_0x51f488(0x103)],embedName=embedName||_0x23a6e['name'];let _0xdd065a;this[_0x51f488(0x101)]({'doc':_0x5be890,'isTemporary':isTemporary})?(_0xdd065a=await _0x23a6e[_0x51f488(0xee)](_0x2e725d,{'temporary':!![]}),_0xdd065a[_0x51f488(0xdf)](_0x58df55=>{const _0x2ea612=_0x51f488;_0x58df55[_0x2ea612(0xe1)][_0x2ea612(0xfd)]=_0x58df55[_0x2ea612(0xe1)][_0x2ea612(0xfd)]||foundry['utils'][_0x2ea612(0x104)](),_0x58df55[_0x2ea612(0xe1)][_0x2ea612(0xff)][_0x2ea612(0xfd)]=_0x58df55['data'][_0x2ea612(0xff)]['_id']||_0x58df55['data'][_0x2ea612(0xfd)],_0x5be890[propData][_0x2ea612(0xed)](_0x58df55['id'],_0x58df55),(_0x58df55['effects']||[])[_0x2ea612(0xdf)](_0x2f19af=>{const _0x2868d0=_0x2ea612;_0x2f19af[_0x2868d0(0xe1)][_0x2868d0(0xfd)]=_0x2f19af['data'][_0x2868d0(0xfd)]||foundry[_0x2868d0(0xd8)][_0x2868d0(0x104)](),_0x2f19af[_0x2868d0(0xe1)][_0x2868d0(0xff)]['_id']=_0x2f19af['data'][_0x2868d0(0xff)]['_id']||_0x2f19af['data'][_0x2868d0(0xfd)],_0x5be890[_0x2868d0(0xeb)]['set'](_0x2f19af['id'],_0x2f19af);});})):_0xdd065a=await _0x5be890[_0x51f488(0xec)](embedName,_0x2e725d,{..._0x137c4e});if(_0x2e725d[_0x51f488(0xea)]!==_0xdd065a[_0x51f488(0xea)])throw new Error(_0x51f488(0xef));return _0x2e725d[_0x51f488(0xf9)]((_0x485b30,_0x2c739d)=>new UtilDocuments[(_0x51f488(0xdc))]({'raw':_0x485b30,'document':_0xdd065a[_0x2c739d]}));}static async[_0x16ae14(0xf1)](_0x163b1d,_0x454be9,{isTemporary:isTemporary=![],propData:propData=null,ClsEmbed:_0x2c16e9,embedName:embedName=null},_0x42ca5d={}){const _0x13443b=_0x16ae14;if(!_0x454be9?.['length'])return[];propData=propData||_0x2c16e9[_0x13443b(0xf5)][_0x13443b(0x103)],embedName=embedName||_0x2c16e9[_0x13443b(0x100)];let _0xd09d5b;if(this['isTempDocument']({'doc':_0x163b1d,'isTemporary':isTemporary})){const _0x2cd1ab=_0x454be9[_0x13443b(0xf9)](_0x47c147=>{const _0x38028f=_0x13443b;if(!_0x47c147['_id'])throw new Error('Update\x20had\x20no\x20\x22_id\x22!');const _0x1bcc53=_0x163b1d[propData][_0x38028f(0x102)](_0x47c147['_id']);if(!_0x1bcc53)throw new Error(embedName+_0x38028f(0xe7)+_0x47c147[_0x38028f(0xfd)]+_0x38028f(0xe4));return{'update':_0x47c147,'embed':_0x1bcc53};});_0x2cd1ab[_0x13443b(0xdf)](({update:_0x4fd395,embed:_0x3a7615})=>{const _0x105a36=_0x13443b;foundry[_0x105a36(0xd8)][_0x105a36(0xe5)](_0x3a7615[_0x105a36(0xe1)],MiscUtil['copy'](_0x4fd395)),foundry[_0x105a36(0xd8)][_0x105a36(0xe5)](_0x3a7615[_0x105a36(0xe1)][_0x105a36(0xff)],MiscUtil[_0x105a36(0xfe)](_0x4fd395));}),_0xd09d5b=_0x2cd1ab[_0x13443b(0xf9)](_0x223119=>_0x223119[_0x13443b(0xdb)]);}else{const _0x45cb1a=await _0x163b1d[_0x13443b(0xfb)](embedName,_0x454be9,{..._0x42ca5d});_0x454be9[_0x13443b(0xea)]===_0x45cb1a[_0x13443b(0xea)]?_0xd09d5b=_0x45cb1a:_0xd09d5b=_0x454be9['map'](({_id:_0x2d4048})=>_0x454be9[_0x13443b(0xfa)](_0x45d592=>_0x45d592['id']===_0x2d4048)||_0x163b1d[propData][_0x13443b(0x102)](_0x2d4048));}if(_0x454be9[_0x13443b(0xea)]!==_0xd09d5b[_0x13443b(0xea)])throw new Error(_0x13443b(0xef));return _0x454be9[_0x13443b(0xf9)]((_0x4f6c5f,_0x4557e6)=>new UtilDocuments[(_0x13443b(0xdc))]({'raw':_0x4f6c5f,'document':_0xd09d5b[_0x4557e6],'isUpdate':!![]}));}}UtilDocuments[_0x16ae14(0xdc)]=class{constructor({raw:_0x4938fc,document:_0x1d300e,isUpdate:isUpdate=![]}){const _0x1417a4=_0x16ae14;this[_0x1417a4(0xe6)]=_0x4938fc,this[_0x1417a4(0xe2)]=_0x1d300e,this[_0x1417a4(0xe0)]=isUpdate;}};export{UtilDocuments};