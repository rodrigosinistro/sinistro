const _0x1820f6=_0x26cb;(function(_0x5f22cb,_0x27e434){const _0x24663e=_0x26cb,_0x38a56e=_0x5f22cb();while(!![]){try{const _0x2cb6f1=parseInt(_0x24663e(0x16e))/0x1+-parseInt(_0x24663e(0x174))/0x2+-parseInt(_0x24663e(0x165))/0x3+-parseInt(_0x24663e(0x199))/0x4+parseInt(_0x24663e(0x162))/0x5+-parseInt(_0x24663e(0x156))/0x6*(-parseInt(_0x24663e(0x1b9))/0x7)+parseInt(_0x24663e(0x138))/0x8;if(_0x2cb6f1===_0x27e434)break;else _0x38a56e['push'](_0x38a56e['shift']());}catch(_0x32e652){_0x38a56e['push'](_0x38a56e['shift']());}}}(_0x2529,0x5cce6));import{UtilApplications}from'./UtilApplications.js';import{LGT}from'./Util.js';import{Vetools}from'./Vetools.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{ModalFilterFeatsFvtt}from'./UtilModalFilter.js';import{Charactermancer_FeatureOptionsSelect,Charactermancer_Util}from'./UtilCharactermancer.js';function _0x2529(){const _0x1da820=['_ixFeat','pageFilter','PG_FEATS','./ImportListFeat.js','modalTitle','filterBox','addHookPulseFeats','proxy','7172360fYFkvk','addHookIxSet','readonly_ixsStatgen','<div\x20class=\x22ve-flex-col\x20w-100\x20h-100\x20min-h-0\x20overflow-y-auto\x22></div>','modalFilterFeats','_pGetFormData_static','_pGetUserInput_pGetModalFilterSpells','findIndex','cntAny','getFormDataReduced','featDatas','push','get','Charactermancer_AdditionalFeatsSelect_filter','unregisterFeatureSourceTracking','Select\x20Feat\x20Sources','_isFeatureSelect','getSelIxSetMeta','renderTwoColumn','ExistingFeatureChecker','_unlock','getValues','map','_getLocks','then','length','isNoChoice','empty','set','$rowRight','6tCUztZ','_render_renderPtStatic','_getFormDataReduced_choose','prevComp','pPreloadHidden','source','hover','filter','_feat_pRenderFeatureOptionsSelects_','_actor','state','pIsNoChoice','1595490vtcoHw','doApplyFilterToFeatureEntries','forEach','1791567isMkvF','_proxyAssignSimple','_feat_unregisterFeatureSourceTrackingFeatureComps','getOrSet','pGetUserInput','<div\x20class=\x22ve-flex-col\x20w-100\x22></div>','pGetImportCompApplicationFormData','\x22\x20in\x20loaded\x20feat\x20data!','type','105573IwXffN','_getFormData_static_ix','_feat_pRenderFeatureOptionsSelects','{@feat\x20','_unregisterSubComps','_feat_pRenderFeatureComps','603440EkGNkN','setStateFromStatgenFeatList_','getFilterSearchMeta','_hk_ixSet_renderPts','copy','showVe','<div\x20class=\x22ve-muted\x20mb-2\x20italic\x20ve-flex-vh-center\x22>No\x20feat\x20selected.</div>','_compsFeatFeatureOptionsSelect','level','feat','Feats','ixSet','pGetFormData','append','_getProps','_modalFilterSpells','_getFormDataReduced_static','_pLock','_pGetUserInput_pGetModalFilterFeats','getFeaturesGroupedByOptionsSet','_render_renderPtChooseFromFilter','getUidsStatic','some','pulse_feats','findAndCopyStateFrom','_state','<hr\x20class=\x22hr-2\x20mt-0\x20hr--dotted\x22>','pIsForceDisplay','_getFormData_choose_ix','_available','pGetInitFeatFeatureLoadeds','any','__state','_feat_pGetFilteredFeatures_getCacheFeature','_render_displayFeat','_featDatas','_feat_pGetFilteredFeatures','2550924sqSaEE','cleanup','startsWith','pSerialAwaitMap','_pGetFormData_choose','_hk_ixSet','_addHookBase','formDatasFeatureOptionsSelect','appendTo','<hr\x20class=\x22hr-0\x22>','mergeMap','pGetSources','_hash','static','keys','choose','_render_$getStgSelGroup','_cache_featFeatureLoadeds','<div\x20class=\x22ve-flex-col\x20w-100\x20mt-2\x22></div>','entries','_getDefaultState','feat_','_removeHookBase','_featureSourceTracker','splice','featureSourceTracker','<hr\x20class=\x22hr-2>','isFormComplete','Charactermancer_AdditionalFeatsSelect.feats','_modalFilterFeats','name','available','4168906aDhMQQ','render','URL_TO_HASH_BUILDER','$rowLeft','unpackUid'];_0x2529=function(){return _0x1da820;};return _0x2529();}function _0x26cb(_0x2b46f4,_0x3ea02f){const _0x25293e=_0x2529();return _0x26cb=function(_0x26cbc8,_0x451ad2){_0x26cbc8=_0x26cbc8-0x12c;let _0x6d1705=_0x25293e[_0x26cbc8];return _0x6d1705;},_0x26cb(_0x2b46f4,_0x3ea02f);}import{Charactermancer_Class_Util}from'./UtilCharactermancerClass.js';import{DataConverterFeat}from'./DataConverterFeat.js';class Charactermancer_AdditionalFeatsSelect extends BaseComponent{static async[_0x1820f6(0x169)]({available:_0x3ee548,actor:_0xa6d9da}){const _0x13f96e=_0x1820f6;if(!_0x3ee548?.[_0x13f96e(0x151)])return{'isFormComplete':!![],'data':{}};if(UtilAdditionalFeats[_0x13f96e(0x152)](_0x3ee548)){const _0x3fc908=new this({'available':_0x3ee548});return _0x3fc908[_0x13f96e(0x180)]();}const {ImportListFeat:_0x5dc17f}=await import(_0x13f96e(0x133)),_0x333dba=await new _0x5dc17f()[_0x13f96e(0x1a4)](),_0x58866e=new AppSourceSelectorMulti({'title':_0x13f96e(0x147),'filterNamespace':_0x13f96e(0x145),'savedSelectionKey':'Charactermancer_AdditionalFeatsSelect_savedSelection','sourcesToDisplay':_0x333dba,'props':['feat'],'page':UrlUtil[_0x13f96e(0x132)],'isDedupable':!![]}),_0x4e2d28=await _0x58866e['pWaitForUserInput']();if(_0x4e2d28==null)return null;const _0x29b708=await this[_0x13f96e(0x186)]({'featDatas':_0x4e2d28}),_0x1fb4c0=await this[_0x13f96e(0x13e)]({'featDatas':_0x4e2d28}),_0x55be7a=new this({'available':_0x3ee548,'actor':_0xa6d9da,'featDatas':_0x4e2d28,'modalFilterFeats':_0x29b708,'modalFilterSpells':_0x1fb4c0});return UtilApplications[_0x13f96e(0x16b)]({'comp':_0x55be7a,'width':0x320,'height':0x280});}static async[_0x1820f6(0x186)]({featDatas:_0xce959}){const _0x170de3=_0x1820f6,_0x373c50=new ModalFilterFeatsFvtt({'namespace':_0x170de3(0x1b5),'isRadio':!![],'allData':_0xce959});return await _0x373c50[_0x170de3(0x15a)](),_0x373c50;}static async['_pGetUserInput_pGetModalFilterSpells'](){return null;}constructor(_0x5d3918){const _0x5b70b4=_0x1820f6;_0x5d3918=_0x5d3918||{},super(),this['_available']=_0x5d3918[_0x5b70b4(0x1b8)],this['_actor']=_0x5d3918['actor'],this[_0x5b70b4(0x197)]=_0x5d3918[_0x5b70b4(0x142)]||[],this[_0x5b70b4(0x1b6)]=_0x5d3918[_0x5b70b4(0x13c)],this[_0x5b70b4(0x183)]=_0x5d3918['modalFilterSpells'],this[_0x5b70b4(0x1b0)]=_0x5d3918[_0x5b70b4(0x1b2)],this['_isFeatureSelect']=!!_0x5d3918['isFeatureSelect'],this[_0x5b70b4(0x197)]['forEach'](_0x161790=>_0x161790[_0x5b70b4(0x1a5)]=UrlUtil[_0x5b70b4(0x12d)][UrlUtil[_0x5b70b4(0x132)]]({'name':_0x161790[_0x5b70b4(0x1b7)],'source':_0x161790[_0x5b70b4(0x15b)]})),this[_0x5b70b4(0x17b)]={},this['_prevComp']=_0x5d3918[_0x5b70b4(0x159)],this[_0x5b70b4(0x1aa)]=_0x5d3918[_0x5b70b4(0x159)]?.['_cache_featFeatureLoadeds']||new Map();}get['modalTitle'](){const _0x554709=_0x1820f6;return _0x554709(0x17e);}get[_0x1820f6(0x140)](){const _0x8c9884=_0x1820f6,_0xddbb70=this[_0x8c9884(0x191)][this[_0x8c9884(0x18d)][_0x8c9884(0x17f)]];return _0xddbb70?.[_0x8c9884(0x193)]||0x0;}get['ixSetAvailable'](){const _0x11112d=_0x1820f6;return this[_0x11112d(0x18d)][_0x11112d(0x17f)];}[_0x1820f6(0x139)](_0x254ac2){const _0x13c7f8=_0x1820f6;this['_addHookBase'](_0x13c7f8(0x17f),_0x254ac2);}[_0x1820f6(0x136)](_0x49d284){const _0x3bf5d=_0x1820f6;this['_addHookBase'](_0x3bf5d(0x18b),_0x49d284);}[_0x1820f6(0x175)](_0x680754){const _0x1bf50b=_0x1820f6,_0x2edf2d=_0x680754[_0x1bf50b(0x15d)](_0x327923=>_0x327923==null||_0x327923[_0x1bf50b(0x16d)]==='choose');let _0xa054c=0x0;const _0x1644c0={},_0x4c51f1=[];_0x2edf2d['forEach']((_0x569bfd,_0x37e152)=>{const _0x106328=_0x1bf50b;if(!_0x569bfd)return _0xa054c++;_0x4c51f1[_0x106328(0x143)](_0x37e152);const _0x1c7393=_0x37e152-_0xa054c,{type:_0x1e748e,ix:_0x1dd494}=_0x569bfd,{propIxFeat:_0x567f1c}=this['_getProps']({'ix':_0x1c7393,'type':_0x1e748e});_0x1644c0[_0x567f1c]=_0x1dd494===-0x1?null:_0x1dd494;}),_0x1644c0['readonly_ixsStatgen']=_0x4c51f1,this[_0x1bf50b(0x166)]('state',_0x1644c0);}[_0x1820f6(0x182)]({ix:_0x3fe209,type:_0x389023}){const _0x566502=_0x1820f6;return{'propPrefixFeat':'feat_'+_0x3fe209+'_'+_0x389023+'_','propIxFeat':_0x566502(0x1ae)+_0x3fe209+'_'+_0x389023+_0x566502(0x130)};}['_getLocks']({ix:_0x197c0f,type:_0x1cf187}){const _0x1714d0=_0x1820f6;return{'lockChangeFeat':_0x1714d0(0x1ae)+_0x197c0f+'_'+_0x1cf187+'_pHkChangeFeat','lockRenderFeatureOptionsSelects':_0x1714d0(0x1ae)+_0x197c0f+'_'+_0x1cf187+'_renderFeatureOptionsSelects'};}[_0x1820f6(0x146)](){const _0x5d368c=_0x1820f6;if(this[_0x5d368c(0x1b0)])this[_0x5d368c(0x1b0)]['unregister'](this);this[_0x5d368c(0x172)]();}[_0x1820f6(0x172)](){const _0x48d7b5=_0x1820f6;if(!this[_0x48d7b5(0x1b0)])return;Object[_0x48d7b5(0x1ac)](this[_0x48d7b5(0x17b)])[_0x48d7b5(0x164)](([_0x36db6b,_0x3478cc])=>{const _0x336ce0=_0x48d7b5;Object[_0x336ce0(0x1a7)](_0x3478cc)['forEach'](_0x5c935a=>{const _0x4e5fa4=_0x336ce0;(this[_0x4e5fa4(0x17b)][_0x36db6b]?.[_0x5c935a]||[])[_0x4e5fa4(0x164)](_0x144724=>_0x144724['unregisterFeatureSourceTracking']());});});}[_0x1820f6(0x12c)](_0x5d3173){const _0x7243b9=_0x1820f6,_0x555a63=$('<div\x20class=\x22ve-flex-col\x20w-100\x20h-100\x20min-h-0\x20overflow-y-auto\x22></div>'),_0x29cc26=$(_0x7243b9(0x13b));this[_0x7243b9(0x14a)]({'$wrpLeft':_0x555a63,'$wrpRight':_0x29cc26}),$$(_0x5d3173)`<div class="ve-flex w-100 h-100 min-h-0">
			${_0x555a63}
			<div class="vr-3"></div>
			${_0x29cc26}
		</div>
		`;}[_0x1820f6(0x14a)]({$wrpLeft:_0x3b29cd,$wrpRight:_0x5170da}){const _0x238971=_0x1820f6;this['_render_$getStgSelGroup']({'$wrpLeft':_0x3b29cd});const _0x1a8723=$$`<div class="ve-flex-col"></div>`[_0x238971(0x1a1)](_0x3b29cd),_0x169f50=$$`<div class="ve-flex-col"></div>`[_0x238971(0x1a1)](_0x5170da),_0x1f1558=[],_0x534e47=this['_hk_ixSet']['bind'](this,{'$stgGroupLeft':_0x1a8723,'$stgGroupRight':_0x169f50,'lastMetas':_0x1f1558});this[_0x238971(0x19f)](_0x238971(0x17f),_0x534e47),_0x534e47();}[_0x1820f6(0x1a9)]({$wrpLeft:_0x1dde4f}){const _0x213c63=_0x1820f6;if(this[_0x213c63(0x191)]['length']<=0x1)return;const {$sel:_0x36a192}=UtilAdditionalFeats[_0x213c63(0x149)]({'comp':this,'prop':_0x213c63(0x17f),'available':this[_0x213c63(0x191)]});return $$`<div class="w-100 mb-2 ve-flex-v-center">
			<div class="mr-2 no-shrink bold">Feat Set:</div>
			${_0x36a192}
		</div>`[_0x213c63(0x1a1)](_0x1dde4f);}[_0x1820f6(0x19e)]({$stgGroupLeft:_0x2007b4,$stgGroupRight:_0x4f2d7f,lastMetas:_0x836d54}){const _0x4eadae=_0x1820f6;_0x2007b4[_0x4eadae(0x153)](),_0x4f2d7f['empty'](),_0x836d54[_0x4eadae(0x1b1)](0x0,_0x836d54['length'])['forEach'](_0x45594f=>_0x45594f[_0x4eadae(0x19a)]());const _0x3e8e13=this[_0x4eadae(0x191)][this[_0x4eadae(0x18d)][_0x4eadae(0x17f)]];this[_0x4eadae(0x177)]({'$stgGroupLeft':_0x2007b4,'$stgGroupRight':_0x4f2d7f,'featSet':_0x3e8e13,'lastMetas':_0x836d54}),this['_state'][_0x4eadae(0x18b)]=!this[_0x4eadae(0x18d)][_0x4eadae(0x18b)];}[_0x1820f6(0x177)]({$stgGroupLeft:_0xe8d6ef,$stgGroupRight:_0x3f7316,featSet:_0x560a3e,lastMetas:_0xff1043}){const _0x5f0254=_0x1820f6,_0xf22468=Object['keys'](_0x560a3e)[_0x5f0254(0x18a)](_0x4d029a=>_0x4d029a!==_0x5f0254(0x193)),_0x586e6b=!!_0x560a3e['any'];if(_0xf22468)this[_0x5f0254(0x157)]({'$stgGroupLeft':_0xe8d6ef,'$stgGroupRight':_0x3f7316,'featSet':_0x560a3e});if(_0xf22468&&_0x586e6b)_0xe8d6ef[_0x5f0254(0x181)](_0x5f0254(0x18e));if(_0x586e6b)this['_render_renderPtChooseFromFilter']({'$stgGroupLeft':_0xe8d6ef,'$stgGroupRight':_0x3f7316,'featSet':_0x560a3e,'lastMetas':_0xff1043});if(_0xf22468||_0x586e6b)_0xe8d6ef[_0x5f0254(0x181)](_0x5f0254(0x1b3));}[_0x1820f6(0x157)]({$stgGroupLeft:_0x5af0c8,$stgGroupRight:_0x4ac843,featSet:_0x4d90f0}){const _0x269460=_0x1820f6,_0x1f2d4f=_0x269460(0x1a6),_0x1337b8=UtilAdditionalFeats[_0x269460(0x189)](_0x4d90f0),_0x2f7fd0=_0x1337b8[_0x269460(0x14e)]((_0x1f5b54,_0x41f903)=>{const _0x4e24c2=_0x269460,{lockRenderFeatureOptionsSelects:_0x5131d9}=this[_0x4e24c2(0x14f)]({'ix':_0x41f903,'type':_0x1f2d4f}),{name:_0x1450ee,source:_0x13f9f9}=DataUtil[_0x4e24c2(0x137)][_0x4e24c2(0x12f)](_0x4e24c2(0x17d),_0x1f5b54,_0x4e24c2(0x17d)),_0x58c0c5=UrlUtil['URL_TO_HASH_BUILDER'][UrlUtil[_0x4e24c2(0x132)]]({'name':_0x1450ee,'source':_0x13f9f9}),_0x3d975a=this[_0x4e24c2(0x197)]['find'](_0x142bd8=>_0x142bd8[_0x4e24c2(0x1a5)]===_0x58c0c5);if(!_0x3d975a)return console['warn'](...LGT,'Could\x20not\x20find\x20feat\x20\x22'+_0x58c0c5+_0x4e24c2(0x16c)),null;const _0xf519ac=this[_0x4e24c2(0x148)]?$(_0x4e24c2(0x16a)):null,_0x38a9f6=$$`<div class="mb-2">
				<div class="ve-flex-v-center">
					<div class="bold mr-2 no-shrink">Feat:</div>
					${Renderer['get']()[_0x4e24c2(0x12c)](_0x4e24c2(0x171)+_0x3d975a['name']+'|'+_0x3d975a['source']+'}')}
				</div>
				${_0xf519ac}
			</div>`,_0x4f3409=$('<div\x20class=\x22ve-flex-col\x20w-100\x22></div>');return this[_0x4e24c2(0x196)]({'$wrp':_0x4f3409,'feat':_0x3d975a}),this['_isFeatureSelect']&&this[_0x4e24c2(0x198)](_0x3d975a)[_0x4e24c2(0x150)](async _0x3aefe8=>{const _0x1b8901=_0x4e24c2;await this[_0x1b8901(0x170)]({'ix':_0x41f903,'type':_0x1f2d4f,'$stgFeatureOptions':_0xf519ac,'filteredFeatures':_0x3aefe8,'lockRenderFeatureOptionsSelects':_0x5131d9});}),{'$rowLeft':_0x38a9f6,'$rowRight':_0x4f3409};})[_0x269460(0x15d)](Boolean);$$`<div class="ve-flex-col w-100">
			${_0x2f7fd0[_0x269460(0x14e)](_0x357249=>_0x357249[_0x269460(0x12e)])}
		</div>`[_0x269460(0x1a1)](_0x5af0c8),$$`<div class="ve-flex-col w-100">
			${_0x2f7fd0[_0x269460(0x14e)](_0x167ad4=>_0x167ad4[_0x269460(0x155)])}
		</div>`[_0x269460(0x1a1)](_0x4ac843);}[_0x1820f6(0x196)]({$wrp:_0x502832,feat:_0xe6562e}){const _0x2d3d42=_0x1820f6;_0x502832[_0x2d3d42(0x153)](),!_0xe6562e?_0x502832[_0x2d3d42(0x181)](_0x2d3d42(0x17a)):_0x502832[_0x2d3d42(0x181)](Vetools['withUnpatchedDiceRendering'](()=>Renderer[_0x2d3d42(0x15c)]['$getHoverContent_stats'](UrlUtil[_0x2d3d42(0x132)],_0xe6562e))),_0x502832[_0x2d3d42(0x181)](_0x2d3d42(0x1a2));}[_0x1820f6(0x188)]({$stgGroupLeft:_0x51c1a6,$stgGroupRight:_0x2fe344,featSet:_0x2b3d01,lastMetas:_0x504c3f}){const _0x22aa74=_0x1820f6,_0x2f21f1='choose',_0x4214bf=[...new Array(_0x2b3d01[_0x22aa74(0x193)])][_0x22aa74(0x14e)]((_0x549214,_0x5ceb7d)=>{const _0x3cd52f=_0x22aa74,{propIxFeat:_0x350ee4,propPrefixFeat:_0xb4929b}=this['_getProps']({'ix':_0x5ceb7d,'type':_0x2f21f1}),{lockChangeFeat:_0x1b42d5,lockRenderFeatureOptionsSelects:_0x54e3f7}=this[_0x3cd52f(0x14f)]({'ix':_0x5ceb7d,'type':_0x2f21f1}),{$sel:_0x5dffba,$btnFilter:_0x4540b7,unhook:_0x11e51d}=Charactermancer_Util[_0x3cd52f(0x176)]({'comp':this,'prop':_0x350ee4,'data':this[_0x3cd52f(0x197)],'modalFilter':this[_0x3cd52f(0x1b6)],'title':'Feat'});_0x504c3f[_0x3cd52f(0x143)]({'cleanup':_0x11e51d});const _0x44c981=$('<div\x20class=\x22ve-flex-col\x20w-100\x22></div>'),_0x4c6ad7=this[_0x3cd52f(0x148)]?$(_0x3cd52f(0x1ab)):null,_0x471f72=$$`<div class="ve-flex-col w-100">
				<div class="bold mb-2">Select a Feat</div>
				<div class="ve-flex-v-center btn-group w-100">${_0x4540b7}${_0x5dffba}</div>
				${_0x4c6ad7}
				<hr class="hr-1">
			</div>`,_0x34aed0=async()=>{const _0x2751e5=_0x3cd52f,_0x5e839d=Object[_0x2751e5(0x1a7)](this[_0x2751e5(0x194)])[_0x2751e5(0x15d)](_0x2faee9=>_0x2faee9[_0x2751e5(0x19b)](_0xb4929b)&&_0x2faee9!==_0x350ee4)[_0x2751e5(0x1a3)](_0x2a1d4d=>({[_0x2a1d4d]:null}));this[_0x2751e5(0x166)](_0x2751e5(0x160),_0x5e839d);const _0x49e9d4=this[_0x2751e5(0x197)][this[_0x2751e5(0x18d)][_0x350ee4]];this['_render_displayFeat']({'$wrp':_0x44c981,'feat':_0x49e9d4});if(this[_0x2751e5(0x148)]){const _0x2525a3=await this['_feat_pGetFilteredFeatures'](_0x49e9d4);await this[_0x2751e5(0x170)]({'ix':_0x5ceb7d,'type':_0x2f21f1,'$stgFeatureOptions':_0x4c6ad7,'filteredFeatures':_0x2525a3,'lockRenderFeatureOptionsSelects':_0x54e3f7});}this['_state'][_0x2751e5(0x18b)]=!this[_0x2751e5(0x18d)]['pulse_feats'];},_0x1f8229=async _0x497d16=>{const _0x583cf0=_0x3cd52f;try{await this['_pLock'](_0x1b42d5),await _0x34aed0(_0x497d16);}finally{this[_0x583cf0(0x14c)](_0x1b42d5);}};return this['_addHookBase'](_0x350ee4,_0x1f8229),_0x504c3f[_0x3cd52f(0x143)]({'cleanup':()=>this[_0x3cd52f(0x1af)](_0x350ee4,_0x1f8229)}),_0x34aed0(),{'$rowLeft':_0x471f72,'$rowRight':_0x44c981};});$$`<div class="ve-flex-col w-100">
			${_0x4214bf[_0x22aa74(0x14e)](_0xed69ba=>_0xed69ba['$rowLeft'])}
		</div>`[_0x22aa74(0x1a1)](_0x51c1a6),$$`<div class="ve-flex-col w-100">
			${_0x4214bf['map'](_0x1760b1=>_0x1760b1['$rowRight'])}
		</div>`[_0x22aa74(0x1a1)](_0x2fe344);}async[_0x1820f6(0x198)](_0x408d5f){const _0x5aac8b=_0x1820f6;if(!_0x408d5f)return[];const _0xb2098b=await this[_0x5aac8b(0x195)](_0x408d5f);return Charactermancer_Util['getFilteredFeatures']([_0xb2098b],this[_0x5aac8b(0x1b6)][_0x5aac8b(0x131)],this['_modalFilterFeats']['pageFilter'][_0x5aac8b(0x135)][_0x5aac8b(0x14d)]());}async[_0x1820f6(0x195)](_0x413cfa){const _0x1c7d8a=_0x1820f6,_0x1ab1a7=this['_cache_featFeatureLoadeds'][_0x1c7d8a(0x144)](_0x413cfa);if(_0x1ab1a7)return _0x1ab1a7;const _0x466155=await DataConverterFeat[_0x1c7d8a(0x192)](_0x413cfa,{'actor':this[_0x1c7d8a(0x15f)]});return this['_cache_featFeatureLoadeds'][_0x1c7d8a(0x154)](_0x413cfa,_0x466155),_0x466155;}async[_0x1820f6(0x170)](_0x58b0a3){const _0x5d7519=_0x1820f6,{lockRenderFeatureOptionsSelects:_0x419f50}=_0x58b0a3;try{await this[_0x5d7519(0x185)](_0x419f50),await this[_0x5d7519(0x15e)](_0x58b0a3);}finally{this[_0x5d7519(0x14c)](_0x419f50);}}async[_0x1820f6(0x15e)]({ix:_0xb468d2,type:_0x548eba,filteredFeatures:_0x2cddcd,$stgFeatureOptions:_0x5a81b7}){const _0x191d0e=_0x1820f6,_0x2a24e9=this[_0x191d0e(0x17b)][_0x548eba]?.[_0xb468d2]||this['_prevComp']?.[_0x191d0e(0x17b)][_0x548eba]?.[_0xb468d2]||[];_0x5a81b7[_0x191d0e(0x153)]();const _0x5b626b=new Charactermancer_Class_Util[(_0x191d0e(0x14b))](this[_0x191d0e(0x15f)]),_0x7f0016=Charactermancer_Util['getImportableFeatures'](_0x2cddcd),_0x29c56f=MiscUtil[_0x191d0e(0x178)](_0x7f0016);Charactermancer_Util[_0x191d0e(0x163)](_0x29c56f,this[_0x191d0e(0x1b6)][_0x191d0e(0x131)],this[_0x191d0e(0x1b6)][_0x191d0e(0x131)][_0x191d0e(0x135)]['getValues']());const _0x6213c1=Charactermancer_Util[_0x191d0e(0x187)](_0x29c56f);this[_0x191d0e(0x167)](_0xb468d2,_0x548eba);for(const _0x281abe of _0x6213c1){const {topLevelFeature:_0x54df2b,optionsSets:_0x4077d2}=_0x281abe;for(const _0x3b32cf of _0x4077d2){const _0x43bea8=new Charactermancer_FeatureOptionsSelect({'featureSourceTracker':this[_0x191d0e(0x1b0)],'existingFeatureChecker':_0x5b626b,'actor':this['_actor'],'optionsSet':_0x3b32cf,'level':_0x54df2b[_0x191d0e(0x17c)],'modalFilterSpells':this[_0x191d0e(0x183)],'isSkipRenderingFirstFeatureTitle':!![]}),_0x557c84=MiscUtil[_0x191d0e(0x168)](this[_0x191d0e(0x17b)],_0x548eba,_0xb468d2,[]);_0x557c84['push'](_0x43bea8),_0x43bea8[_0x191d0e(0x18c)](_0x2a24e9);}}await this[_0x191d0e(0x173)](_0xb468d2,_0x548eba,{'$stgFeatureOptions':_0x5a81b7});}['_feat_unregisterFeatureSourceTrackingFeatureComps'](_0x291714,_0x664b2e){const _0x2b51b9=_0x1820f6;(this[_0x2b51b9(0x17b)][_0x664b2e]?.[_0x291714]||[])[_0x2b51b9(0x164)](_0x58b8e3=>_0x58b8e3['unregisterFeatureSourceTracking']()),delete this[_0x2b51b9(0x17b)][_0x664b2e]?.[_0x291714];}async['_feat_pRenderFeatureComps'](_0x11c0ab,_0x399dae,{$stgFeatureOptions:_0x601c7c}){const _0x39e55c=_0x1820f6;for(const _0x441de8 of this['_compsFeatFeatureOptionsSelect'][_0x399dae]?.[_0x11c0ab]||[]){if(await _0x441de8[_0x39e55c(0x161)]()&&!await _0x441de8['pIsAvailable']())continue;(!await _0x441de8['pIsNoChoice']()||await _0x441de8[_0x39e55c(0x18f)]())&&_0x601c7c[_0x39e55c(0x179)]()[_0x39e55c(0x181)](''+(_0x441de8[_0x39e55c(0x134)]?'<hr\x20class=\x22hr-2\x22><div\x20class=\x22mb-2\x20bold\x20w-100\x22>'+_0x441de8[_0x39e55c(0x134)]+'</div>':'')),_0x441de8[_0x39e55c(0x12c)](_0x601c7c);}}async[_0x1820f6(0x180)](){const _0x516312=_0x1820f6,_0x1a2ba7=[],_0x5db3ef={'_':!![]},_0x506b5c=this['_available'][this[_0x516312(0x18d)][_0x516312(0x17f)]];return await this[_0x516312(0x13d)]({'out':_0x1a2ba7,'featSet':_0x506b5c,'ptrIsComplete':_0x5db3ef}),await this[_0x516312(0x19d)]({'out':_0x1a2ba7,'featSet':_0x506b5c,'ptrIsComplete':_0x5db3ef}),{'isFormComplete':_0x5db3ef['_'],'data':_0x1a2ba7,'ixsStatgen':this[_0x516312(0x18d)][_0x516312(0x13a)]?MiscUtil[_0x516312(0x178)](this[_0x516312(0x18d)][_0x516312(0x13a)]):null};}async['_pGetFormData_static']({out:_0x2364dc,featSet:_0x286604,ptrIsComplete:_0x2488b6}){const _0x191d29=_0x1820f6,_0x5cbb79=UtilAdditionalFeats['getUidsStatic'](_0x286604);if(!_0x5cbb79?.['length'])return;const _0x3444d1='static';for(let _0x2fa603=0x0;_0x2fa603<_0x5cbb79['length'];++_0x2fa603){const _0x8ea9ca=this[_0x191d29(0x16f)]({'uidsStatic':_0x5cbb79,'ix':_0x2fa603});if(_0x8ea9ca)_0x2364dc['push'](_0x8ea9ca);if(!this[_0x191d29(0x148)]||!_0x8ea9ca)continue;const _0x276910=await(this['_compsFeatFeatureOptionsSelect'][_0x3444d1]?.[_0x2fa603]||[])[_0x191d29(0x15d)](Boolean)[_0x191d29(0x19c)](_0x5e97b4=>_0x5e97b4['pGetFormData']());if(_0x276910[_0x191d29(0x18a)](_0x498034=>!_0x498034['isFormComplete']))_0x2488b6['_']=![];_0x8ea9ca[_0x191d29(0x1a0)]=_0x276910;}}async[_0x1820f6(0x19d)]({out:_0x335c90,featSet:_0x4e2b73,ptrIsComplete:_0x322c5b}){const _0x536a7c=_0x1820f6;if(!_0x4e2b73[_0x536a7c(0x193)])return;const _0x57c7d6=_0x536a7c(0x1a8);for(let _0x3294a9=0x0;_0x3294a9<_0x4e2b73[_0x536a7c(0x193)];++_0x3294a9){const _0x2ca91e=this[_0x536a7c(0x190)]({'ix':_0x3294a9,'ptrIsComplete':_0x322c5b});if(_0x2ca91e)_0x335c90['push'](_0x2ca91e);if(!this['_isFeatureSelect']||!_0x2ca91e)continue;const _0x1d68bd=await(this['_compsFeatFeatureOptionsSelect'][_0x57c7d6]?.[_0x3294a9]||[])[_0x536a7c(0x15d)](Boolean)[_0x536a7c(0x19c)](_0x3f262f=>_0x3f262f[_0x536a7c(0x180)]());if(_0x1d68bd[_0x536a7c(0x18a)](_0x3facac=>!_0x3facac[_0x536a7c(0x1b4)]))_0x322c5b['_']=![];_0x2ca91e[_0x536a7c(0x1a0)]=_0x1d68bd;}}[_0x1820f6(0x141)](){const _0x3875a8=_0x1820f6,_0x5aecfe=[],_0x2f8aba={'_':!![]},_0x23b6cd=this['_available'][this[_0x3875a8(0x18d)]['ixSet']];return this['_getFormDataReduced_static']({'out':_0x5aecfe,'featSet':_0x23b6cd}),this[_0x3875a8(0x158)]({'out':_0x5aecfe,'featSet':_0x23b6cd,'ptrIsComplete':_0x2f8aba}),{'isFormComplete':_0x2f8aba['_'],'data':_0x5aecfe,'ixsStatgen':this[_0x3875a8(0x18d)][_0x3875a8(0x13a)]?MiscUtil[_0x3875a8(0x178)](this[_0x3875a8(0x18d)][_0x3875a8(0x13a)]):null};}[_0x1820f6(0x184)]({out:_0x678ebf,featSet:_0x3c557c}){const _0xb1e4b2=_0x1820f6,_0x4a10f7=UtilAdditionalFeats['getUidsStatic'](_0x3c557c);if(!_0x4a10f7?.[_0xb1e4b2(0x151)])return;for(let _0x12da1c=0x0;_0x12da1c<_0x4a10f7[_0xb1e4b2(0x151)];++_0x12da1c){const _0x66a7d5=this[_0xb1e4b2(0x16f)]({'uidsStatic':_0x4a10f7,'ix':_0x12da1c});if(_0x66a7d5)_0x678ebf[_0xb1e4b2(0x143)](_0x66a7d5);}}[_0x1820f6(0x158)]({out:_0x14dcaa,featSet:_0x2124e7,ptrIsComplete:_0x2902fc}){const _0x38ba15=_0x1820f6;if(!_0x2124e7[_0x38ba15(0x193)])return;for(let _0x4b182c=0x0;_0x4b182c<_0x2124e7[_0x38ba15(0x193)];++_0x4b182c){const _0x43eda8=this[_0x38ba15(0x190)]({'ix':_0x4b182c,'ptrIsComplete':_0x2902fc});if(_0x43eda8)_0x14dcaa[_0x38ba15(0x143)](_0x43eda8);}}['_getFormData_static_ix']({uidsStatic:_0x13b849,ix:_0x573d20}){const _0x43566c=_0x1820f6,_0x25b61d=_0x13b849[_0x573d20],{name:_0x84a6ce,source:_0x10f8b8}=DataUtil[_0x43566c(0x137)][_0x43566c(0x12f)](_0x43566c(0x17d),_0x25b61d,_0x43566c(0x17d)),_0x393de4=UrlUtil[_0x43566c(0x12d)][UrlUtil['PG_FEATS']]({'name':_0x84a6ce,'source':_0x10f8b8}),_0x27117d=this[_0x43566c(0x197)][_0x43566c(0x13f)](_0x1faa57=>_0x1faa57[_0x43566c(0x1a5)]===_0x393de4),_0x5b8371=this[_0x43566c(0x197)][_0x27117d];return{'page':UrlUtil['PG_FEATS'],'source':_0x10f8b8,'hash':_0x393de4,'feat':MiscUtil[_0x43566c(0x178)](_0x5b8371,!![]),'ixFeat':_0x27117d,'type':_0x43566c(0x1a6),'ix':_0x573d20};}['_getFormData_choose_ix']({ix:_0x1ce32c,ptrIsComplete:_0x1908ff}){const _0x3ec65b=_0x1820f6,{propIxFeat:_0x5d98ab}=this[_0x3ec65b(0x182)]({'ix':_0x1ce32c,'type':_0x3ec65b(0x1a8)}),_0x552220=this['_state'][_0x5d98ab];if(_0x552220==null||!~_0x552220){_0x1908ff['_']=![];return;}const _0x245c0c=this[_0x3ec65b(0x197)][_0x552220],_0x12ef7f=UrlUtil[_0x3ec65b(0x12d)][UrlUtil[_0x3ec65b(0x132)]](_0x245c0c);return{'page':UrlUtil[_0x3ec65b(0x132)],'source':_0x245c0c['source'],'hash':_0x12ef7f,'feat':MiscUtil[_0x3ec65b(0x178)](_0x245c0c,!![]),'ixFeat':_0x552220,'type':_0x3ec65b(0x1a8),'ix':_0x1ce32c};}[_0x1820f6(0x1ad)](){return{'ixSet':0x0,'pulse_feats':![],'readonly_ixsStatgen':null};}}export{Charactermancer_AdditionalFeatsSelect};