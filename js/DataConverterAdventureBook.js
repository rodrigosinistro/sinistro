function _0xffc0(_0x493e1f,_0x101e36){const _0x3c6280=_0x3c62();return _0xffc0=function(_0xffc0ec,_0x5e776c){_0xffc0ec=_0xffc0ec-0xf1;let _0x11d277=_0x3c6280[_0xffc0ec];return _0x11d277;},_0xffc0(_0x493e1f,_0x101e36);}const _0x24a769=_0xffc0;(function(_0x3d3d83,_0x5083d){const _0x5bdc1d=_0xffc0,_0x9fc690=_0x3d3d83();while(!![]){try{const _0x4b2206=parseInt(_0x5bdc1d(0xff))/0x1*(-parseInt(_0x5bdc1d(0xf3))/0x2)+-parseInt(_0x5bdc1d(0xf2))/0x3*(-parseInt(_0x5bdc1d(0x12f))/0x4)+-parseInt(_0x5bdc1d(0x118))/0x5+-parseInt(_0x5bdc1d(0x13a))/0x6*(-parseInt(_0x5bdc1d(0x13c))/0x7)+parseInt(_0x5bdc1d(0x12d))/0x8+parseInt(_0x5bdc1d(0x124))/0x9*(-parseInt(_0x5bdc1d(0xf9))/0xa)+-parseInt(_0x5bdc1d(0x133))/0xb*(parseInt(_0x5bdc1d(0x11b))/0xc);if(_0x4b2206===_0x5083d)break;else _0x9fc690['push'](_0x9fc690['shift']());}catch(_0x2750ee){_0x9fc690['push'](_0x9fc690['shift']());}}}(_0x3c62,0x2a835));import{Config}from'./Config.js';import{ConfigConsts}from'./ConfigConsts.js';import{UtilApplications}from'./UtilApplications.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilDataConverter}from'./UtilDataConverter.js';class DataConverterAdventureBook extends DataConverter{static[_0x24a769(0x10f)](_0xff864d,_0x377880,_0x1c9ef5){return this['_pGetAdventureBookJournals'](_0xff864d,_0x377880,'adventure',_0x1c9ef5);}static[_0x24a769(0x127)](_0x4149ee,_0x479eff,_0x524ac7){const _0x455d7f=_0x24a769;return this[_0x455d7f(0xfd)](_0x4149ee,_0x479eff,_0x455d7f(0x107),_0x524ac7);}static async[_0x24a769(0xfd)](_0x49f9fe,_0x3bb592,_0x2a9c06,_0x5354d6){const _0x1425d9=_0x24a769,_0x50a593=_0x2a9c06===_0x1425d9(0x111)?_0x1425d9(0xf8):_0x1425d9(0x10d),_0x59bd98=Config[_0x1425d9(0xf1)](_0x50a593,_0x1425d9(0x101)),_0x5051ab=[],_0x44f78b=_0x3bb592['contents'],_0x27bfbb=Math[_0x1425d9(0x12e)](_0x44f78b[_0x1425d9(0x121)],_0x49f9fe[_0x1425d9(0x121)]);switch(_0x59bd98){case ConfigConsts[_0x1425d9(0xfc)]:{for(let _0x3f12ed=0x0;_0x3f12ed<_0x27bfbb;++_0x3f12ed){const _0x445163=_0x44f78b[_0x3f12ed],_0x223ea6=_0x49f9fe[_0x3f12ed];await this[_0x1425d9(0x132)]({'contentsItem':_0x445163,'chapter':_0x223ea6,'out':_0x5051ab,'opts':_0x5354d6,'configGroup':_0x50a593,'indexData':_0x3bb592,'ixChapter':_0x3f12ed,'ixChapterMax':_0x27bfbb,'totalEntries':_0x27bfbb});}break;}case ConfigConsts[_0x1425d9(0x12a)]:{const _0x23a0ed=_0x49f9fe['slice'](0x0,_0x27bfbb)['map'](_0x4e1b03=>Renderer[_0x1425d9(0x103)][_0x1425d9(0x134)](_0x4e1b03)[_0x1425d9(0x121)])[_0x1425d9(0x10e)]();for(let _0x2a7173=0x0;_0x2a7173<_0x27bfbb;++_0x2a7173){const _0x490feb=_0x44f78b[_0x2a7173],_0xca765d=_0x49f9fe[_0x2a7173];await this[_0x1425d9(0x126)]({'contentsItem':_0x490feb,'chapter':_0xca765d,'out':_0x5051ab,'opts':_0x5354d6,'configGroup':_0x50a593,'indexData':_0x3bb592,'ixChapter':_0x2a7173,'ixChapterMax':_0x27bfbb,'totalEntries':_0x23a0ed});}break;}case ConfigConsts[_0x1425d9(0x12b)]:{const _0x31a7d6=_0x49f9fe[_0x1425d9(0x136)](0x0,_0x27bfbb)[_0x1425d9(0x10a)](_0x405fea=>Renderer[_0x1425d9(0x103)][_0x1425d9(0x134)](_0x405fea)[_0x1425d9(0x121)])[_0x1425d9(0x10e)]();for(let _0x4ada75=0x0;_0x4ada75<_0x27bfbb;++_0x4ada75){const _0x736b0e=_0x44f78b[_0x4ada75],_0x120f6e=_0x49f9fe[_0x4ada75];await this['_pGetAdventureBookJournals_byHeader']({'contentsItem':_0x736b0e,'chapter':_0x120f6e,'out':_0x5051ab,'opts':_0x5354d6,'configGroup':_0x50a593,'indexData':_0x3bb592,'ixChapter':_0x4ada75,'ixChapterMax':_0x27bfbb,'totalEntries':_0x31a7d6});}break;}default:throw new Error(_0x1425d9(0x100)+_0x59bd98+'\x22');}return _0x5051ab;}static async[_0x24a769(0x132)]({contentsItem:_0x454926,chapter:_0x4b0cba,out:_0x9d48,opts:_0x2b1587,configGroup:_0x48fe4f,indexData:_0x509519,totalEntries:_0x145612,folderNames:_0x2878b2,isNested:_0x213ecd}){const _0x4097ca=_0x24a769,_0x5744a1=await UtilDataConverter[_0x4097ca(0xf4)](()=>{const _0x525ccf=_0x4097ca;return(_0x525ccf(0x113)+Renderer['get']()[_0x525ccf(0x130)](!![])[_0x525ccf(0x109)](_0x4b0cba)+_0x525ccf(0x102))[_0x525ccf(0x135)](new RegExp(DataConverter['SYM_AT'],'g'),'@');}),_0x2c3df4=_0x9d48[_0x4097ca(0x121)],_0x4114b1=_0x213ecd?UtilApplications[_0x4097ca(0x104)](''+this[_0x4097ca(0x115)]({'configGroup':_0x48fe4f,'numEntry':_0x2c3df4,'totalEntries':_0x145612})+_0x454926[_0x4097ca(0x108)]):UtilApplications[_0x4097ca(0x104)](''+this[_0x4097ca(0x115)]({'configGroup':_0x48fe4f,'source':_0x509519['source'],'numEntry':_0x2c3df4,'totalEntries':_0x145612})+Parser['bookOrdinalToAbv'](_0x454926[_0x4097ca(0x137)])+_0x454926[_0x4097ca(0x108)]),_0x2b171f={'name':_0x4114b1,'permission':{'default':0x0},'entryTime':Date[_0x4097ca(0x119)](),'content':_0x5744a1,'sort':CONFIG[_0x4097ca(0x12c)][_0x4097ca(0x13b)][_0x4097ca(0x138)][_0x4097ca(0x11c)][_0x4097ca(0x121)]+CONST[_0x4097ca(0xf5)]*_0x2c3df4,'flags':{[SharedConsts[_0x4097ca(0x122)]]:{'source':_0x509519[_0x4097ca(0x120)],'entryIds':this['_getEntryIds']({'entry':_0x4b0cba})}}};if(_0x2b1587[_0x4097ca(0xfa)]!=null)_0x9d48[_0x4097ca(0x110)]={'default':_0x2b1587[_0x4097ca(0xfa)]};else{if(_0x2b1587[_0x4097ca(0x105)])_0x2b171f[_0x4097ca(0x110)]={'default':Config[_0x4097ca(0xf1)](_0x48fe4f,_0x4097ca(0x125))};}_0x9d48[_0x4097ca(0x106)](new DataConverterAdventureBook['FolderizedJournalEntryBuilder']({'journalEntry':_0x2b171f,'folderNames':_0x2878b2}));}static async[_0x24a769(0x126)]({contentsItem:_0x4e627f,chapter:_0x2e0a41,out:_0x3d00c8,opts:_0xe9160c,configGroup:_0x255a99,indexData:_0x3fa682,ixChapter:_0x4ae3df,ixChapterMax:_0x5c34eb,totalEntries:_0x1538c1}){const _0xf428bf=_0x24a769;if(!_0x4e627f[_0xf428bf(0xfe)]?.[_0xf428bf(0x121)]){const _0x50a2d7=this['_getPerChapterFolderNames']({'configGroup':_0x255a99,'indexData':_0x3fa682,'ixChapter':_0x4ae3df,'ixChapterMax':_0x5c34eb,'contentsItem':_0x4e627f});return this[_0xf428bf(0x132)]({'contentsItem':_0x4e627f,'chapter':_0x2e0a41,'out':_0x3d00c8,'opts':_0xe9160c,'configGroup':_0x255a99,'indexData':_0x3fa682,'totalEntries':_0x1538c1,'folderNames':_0x50a2d7,'isNested':!![]});}let _0x22d6db=Renderer[_0xf428bf(0x103)][_0xf428bf(0x134)](_0x2e0a41);const _0x2f71bf={};_0x22d6db[_0xf428bf(0x117)]((_0x2e5d0b,_0x5cd3a1)=>{const _0x1c6169=_0xf428bf,_0x7cac84=_0x2e5d0b['entry'][_0x1c6169(0x108)];if(_0x2f71bf[_0x7cac84]==null)_0x2f71bf[_0x7cac84]=-0x1;const _0x10beb1=++_0x2f71bf[_0x7cac84],_0x31b466=_0x5cd3a1===0x0||_0x4e627f[_0x1c6169(0xfe)][_0x1c6169(0x129)](_0x4ff165=>{const _0x15ed74=_0x1c6169,_0xbfd81a=_0x4ff165[_0x15ed74(0x123)]??0x0,_0x49a984=_0x4ff165[_0x15ed74(0xf6)]??_0x4ff165;return _0xbfd81a===_0x10beb1&&UrlUtil[_0x15ed74(0x112)](_0x49a984)===UrlUtil['encodeForHash'](_0x7cac84);});if(_0x31b466)_0x2e5d0b[_0x1c6169(0xfb)]=!![];}),_0x22d6db['forEach'](_0x429d87=>{const _0x26ec7d=_0xf428bf;if(!_0x429d87['entry'][_0x429d87[_0x26ec7d(0x11e)]])return;_0x429d87[_0x26ec7d(0x10c)][_0x429d87[_0x26ec7d(0x11e)]]=_0x429d87[_0x26ec7d(0x10c)][_0x429d87['key']][_0x26ec7d(0x10a)](_0xbbd611=>{const _0x4b13e7=_0x26ec7d;if(!_0xbbd611[_0x4b13e7(0x11a)])return _0xbbd611;if(_0x22d6db[_0xbbd611['IX_FLAT_REF']][_0x4b13e7(0xfb)])return _0xbbd611;return _0x22d6db[_0xbbd611['IX_FLAT_REF']][_0x4b13e7(0x10c)];});}),_0x22d6db=_0x22d6db['filter'](_0x3ebc00=>_0x3ebc00[_0xf428bf(0xfb)]),await this[_0xf428bf(0x116)]({'contentsItem':_0x4e627f,'chapter':_0x2e0a41,'out':_0x3d00c8,'opts':_0xe9160c,'configGroup':_0x255a99,'indexData':_0x3fa682,'ixChapter':_0x4ae3df,'ixChapterMax':_0x5c34eb,'totalEntries':_0x1538c1,'flatEntries':_0x22d6db});}static async['_pGetAdventureBookJournals_byHeader']({contentsItem:_0x45bee6,chapter:_0xa59cb9,out:_0x35025a,opts:_0x46c411,configGroup:_0x25b515,indexData:_0x49a71d,ixChapter:_0x4bfd83,ixChapterMax:_0x4e5c2c,totalEntries:_0x5c3c0d}){const _0x5cb73a=_0x24a769,_0x24a723=Renderer[_0x5cb73a(0x103)][_0x5cb73a(0x134)](_0xa59cb9);await this[_0x5cb73a(0x116)]({'contentsItem':_0x45bee6,'chapter':_0xa59cb9,'out':_0x35025a,'opts':_0x46c411,'configGroup':_0x25b515,'indexData':_0x49a71d,'ixChapter':_0x4bfd83,'ixChapterMax':_0x4e5c2c,'totalEntries':_0x5c3c0d,'flatEntries':_0x24a723});}static async[_0x24a769(0x116)]({contentsItem:_0x20f875,chapter:_0x349020,out:_0x1c1acf,opts:_0x4c8565,configGroup:_0x1b613e,indexData:_0x2d6901,ixChapter:_0x56699c,ixChapterMax:_0x5664cb,totalEntries:_0x247b6b,flatEntries:_0x200a8a}){const _0x171731=_0x24a769;_0x200a8a=UtilDataConverter[_0x171731(0x11f)]['walk'](_0x200a8a,{'array':_0x297ce8=>{const _0x3a85df=_0x171731;return _0x297ce8[_0x3a85df(0x10a)](_0x38154e=>{const _0x34070f=_0x3a85df;if(_0x38154e[_0x34070f(0x11a)]==null)return _0x38154e;return'%'+SharedConsts['MODULE_NAME_FAKE']+'_'+_0x56699c+'__'+_0x38154e['IX_FLAT_REF']+'_'+SharedConsts[_0x34070f(0x122)]+'%';});}}),await _0x200a8a[_0x171731(0x11d)](async _0x3fff4c=>{const _0x433e32=_0x171731,_0x5597f3=await UtilDataConverter[_0x433e32(0xf4)](()=>{const _0x35fd77=_0x433e32;return(_0x35fd77(0x113)+Renderer['get']()[_0x35fd77(0x130)](!![])[_0x35fd77(0x109)](_0x3fff4c[_0x35fd77(0x10c)])+_0x35fd77(0x102))[_0x35fd77(0x135)](new RegExp(DataConverter['SYM_AT'],'g'),'@');}),_0x380f32=this['_getPerChapterFolderNames']({'configGroup':_0x1b613e,'indexData':_0x2d6901,'ixChapter':_0x56699c,'ixChapterMax':_0x5664cb,'contentsItem':_0x20f875}),_0x28a0ef=_0x1c1acf[_0x433e32(0x121)],_0x5b8736={'name':UtilApplications[_0x433e32(0x104)](''+this[_0x433e32(0x115)]({'configGroup':_0x1b613e,'numEntry':_0x28a0ef,'totalEntries':_0x247b6b})+_0x3fff4c[_0x433e32(0x108)]),'permission':{'default':0x0},'entryTime':Date[_0x433e32(0x119)](),'content':_0x5597f3,'sort':CONFIG[_0x433e32(0x12c)]['collection']['instance']['contents'][_0x433e32(0x121)]+CONST['SORT_INTEGER_DENSITY']*_0x28a0ef,'flags':{[SharedConsts[_0x433e32(0x122)]]:{'source':_0x2d6901[_0x433e32(0x120)],'ixChapter':_0x56699c,'ixFlat':_0x3fff4c['ix'],'entryIds':this[_0x433e32(0x128)]({'entry':_0x3fff4c[_0x433e32(0x10c)]})}}};if(_0x4c8565['defaultPermission']!=null)_0x1c1acf[_0x433e32(0x110)]={'default':_0x4c8565[_0x433e32(0xfa)]};else{if(_0x4c8565['isAddPermission'])_0x5b8736[_0x433e32(0x110)]={'default':Config[_0x433e32(0xf1)](_0x1b613e,_0x433e32(0x125))};}_0x1c1acf[_0x433e32(0x106)](new DataConverterAdventureBook['FolderizedJournalEntryBuilder']({'journalEntry':_0x5b8736,'folderNames':_0x380f32}));});}static[_0x24a769(0x128)]({entry:_0x11e608}){const _0xd409ad=_0x24a769;if(!_0x11e608)return[];const _0x20fef7=[];return UtilDataConverter[_0xd409ad(0x11f)][_0xd409ad(0xf7)](_0x11e608,{'object':_0x34e4bf=>{const _0x53ad3f=_0xd409ad;if(_0x34e4bf['id'])_0x20fef7[_0x53ad3f(0x106)](_0x34e4bf['id']);return _0x34e4bf;}}),_0x20fef7;}static[_0x24a769(0x115)]({configGroup:_0x51c66a,source:_0x45a490,numEntry:_0x2a3864,totalEntries:_0x16a1a9}){const _0x48317e=_0x24a769;if(!Config[_0x48317e(0xf1)](_0x51c66a,'isOrderingPrefixJournalNames'))return'';const _0x52a96d=(''+_0x16a1a9)[_0x48317e(0x121)];return''+(_0x45a490?Parser[_0x48317e(0x139)](_0x45a490)[_0x48317e(0x136)](0x0,0x3):'')+(''+_0x2a3864)[_0x48317e(0x131)](_0x52a96d,'0')+'\x20';}static['_getPerChapterFolderNames']({configGroup:_0x3febf4,indexData:_0x39b247,ixChapter:_0x3ff932,ixChapterMax:_0x3f1248,contentsItem:_0x4a380c}){const _0xe3767=_0x24a769;return[''+this[_0xe3767(0x115)]({'configGroup':_0x3febf4,'source':_0x39b247[_0xe3767(0x120)],'numEntry':_0x3ff932,'totalEntries':_0x3f1248})+Parser[_0xe3767(0x114)](_0x4a380c[_0xe3767(0x137)])+_0x4a380c[_0xe3767(0x108)]];}}DataConverterAdventureBook['FolderizedJournalEntryBuilder']=class{constructor({journalEntry:_0x636c93,folderNames:folderNames=[]}={}){const _0x3f8d18=_0x24a769;this[_0x3f8d18(0x10b)]=_0x636c93,this['folderNames']=folderNames;}};export{DataConverterAdventureBook};function _0x3c62(){const _0x2abef6=['render','map','journalEntry','entry','importBook','sum','pGetAdventureJournals','permission','adventure','encodeForHash','<div\x20class=\x22w-100\x20h-100\x20overflow-x-hidden\x22>','bookOrdinalToAbv','_getAdventureBookJournalPrefix','_pGetFlatEntryJournalEntries','forEach','496165krtGIX','now','IX_FLAT_REF','399204OTREHO','contents','pSerialAwaitMap','key','WALKER_GENERIC','source','length','MODULE_NAME_FAKE','index','45DmYrJk','permissions','_pGetAdventureBookJournals_byContents','pGetBookJournals','_getEntryIds','some','C_IMPORT_ADVBOOK_JOURNAL_SPLIT_STRATEGY_CONTENTS','C_IMPORT_ADVBOOK_JOURNAL_SPLIT_STRATEGY_HEADINGS','JournalEntry','2215304lrojBR','min','8pfwCbi','setFirstSection','padStart','_pGetAdventureBookJournals_byChapter','143NuyRat','getFlatEntries','replace','slice','ordinal','instance','sourceJsonToAbv','30gPJoSm','collection','392959FDDgtI','get','470613AlWImY','856lcEyFf','pGetWithDescriptionPlugins','SORT_INTEGER_DENSITY','header','walk','importAdventure','103310AOvTaP','defaultPermission','isDiscrete','C_IMPORT_ADVBOOK_JOURNAL_SPLIT_STRATEGY_CHAPTER','_pGetAdventureBookJournals','headers','266kSWWEm','Unhandled\x20journal\x20entry\x20split\x20mode\x20\x22','journalEntrySplitMode','</div>','utils','getCleanEntityName','isAddPermission','push','book','name'];_0x3c62=function(){return _0x2abef6;};return _0x3c62();}