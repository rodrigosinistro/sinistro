function _0x3aba(_0x953177,_0x257564){const _0x405f9c=_0x405f();return _0x3aba=function(_0x3abae5,_0x54fb3a){_0x3abae5=_0x3abae5-0x1d8;let _0x34a6cd=_0x405f9c[_0x3abae5];return _0x34a6cd;},_0x3aba(_0x953177,_0x257564);}const _0x24c8a0=_0x3aba;(function(_0x4b7b72,_0x514286){const _0x471de8=_0x3aba,_0x314549=_0x4b7b72();while(!![]){try{const _0x33cff7=-parseInt(_0x471de8(0x201))/0x1+-parseInt(_0x471de8(0x1ec))/0x2+-parseInt(_0x471de8(0x23a))/0x3*(-parseInt(_0x471de8(0x211))/0x4)+parseInt(_0x471de8(0x214))/0x5*(parseInt(_0x471de8(0x20a))/0x6)+-parseInt(_0x471de8(0x227))/0x7+-parseInt(_0x471de8(0x1da))/0x8*(-parseInt(_0x471de8(0x20f))/0x9)+parseInt(_0x471de8(0x1d8))/0xa*(parseInt(_0x471de8(0x213))/0xb);if(_0x33cff7===_0x514286)break;else _0x314549['push'](_0x314549['shift']());}catch(_0x1c4924){_0x314549['push'](_0x314549['shift']());}}}(_0x405f,0x4cac3));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{ImportList}from'./ImportList.js';function _0x405f(){const _0x7c0fd9=['Are\x20you\x20sure\x20you\x20want\x20to\x20reset\x20your\x20world\x20data\x20source\x20selection?','334600nPtqFV','MODULE_NAME','loadState','empty','_isSectionVisible','propState','moduleVersion','_getProps','getListItem','meta','setStateFrom','pageFilter','_addHookBase','Continue','userDownload','_pRender_pRhs','<button\x20class=\x22btn\x20btn-5et\x20btn-xs\x22><i\x20class=\x22fas\x20fa-file-import\x20fa-fw\x22></i>\x20Import\x20Selection</button>','length','678388rTvPKw','stopPropagation','_pRender_top','pGetSources','_state','activateListeners','getValues','/template/WorldDataSourceSelector.hbs','initBtnSortHandlersAdditional','-world-data-source-selection','map','_pRender_lhs','_pRender_bot','[data-name=\x22wrp-top\x22]','pRender','data','Reset\x20All','world-data-source-selection','$getCbBool','mergeMap','$getFilterListElements','15722EelmMH','_pRender','propIsSectionVisible','sort','modules','filter','forEach','World\x20Data\x20Source\x20Selector','_pRender_pLoadSources','2075406NsyMod','AppSourceSelectorAppFilter','prop','_getProxy','<div\x20class=\x22clickable\x20mr-2\x22></div>','9ScokMz','_isSectionCollapsed','8NBquue','_getDefaultState','437789qeOjrz','5zWTeZN','_addHook','updated','preventDefault','_meta','filterBox','values','WorldDataSourceSelector.filter','cbSel','_proxyAssignSimple','ascSortLowerProp','then','_sourceLists','name','pSaveState','addItem','shiftKey','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100\x22>Save</button>','change','593194zFJPaH','toggleVe','bind','toDisplay','[data-name=\x22wrp-rhs\x22]','DISPLAY_NAME_TYPE_PLURAL','render','checked','getMaxWindowHeight','initBtnSortHandlers','listMetas','pUserUpload','pInitFilterBox','version','sources','constructor','_comp','find','identifierWorld','369879ClOXic','visibleItems','bindSelectAllCheckbox','sortListItems','_Render','click','getSaveableState','get','[data-name=\x22wrp-lhs\x22]','init','[data-name=\x22wrp-bot\x22]','30jBaymb'];_0x405f=function(){return _0x7c0fd9;};return _0x405f();}import{UtilDataSource}from'./UtilDataSource.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{UtilWorldDataSourceSelector}from'./UtilWorldDataSourceSelector.js';class WorldDataSourceSelector extends Application{static ['APP_TITLE']=_0x24c8a0(0x208);constructor(){const _0xc51383=_0x24c8a0;super({'title':WorldDataSourceSelector['APP_TITLE'],'template':SharedConsts['MODULE_LOCATION']+_0xc51383(0x1f3),'width':0x3c0,'height':Util[_0xc51383(0x22f)](),'resizable':!![]}),this[_0xc51383(0x237)]=null;}[_0x24c8a0(0x1f1)](_0x17b45f){const _0x105856=_0x24c8a0;super['activateListeners'](_0x17b45f),this['_pRender'](_0x17b45f)[_0x105856(0x21f)](null);}async[_0x24c8a0(0x202)](_0x544284){const _0x532e11=_0x24c8a0,_0x321490=_0x544284[_0x532e11(0x238)](_0x532e11(0x1f9)),_0x4e1db1=_0x544284['find'](_0x532e11(0x242)),_0x193339=_0x544284[_0x532e11(0x238)](_0x532e11(0x22b)),_0x3ab350=_0x544284[_0x532e11(0x238)](_0x532e11(0x244)),_0x4fab8d=await this[_0x532e11(0x209)](),_0xc28749=UtilWorldDataSourceSelector[_0x532e11(0x1dc)]();this['_comp']=new _WorldDataSourceSelectorComp({'sourceLists':_0x4fab8d,'savedState':_0xc28749}),await this[_0x532e11(0x237)][_0x532e11(0x1fa)]({'$stgTop':_0x321490,'$stgBot':_0x3ab350,'$stgLhs':_0x4e1db1,'$stgRhs':_0x193339});}async[_0x24c8a0(0x209)](){const _0x5d552b=_0x24c8a0;return(await[...ImportList['IMPLS'][_0x5d552b(0x21a)]()]['pMap'](async _0x15cfdf=>{const _0x1221cb=_0x5d552b,_0x18ecc3=(await new _0x15cfdf()[_0x1221cb(0x1ef)]({'isApplyWorldDataSourceFilter':![]}))[_0x1221cb(0x206)](({isWorldSelectable:_0x2441b0})=>_0x2441b0);return new _SourceList({'name':_0x15cfdf[_0x1221cb(0x22c)],'sources':_0x18ecc3,'propState':_0x15cfdf['ID']});}))[_0x5d552b(0x204)](SortUtil[_0x5d552b(0x21e)][_0x5d552b(0x229)](SortUtil,_0x5d552b(0x221)));}}class _SourceList{constructor({name:_0x4cadde,sources:_0x418d4c,propState:_0x39d3b7}){const _0x4ce02b=_0x24c8a0;this[_0x4ce02b(0x221)]=_0x4cadde,this[_0x4ce02b(0x235)]=_0x418d4c,this[_0x4ce02b(0x1df)]=_0x39d3b7;}}class _WorldDataSourceSelectorComp extends BaseComponent{static [_0x24c8a0(0x23e)]=class{constructor(){const _0xf99cf9=_0x24c8a0;this['lists']=[],this[_0xf99cf9(0x1e5)]=null;}};constructor({sourceLists:_0x21ac47,savedState:_0x4ac58c}){const _0xc41b58=_0x24c8a0;super(),this['__meta']={..._0x21ac47[_0xc41b58(0x1ff)](({propState:_0x526d4b})=>({[this[_0xc41b58(0x1e1)](_0x526d4b)[_0xc41b58(0x203)]]:!![]}))},this[_0xc41b58(0x218)]=this[_0xc41b58(0x20d)](_0xc41b58(0x1e3),this['__meta']),this['_sourceLists']=_0x21ac47;if(_0x4ac58c!=null)this['setStateFrom'](_0x4ac58c);}[_0x24c8a0(0x1e1)](_0xf2a30e){const _0x4c57c7=_0x24c8a0;return{'propIsSectionVisible':_0xf2a30e+_0x4c57c7(0x1de),'propIsSectionCollapsed':_0xf2a30e+_0x4c57c7(0x210)};}async[_0x24c8a0(0x1fa)]({$stgTop:_0x5ab0f8,$stgLhs:_0x59ae1a,$stgRhs:_0x4bd3aa,$stgBot:_0x349a5e}){const _0x44242e=_0x24c8a0,_0x3dbeb4=new this[(_0x44242e(0x236))]['_Render']();this[_0x44242e(0x1ee)]({'render':_0x3dbeb4,'$stgTop':_0x5ab0f8}),this[_0x44242e(0x1f7)]({'render':_0x3dbeb4,'$stgLhs':_0x59ae1a}),await this[_0x44242e(0x1e9)]({'render':_0x3dbeb4,'$stgRhs':_0x4bd3aa}),this[_0x44242e(0x1f8)]({'render':_0x3dbeb4,'$stgBot':_0x349a5e});}[_0x24c8a0(0x1ee)]({render:_0xbbbc31,$stgTop:_0x18b603}){const _0x3fc86d=_0x24c8a0,_0x281af8=$('<button\x20class=\x22btn\x20btn-5et\x20btn-xs\x22><i\x20class=\x22fas\x20fa-file-export\x20fa-fw\x22></i>\x20Export\x20Selection</button>')[_0x3fc86d(0x23f)](()=>{const _0x3916d6=_0x3fc86d;DataUtil[_0x3916d6(0x1e8)](SharedConsts[_0x3916d6(0x1db)]+_0x3916d6(0x1f5),this[_0x3916d6(0x240)](),{'propVersion':_0x3916d6(0x1e0),'fileType':_0x3916d6(0x1fd),'valVersion':game[_0x3916d6(0x205)][_0x3916d6(0x241)](SharedConsts[_0x3916d6(0x1db)])[_0x3916d6(0x1fb)][_0x3916d6(0x234)]});}),_0xa751f1=$(_0x3fc86d(0x1ea))[_0x3fc86d(0x23f)](async()=>{const _0x2172c4=_0x3fc86d,{jsons:_0x42f962,errors:_0x1be491}=await DataUtil[_0x2172c4(0x232)]({'expectedFileType':'world-data-source-selection','propVersion':_0x2172c4(0x1e0)});DataUtil['doHandleFileLoadErrorsGeneric'](_0x1be491);if(!_0x42f962?.[_0x2172c4(0x1eb)])return;this[_0x2172c4(0x1e4)](_0x42f962[0x0]),await UtilWorldDataSourceSelector[_0x2172c4(0x222)](this[_0x2172c4(0x240)]());}),_0xc00657=$('<button\x20class=\x22btn\x20btn-5et\x20btn-xs\x20ml-1\x22\x20title=\x22Reset\x20All\x22><i\x20class=\x22fa\x20fa-undo-alt\x22></i></button>')[_0x3fc86d(0x23f)](async()=>{const _0xc53b3d=_0x3fc86d,_0x5c588c=await InputUiUtil['pGetUserBoolean']({'title':_0xc53b3d(0x1fc),'htmlDescription':_0xc53b3d(0x1d9),'textNo':'Cancel','textYes':_0xc53b3d(0x1e7)});if(!_0x5c588c)return;this[_0xc53b3d(0x21d)]('state',this[_0xc53b3d(0x212)](),!![]);});$$(_0x18b603[_0x3fc86d(0x1dd)]())`<div class="ve-flex-h-right w-100">
			<div class="btn-group ve-flex-vh-center">
				${_0x281af8}
				${_0xa751f1}
			</div>
			${_0xc00657}
		</div>
		<hr class="hr-2">`;}[_0x24c8a0(0x1f7)]({render:_0x1c4200,$stgLhs:_0x1b6fad}){const _0x534fee=_0x24c8a0,_0xd2acd2=$('<input\x20type=\x22checkbox\x22>')['prop'](_0x534fee(0x22e),!![])[_0x534fee(0x226)](()=>{const _0x45eb35=_0x534fee,_0x3fa954=_0xd2acd2[_0x45eb35(0x20c)](_0x45eb35(0x22e));this['_proxyAssignSimple']('meta',this[_0x45eb35(0x220)][_0x45eb35(0x1ff)](({propState:_0x1f0d04})=>({[this[_0x45eb35(0x1e1)](_0x1f0d04)[_0x45eb35(0x203)]]:_0x3fa954})));}),_0x119046=this[_0x534fee(0x220)][_0x534fee(0x1f6)](({name:_0x47f23a,propState:_0x5bcafc})=>{const _0xcdf0a3=_0x534fee,{propIsSectionVisible:_0x224101}=this[_0xcdf0a3(0x1e1)](_0x5bcafc),_0x2fcb5e=ComponentUiUtil[_0xcdf0a3(0x1fe)](this,_0x224101,{'stateName':_0xcdf0a3(0x1e3)});return $$`<label class="split-v-center py-1 veapp__ele-hoverable">
				<div>${_0x47f23a}</div>
				${_0x2fcb5e}
			</label>`[_0xcdf0a3(0x23f)](_0x4e122b=>{const _0x195ad3=_0xcdf0a3;if(!_0x4e122b[_0x195ad3(0x224)])return;_0x4e122b[_0x195ad3(0x1ed)](),_0x4e122b[_0x195ad3(0x217)]();const _0x275a0c=this[_0x195ad3(0x220)][_0x195ad3(0x1ff)](({propState:_0x33ba9a})=>({[this['_getProps'](_0x33ba9a)[_0x195ad3(0x203)]]:![]}));_0x275a0c[_0x224101]=!![],this[_0x195ad3(0x21d)](_0x195ad3(0x1e3),_0x275a0c);});});$$(_0x1b6fad[_0x534fee(0x1dd)]())`<div class="ve-flex-col h-100 w-100 overflow-y-auto">
			<label class="split-v-center py-1 veapp__ele-hoverable">
				<div>All</div>
				${_0xd2acd2}
			</label>

			<hr class="hr-1">

			${_0x119046}
		</div>`;}async[_0x24c8a0(0x1e9)]({render:_0x25ff73,$stgRhs:_0x7608db}){const _0x3cccdb=_0x24c8a0;_0x25ff73[_0x3cccdb(0x1e5)]=new AppSourceSelectorMulti[(_0x3cccdb(0x20b))]();const {$cbAll:_0x480b73,$wrpFilterControls:_0x34db33,$wrpMiniPills:_0x35c4d9,$wrpBtnsSort:_0x4b29c0,$list:_0x3c8553,$btnOpenFilter:_0x10cddd,$iptSearch:_0x3196a8,$btnReset:_0x4e5483,$btnToggleSummaryHidden:_0x429b7c}=AppSourceSelectorMulti[_0x3cccdb(0x200)]();_0x25ff73[_0x3cccdb(0x231)]=this[_0x3cccdb(0x220)][_0x3cccdb(0x1f6)](({name:_0x228f1d,sources:_0x131213,propState:_0x49c2c7},_0x11b599)=>{const _0x37bcb5=_0x3cccdb,{propIsSectionVisible:_0x3aa8fd,propIsSectionCollapsed:_0x30b0c5}=this[_0x37bcb5(0x1e1)](_0x49c2c7),_0x16b56c=$$`<div class="flex-col w-100 min-h-0 smooth-scroll"></div>`,_0x5735bc=$(_0x37bcb5(0x20e))[_0x37bcb5(0x23f)](()=>{const _0x5cc698=_0x37bcb5;this[_0x5cc698(0x218)][_0x30b0c5]=!this[_0x5cc698(0x218)][_0x30b0c5];}),_0x5c5abf=()=>{const _0x565fa7=_0x37bcb5;_0x16b56c[_0x565fa7(0x228)](!this[_0x565fa7(0x218)][_0x30b0c5]),_0x5735bc['text'](this['_meta'][_0x30b0c5]?'[+]':'[–]');};this[_0x37bcb5(0x215)](_0x37bcb5(0x1e3),_0x30b0c5,_0x5c5abf),_0x5c5abf();const _0x199b72=$$`<div class="ve-flex-col">
					<label class="split-v-center">
						<div class="py-1 bold">${_0x228f1d}</div>
						${_0x5735bc}
					</label>
					${_0x16b56c}
					<hr class="hr-0 mt-1">
				</div>`['appendTo'](_0x3c8553),_0x2eeb4a=new List({'$iptSearch':_0x3196a8,'$wrpList':_0x16b56c,'fnSort':UtilDataSource[_0x37bcb5(0x23d)][_0x37bcb5(0x229)](UtilDataSource)});if(!_0x11b599)SortUtil[_0x37bcb5(0x230)](_0x4b29c0,_0x2eeb4a);else SortUtil[_0x37bcb5(0x1f4)](_0x4b29c0,_0x2eeb4a);return ListUiUtil[_0x37bcb5(0x23c)](_0x480b73,_0x2eeb4a),_0x131213[_0x37bcb5(0x207)]((_0x3c5a48,_0x728535)=>{const _0x52c6d8=_0x37bcb5,_0x464dcc=AppSourceSelectorMulti[_0x52c6d8(0x1e2)]({'pageFilter':_0x25ff73[_0x52c6d8(0x1e5)],'list':_0x2eeb4a,'src':_0x3c5a48,'srcI':_0x728535,'fnOnClick':()=>{const _0x3b491e=_0x52c6d8;this[_0x3b491e(0x1f0)][_0x3c5a48['identifierWorld']]=_0x464dcc[_0x3b491e(0x1fb)][_0x3b491e(0x21c)][_0x3b491e(0x22e)];},'isSelected':this[_0x52c6d8(0x1f0)][_0x3c5a48['identifierWorld']]}),_0x50455d=()=>{const _0x50ce3f=_0x52c6d8;ListUiUtil['setCheckbox'](_0x464dcc,{'toVal':!!this['_state'][_0x3c5a48[_0x50ce3f(0x239)]]});};this[_0x52c6d8(0x1e6)](_0x3c5a48['identifierWorld'],_0x50455d),_0x2eeb4a[_0x52c6d8(0x223)](_0x464dcc);}),_0x2eeb4a['on'](_0x37bcb5(0x216),()=>_0x199b72[_0x37bcb5(0x228)](_0x2eeb4a[_0x37bcb5(0x23b)]['length'])),{'$stgList':_0x199b72,'list':_0x2eeb4a,'sources':_0x131213,'propIsSectionVisible':_0x3aa8fd};}),await _0x25ff73['pageFilter'][_0x3cccdb(0x233)]({'$iptSearch':_0x25ff73['$iptSearch'],'$btnReset':_0x4e5483,'$btnOpen':_0x10cddd,'$btnToggleSummaryHidden':_0x429b7c,'$wrpMiniPills':_0x35c4d9,'namespace':_0x3cccdb(0x21b)}),$$(_0x7608db)`
			${_0x34db33}
			${_0x35c4d9}
			${_0x4b29c0}
			${_0x3c8553}
		`,_0x25ff73['listMetas'][_0x3cccdb(0x207)](({list:_0x27f215})=>_0x27f215[_0x3cccdb(0x243)]()),_0x25ff73[_0x3cccdb(0x1e5)]['trimState'](),_0x25ff73[_0x3cccdb(0x1e5)]['filterBox'][_0x3cccdb(0x22d)]();const _0x256de0=()=>{const _0x5d378c=_0x3cccdb,_0x422beb=_0x25ff73[_0x5d378c(0x1e5)][_0x5d378c(0x219)][_0x5d378c(0x1f2)]();_0x25ff73['listMetas'][_0x5d378c(0x207)](({list:_0x3cbfa0,sources:_0x1fba41,propIsSectionVisible:_0xe29ecc})=>{const _0x498537=_0x5d378c;_0x3cbfa0['filter'](_0x1d72cd=>this[_0x498537(0x218)][_0xe29ecc]&&_0x25ff73[_0x498537(0x1e5)][_0x498537(0x22a)](_0x422beb,_0x1fba41[_0x1d72cd['ix']]));});};_0x25ff73['pageFilter'][_0x3cccdb(0x219)]['on'](FilterBox['EVNT_VALCHANGE'],_0x256de0),_0x25ff73['listMetas']['forEach'](({propIsSectionVisible:_0x1eafd9})=>{const _0x5ec9ab=_0x3cccdb;this[_0x5ec9ab(0x215)]('meta',_0x1eafd9,_0x256de0);}),_0x256de0();}[_0x24c8a0(0x1f8)]({render:_0x3a0637,$stgBot:_0x1c1062}){const _0x2465c9=_0x24c8a0,_0x1f2a1a=$(_0x2465c9(0x225))['click'](async()=>{const _0x314c00=_0x2465c9;await UtilWorldDataSourceSelector[_0x314c00(0x222)](this[_0x314c00(0x240)]());});$$(_0x1c1062['empty']())`<div class="ve-flex-v-center">
			${_0x1f2a1a}
		</div>`;}}export{WorldDataSourceSelector};