const _0x5b9f83=_0x57af;(function(_0x506e44,_0x27badc){const _0x42c060=_0x57af,_0x382bb3=_0x506e44();while(!![]){try{const _0x5e500d=-parseInt(_0x42c060(0xf1))/0x1*(-parseInt(_0x42c060(0x19b))/0x2)+parseInt(_0x42c060(0x131))/0x3*(parseInt(_0x42c060(0x1a3))/0x4)+-parseInt(_0x42c060(0x14a))/0x5+-parseInt(_0x42c060(0x135))/0x6*(-parseInt(_0x42c060(0x169))/0x7)+parseInt(_0x42c060(0x151))/0x8+-parseInt(_0x42c060(0xfe))/0x9*(-parseInt(_0x42c060(0x134))/0xa)+-parseInt(_0x42c060(0xea))/0xb;if(_0x5e500d===_0x27badc)break;else _0x382bb3['push'](_0x382bb3['shift']());}catch(_0xcc7d99){_0x382bb3['push'](_0x382bb3['shift']());}}}(_0x1b50,0x191c0));import{UtilLibWrapper}from'./PatcherLibWrapper.js';import{Config}from'./Config.js';import{ChooseImporter}from'./ChooseImporter.js';import{LGT}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';function _0x57af(_0x5b2994,_0xe40dd6){const _0x1b50cc=_0x1b50();return _0x57af=function(_0x57afac,_0x2714fb){_0x57afac=_0x57afac-0xe5;let _0x2a6c19=_0x1b50cc[_0x57afac];return _0x2a6c19;},_0x57af(_0x5b2994,_0xe40dd6);}function _0x1b50(){const _0x27679f=['encodeForHash','_MAX_RECURSION_DEPTH','\x20data-plut-hover-source=\x22','\x22\x20data-plut-hover-tag=\x22','ve-hidden','\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','\x22\x20title=\x22','attr','\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)','_getBtnHtmlToggle','hover','title','</div>\x0a\x09\x09\x09\x09<div\x20class=\x22ve-flex-vh-center\x20jemb__wrp-content\x20','<a\x20class=\x22jlnk__entity-link\x22\x20data-plut-folder-link=\x22true\x22\x20data-entity=\x22Folder\x22\x20data-entity-id=\x22','_STATIC_TAGS','actorId','pImportEntry','33357qNUhen','isEnableJournalEmbeds','init','454530eXacKQ','151014MnxMWm','gameProp','content','_createContentLink','JOURNAL_CREATE','registerDocumentHandler','toggleClass','</div>\x0a\x09\x09\x09\x09','replace','entries','<a\x20class=\x22entity-link\x20broken\x22\x20title=\x22Unknown\x20Tag\x20&quot;','bind','next','journalEntries','insertContent','<a\x20class=\x22jlnk__entity-link\x22\x20draggable=\x22true\x22\x20','<a\x20class=\x22entity-link\x20broken\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','<a\x20class=\x22entity-link\x20broken\x22\x20title=\x22Unknown\x20','\x22><a\x20target=\x22_blank\x20w-100\x22\x20href=\x22','plutHoverPageHover','EmbeddedDocument','564235rqprui','type','\x22><i\x20class=\x22fas\x20','.editor','uid','ActorSheet.prototype._onDragStart','\x20data-plut-hover-preload-uid=\x22','848400uNnmny','<i\x20class=\x22fa\x20fa-caret-square-left\x22></i>','handleToggleClick','_lw_JournalSheet_prototype__disableFields','secrets','text','handleClick','\x20data-plut-hover-page=\x22','ContentLoader','error','data-plut-hover-hash-pre-encoded-hover=\x22','_lw_TextEditor__onDropEditorData','data-plut-hover-hash-hover=\x22','utils','</a>','\x22\x20data-plut-hover-pipe-parts=\x22','\x0a\x09\x09\x09\x09<div\x20class=\x22w-100\x20jemb__wrp-content\x20','_handleExpandCollapse','data','disabled','plutHoverHash','dataset','OWNER','then','56YkpZWd','originalText','splitTagByPipe','links','rolls','find','\x22\x20data-plut-rich-link-original-text=\x22','@ActorEmbedded','</button>','\x22><i\x20class=\x22','document','getTagMeta','JournalEmbed','target','EVT_DATA_SUBTYPE__IMPORT','BUTTON','&quot;â€”this\x20is\x20a\x20bug!\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','documents','\x22></i>\x20','Folder','ContentDragDrop','_getHtml_staticTag','plutHoverSource','EVT_DATA_SUBTYPE__HOVER','isEnableContentLinks','isAutoExpandJournalEmbeds','name','html','plutHoverPage','contents','\x22><i\x20class=\x22fas\x20fa-folder\x20fa-fw\x22></i>\x20','data-plut-hover-subhashes-hover=\x22','\x20Could\x20not\x20find\x20matching\x20entity.','\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)\x22\x20type=\x22button\x22>','\x22><i\x20class=\x22fas\x20fa-info-circle\x22></i>\x20','.jemb__btn-toggle','currentTarget','<a\x20class=\x22entity-link\x20broken\x22\x20title=\x22No\x20CONFIG\x20found\x20for\x20type\x20&quot;','classList','test','plutRichLink','.jlnk__entity-link','data-plut-is-expanded','plutHoverSubhashesHover','_getEntityPermissions','_sheetMode','slice','pCacheAndGet','length','sidebarIcon','862yoXDaK','shiftKey','&quot;\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','skill','_pHandleEditorDrop','data-plut-hover-preload-id=\x22','\x20data-plut-rich-link=\x22','imported','44IikKGb','data-plut-hover=\x22','closest','<div\x20class=\x22w-100\x20ve-flex-col\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22ve-flex-v-center\x20mb-1\x20jemb__wrp-lnk\x22>','ITEM_CREATE','\x22\x20data-plut-hover-hash=\x22','OBSERVER','Enricher','STR_SEE_CONSOLE','pack','_getEvtData','getImporterClassMeta','img','<a\x20class=\x22jlnk__entity-link\x22\x20data-plut-owned-link=\x22true\x22\x20data-parent-entity=\x22','enrichHTML','ENTITY_PERMISSIONS','3901920QpULZC','text/plain','instance','ROLL_TABLE_CREATE','map','sense','parse','221zMZeMk','has','LIBWRAPPER_MODE_WRAPPER','\x22\x20data-child-entity=\x22Item\x22\x20data-parent-id=\x22','LIBWRAPPER_MODE_MIXED','TextEditor._onDropEditorData','stringify','Expand','ACTOR_CREATE','plutHoverHashPreEncoded','getImporter','addPatch','getElementsByTagName','9umnsNO','_id','actors','preventDefault','button[data-plut-is-expanded]','outerHTML','subType','FOLDER_TYPE','click','_doEnableToggleButtons','collection','journal','deepEquals','\x22><img\x20src=\x22','user','can','<i\x20class=\x22fa\x20fa-caret-square-down\x22></i>','Class','get','image','doPopout','Could\x20not\x20load\x20content\x20for\x20tag\x20\x22','plutHoverHashPreEncodedHover','getHtml','data-plut-hover-page-hover=\x22','notifications','sheet','</div>\x0a\x09\x09\x09</div>','isEnableHoverForLinkTags','dataTransfer','_getEntity','skillToExplanation','isEnableSubPopouts','plutHoverHashHover'];_0x1b50=function(){return _0x27679f;};return _0x1b50();}import{UtilEvents}from'./UtilEvents.js';import{PopoutSheet}from'./PopoutSheet.js';class Patcher_TextEditor{static[_0x5b9f83(0x133)](){const _0xf9de09=_0x5b9f83;UtilLibWrapper['addPatch']('TextEditor.enrichHTML',this['_lw_TextEditor_enrichHTML'],UtilLibWrapper['LIBWRAPPER_MODE_WRAPPER']),UtilLibWrapper[_0xf9de09(0xfc)]('JournalSheet.prototype._disableFields',this[_0xf9de09(0x154)],UtilLibWrapper[_0xf9de09(0xf3)]),UtilEvents[_0xf9de09(0x13a)]({'eventType':_0xf9de09(0x106),'selector':_0xf9de09(0x18c),'fnEvent':Patcher_TextEditor[_0xf9de09(0x175)][_0xf9de09(0x153)][_0xf9de09(0x140)](Patcher_TextEditor[_0xf9de09(0x175)])}),UtilEvents[_0xf9de09(0x13a)]({'eventType':'click','selector':_0xf9de09(0x192),'fnEvent':Patcher_TextEditor[_0xf9de09(0x159)][_0xf9de09(0x157)][_0xf9de09(0x140)](Patcher_TextEditor['JournalEmbed'])}),Patcher_TextEditor['ContentDragDrop'][_0xf9de09(0x133)]();}static['_lw_TextEditor_enrichHTML'](_0x20cc36,..._0x1e19b1){const _0x1748ec=_0x5b9f83;if(!Config[_0x1748ec(0x110)](_0x1748ec(0x142),_0x1748ec(0x132))&&!Config[_0x1748ec(0x110)](_0x1748ec(0x156),_0x1748ec(0x181)))return _0x20cc36(..._0x1e19b1);return Patcher_TextEditor[_0x1748ec(0xe8)](_0x20cc36,..._0x1e19b1);}static[_0x5b9f83(0x154)](_0x164fe1,..._0x49ec18){const _0x2aa5c2=_0x5b9f83,_0x122e95=_0x164fe1(..._0x49ec18);if(!Config[_0x2aa5c2(0x110)](_0x2aa5c2(0x142),_0x2aa5c2(0x132)))return _0x122e95;return Patcher_TextEditor[_0x2aa5c2(0x175)][_0x2aa5c2(0x107)](..._0x49ec18),_0x122e95;}static[_0x5b9f83(0xe8)](_0x291779,_0x1b7b42,_0x1b88fb,_0x3bf275=0x0){const _0x4ebd27=_0x5b9f83;_0x1b88fb=_0x1b88fb||{};if(_0x1b88fb[_0x4ebd27(0x155)]===undefined)_0x1b88fb[_0x4ebd27(0x155)]=![];if(_0x1b88fb[_0x4ebd27(0x17a)]===undefined)_0x1b88fb['documents']=!![];if(_0x1b88fb[_0x4ebd27(0x16c)]===undefined)_0x1b88fb['links']=!![];if(_0x1b88fb[_0x4ebd27(0x16d)]===undefined)_0x1b88fb['rolls']=!![];_0x1b7b42=_0x291779(_0x1b7b42,_0x1b88fb);if(!_0x1b88fb[_0x4ebd27(0x17a)])return _0x1b7b42;return _0x1b7b42=_0x1b7b42[_0x4ebd27(0x13d)](/@Embed(JournalEntry)\[([^\]]+)](?:{([^}]+)})?/g,(..._0x405cd)=>Patcher_TextEditor[_0x4ebd27(0x175)][_0x4ebd27(0x115)](_0x1b88fb,_0x3bf275,..._0x405cd))[_0x4ebd27(0x13d)](/@(Actor)Embedded(Item)\[([^\]]+)]\[([^\]]+)](?:{([^}]+)})?/g,(..._0x4aa0e4)=>Patcher_TextEditor['EmbeddedDocument'][_0x4ebd27(0x115)](_0x1b88fb,_0x3bf275,..._0x4aa0e4))[_0x4ebd27(0x13d)](/@Folder\[([^\]]+)](?:{([^}]+)})?/g,(..._0x230c29)=>Patcher_TextEditor['Folder'][_0x4ebd27(0x115)](_0x1b88fb,_0x3bf275,..._0x230c29))[_0x4ebd27(0x13d)](/@([a-zA-Z]+)\[([^\]]+)](?:{([^}]+)})?/g,(..._0x401486)=>Patcher_TextEditor[_0x4ebd27(0x159)][_0x4ebd27(0x115)](_0x1b88fb,_0x3bf275,..._0x401486)),_0x1b7b42;}}Patcher_TextEditor[_0x5b9f83(0x1aa)]=class{static['_getEntityPermissions'](_0x2def0e){const _0x428152=_0x5b9f83;if(game[_0x428152(0x10c)]['isGM'])return CONST[_0x428152(0xe9)][_0x428152(0x167)];return _0x2def0e['permission'];}static[_0x5b9f83(0x11c)](_0x4dca59,_0x49ebf7){const _0x18be12=_0x5b9f83;let _0x1995c4=null;if(/^[a-zA-Z0-9]{16}$/[_0x18be12(0x190)](_0x49ebf7))_0x1995c4=_0x4dca59[_0x18be12(0x110)](_0x49ebf7);if(!_0x1995c4)_0x1995c4=(_0x4dca59[_0x18be12(0x186)]||_0x4dca59[_0x18be12(0x13e)])['find'](_0x554552=>_0x554552[_0x18be12(0x163)][_0x18be12(0x183)]===_0x49ebf7);return _0x1995c4;}},Patcher_TextEditor[_0x5b9f83(0x175)]=class extends Patcher_TextEditor[_0x5b9f83(0x1aa)]{static[_0x5b9f83(0x115)](_0x15655c,_0x3f768a,_0x20a07e,_0x358b4d,_0x52fdd6,_0x2d1450){const _0x2b964a=_0x5b9f83,_0xf96893=CONFIG[_0x358b4d],_0x5008bd=_0xf96893[_0x2b964a(0x108)][_0x2b964a(0xec)],_0x4a424a=this[_0x2b964a(0x11c)](_0x5008bd,_0x52fdd6);if(!_0x4a424a)return _0x2b964a(0x145)+(_0x2d1450||_0x52fdd6)+_0x2b964a(0x15f);const _0x1d7d70=TextEditor[_0x2b964a(0x138)](_0x20a07e,_0x358b4d,_0x52fdd6,_0x2d1450)[_0x2b964a(0x103)];if(this[_0x2b964a(0x195)](_0x4a424a)<CONST['ENTITY_PERMISSIONS'][_0x2b964a(0x1a9)])return _0x1d7d70;const _0x5012f7=Config['get'](_0x2b964a(0x142),_0x2b964a(0x182));if(_0x4a424a[_0x2b964a(0x118)][_0x2b964a(0x196)]===_0x2b964a(0x111)){const _0x3b9259=_0x4a424a[_0x2b964a(0x163)][_0x2b964a(0xe6)];return _0x2b964a(0x1a6)+_0x1d7d70+this[_0x2b964a(0x129)](_0x5012f7)+_0x2b964a(0x12c)+(_0x5012f7?'':_0x2b964a(0x124))+_0x2b964a(0x147)+_0x3b9259+_0x2b964a(0x10b)+_0x3b9259+'\x22\x20class=\x22jemb__img\x22></a></div>\x0a\x09\x09\x09</div>';}else{const _0x5db6aa=_0x3f768a===Patcher_TextEditor[_0x2b964a(0x175)][_0x2b964a(0x121)],_0x1d1fbb=_0x5db6aa?_0x4a424a[_0x2b964a(0x163)][_0x2b964a(0x137)]:TextEditor[_0x2b964a(0xe8)](_0x4a424a[_0x2b964a(0x163)][_0x2b964a(0x137)],_0x15655c,_0x3f768a+0x1);return'<div\x20class=\x22w-100\x20ve-flex-col\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22ve-flex-v-center\x20mb-1\x20jemb__wrp-lnk\x22>'+_0x1d7d70+this['_getBtnHtmlToggle'](_0x5012f7)+_0x2b964a(0x13c)+(_0x5db6aa?'<div\x20class=\x22mb-1\x20bold\x20veapp__msg-error\x22>Warning:\x20too\x20many\x20recursive\x20embeds!\x20Have\x20you\x20made\x20an\x20infinite\x20loop?</div>':'')+_0x2b964a(0x161)+(_0x5012f7?'':'ve-hidden')+'\x22>'+_0x1d1fbb+_0x2b964a(0x119);}}static[_0x5b9f83(0x153)](_0x13fea3){const _0x1c61e0=_0x5b9f83,_0x44ad60=$(_0x13fea3[_0x1c61e0(0x18d)]),_0x3244e5=_0x44ad60['attr'](_0x1c61e0(0x193))==='1';if(_0x13fea3[_0x1c61e0(0x19c)]){_0x13fea3[_0x1c61e0(0x101)]();const _0x497ff1=_0x44ad60[_0x1c61e0(0x1a5)](_0x1c61e0(0x14d));_0x497ff1[_0x1c61e0(0x16e)](_0x1c61e0(0x102))['each']((_0x688e79,_0x3b9ca0)=>this[_0x1c61e0(0x162)]($(_0x3b9ca0),_0x3244e5));return;}this[_0x1c61e0(0x162)](_0x44ad60,_0x3244e5);}static[_0x5b9f83(0x162)](_0x1b1802,_0x78b4d2){const _0x410118=_0x5b9f83,_0x18e2e6=_0x1b1802['parent']()[_0x410118(0x141)]();_0x18e2e6[_0x410118(0x13b)](_0x410118(0x124),_0x78b4d2),_0x1b1802[_0x410118(0x127)](_0x410118(0x193),_0x78b4d2?'0':'1')[_0x410118(0x184)](_0x78b4d2?_0x410118(0x152):'<i\x20class=\x22fa\x20fa-caret-square-down\x22></i>')[_0x410118(0x12b)]((_0x78b4d2?_0x410118(0xf8):'Collapse')+_0x410118(0x128));}static[_0x5b9f83(0x129)](_0x52e8f2){const _0x3e10b3=_0x5b9f83;return'<button\x20class=\x22btn\x20btn-xxs\x20btn-5et\x20btn-default\x20ve-flex-vh-center\x20mx-1\x20jemb__btn-toggle\x22\x20data-plut-is-expanded=\x22'+(_0x52e8f2?0x1:0x0)+_0x3e10b3(0x126)+(_0x52e8f2?'Collapse':_0x3e10b3(0xf8))+_0x3e10b3(0x18a)+(_0x52e8f2?_0x3e10b3(0x10e):_0x3e10b3(0x152))+_0x3e10b3(0x171);}static['_doEnableToggleButtons'](_0x34c524){const _0x5686d1=_0x5b9f83;for(let _0x6001dd of _0x34c524[_0x5686d1(0xfd)](_0x5686d1(0x178))){if(_0x6001dd[_0x5686d1(0x18f)]['contains']('jemb__btn-toggle'))_0x6001dd['removeAttribute'](_0x5686d1(0x164));}}},Patcher_TextEditor['JournalEmbed'][_0x5b9f83(0x121)]=0x45,Patcher_TextEditor[_0x5b9f83(0x149)]=class extends Patcher_TextEditor[_0x5b9f83(0x1aa)]{static['getHtml'](_0x186bee,_0x1944e9,_0x315e37,_0x43104e,_0x5a7b61,_0x24c72c,_0x4bd897,_0xd6269b){const _0xc5542c=_0x5b9f83,_0x17f074=CONFIG[_0x43104e],_0x3c618e=_0x17f074[_0xc5542c(0x108)][_0xc5542c(0xec)],_0x41e98c=this[_0xc5542c(0x11c)](_0x3c618e,_0x24c72c);if(!_0x41e98c)return _0xc5542c(0x145)+(_0xd6269b||_0x24c72c+'.'+_0x4bd897)+_0xc5542c(0x15f);const _0x51128b=CONFIG[_0x5a7b61],_0x435fcd=this['_getEntity'](_0x41e98c['items'],_0x4bd897);if(!_0x435fcd)return _0xc5542c(0x145)+(_0xd6269b||_0x24c72c+'.'+_0x4bd897)+_0xc5542c(0x15f);return _0xc5542c(0xe7)+_0x43104e+_0xc5542c(0xf4)+_0x41e98c['id']+'\x22\x20data-child-id=\x22'+_0x435fcd['id']+_0xc5542c(0x172)+_0x17f074[_0xc5542c(0x19a)]+'\x22></i>\x20<i\x20class=\x22'+_0x51128b['sidebarIcon']+_0xc5542c(0x17b)+_0x435fcd[_0xc5542c(0x183)]+'</a>';}},Patcher_TextEditor[_0x5b9f83(0x17c)]=class extends Patcher_TextEditor[_0x5b9f83(0x1aa)]{static[_0x5b9f83(0x115)](_0x32a8b5,_0x47cf2f,_0x18738a,_0x9f8380,_0x47eb79){const _0x527579=_0x5b9f83,_0x249030=this[_0x527579(0x11c)](CONFIG[_0x527579(0x17c)][_0x527579(0x108)]['instance'],_0x9f8380);if(!_0x249030)return _0x527579(0x145)+(_0x47eb79||_0x9f8380)+_0x527579(0x15f);return _0x527579(0x12d)+_0x249030['id']+_0x527579(0x187)+_0x249030[_0x527579(0x183)]+_0x527579(0x15f);}},Patcher_TextEditor[_0x5b9f83(0x159)]=class{static['getHtml'](_0x394139,_0x4bc368,_0x20a3b4,_0x19366b,_0x241451,_0x2146f8){const _0x119da8=_0x5b9f83;if(Patcher_TextEditor[_0x119da8(0x159)][_0x119da8(0x12e)][_0x119da8(0xf2)](_0x19366b))return this[_0x119da8(0x17e)](_0x394139,_0x4bc368,_0x20a3b4,_0x19366b,_0x241451,_0x2146f8);const _0x46c0ea=ChooseImporter[_0x119da8(0xe5)](_0x19366b)?.[_0x119da8(0x10f)],_0x11a709=Renderer['splitTagByPipe'](_0x241451)[0x0]||'';if(!_0x46c0ea)return _0x119da8(0x13f)+_0x19366b['qq']()+_0x119da8(0x19d)+StrUtil['qq'](_0x2146f8||_0x11a709)+_0x119da8(0x15f);const _0x507527=CONFIG[_0x46c0ea[_0x119da8(0x105)]];if(!_0x507527)return _0x119da8(0x18e)+_0x46c0ea[_0x119da8(0x105)]+_0x119da8(0x179)+StrUtil['qq'](_0x2146f8||_0x11a709)+'</a>';const {displayText:_0x29ee17,page:_0x517502,pageHover:_0x28ae0e,source:_0x661337,hash:_0x34570a,preloadId:_0x11a48f,hashPreEncoded:_0x53fd61,hashHover:_0x5743dd,hashPreEncodedHover:_0x25ce79,subhashes:_0xe3ca4,subhashesHover:_0x429e32}=Renderer[_0x119da8(0x15e)][_0x119da8(0x174)]('@'+_0x19366b,_0x241451);return _0x119da8(0x144)+(Config['get'](_0x119da8(0x156),'isEnableHoverForLinkTags')?_0x119da8(0x1a4)+!![]+'\x22':'title=\x22SHIFT-Click\x20to\x20Import\x22')+_0x119da8(0x158)+_0x517502['qq']()+'\x22\x20'+(_0x28ae0e?_0x119da8(0x116)+_0x28ae0e['qq']()+'\x22':'')+_0x119da8(0x122)+_0x661337['qq']()+_0x119da8(0x1a8)+_0x34570a['qq']()+'\x22\x20data-plut-hover-tag=\x22'+_0x19366b+'\x22\x20'+(_0x11a48f?_0x119da8(0x1a0)+_0x11a48f['qq']()+'\x22':'')+'\x20'+(_0x53fd61?'data-plut-hover-hash-pre-encoded=\x22'+_0x53fd61+'\x22':'')+'\x20'+(_0x5743dd?_0x119da8(0x15d)+_0x5743dd['qq']()+'\x22':'')+'\x20'+(_0x25ce79?_0x119da8(0x15b)+_0x25ce79+'\x22':'')+'\x20'+(_0xe3ca4?.['length']?'data-plut-hover-subhashes=\x22'+JSON['stringify'](_0xe3ca4)['qq']()+'\x22':'')+'\x20'+(_0x429e32?.[_0x119da8(0x199)]?_0x119da8(0x188)+JSON[_0x119da8(0xf7)](_0x429e32)['qq']()+'\x22':'')+_0x119da8(0x1a1)+!![]+'\x22\x20data-plut-rich-link-entity-type=\x22'+_0x46c0ea[_0x119da8(0x105)]+'\x22\x20data-plut-rich-link-original-text=\x22'+_0x20a3b4[_0x119da8(0x197)](0x1)['qq']()+_0x119da8(0x14c)+_0x507527['sidebarIcon']+_0x119da8(0x17b)+StrUtil['qq'](_0x29ee17||_0x2146f8||_0x11a709)+_0x119da8(0x15f);}static[_0x5b9f83(0x17e)](_0x1d36b8,_0x24b281,_0x2b7c6c,_0x3eb93b,_0x12887f,_0x147443){const _0x2a9a34=_0x5b9f83,_0x1f11af=_0x3eb93b===_0x2a9a34(0x19e)?Parser[_0x2a9a34(0x11d)]:_0x3eb93b===_0x2a9a34(0xef)?Parser['senseToExplanation']:null,[_0x499af3,_0x1715a7]=Renderer[_0x2a9a34(0x16b)](_0x12887f),_0x2a395a=_0x1f11af?_0x1f11af(_0x499af3):null;if(!_0x1f11af||_0x2a395a===_0x499af3||CollectionUtil[_0x2a9a34(0x10a)](_0x2a395a,_0x1f11af('')))return _0x2a9a34(0x146)+_0x3eb93b+_0x2a9a34(0x125)+StrUtil['qq'](_0x1715a7||_0x147443||_0x499af3)+'</a>';return _0x2a9a34(0x144)+(Config['get'](_0x2a9a34(0x156),_0x2a9a34(0x11a))?_0x2a9a34(0x1a4)+!![]+'\x22':'')+_0x2a9a34(0x150)+CryptUtil[_0x2a9a34(0x14e)]()+_0x2a9a34(0x123)+_0x3eb93b+_0x2a9a34(0x160)+_0x12887f['qq']()+_0x2a9a34(0x16f)+_0x2b7c6c[_0x2a9a34(0x197)](0x1)['qq']()+_0x2a9a34(0x18b)+StrUtil['qq'](_0x1715a7||_0x147443||_0x499af3)+_0x2a9a34(0x15f);}static[_0x5b9f83(0x157)](_0x48a17c){const _0x4f6fe8=_0x5b9f83;_0x48a17c['stopPropagation'](),_0x48a17c[_0x4f6fe8(0x101)]();const _0xf3f2f6='@'+_0x48a17c[_0x4f6fe8(0x18d)]['dataset']['plutRichLinkOriginalText'],_0x183e76=_0x48a17c[_0x4f6fe8(0x18d)][_0x4f6fe8(0x166)]['plutHoverTag'],_0x41ed7d=_0x48a17c[_0x4f6fe8(0x18d)][_0x4f6fe8(0x166)][_0x4f6fe8(0x185)],_0x10de1c=_0x48a17c[_0x4f6fe8(0x18d)]['dataset'][_0x4f6fe8(0x17f)];let _0x1aa602=_0x48a17c[_0x4f6fe8(0x18d)][_0x4f6fe8(0x166)][_0x4f6fe8(0x165)];const _0x3e8cbb=!!_0x48a17c[_0x4f6fe8(0x18d)][_0x4f6fe8(0x166)][_0x4f6fe8(0xfa)],_0x2aa5e3=_0x48a17c['currentTarget'][_0x4f6fe8(0x166)][_0x4f6fe8(0x148)]||_0x41ed7d;let _0x386d76=_0x48a17c['currentTarget'][_0x4f6fe8(0x166)][_0x4f6fe8(0x11f)];const _0x2c3c2f=!!_0x48a17c[_0x4f6fe8(0x18d)]['dataset'][_0x4f6fe8(0x114)],_0x4ed632=_0x48a17c[_0x4f6fe8(0x18d)][_0x4f6fe8(0x166)][_0x4f6fe8(0x194)];if(!_0x2aa5e3||!_0x10de1c||!_0x1aa602)return;const _0x73f830=ChooseImporter[_0x4f6fe8(0xfb)](_0x183e76)||ChooseImporter[_0x4f6fe8(0xfb)](_0x41ed7d);if(!_0x3e8cbb)_0x1aa602=UrlUtil['encodeForHash'](_0x1aa602);if(_0x386d76&&!_0x2c3c2f)_0x386d76=UrlUtil[_0x4f6fe8(0x120)](_0x386d76);if(!_0x386d76)_0x386d76=_0x1aa602;if(_0x4ed632){const _0xc0f551=JSON[_0x4f6fe8(0xf0)](_0x4ed632);_0x386d76+=Renderer[_0x4f6fe8(0x15e)]['getLinkSubhashString'](_0xc0f551);}const _0x578d87=!!_0x48a17c[_0x4f6fe8(0x19c)]&&(game['user'][_0x4f6fe8(0x10d)](_0x4f6fe8(0xf9))&&_0x73f830[_0x4f6fe8(0x136)]===_0x4f6fe8(0x100)||game[_0x4f6fe8(0x10c)]['can'](_0x4f6fe8(0x1a7))&&_0x73f830[_0x4f6fe8(0x136)]==='items'||game['user']['can'](_0x4f6fe8(0x139))&&_0x73f830[_0x4f6fe8(0x136)]===_0x4f6fe8(0x109)||game['user'][_0x4f6fe8(0x10d)](_0x4f6fe8(0xed))&&_0x73f830[_0x4f6fe8(0x136)]==='tables'),_0x3429c9=_0x48a17c['view']!==window&&Config[_0x4f6fe8(0x110)]('ui',_0x4f6fe8(0x11e));Renderer[_0x4f6fe8(0x12a)][_0x4f6fe8(0x198)](_0x2aa5e3,_0x10de1c,_0x386d76)[_0x4f6fe8(0x168)](_0x1b03cd=>{const _0x307a47=_0x4f6fe8,_0x1203e3=_0x307a47(0x113)+_0xf3f2f6+'\x22!';if(!_0x1b03cd){const _0x534d42=_0x1203e3+_0x307a47(0x189);return console[_0x307a47(0x15a)](...LGT,_0x534d42),ui[_0x307a47(0x117)]['error'](_0x534d42);}_0x73f830[_0x307a47(0x130)](_0x1b03cd,{'isTemp':!_0x578d87,'defaultPermission':!_0x578d87?CONST[_0x307a47(0xe9)][_0x307a47(0x167)]:undefined})[_0x307a47(0x168)](async _0x21c9b9=>{const _0x5a7ef7=_0x307a47;if(_0x578d87)UtilApplications['doShowImportedNotification'](_0x21c9b9);const _0x149873=await Promise['all']((_0x21c9b9[_0x5a7ef7(0x1a2)]||[])[_0x5a7ef7(0xee)](_0x547b94=>_0x547b94[_0x5a7ef7(0x173)])['filter'](Boolean)[_0x5a7ef7(0xee)](_0x2be5d7=>UtilApplications['pForceRenderApp'](_0x2be5d7[_0x5a7ef7(0x118)]?_0x2be5d7[_0x5a7ef7(0x118)]:_0x2be5d7)));if(!_0x3429c9)return;_0x149873['filter'](Boolean)['forEach'](({app:_0x55cb75,data:_0x4f46a5})=>PopoutSheet[_0x5a7ef7(0x112)](_0x55cb75,_0x4f46a5));})['catch'](_0x52455d=>{const _0x1b95ad=_0x307a47;console[_0x1b95ad(0x15a)](...LGT,_0x52455d),ui[_0x1b95ad(0x117)][_0x1b95ad(0x15a)](_0x1203e3+'\x20'+VeCt[_0x1b95ad(0x1ab)]);});});}},Patcher_TextEditor[_0x5b9f83(0x159)][_0x5b9f83(0x12e)]=new Set(['skill','sense']),Patcher_TextEditor[_0x5b9f83(0x17d)]=class{static[_0x5b9f83(0x133)](){const _0x161d3a=_0x5b9f83;UtilLibWrapper[_0x161d3a(0xfc)](_0x161d3a(0x14f),this['_lw_ActorSheet_prototype__onDragStart'],UtilLibWrapper[_0x161d3a(0xf5)]),UtilLibWrapper['addPatch'](_0x161d3a(0xf6),this['_lw_TextEditor__onDropEditorData'],UtilLibWrapper['LIBWRAPPER_MODE_MIXED']);}static['_lw_ActorSheet_prototype__onDragStart'](_0x47ad1a,..._0x3f9197){const _0x1e9747=_0x5b9f83,_0x2a624d=_0x3f9197[0x0];if(_0x2a624d[_0x1e9747(0x176)][_0x1e9747(0x166)][_0x1e9747(0x191)])return;return _0x47ad1a(..._0x3f9197);}static async[_0x5b9f83(0x15c)](_0x29fa96,..._0x32f46f){const _0x2bcafa=_0x5b9f83;return Patcher_TextEditor['ContentDragDrop'][_0x2bcafa(0x19f)]({'fn':_0x29fa96,'args':_0x32f46f});}static async['_pHandleEditorDrop']({fn:_0x8d5b3b,args:_0x32ee3f}){const _0x315f1d=_0x5b9f83,[_0x242949,_0x3af978]=_0x32ee3f;_0x242949[_0x315f1d(0x101)]();const _0x46da90=Patcher_TextEditor[_0x315f1d(0x17d)][_0x315f1d(0x1ad)](_0x242949);if(!_0x46da90)return _0x8d5b3b(..._0x32ee3f);if(_0x46da90?.[_0x315f1d(0x104)]===UtilEvents[_0x315f1d(0x177)])return _0x3af978['insertContent'](_0x46da90['tag']),!![];if(_0x46da90[_0x315f1d(0x12f)]&&_0x46da90[_0x315f1d(0x14b)]==='Item'&&!_0x46da90[_0x315f1d(0x1ac)]){const _0x2f36fa=CONFIG[_0x46da90[_0x315f1d(0x14b)]];if(!_0x2f36fa)return![];const _0x5db86f=game[_0x315f1d(0x100)][_0x315f1d(0x110)](_0x46da90['actorId']);if(!_0x5db86f)return![];const _0x511892=_0x5db86f[_0x2f36fa['documentClass']['metadata'][_0x315f1d(0x108)]]['get'](_0x46da90[_0x315f1d(0x163)][_0x315f1d(0xff)]);if(!_0x511892)return![];return _0x3af978[_0x315f1d(0x143)](_0x315f1d(0x170)+_0x46da90[_0x315f1d(0x14b)]+'['+_0x46da90[_0x315f1d(0x12f)]+']['+_0x511892['id']+']{'+_0x511892[_0x315f1d(0x183)]+'}'),!![];}if(_0x46da90?.[_0x315f1d(0x104)]!==UtilEvents[_0x315f1d(0x180)])return _0x8d5b3b(..._0x32ee3f);return _0x3af978[_0x315f1d(0x143)](_0x46da90[_0x315f1d(0x16a)]),!![];}static['_getEvtData'](_0x3be490){const _0x1427b2=_0x5b9f83;try{return JSON[_0x1427b2(0xf0)](_0x3be490[_0x1427b2(0x11b)]['getData'](_0x1427b2(0xeb)));}catch(_0x5a7d66){return null;}}};export{Patcher_TextEditor};