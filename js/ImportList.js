const _0x4a8bb2=_0x1147;(function(_0x24aa12,_0x5b5ddf){const _0x20a4f9=_0x1147,_0x39e596=_0x24aa12();while(!![]){try{const _0x1934d0=parseInt(_0x20a4f9(0x1a4))/0x1+parseInt(_0x20a4f9(0x16e))/0x2*(-parseInt(_0x20a4f9(0x29b))/0x3)+-parseInt(_0x20a4f9(0x273))/0x4*(parseInt(_0x20a4f9(0x137))/0x5)+-parseInt(_0x20a4f9(0x203))/0x6+parseInt(_0x20a4f9(0x202))/0x7+-parseInt(_0x20a4f9(0x2a8))/0x8*(parseInt(_0x20a4f9(0x294))/0x9)+parseInt(_0x20a4f9(0x2d4))/0xa;if(_0x1934d0===_0x5b5ddf)break;else _0x39e596['push'](_0x39e596['shift']());}catch(_0x3a8797){_0x39e596['push'](_0x39e596['shift']());}}}(_0x11f7,0x488f3));import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{Util}from'./Util.js';import{UtilList2}from'./UtilList2.js';import{MixinFolderPathBuilder}from'./FolderPathBuilder.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{UtilCompendium}from'./UtilCompendium.js';import{ConfigConsts}from'./ConfigConsts.js';function _0x11f7(){const _0x51c214=['render','patcher_pHandleActorDrop','info','sourceShort','_namespace','TASK_EXIT_FAILED','pGetChooseImporterUserDataForSources','_uploadedFile','dirsHomebrew','\x20The\x20original\x20entity\x20could\x20not\x20be\x20found.','getData','Warning:\x20Large\x20Import','flags','_pGetCreateFoldersGetIdFromObject','?\x20Note\x20that\x20this\x20will\x20ignore\x20any\x20in-Foundry\x20modifications\x20made\x20to\x20the\x20item.','documentClass','_pHandleDropGetImportedDoc','Unimplemented!','packs','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','pInit','absorbFnBindListeners','defaultPermission','isFiltered','remove','_dataList','isEscapeable','_pDoPreCachePack','_$btnTogglePreviewAll','_activateListeners_doFindUiElements','pGetHomebrewSources','size','focus','Warning:\x20Large\x20Compendium','DataSourceUrl','then','4376930fUDpln','_isImporterDropEvent','getEntitySource','api_pImportEntry','Unimplemented','STR_SEE_CONSOLE','_getAsTag','mix','_pHandleSidebarDrop','EVT_DATA_SUBTYPE__IMPORT','SOURCE_TYP_BREW','reset','gameProp','1584855nVbHnT','_$btnToggleSummary','entities','deduplicationMode','_getImportOpts','isClosable','results','_pGetSources','importOpts','_suppressCreateSheetItemHookTimeStart','Could\x20not\x20find\x20pack\x20\x22','_getDuplicateMeta','Mode','dataTransfer','First\x20Letter\x20of\x20Name','page','_displayName','Imported\x20\x22','sorting','_foundryIsIgnoreVersions','pGetUserBoolean','C_IMPORT_DEDUPE_MODE_NONE','resultId','cbSel','now','pGetSources','join','key','sourceStyle','directory','isOverwrite','data','scenes','Game\x20property\x20\x22','canUserCreateFolders','trimState','text/plain','Yes,\x20use\x20the\x20importer','sort','actors','center','pGetTableResult','Enter','collection','_lw_JournalEntry_fromDropData','titleButtonRun','mutateForFilters','toUpperCase','pImportEntry','_activateListeners_pInitFilteredList','preventDefault','_$dispNumVisible','_packCacheFlat','ele','getValues','2zaAHKm','Select\x20the\x20Version\x20to\x20Import','prePreInit','_pImportEntry','MODULE_LOCATION','sourceJsonToStylePart','getContent','IMPLS','_list','index','.<br>Importing\x20a\x20large\x20number\x20of\x20documents\x20to\x20a\x20single\x20compendium\x20may\x20degrade\x20game\x20performance.<br>Do\x20you\x20wish\x20to\x20continue?','error','_$btnRun','_props','./ChooseImporter.js','Import\x20exited\x20with\x20status\x20\x22','_fnListSort','filterValues','teardown','mode','Import\x20via\x20','isPreviewable','_pGetSourcesHomebrew','Please\x20select\x20something\x20from\x20the\x20list!','_$cbAll','get','fnListSort','_configGroup','callAll','_pImportEntry_pCreateTempDirectoryGetId','Scene','.lst__wrp-search-visible','toString','btn-run-mods','role','_$btnFeelingLucky','stopPropagation','[name=\x22btn-feeling-lucky\x22]','propsBrewAdditionalData','Item.fromDropData','toDisplay','You\x20do\x20not\x20have\x20sufficient\x20permissions!','SOURCE_TYP_BREW_LOCAL','showVe','existing','pack','some','proxy','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','(Base\x20version)','registerImpl','name','folder','isFolderOnly','541225mOBZpv','Duplicate\x20or\x20missing\x20importer\x20ID!\x20Importer\x20\x22','_sidebarTab','_pImportEntry_pImportToDirectoryGeneric','_pGetUseImporterDragDrop','_$wrpBtnsSort','EVNT_VALCHANGE','_isInit','notifications','MODULE_TITLE','sourceLong','Item','_propsBrewAdditionalData','_resolve','_$bntFilter','_pack','isExisting','_onDrop','configGroup','_activateListeners_bindControls','firstElementChild','_pImportEntry_pGetFolderId','initBtnSortHandlers','_isClosable','dragstart','_activateListeners_initRunButton','_fnResolve','pSyncStateFrom','setData','getVersions','_pPostFilterRender','_isFolderOnly','RollTable','_pImportListItems','MODULE_NAME_FAKE','_isDedupable','document','_activateListeners_initSearchKeyHandlers','addEventListener','ascSortLower','isForceImportToTempDirectory','One\x20of\x20\x22props\x22\x20or\x20\x22namespace\x22\x20must\x20be\x20provided!','updated','text-center','isImportToTempDirectory','[name=\x22cb-select-all\x22]','_pHandleClickRunButton','map','visibleItems','_isNonCacheableInstance','Fvtt','effects','isDisableLargeImportWarning','completedStub','tempFolderName','rollOnArray','_fnLoadSideData','getImporter','_getDuplicateMeta_getEntityKey','getNameWithSourcePart','\x20to\x20a\x20compendium\x20with\x20','_pageFilter','_packCache','_isPreviewable','stringify','_pImportEntry_getUserVersion','_activateListeners_initRunButtonsAdditional','\x20existing\x20document','pUpdateDocument','_table','TableResult','_pImportListItems_foreground','sourceJsonToFull','pResult','addPatch','No,\x20use\x20normal\x20drag-drop','isTemp','pCreateEmbeddedDocuments','set','_pPostRenderOrShow','Options\x20\x22isTemp\x22\x20and\x20\x22packId\x22\x20are\x20mutually\x20exclusive!','actor','_content','entity','element','Cancel','_lw_RollTable_fromDropData','pGetCompendiumData','C_IMPORT_DRAG_DROP_MODE_PROMPT','compendium','getSourceWithPagePart','C_IMPORT_DEDUPE_MODE_SKIP','sourceJsonToAbv','isMaybeSkippable','3315767DhztTu','1952136wvyvXU','imported','FOLDER_TYPE','values','_pHandleClickRunButton_doDumpPackCache','doShowImportedNotification','_lw_ActorDirectory_prototype__onDrop','importDocument','folderId','_folderPathSpecKeyConstructorName','img','_pImportListItems_background','_listInitialSortBy','DISPLAY_NAME_TYPE_PLURAL','constructor','pGetAllContent','trim','_isImportSuccess','You\x20have\x20selected\x20','_isActor','pSetFolderPathSpec','html','_activateListeners_absorbListItems','LIBWRAPPER_MODE_MIXED','namespace','_isRadio','__prop','subType','_$btnsRunAdditional','hover','list-multi-selected','Failed\x20to\x20import\x20\x22','getMaxTableRange','_fnReject','activateListeners','_getDuplicateMeta_getCleanName','_titleSearch','packUid','checked','_activateListeners_initList','pCacheAndGet','RollTable.fromDropData','Source','SRD\x20Importer','Continue','_isNotDroppable','_pImportEntry_pDoUpdateExistingPackEntity','Entry\x20cannot\x20be\x20null/undefined!','_getDuplicateMeta_isFlagMatch','_isResolveOnClose','create','isStrictMatching','TASK_EXIT_CANCELLED','items','getDropJson','push','_activateListeners_initRunButtonsAdditional_genericMods','activateTab','click','props','getFolderPathMeta','_page','[name=\x22btn-filter\x22]','cancelled','source','import','toLowerCase','pAddActorItems','Actor.fromDropData','each','titleSearch','_pFnPostProcessEntries','_activateListeners_initDroppable','children','\x22!\x20','Actor','journal','JournalEntry','pPreRender','scrollIntoView','absorbFnBindListenersRadio','_getDedupedData','Only\x20one\x20of\x20\x22actor\x22\x20and\x20\x22pack\x22\x20may\x20be\x20specified!','absorbFnGetData','dragDropMode','isStreamerMode','preCreateItem','minimumRole','filterBox','_$btnReset','_propGroups','_$wrpList','isDedupable','[name=\x22btn-reset\x22]','copy','embeddedDocument','_STO_K_FOLDER_PATH_SPEC','forEach','_actor','_dirsHomebrew','ActiveEffect','_$wrpMiniPills','tables','documentName','filter','isActorRadio','isStandardDragDrop','sourceJsonToColor','_activateListeners_initPreviewImportButton','status','Mismatched\x20number\x20of\x20properties!\x20This\x20is\x20a\x20bug!','classList','4LvDxjJ','pGetUserChoice','find','_isForceImportToTempDirectory','[name]','length','deleteEmbeddedDocuments','showAndRender','setCheckboxes','pDoQuickOpenUsingExistingSourceSelection','_pInit_folderPathSpec','_$iptSearch','_handleFilterChange','pRunTasks','_activateListeners_initPreviewsAndQuicksImportsAndDroppables','\x22\x20via\x20','warn','keydown','sourceClassName','[name=\x22btn-toggle-summary\x22]','\x22\x20is\x20not\x20supported!','_gameProp','_getFilterNamespace','hash','table','[data-name=\x22wrp-btns-sort\x22]','TASK_EXIT_COMPLETE_DATA_ONLY','_defaultFolderPath','generic','_lw_Item_fromDropData','_isHidden','_pImportEntry_pDoUpdateExistingDirectoryEntity','_activateListeners_initPreviewButton','153bxEibI','\x20to\x20import','close','_getBlacklistFilteredData','pGetLocalHomebrewSources','_activateListeners_initFeelingLuckyButton','addToFilters','1524315GtmLDL','Source\x20(Abbreviation)','replace','getMaxWindowHeight','entries','sidebar','hideVe','_$wrpRun','.search','details','[name=\x22btn-toggle-all-previews\x22]','init','TASK_EXIT_COMPLETE','2336BaAsXY','pInitFilterBox','_titleButtonRun','_pImportEntry_pAddToTargetTableIfRequired','parent','JournalEntry.fromDropData','Continue\x20and\x20Remember','_getDuplicateMeta_getExisting'];_0x11f7=function(){return _0x51c214;};return _0x11f7();}import{UtilDataSource}from'./UtilDataSource.js';import{DataConverterTable}from'./DataConverterTable.js';import{UtilFolders}from'./UtilFolders.js';import{UtilDataConverter}from'./UtilDataConverter.js';import{UtilHooks}from'./UtilHooks.js';import{UtilActors}from'./UtilActors.js';import{UtilDocuments}from'./UtilDocuments.js';import{UtilWorldDataSourceSelector}from'./UtilWorldDataSourceSelector.js';import{UtilEvents}from'./UtilEvents.js';function _0x1147(_0x361e46,_0x18cc9d){const _0x11f7a7=_0x11f7();return _0x1147=function(_0x11474d,_0x5391c0){_0x11474d=_0x11474d-0x12b;let _0xd4dfc6=_0x11f7a7[_0x11474d];return _0xd4dfc6;},_0x1147(_0x361e46,_0x18cc9d);}import{UtilLibWrapper}from'./PatcherLibWrapper.js';class ImportList extends MiscUtil[_0x4a8bb2(0x131)](Application)['with'](MixinFolderPathBuilder){static async[_0x4a8bb2(0x12d)](_0x245608,{isTemp:isTemp=![],packId:packId=null}={}){const _0x52291a=_0x4a8bb2;if(game['user'][_0x52291a(0x190)]<Config[_0x52291a(0x187)](_0x52291a(0x244),_0x52291a(0x25a)))throw new Error(_0x52291a(0x197));const _0x4959ae=packId?game[_0x52291a(0x2c2)][_0x52291a(0x187)](packId):null;if(!_0x4959ae&&packId)throw new Error(_0x52291a(0x141)+_0x4959ae+'\x22');if(isTemp&&packId)throw new Error(_0x52291a(0x1f4));_0x245608=await _0x245608;if(_0x245608==null)throw new Error(_0x52291a(0x232));const _0x2ee3c8=new this();return await _0x2ee3c8[_0x52291a(0x2c4)](),_0x2ee3c8[_0x52291a(0x19b)]=_0x4959ae,_0x2ee3c8[_0x52291a(0x167)](_0x245608,{'isTemp':isTemp});}static[_0x4a8bb2(0x2a6)](){const _0x4397e3=_0x4a8bb2;UtilLibWrapper[_0x4397e3(0x1ee)](_0x4397e3(0x247),this['_lw_Actor_fromDropData'],UtilLibWrapper[_0x4397e3(0x21a)]),UtilLibWrapper['addPatch'](_0x4397e3(0x195),this[_0x4397e3(0x290)],UtilLibWrapper['LIBWRAPPER_MODE_MIXED']),UtilLibWrapper[_0x4397e3(0x1ee)](_0x4397e3(0x2ad),this[_0x4397e3(0x163)],UtilLibWrapper[_0x4397e3(0x21a)]),UtilLibWrapper[_0x4397e3(0x1ee)](_0x4397e3(0x22c),this[_0x4397e3(0x1fa)],UtilLibWrapper[_0x4397e3(0x21a)]);}static async['_lw_Actor_fromDropData'](_0x5caf58,..._0x23c503){const _0xbef636=await ImportList['_pHandleDropGetImportedDoc'](_0x23c503[0x0]);if(_0xbef636)return _0xbef636;return _0x5caf58(..._0x23c503);}static async['_lw_Item_fromDropData'](_0x227d21,..._0x200aa0){const _0x54d01d=_0x4a8bb2,_0x1b61bb=await ImportList[_0x54d01d(0x2c0)](_0x200aa0[0x0]);if(_0x1b61bb)return _0x1b61bb;return _0x227d21(..._0x200aa0);}static async['_lw_JournalEntry_fromDropData'](_0xab47d2,..._0x24c0ac){const _0x46fde0=_0x4a8bb2,_0x953135=await ImportList[_0x46fde0(0x2c0)](_0x24c0ac[0x0]);if(_0x953135)return _0x953135;return _0xab47d2(..._0x24c0ac);}static async['_lw_RollTable_fromDropData'](_0x3aec60,..._0x19d86b){const _0x1b39ab=_0x4a8bb2,_0x2688a8=await ImportList[_0x1b39ab(0x2c0)](_0x19d86b[0x0]);if(_0x2688a8)return _0x2688a8;return _0x3aec60(..._0x19d86b);}static[_0x4a8bb2(0x170)](){const _0x37b193=_0x4a8bb2;UtilLibWrapper[_0x37b193(0x1ee)]('ActorDirectory.prototype._onDrop',this['_lw_ActorDirectory_prototype__onDrop'],UtilLibWrapper[_0x37b193(0x21a)]),UtilLibWrapper[_0x37b193(0x1ee)]('Compendium.prototype._onDrop',this['_lw_Compendium_prototype__onDrop'],UtilLibWrapper['LIBWRAPPER_MODE_MIXED']);}static async[_0x4a8bb2(0x209)](_0x472904,..._0x50418d){const _0x8ce2c9=_0x4a8bb2;if(await ImportList[_0x8ce2c9(0x132)](this,..._0x50418d))return;return _0x472904(..._0x50418d);}static async['_lw_Compendium_prototype__onDrop'](_0xaa8c3b,..._0x1f010a){const _0x5c5755=_0x4a8bb2,_0x2cd837=UtilEvents['getDropJson'](_0x1f010a[0x0]),_0x5b7387=await ImportList[_0x5c5755(0x2c0)](_0x2cd837,{'pack':this[_0x5c5755(0x162)]});if(_0x5b7387)return _0x5b7387;return _0xaa8c3b(..._0x1f010a);}static ['ID']='';static [_0x4a8bb2(0x210)]='';static [_0x4a8bb2(0x175)]=new Map();static[_0x4a8bb2(0x1a0)](_0x410f51){const _0x348645=_0x4a8bb2;if(!_0x410f51['ID']||this['IMPLS']['get'](_0x410f51['ID']))throw new Error(_0x348645(0x1a5)+_0x410f51['name']+'\x22\x20ID\x20was\x20\x22'+_0x410f51['ID']+'\x22.');return this[_0x348645(0x175)][_0x348645(0x1f2)](_0x410f51['ID'],_0x410f51),this['IMPLS'];}static get[_0x4a8bb2(0x205)](){const _0x39d2fe=_0x4a8bb2;return _0x39d2fe(0x1af);}static[_0x4a8bb2(0x12b)]({evt:_0x1521dd,data:_0x2ef295}){const _0x46ff99=_0x4a8bb2;if(!_0x1521dd&&!_0x2ef295)return![];if(!_0x2ef295)_0x2ef295=UtilEvents[_0x46ff99(0x239)](_0x1521dd);if(_0x2ef295[_0x46ff99(0x21e)]!==UtilEvents['EVT_DATA_SUBTYPE__HOVER']&&_0x2ef295[_0x46ff99(0x21e)]!==UtilEvents[_0x46ff99(0x133)])return![];return _0x2ef295[_0x46ff99(0x146)]&&_0x2ef295['source']&&_0x2ef295[_0x46ff99(0x28a)];}static async[_0x4a8bb2(0x2b1)](_0x555c16){const _0x46a041=_0x4a8bb2,_0x4e67af=UtilEvents['getDropJson'](_0x555c16);if(!ImportList[_0x46a041(0x12b)]({'evt':_0x555c16}))return;const _0x5b897e=await ImportList[_0x46a041(0x2c0)](_0x4e67af);if(!_0x5b897e)return;ImportList[_0x46a041(0x140)]=Date[_0x46a041(0x14f)]();const _0x64888f=new DragEvent('drop',{'dataTransfer':new DataTransfer()});return _0x64888f[_0x46a041(0x144)]['setData'](_0x46a041(0x15b),JSON[_0x46a041(0x1e4)]({'type':_0x5b897e[_0x46a041(0x26a)],'id':_0x5b897e['id']})),this[_0x46a041(0x1b5)](_0x64888f);}static async[_0x4a8bb2(0x132)](_0x98c78d,_0x5d07c0){const _0x3033e7=_0x4a8bb2,_0x3e2a3f=UtilEvents[_0x3033e7(0x239)](_0x5d07c0);if(!ImportList[_0x3033e7(0x12b)]({'evt':_0x5d07c0}))return;return await ImportList[_0x3033e7(0x2c0)](_0x3e2a3f,{'requiresDocumentName':_0x98c78d[_0x3033e7(0x211)]['documentName']}),!![];}static async[_0x4a8bb2(0x2c0)](_0x310100,{requiresDocumentName:requiresDocumentName=null,pack:pack=null}={}){const _0x527455=_0x4a8bb2;if(!ImportList['_isImporterDropEvent']({'data':_0x310100}))return null;const _0x27b6c9=await Renderer[_0x527455(0x220)]['pCacheAndGet'](_0x310100[_0x527455(0x146)],_0x310100['source'],_0x310100[_0x527455(0x28a)],{'isCopy':!![]}),{ChooseImporter:_0x2d022b}=await import(_0x527455(0x17c)),_0x3a5e48=_0x2d022b[_0x527455(0x1dd)](_0x27b6c9?.[_0x527455(0x21d)]||_0x310100[_0x527455(0x146)]);if(pack)_0x3a5e48['pack']=pack;if(requiresDocumentName!=null&&_0x3a5e48[_0x527455(0x211)][_0x527455(0x205)]!==requiresDocumentName)return null;return(await _0x3a5e48[_0x527455(0x167)](_0x27b6c9))[_0x527455(0x204)][0x0]?.[_0x527455(0x1c8)];}static['_initCreateSheetItemHook']({prop:_0x18bbb0,importerName:_0x5932e3,isForce:_0x2c730a,pFnGetEntity:_0x5dc29d,pFnImport:_0x3136c,fnGetSuccessMessage:_0x17e145,fnGetFailedMessage:_0x3283a6}){const _0x3e3c30=_0x4a8bb2;Hooks['on'](_0x3e3c30(0x259),(_0x4e2880,_0x65246e,_0x27696c,_0x1dbdf8)=>{const _0x10f95a=_0x3e3c30;if(_0x4e2880[_0x10f95a(0x2ac)]?.[_0x10f95a(0x26a)]!==_0x10f95a(0x24e))return;const _0x30d32e=_0x65246e['flags']?.[SharedConsts['MODULE_NAME_FAKE']]||_0x65246e[_0x10f95a(0x2bc)]?.[SharedConsts['MODULE_NAME']];if(!_0x30d32e||_0x30d32e?.['propDroppable']!==_0x18bbb0)return;if(_0x30d32e[_0x10f95a(0x26d)]||_0x30d32e['isDirectImport'])return;if(ImportList['_suppressCreateSheetItemHookTimeStart']!=null&&Date['now']()-ImportList[_0x10f95a(0x140)]<0x2710){ImportList[_0x10f95a(0x140)]=null;return;}ImportList[_0x10f95a(0x140)]=null;const _0x3214ea=_0x4e2880[_0x10f95a(0x2ac)];return this['_pGetUseImporterDragDrop']({'isForce':_0x2c730a})[_0x10f95a(0x2d3)](async _0x1459ee=>{const _0x3550ca=_0x10f95a;if(_0x1459ee==null)return;let _0xe92a71;try{if(_0x5dc29d)_0xe92a71=await _0x5dc29d(_0x30d32e);else _0xe92a71=await Renderer[_0x3550ca(0x220)][_0x3550ca(0x22b)](_0x30d32e[_0x3550ca(0x146)],_0x30d32e['source'],_0x30d32e[_0x3550ca(0x28a)]);}catch(_0x1f3df7){ui[_0x3550ca(0x1ac)][_0x3550ca(0x179)](_0x3550ca(0x222)+(_0xe92a71?.['name']??_0x30d32e[_0x3550ca(0x28a)])+_0x3550ca(0x24d)+VeCt[_0x3550ca(0x12f)]);throw _0x1f3df7;}if(!_0xe92a71){const _0x4080a5=_0x3550ca(0x222)+_0x30d32e[_0x3550ca(0x28a)]+'\x22!';ui['notifications']['error'](_0x4080a5+'\x20'+VeCt['STR_SEE_CONSOLE']);throw new Error(_0x4080a5+_0x3550ca(0x2b9));}try{if(_0x1459ee){const _0x1bae13=new this({'actor':_0x3214ea});await _0x1bae13[_0x3550ca(0x2c4)]();if(_0x3136c)await _0x3136c({'ent':_0xe92a71,'imp':_0x1bae13,'flags':_0x30d32e});else await _0x1bae13[_0x3550ca(0x167)](_0xe92a71,{'filterValues':_0x30d32e['filterValues']});const _0x379180=_0x17e145?_0x17e145({'ent':_0xe92a71,'flags':_0x30d32e}):_0x3550ca(0x148)+_0xe92a71[_0x3550ca(0x1a1)]+_0x3550ca(0x282)+_0x5932e3+'\x20Importer';ui[_0x3550ca(0x1ac)][_0x3550ca(0x2b2)](_0x379180);return;}_0x65246e=MiscUtil[_0x3550ca(0x261)](_0x65246e),MiscUtil[_0x3550ca(0x1f2)](_0x65246e[_0x3550ca(0x2bc)],SharedConsts[_0x3550ca(0x1c6)],_0x3550ca(0x26d),!![]),await UtilActors[_0x3550ca(0x246)](_0x3214ea,[_0x65246e]);}catch(_0x179ef7){const _0x22855b=_0x3283a6?_0x3283a6({'ent':_0xe92a71,'flags':_0x30d32e}):'Failed\x20to\x20import\x20\x22'+_0xe92a71[_0x3550ca(0x1a1)]+'\x22!\x20'+VeCt[_0x3550ca(0x12f)];ui['notifications'][_0x3550ca(0x179)](_0x22855b);throw _0x179ef7;}}),![];});}static async[_0x4a8bb2(0x1a8)]({isForce:_0x4141e4}){const _0x53e13f=_0x4a8bb2;if(_0x4141e4)return!![];const _0x5f1c3e=Config[_0x53e13f(0x187)](_0x53e13f(0x244),_0x53e13f(0x257));if(_0x5f1c3e===ConfigConsts['C_IMPORT_DRAG_DROP_MODE_NEVER'])return![];if(_0x5f1c3e===ConfigConsts[_0x53e13f(0x1fc)])return InputUiUtil[_0x53e13f(0x14b)]({'title':_0x53e13f(0x182)+(Config[_0x53e13f(0x187)]('ui',_0x53e13f(0x258))?_0x53e13f(0x22e):SharedConsts[_0x53e13f(0x1ad)])+_0x53e13f(0x2be),'textYes':_0x53e13f(0x15c),'textNo':_0x53e13f(0x1ef)});return!![];}constructor(_0x53553a,_0x38f6ab,_0x35eb03){const _0x417a88=_0x4a8bb2;_0x35eb03=_0x35eb03||{};if(!_0x35eb03['props']&&!_0x35eb03[_0x417a88(0x21b)])throw new Error(_0x417a88(0x1cd));const _0x3e3c51={'template':SharedConsts[_0x417a88(0x172)]+'/template/ImportList.hbs','width':0x3c0,'height':Util[_0x417a88(0x29e)](),'resizable':!![]};Object['assign'](_0x3e3c51,_0x53553a||{}),super(_0x3e3c51),this[_0x417a88(0x17b)]=_0x35eb03[_0x417a88(0x23e)],this[_0x417a88(0x1b0)]=_0x35eb03[_0x417a88(0x194)];if(this['_props']&&this['_propsBrewAdditionalData']&&this['_props'][_0x417a88(0x278)]!==this[_0x417a88(0x1b0)]['length'])throw new Error(_0x417a88(0x271));this['_dirsHomebrew']=_0x35eb03[_0x417a88(0x2b8)],this[_0x417a88(0x227)]=_0x35eb03[_0x417a88(0x249)]||_0x417a88(0x29f),this[_0x417a88(0x1a6)]=_0x35eb03['sidebarTab'],this['_gameProp']=_0x35eb03[_0x417a88(0x136)],this[_0x417a88(0x28e)]=_0x35eb03['defaultFolderPath'],this['_fnListSort']=_0x35eb03[_0x417a88(0x188)],this[_0x417a88(0x20f)]=_0x35eb03['listInitialSortBy'],this[_0x417a88(0x1e1)]=_0x35eb03['pageFilter'],this[_0x417a88(0x2b4)]=_0x35eb03[_0x417a88(0x21b)],this['_isFolderOnly']=!!_0x35eb03['isFolderOnly'],this[_0x417a88(0x1d5)]=_0x35eb03['isNonCacheableInstance'],this[_0x417a88(0x240)]=_0x35eb03[_0x417a88(0x146)],this[_0x417a88(0x1e3)]=!!_0x35eb03[_0x417a88(0x183)],this[_0x417a88(0x230)]=!!_0x35eb03['isNotDroppable'],this[_0x417a88(0x2aa)]=_0x35eb03[_0x417a88(0x164)]||'Import',this[_0x417a88(0x1c7)]=!!_0x35eb03[_0x417a88(0x25f)],this[_0x417a88(0x1dc)]=_0x35eb03['fnLoadSideData'],this[_0x417a88(0x189)]=_0x35eb03[_0x417a88(0x1b6)],this[_0x417a88(0x265)]=_0x38f6ab?.[_0x417a88(0x1f5)],this['_table']=_0x38f6ab?.[_0x417a88(0x28b)],this[_0x417a88(0x21c)]=!!_0x38f6ab?.[_0x417a88(0x1f5)]&&_0x35eb03[_0x417a88(0x26c)],this[_0x417a88(0x1b3)]=null,this['_packCache']=null,this[_0x417a88(0x16b)]=null,this['_isClosable']=!![],this[_0x417a88(0x291)]=![],this['_isInit']=![],this['_content']=null,this[_0x417a88(0x176)]=null,this[_0x417a88(0x2b7)]=null,this[_0x417a88(0x1b2)]=null,this[_0x417a88(0x25c)]=null,this[_0x417a88(0x191)]=null,this['_$btnToggleSummary']=null,this[_0x417a88(0x27e)]=null,this[_0x417a88(0x16a)]=null,this['_$cbAll']=null,this[_0x417a88(0x2cc)]=null,this[_0x417a88(0x2a2)]=null,this['_$btnRun']=null,this[_0x417a88(0x21f)]={},this[_0x417a88(0x1a9)]=null,this[_0x417a88(0x25e)]=null,this['_$wrpMiniPills']=null,this['_userData']=null;}get[_0x4a8bb2(0x146)](){return this['_page'];}set[_0x4a8bb2(0x13c)](_0x594ae3){const _0xac8208=_0x4a8bb2;this[_0xac8208(0x1bb)]=_0x594ae3;}get['namespace'](){return this['_namespace'];}get[_0x4a8bb2(0x23e)](){const _0x4d693e=_0x4a8bb2;return this[_0x4d693e(0x17b)];}set[_0x4a8bb2(0x19b)](_0x5cf79e){this['_pack']=_0x5cf79e;}get[_0x4a8bb2(0x1a3)](){const _0x686e7c=_0x4a8bb2;return this[_0x686e7c(0x1c3)];}get['isNonCacheableInstance'](){const _0xb15e18=_0x4a8bb2;return!!this[_0xb15e18(0x1d5)];}get['isDedupable'](){const _0x4d4295=_0x4a8bb2;return!!this[_0x4d4295(0x1c7)];}set['userData'](_0x602549){this['_userData']=_0x602549;}get[_0x4a8bb2(0x136)](){const _0x3d7658=_0x4a8bb2;return this[_0x3d7658(0x288)];}get[_0x4a8bb2(0x1f5)](){const _0x27d637=_0x4a8bb2;return this[_0x27d637(0x265)];}get[_0x4a8bb2(0x28b)](){const _0x2ea6f6=_0x4a8bb2;return this[_0x2ea6f6(0x1e9)];}get['configGroup'](){return this['_configGroup'];}get[_0x4a8bb2(0x2ca)](){const _0x2f816d=_0x4a8bb2;if(this['_isClosable'])return!![];else return!this[_0x2f816d(0x291)];}get[_0x4a8bb2(0x25d)](){const _0x2c8e2b=_0x4a8bb2;return this[_0x2c8e2b(0x17b)][_0x2c8e2b(0x1d3)]((_0x404aa0,_0x437d7f)=>({'prop':_0x404aa0,'propBrewAdditionalData':this[_0x2c8e2b(0x1b0)]?.[_0x437d7f]}));}async['pSetContent'](_0x4f098a){this['_content']=_0x4f098a;}async[_0x4a8bb2(0x1bf)](_0x4f05f0){const _0x837121=_0x4a8bb2;this['_actor']=_0x4f05f0[_0x837121(0x265)],this[_0x837121(0x1e9)]=_0x4f05f0[_0x837121(0x1e9)],this[_0x837121(0x1b3)]=_0x4f05f0['_pack'],await this[_0x837121(0x217)](_0x4f05f0['_folderPathSpec']);}[_0x4a8bb2(0x296)](..._0x140f14){const _0x196784=_0x4a8bb2;if(this[_0x196784(0x1d5)]){if(this[_0x196784(0x1e1)]&&this['_pageFilter'][_0x196784(0x25b)])this['_pageFilter'][_0x196784(0x25b)][_0x196784(0x180)]();return super[_0x196784(0x296)](..._0x140f14);}if(!this['_isClosable']){this[_0x196784(0x291)]=!![],this[_0x196784(0x1f8)][_0x196784(0x2a1)]();return;}if(this[_0x196784(0x1e1)]&&this[_0x196784(0x1e1)]['filterBox'])this[_0x196784(0x1e1)][_0x196784(0x25b)][_0x196784(0x180)]();return super[_0x196784(0x296)](..._0x140f14);}async[_0x4a8bb2(0x251)](){}[_0x4a8bb2(0x2b0)](..._0x1faf89){const _0x19813b=_0x4a8bb2;if(this[_0x19813b(0x291)]){this[_0x19813b(0x1f8)][_0x19813b(0x199)](),this[_0x19813b(0x291)]=![],this[_0x19813b(0x1f3)]();return;}return super[_0x19813b(0x2b0)](..._0x1faf89);}async[_0x4a8bb2(0x27a)](_0x571260,_0x287c8c){const _0x3d312f=_0x4a8bb2;this[_0x3d312f(0x291)]&&(this['element'][_0x3d312f(0x199)](),this[_0x3d312f(0x291)]=![]),await UtilApplications['pForceRenderApp'](this,_0x571260,_0x287c8c);}['activateSidebarTab']({sidebarTab:sidebarTab=null}={}){const _0x384fa2=_0x4a8bb2;sidebarTab=sidebarTab||this[_0x384fa2(0x1a6)];if(this[_0x384fa2(0x1e9)])ui[_0x384fa2(0x2a0)][_0x384fa2(0x23c)](_0x384fa2(0x269));if(this[_0x384fa2(0x1b3)])ui['sidebar'][_0x384fa2(0x23c)](_0x384fa2(0x1fd));else{if(!this[_0x384fa2(0x265)]&&!this['_table']&&sidebarTab)ui[_0x384fa2(0x2a0)][_0x384fa2(0x23c)](sidebarTab);}}async[_0x4a8bb2(0x2c4)](){const _0x3ffd5c=_0x4a8bb2;if(this['_isInit'])return;this[_0x3ffd5c(0x1ab)]=!![],await this[_0x3ffd5c(0x27d)]();}['_getFullFolderPathSpecKey'](){const _0x5848a9=_0x4a8bb2;return ImportList[_0x5848a9(0x263)]+'.'+this[_0x5848a9(0x20c)];}get['_folderPathSpecKeyConstructorName'](){const _0xf875d1=_0x4a8bb2;return this[_0xf875d1(0x211)][_0xf875d1(0x1a1)];}[_0x4a8bb2(0x2ba)](){const _0x49c7f4=_0x4a8bb2;return{'isRadio':this[_0x49c7f4(0x21c)],'isPreviewable':this[_0x49c7f4(0x1e3)],'isNotDroppable':this[_0x49c7f4(0x230)],'titleButtonRun':this[_0x49c7f4(0x2aa)],'titleSearch':this[_0x49c7f4(0x227)],'cols':[{'name':'Name','width':0x9,'field':_0x49c7f4(0x1a1)},{'name':_0x49c7f4(0x22d),'width':0x2,'field':_0x49c7f4(0x243),'titleProp':_0x49c7f4(0x1ae),'displayProp':_0x49c7f4(0x2b3),'classNameProp':_0x49c7f4(0x285),'styleProp':_0x49c7f4(0x153),'rowClassName':_0x49c7f4(0x1cf)}],'rows':this[_0x49c7f4(0x1f6)][_0x49c7f4(0x1d3)]((_0xd7f7bf,_0x2c2d86)=>{const _0x5307f7=_0x49c7f4;if(this[_0x5307f7(0x1e1)])this[_0x5307f7(0x1e1)]['constructor'][_0x5307f7(0x165)](_0xd7f7bf);return{'name':_0xd7f7bf['name'],'source':_0xd7f7bf[_0x5307f7(0x243)],'sourceShort':Parser[_0x5307f7(0x200)](_0xd7f7bf[_0x5307f7(0x243)]),'sourceLong':Parser[_0x5307f7(0x1ec)](_0xd7f7bf[_0x5307f7(0x243)]),'sourceClassName':Parser[_0x5307f7(0x26e)](_0xd7f7bf['source']),'sourceStyle':BrewUtil2[_0x5307f7(0x173)](_0xd7f7bf[_0x5307f7(0x243)]),'ix':_0x2c2d86};})};}['_activateListeners_doFindUiElements'](_0x427bd8){const _0x24c662=_0x4a8bb2,_0x12911a=_0x427bd8[0x0],_0x30119b=$(_0x12911a[_0x24c662(0x24c)][0x0]);this[_0x24c662(0x1b2)]=_0x30119b[_0x24c662(0x275)](_0x24c662(0x241)),this[_0x24c662(0x25c)]=_0x30119b[_0x24c662(0x275)](_0x24c662(0x260)),this[_0x24c662(0x191)]=_0x30119b['find'](_0x24c662(0x193)),this['_$btnToggleSummary']=_0x30119b[_0x24c662(0x275)](_0x24c662(0x286)),this['_$iptSearch']=_0x30119b[_0x24c662(0x275)](_0x24c662(0x2a3)),this[_0x24c662(0x16a)]=_0x30119b[_0x24c662(0x275)](_0x24c662(0x18d)),this[_0x24c662(0x268)]=$(_0x12911a[_0x24c662(0x24c)][0x1]);const _0x20ac5a=$(_0x12911a[_0x24c662(0x24c)][0x2]);this['_$cbAll']=_0x20ac5a[_0x24c662(0x275)](_0x24c662(0x1d1)),this[_0x24c662(0x2cc)]=_0x20ac5a[_0x24c662(0x275)](_0x24c662(0x2a5)),this[_0x24c662(0x1a9)]=_0x20ac5a,this['_$wrpList']=$(_0x12911a['children'][0x3]),this[_0x24c662(0x2a2)]=$(_0x12911a[_0x24c662(0x24c)][0x4]),this[_0x24c662(0x17a)]=this['_$wrpRun']['find']('[name=\x22btn-run\x22]'),this['_$wrpRun']['find'](_0x24c662(0x277))[_0x24c662(0x248)]((_0x285f42,_0x4ce2b1)=>{const _0x10437a=_0x24c662;if(_0x4ce2b1[_0x10437a(0x1a1)]==='btn-run')return;this['_$btnsRunAdditional'][_0x4ce2b1[_0x10437a(0x1a1)]]=$(_0x4ce2b1);});}[_0x4a8bb2(0x225)](_0x28b7cc){const _0x157380=_0x4a8bb2;super[_0x157380(0x225)](_0x28b7cc),this[_0x157380(0x2cd)](_0x28b7cc),this[_0x157380(0x1bd)](),this['_activateListeners_initRunButtonsAdditional'](),this[_0x157380(0x1c9)](),this[_0x157380(0x25c)][_0x157380(0x23d)](()=>{const _0x44a473=_0x157380;this[_0x44a473(0x27e)]['val']('');if(this['_list'])this[_0x44a473(0x176)][_0x44a473(0x135)]();}),this[_0x157380(0x299)]();let _0x5deb50;this[_0x157380(0x1e1)]?_0x5deb50=this[_0x157380(0x168)]()[_0x157380(0x2d3)](()=>this['_activateListeners_initPreviewsAndQuicksImportsAndDroppables']()):this[_0x157380(0x22a)]();this[_0x157380(0x176)]['on'](_0x157380(0x1ce),()=>this['_$dispNumVisible'][_0x157380(0x218)](this[_0x157380(0x176)][_0x157380(0x1d4)]['length']+'/'+this[_0x157380(0x176)]['items'][_0x157380(0x278)])),ListUiUtil['bindSelectAllCheckbox'](this[_0x157380(0x186)],this[_0x157380(0x176)]),ListUiUtil['bindPreviewAllButton'](this[_0x157380(0x2cc)],this[_0x157380(0x176)]);if(this[_0x157380(0x25c)])this[_0x157380(0x25c)][_0x157380(0x23d)]();if(_0x5deb50)_0x5deb50[_0x157380(0x2d3)](()=>this['_pPostRenderOrShow']());else this['_pPostRenderOrShow']();}['_activateListeners_initFeelingLuckyButton'](){const _0x4f8d22=_0x4a8bb2;this[_0x4f8d22(0x191)][_0x4f8d22(0x23d)](()=>{const _0x385178=_0x4f8d22;if(!this[_0x385178(0x176)]||!this[_0x385178(0x176)][_0x385178(0x1d4)][_0x385178(0x278)])return;ListUiUtil[_0x385178(0x27b)]({'isChecked':![],'isIncludeHidden':!![],'list':this[_0x385178(0x176)]});const _0x5f397c=RollerUtil[_0x385178(0x1db)](this[_0x385178(0x176)][_0x385178(0x1d4)]);if(!_0x5f397c)return;ListUiUtil['setCheckbox'](_0x5f397c,{'toVal':!![]}),_0x5f397c['ele'][_0x385178(0x252)]({'block':_0x385178(0x15f)});});}[_0x4a8bb2(0x281)](){const _0x2e4d65=_0x4a8bb2;if(!this[_0x2e4d65(0x1e3)]&&this[_0x2e4d65(0x230)])return;const _0x333224=this['_list']['items'],_0x1b1784=_0x333224[_0x2e4d65(0x278)];for(let _0x1779cd=0x0;_0x1779cd<_0x1b1784;++_0x1779cd){const _0x1ce5a6=_0x333224[_0x1779cd];if(this['_isPreviewable']){const _0x3acbe0=_0x1ce5a6[_0x2e4d65(0x16c)][_0x2e4d65(0x1b8)]['children'][0x1],_0x220c38=_0x3acbe0[_0x2e4d65(0x24c)][0x0],_0x5ab1e8=_0x3acbe0[_0x2e4d65(0x24c)][0x1];this[_0x2e4d65(0x293)](_0x1ce5a6,_0x220c38),this[_0x2e4d65(0x26f)](_0x1ce5a6,_0x5ab1e8);}!this[_0x2e4d65(0x230)]&&this[_0x2e4d65(0x24b)](_0x1ce5a6);}}[_0x4a8bb2(0x293)](_0x900888,_0xaf3d8e){const _0x3ce3ed=_0x4a8bb2;ListUiUtil['bindPreviewButton'](this['_page'],this[_0x3ce3ed(0x1f6)],_0x900888,_0xaf3d8e);}[_0x4a8bb2(0x26f)](_0x316679,_0x28bec6){const _0x137cf7=_0x4a8bb2;_0x28bec6[_0x137cf7(0x1ca)]('click',async _0x5c801f=>{const _0x1f6174=_0x137cf7;_0x5c801f[_0x1f6174(0x192)](),_0x5c801f[_0x1f6174(0x169)]();if(this[_0x1f6174(0x21c)])this[_0x1f6174(0x296)]();const _0x3dc752=this[_0x1f6174(0x1f6)][_0x316679['ix']];try{await this['_pDoPreCachePack']();let _0x465e63;try{_0x465e63=await this['pImportEntry'](_0x3dc752);}finally{this[_0x1f6174(0x207)]();}if(!_0x465e63)return;UtilApplications[_0x1f6174(0x208)](_0x465e63);}catch(_0x4bb667){setTimeout(()=>{throw _0x4bb667;}),UtilApplications[_0x1f6174(0x208)]({'entity':_0x3dc752,'status':UtilApplications[_0x1f6174(0x2b5)]});}});}[_0x4a8bb2(0x24b)](_0x1d1402){const _0x58aace=_0x4a8bb2;_0x1d1402[_0x58aace(0x16c)][_0x58aace(0x1ca)](_0x58aace(0x1bc),_0x5ebe70=>{const _0x4fba04=_0x58aace,_0x5bc482={'type':this[_0x4fba04(0x211)][_0x4fba04(0x205)],'subType':UtilEvents['EVT_DATA_SUBTYPE__IMPORT'],'page':this['_page'],'source':_0x1d1402[_0x4fba04(0x206)][_0x4fba04(0x243)],'hash':_0x1d1402[_0x4fba04(0x206)][_0x4fba04(0x28a)],'name':_0x1d1402['name'],'tag':this[_0x4fba04(0x130)](_0x1d1402)};_0x5ebe70[_0x4fba04(0x144)][_0x4fba04(0x1c0)](_0x4fba04(0x15b),JSON[_0x4fba04(0x1e4)](_0x5bc482));});}[_0x4a8bb2(0x1bd)](){const _0x37465c=_0x4a8bb2;this[_0x37465c(0x17a)][_0x37465c(0x23d)](()=>this['_pHandleClickRunButton']());}[_0x4a8bb2(0x1e6)](){}['_activateListeners_initSearchKeyHandlers'](){const _0x39a15a=_0x4a8bb2;if(!this[_0x39a15a(0x27e)])return;this['_activateListeners_initSearchKeyHandlers_enter']();}['_activateListeners_initSearchKeyHandlers_enter'](){const _0x1a3e33=_0x4a8bb2;this[_0x1a3e33(0x27e)][_0x1a3e33(0x284)](async _0x77c92a=>{const _0x1d1cda=_0x1a3e33;if(_0x77c92a[_0x1d1cda(0x152)]!==_0x1d1cda(0x161))return;if(!this[_0x1d1cda(0x176)])return;_0x77c92a['stopPropagation'](),_0x77c92a['preventDefault']();const _0x5f46bb=this[_0x1d1cda(0x176)]['visibleItems'][0x0];if(!_0x5f46bb)return;await this[_0x1d1cda(0x1c5)]({'listItems':[_0x5f46bb],'isBackground':!![]});});}[_0x4a8bb2(0x23b)](){const _0x23bec3=_0x4a8bb2;if(this[_0x23bec3(0x21f)][_0x23bec3(0x18f)])this[_0x23bec3(0x21f)][_0x23bec3(0x18f)]['click'](()=>this[_0x23bec3(0x1d2)]({'optsPostProcessing':{'isUseMods':!![]}}));}async['_pFnPostProcessEntries'](_0x5d739d){return _0x5d739d;}async['_pHandleClickRunButton']({gameProp:gameProp=null,sidebarTab:sidebarTab=null,optsPostProcessing:optsPostProcessing={},optsImportEntry:optsImportEntry={}}={}){const _0x292061=_0x4a8bb2;if(!this['_list'])return;const _0x209f83=this['_list'][_0x292061(0x238)][_0x292061(0x26b)](_0x3b0495=>_0x3b0495[_0x292061(0x156)][_0x292061(0x14e)]['checked']);if(!_0x209f83[_0x292061(0x278)])return ui[_0x292061(0x1ac)][_0x292061(0x283)]('Please\x20select\x20something\x20to\x20import!');if(!this[_0x292061(0x1b3)]&&_0x209f83['length']>0x64&&!Config[_0x292061(0x187)]('ui',_0x292061(0x1d8))){const _0x5c8fd3=await InputUiUtil['pGetUserBoolean']({'title':_0x292061(0x2bb),'htmlDescription':_0x292061(0x215)+_0x209f83['length']+'\x20'+(_0x209f83[_0x292061(0x278)]===0x1?'entity':_0x292061(0x139))+'\x20to\x20import.<br>Importing\x20a\x20large\x20number\x20of\x20entities\x20may\x20degrade\x20game\x20performance\x20(consider\x20importing\x20to\x20a\x20compendium\x20instead).<br>Do\x20you\x20wish\x20to\x20continue?','textYesRemember':_0x292061(0x2ae),'textYes':'Continue','textNo':_0x292061(0x1f9),'fnRemember':_0x59f02f=>Config[_0x292061(0x1f2)]('ui',_0x292061(0x1d8),_0x59f02f)});if(_0x5c8fd3==null||_0x5c8fd3===![])return;}if(this['_pack']&&!Config[_0x292061(0x187)]('ui',_0x292061(0x1d8))&&this[_0x292061(0x1b3)][_0x292061(0x177)][_0x292061(0x2cf)]+_0x209f83[_0x292061(0x278)]>0x1f4){const _0x363f89=await InputUiUtil[_0x292061(0x14b)]({'title':_0x292061(0x2d1),'htmlDescription':_0x292061(0x215)+_0x209f83[_0x292061(0x278)]+'\x20'+(_0x209f83[_0x292061(0x278)]===0x1?_0x292061(0x1f7):_0x292061(0x139))+_0x292061(0x295)+(this[_0x292061(0x1b3)][_0x292061(0x177)][_0x292061(0x2cf)]?_0x292061(0x1e0)+this['_pack'][_0x292061(0x177)]['size']+_0x292061(0x1e7)+(this[_0x292061(0x1b3)]['index'][_0x292061(0x2cf)]!==0x1?'s':''):'')+_0x292061(0x178),'textYesRemember':_0x292061(0x2ae),'textYes':_0x292061(0x22f),'textNo':_0x292061(0x1f9),'fnRemember':_0x4e993d=>Config[_0x292061(0x1f2)]('ui',_0x292061(0x1d8),_0x4e993d)});if(_0x363f89==null||_0x363f89===![])return;}this['close'](),await this[_0x292061(0x1c5)]({'listItems':_0x209f83,'optsPostProcessing':optsPostProcessing,'optsImportEntry':optsImportEntry,'gameProp':gameProp,'sidebarTab':sidebarTab}),this[_0x292061(0x186)]['prop'](_0x292061(0x229),![]),this[_0x292061(0x176)]['items']['forEach'](_0x12d9cf=>{const _0x200659=_0x292061;_0x12d9cf['data']['cbSel'][_0x200659(0x229)]=![],_0x12d9cf['ele']['classList'][_0x200659(0x2c8)](_0x200659(0x221));});}async[_0x4a8bb2(0x1c5)]({listItems:_0x16e49c,optsPostProcessing:_0x1ad225,optsImportEntry:_0x373c81,gameProp:_0x2fa0f3,sidebarTab:_0x361f07,isBackground:isBackground=![]}){const _0x103646=_0x4a8bb2;_0x2fa0f3=_0x2fa0f3||this['_gameProp'],_0x361f07=_0x361f07||this[_0x103646(0x1a6)];let _0x1fd826=_0x16e49c[_0x103646(0x1d3)](_0x2c7f62=>this[_0x103646(0x1f6)][_0x2c7f62['ix']]);_0x1fd826=await this[_0x103646(0x24a)](_0x1fd826,_0x1ad225);if(_0x1fd826==null)return;this['activateSidebarTab']({'sidebarTab':_0x361f07}),await this[_0x103646(0x2cb)]({'gameProp':_0x2fa0f3}),await(isBackground?this[_0x103646(0x20e)]({'entries':_0x1fd826,'optsImportEntry':_0x373c81}):this['_pImportListItems_foreground']({'entries':_0x1fd826,'optsImportEntry':_0x373c81}));if(!this[_0x103646(0x265)]&&!this[_0x103646(0x1e9)]&&!this['_pack'])game[_0x2fa0f3]['render']();this[_0x103646(0x207)]();}async[_0x4a8bb2(0x20e)]({entries:_0x4f6bfc,optsImportEntry:_0x227aa3}){const _0x3644eb=_0x4a8bb2;for(const _0x51c855 of _0x4f6bfc){try{const _0x20be25=await this['pImportEntry'](_0x51c855,_0x227aa3);UtilApplications['doShowImportedNotification'](_0x20be25);}catch(_0x1a782d){UtilApplications[_0x3644eb(0x208)]({'entity':_0x51c855,'status':UtilApplications[_0x3644eb(0x2b5)]}),console[_0x3644eb(0x179)](_0x1a782d);}}}async[_0x4a8bb2(0x1eb)]({entries:_0x431fec,optsImportEntry:_0x125420}){const _0x5939ea=_0x4a8bb2,_0x106962=_0x431fec[_0x5939ea(0x1d3)](_0x48de9f=>{const _0x1ca2f8=_0x5939ea;return new Util['Task']((_0x48de9f[_0x1ca2f8(0x147)]||_0x48de9f[_0x1ca2f8(0x1a1)])+'\x20('+Parser[_0x1ca2f8(0x200)](SourceUtil[_0x1ca2f8(0x12c)](_0x48de9f))+')',()=>this['pImportEntry'](_0x48de9f,_0x125420));});await UtilApplications[_0x5939ea(0x280)](_0x106962);}['_activateListeners_pInitFilteredList'](){const _0x6fb9f8=_0x4a8bb2;return this[_0x6fb9f8(0x176)]=new List({'$iptSearch':this[_0x6fb9f8(0x27e)],'$wrpList':this['_$wrpList'],'fnSort':this['_fnListSort'],'sortByInitial':this[_0x6fb9f8(0x20f)]}),SortUtil[_0x6fb9f8(0x1ba)](this['_$wrpBtnsSort'],this[_0x6fb9f8(0x176)]),this['_pageFilter'][_0x6fb9f8(0x2a9)]({'$iptSearch':this[_0x6fb9f8(0x27e)],'$btnReset':this[_0x6fb9f8(0x25c)],'$btnOpen':this[_0x6fb9f8(0x1b2)],'$btnToggleSummaryHidden':this[_0x6fb9f8(0x138)],'$wrpMiniPills':this[_0x6fb9f8(0x268)],'namespace':this[_0x6fb9f8(0x289)]()})[_0x6fb9f8(0x2d3)](async()=>{const _0x3c0420=_0x6fb9f8;this[_0x3c0420(0x1f6)][_0x3c0420(0x264)](_0x5c95f2=>this[_0x3c0420(0x1e1)][_0x3c0420(0x29a)](_0x5c95f2)),this[_0x3c0420(0x219)](),this[_0x3c0420(0x176)][_0x3c0420(0x2a6)](),this[_0x3c0420(0x1e1)][_0x3c0420(0x15a)](),this['_pageFilter'][_0x3c0420(0x25b)]['render'](),await this[_0x3c0420(0x1c2)](),this['_pageFilter']['filterBox']['on'](FilterBox[_0x3c0420(0x1aa)],this[_0x3c0420(0x27f)]['bind'](this)),this['_handleFilterChange']();});}async[_0x4a8bb2(0x1c2)](){}['_pPostRenderOrShow'](){const _0x276459=_0x4a8bb2;if(this[_0x276459(0x27e)])this['_$iptSearch'][_0x276459(0x2d0)]();}[_0x4a8bb2(0x22a)](){const _0x5e74c1=_0x4a8bb2;this['_list']=new List({'$iptSearch':this[_0x5e74c1(0x27e)],'$wrpList':this['_$wrpList'],'fnSort':this[_0x5e74c1(0x17e)]}),SortUtil['initBtnSortHandlers'](this['_$wrpBtnsSort'],this[_0x5e74c1(0x176)]),this[_0x5e74c1(0x219)](),this[_0x5e74c1(0x176)][_0x5e74c1(0x2a6)]();}[_0x4a8bb2(0x219)](){const _0x19832b=_0x4a8bb2;this[_0x19832b(0x176)]['doAbsorbItems'](this[_0x19832b(0x1f6)],{'fnGetName':_0x539941=>_0x539941[_0x19832b(0x1a1)],'fnGetValues':_0x254b6e=>({'source':_0x254b6e[_0x19832b(0x243)],'hash':UrlUtil['URL_TO_HASH_BUILDER'][this['_page']](_0x254b6e)}),'fnGetData':UtilList2[_0x19832b(0x256)],'fnBindListeners':_0x2f5768=>this[_0x19832b(0x21c)]?UtilList2[_0x19832b(0x253)](this[_0x19832b(0x176)],_0x2f5768):UtilList2[_0x19832b(0x2c5)](this[_0x19832b(0x176)],_0x2f5768)});}[_0x4a8bb2(0x27f)](){const _0x1063c7=_0x4a8bb2,_0x240371=this[_0x1063c7(0x1e1)][_0x1063c7(0x25b)][_0x1063c7(0x16d)]();this[_0x1063c7(0x176)][_0x1063c7(0x26b)](_0x4985b7=>this[_0x1063c7(0x1e1)][_0x1063c7(0x196)](_0x240371,this[_0x1063c7(0x1f6)][_0x4985b7['ix']]));}async[_0x4a8bb2(0x167)](..._0x23b2d6){const _0x3bc32b=_0x4a8bb2,_0x100058=await this[_0x3bc32b(0x171)](..._0x23b2d6);return UtilHooks[_0x3bc32b(0x18a)](UtilHooks['HK_IMPORT_COMPLETE'],_0x100058),_0x100058;}async['_pImportEntry'](){throw new Error('Unimplemented!');}async[_0x4a8bb2(0x150)]({isApplyWorldDataSourceFilter:isApplyWorldDataSourceFilter=!![]}={}){const _0x353b2c=_0x4a8bb2;return(await this[_0x353b2c(0x13e)]())[_0x353b2c(0x26b)](_0x4a9f51=>!isApplyWorldDataSourceFilter||!UtilWorldDataSourceSelector[_0x353b2c(0x2c7)](_0x4a9f51));}async['_pGetSources'](){const _0x272c5a=_0x4a8bb2;throw new Error(_0x272c5a(0x2c1));}async[_0x4a8bb2(0x212)]({sources:_0x1e541e,uploadedFiles:_0x2c139b,customUrls:_0x3acbb4,isBackground:isBackground=![]}){const _0x34ba29=_0x4a8bb2,_0x4d59f2=await this[_0x34ba29(0x2b6)](_0x1e541e),_0x42eeac=[];return UtilDataSource[_0x34ba29(0x212)]({'sources':_0x1e541e,'uploadedFiles':_0x2c139b,'customUrls':_0x3acbb4,'isBackground':isBackground,'props':this[_0x34ba29(0x17b)],'userData':_0x4d59f2,'cacheKeys':_0x42eeac,'page':this[_0x34ba29(0x240)],'isDedupable':this['_isDedupable'],'fnGetDedupedData':this[_0x34ba29(0x254)]?this[_0x34ba29(0x254)]['bind'](this):null,'fnGetBlacklistFilteredData':this[_0x34ba29(0x297)]?this['_getBlacklistFilteredData']['bind'](this):null});}async[_0x4a8bb2(0x1e5)](_0x274dcb){const _0x51e5fd=_0x4a8bb2;if(_0x274dcb[_0x51e5fd(0x14a)])return _0x274dcb;const _0x1f4678=DataUtil[_0x51e5fd(0x19d)][_0x51e5fd(0x1c1)](_0x274dcb[_0x51e5fd(0x21d)],_0x274dcb);if(!_0x1f4678[_0x51e5fd(0x278)])return _0x274dcb;const _0x304e98=await InputUiUtil['pGetUserEnum']({'values':_0x1f4678,'placeholder':'Select\x20Version...','title':_0x51e5fd(0x16f),'fnDisplay':_0x34a699=>{const _0xc7f9ad=_0x51e5fd;if(_0x34a699==null)return _0xc7f9ad(0x19f);return''+_0x34a699[_0xc7f9ad(0x1a1)]+(_0x274dcb[_0xc7f9ad(0x243)]!==_0x34a699['source']?'\x20('+Parser[_0xc7f9ad(0x200)](_0x34a699[_0xc7f9ad(0x243)])+')':'');},'isAllowNull':!![]});if(_0x304e98==null){const _0x3fc81f=MiscUtil[_0x51e5fd(0x261)](_0x274dcb);return _0x3fc81f[_0x51e5fd(0x14a)]=!![],_0x3fc81f;}return _0x1f4678[_0x304e98];}async[_0x4a8bb2(0x184)](_0x410ac5={}){const _0x44aff1=_0x4a8bb2;return[...(await Vetools[_0x44aff1(0x298)](...this[_0x44aff1(0x266)]))[_0x44aff1(0x1d3)](({name:_0x5988d6,url:_0x21fb6d,abbreviations:_0x5b46fa})=>new UtilDataSource[(_0x44aff1(0x2d2))](_0x5988d6,_0x21fb6d,{..._0x410ac5,'filterTypes':[UtilDataSource[_0x44aff1(0x134)],UtilDataSource[_0x44aff1(0x198)]],'abbreviations':_0x5b46fa})),...(await Vetools[_0x44aff1(0x2ce)](...this[_0x44aff1(0x266)]))['map'](({name:_0x318a85,url:_0x430720,abbreviations:_0x2fbafe})=>new UtilDataSource['DataSourceUrl'](_0x318a85,_0x430720,{..._0x410ac5,'filterTypes':[UtilDataSource[_0x44aff1(0x134)]],'abbreviations':_0x2fbafe}))];}[_0x4a8bb2(0x23f)](){const _0x546667=_0x4a8bb2;return{'alpha':{'label':_0x546667(0x145),'getter':_0x2d1019=>_0x2d1019[_0x546667(0x1a1)]['slice'](0x0,0x1)[_0x546667(0x166)]()},'source':{'label':'Source\x20(Full)','getter':_0x3ff11a=>Parser['sourceJsonToFull'](_0x3ff11a['source'])},'sourceAbbreviation':{'label':_0x546667(0x29c),'getter':_0xd2173=>Parser['sourceJsonToAbv'](_0xd2173[_0x546667(0x243)])}};}async[_0x4a8bb2(0x1b9)](_0x25b900,_0x562d77){const _0x4aa8a9=_0x4a8bb2;return _0x562d77=_0x562d77||{},this[_0x4aa8a9(0x2bd)]({'folderType':this[_0x4aa8a9(0x211)]['FOLDER_TYPE'],'obj':_0x25b900,'sorting':_0x562d77[_0x4aa8a9(0x149)]});}async[_0x4a8bb2(0x18b)](){const _0x303271=_0x4a8bb2;if(!Util[_0x303271(0x1d6)][_0x303271(0x159)]())return null;return UtilFolders['pCreateFoldersGetId']({'folderType':this[_0x303271(0x211)]['FOLDER_TYPE'],'folderNames':[Config[_0x303271(0x187)](_0x303271(0x244),_0x303271(0x1da))]});}['getContent'](_0x5014cf){const _0x3e3c34=_0x4a8bb2;return Vetools[_0x3e3c34(0x174)](_0x5014cf,this[_0x3e3c34(0x17b)]);}[_0x4a8bb2(0x289)](){const _0x437c28=_0x4a8bb2;return'importer_'+(this[_0x437c28(0x265)]?'actor':_0x437c28(0x154))+'_'+(this['_namespace']||this['_props'][_0x437c28(0x151)]('_'));}[_0x4a8bb2(0x142)](_0x46aa10){const _0x54df08=_0x4a8bb2;_0x46aa10=_0x46aa10||{};const _0x216a14=this[_0x54df08(0x2af)](_0x46aa10),_0x2aafd3=Config[_0x54df08(0x187)](_0x54df08(0x244),_0x54df08(0x13a));return{'mode':_0x2aafd3,'existing':_0x216a14,'isSkip':_0x2aafd3===ConfigConsts[_0x54df08(0x1ff)]&&_0x216a14!=null,'isOverwrite':_0x2aafd3===ConfigConsts['C_IMPORT_DEDUPE_MODE_OVERWRITE']&&_0x216a14!=null};}[_0x4a8bb2(0x2af)](_0x1e93ff){const _0x2d84e6=_0x4a8bb2;if(_0x1e93ff?.[_0x2d84e6(0x13f)]?.[_0x2d84e6(0x1f0)]||_0x1e93ff?.[_0x2d84e6(0x13f)]?.[_0x2d84e6(0x1d0)])return null;const _0x43f4ee=_0x1e93ff['gameProp']||this[_0x2d84e6(0x288)],_0x28f1ce=_0x43f4ee===this[_0x2d84e6(0x288)]?this[_0x2d84e6(0x1b3)]:null;let _0x18b44a=null;switch(_0x43f4ee){case _0x2d84e6(0x15e):case _0x2d84e6(0x238):{if(!(_0x1e93ff[_0x2d84e6(0x1a1)]!=null&&_0x1e93ff[_0x2d84e6(0x243)]!=null||_0x1e93ff['entity']))throw new Error('Either\x20\x22name\x22\x20and\x20\x22source\x22,\x20or\x20\x22entity\x22,\x20must\x20be\x20provided!');const _0x248feb=(_0x1e93ff['name']??UtilDataConverter[_0x2d84e6(0x1df)](_0x1e93ff[_0x2d84e6(0x1f7)]))[_0x2d84e6(0x245)]()['trim'](),_0x40c869=(_0x1e93ff[_0x2d84e6(0x243)]??UtilDataConverter[_0x2d84e6(0x1fe)](_0x1e93ff['entity']))[_0x2d84e6(0x245)]()[_0x2d84e6(0x213)]();switch(_0x43f4ee){case _0x2d84e6(0x15e):{if(_0x28f1ce){const _0x3742cd=this[_0x2d84e6(0x1de)]({'name':_0x248feb,'source':_0x40c869});_0x18b44a=(this[_0x2d84e6(0x1e2)]||{})[_0x3742cd];}else _0x18b44a=game[_0x43f4ee][_0x2d84e6(0x275)](_0x195bcd=>this[_0x2d84e6(0x211)][_0x2d84e6(0x226)](_0x195bcd)===_0x248feb&&(!Config[_0x2d84e6(0x187)](_0x2d84e6(0x244),_0x2d84e6(0x236))||(MiscUtil[_0x2d84e6(0x187)](_0x195bcd,'data',_0x2d84e6(0x156),_0x2d84e6(0x2a4),_0x2d84e6(0x243))||'')[_0x2d84e6(0x245)]()[_0x2d84e6(0x213)]()===_0x40c869));break;}case _0x2d84e6(0x238):{if(_0x28f1ce){const _0x438dff=this[_0x2d84e6(0x1de)]({'name':_0x248feb,'source':_0x40c869});_0x18b44a=(this[_0x2d84e6(0x1e2)]||{})[_0x438dff];}else _0x18b44a=game[_0x43f4ee][_0x2d84e6(0x275)](_0x150cfb=>this['constructor'][_0x2d84e6(0x226)](_0x150cfb)===_0x248feb&&(!Config[_0x2d84e6(0x187)]('import',_0x2d84e6(0x236))||(MiscUtil[_0x2d84e6(0x187)](_0x150cfb,_0x2d84e6(0x156),_0x2d84e6(0x156),_0x2d84e6(0x243))||'')[_0x2d84e6(0x245)]()[_0x2d84e6(0x213)]()===_0x40c869));break;}}break;}case _0x2d84e6(0x24f):case _0x2d84e6(0x269):case _0x2d84e6(0x157):{const _0x3a7799=_0x1e93ff[_0x2d84e6(0x1a1)][_0x2d84e6(0x245)]()[_0x2d84e6(0x213)]();_0x28f1ce?_0x18b44a=(this[_0x2d84e6(0x16b)]||[])[_0x2d84e6(0x275)](_0x46920=>this['constructor'][_0x2d84e6(0x226)](_0x46920)===_0x3a7799&&this[_0x2d84e6(0x211)]['_getDuplicateMeta_isFlagMatch'](_0x1e93ff['flags'],_0x46920)):_0x18b44a=game[_0x43f4ee][_0x2d84e6(0x275)](_0x1bb0aa=>this[_0x2d84e6(0x211)][_0x2d84e6(0x226)](_0x1bb0aa)===_0x3a7799&&this[_0x2d84e6(0x211)]['_getDuplicateMeta_isFlagMatch'](_0x1e93ff[_0x2d84e6(0x2bc)],_0x1bb0aa));break;}default:throw new Error(_0x2d84e6(0x158)+_0x43f4ee+_0x2d84e6(0x287));}return _0x18b44a;}static[_0x4a8bb2(0x226)](_0x96b35e){const _0x113bea=_0x4a8bb2;let _0x24062b=(MiscUtil['get'](_0x96b35e,'data',_0x113bea(0x1a1))||'')[_0x113bea(0x245)]()['trim']();return _0x24062b=_0x24062b[_0x113bea(0x29d)](/\[[^\]]+]/g,'')['trim'](),_0x24062b;}static[_0x4a8bb2(0x233)](_0x20b416,_0x5b672a){const _0x68985a=_0x4a8bb2;if(!_0x20b416)return!![];if(!_0x5b672a)return![];if(!_0x5b672a['data'][_0x68985a(0x2bc)])return![];for(const [_0xf47654,_0x26e316]of Object[_0x68985a(0x29f)](_0x20b416)){if(_0x5b672a[_0x68985a(0x156)][_0x68985a(0x2bc)][_0xf47654]==null)return![];for(const [_0x454b7b,_0x398147]of Object['entries'](_0x26e316)){if(!CollectionUtil['deepEquals'](_0x398147,_0x5b672a[_0x68985a(0x156)][_0x68985a(0x2bc)][_0xf47654]?.[_0x454b7b]))return![];}}return!![];}['_getDuplicateMeta_getEntityKey'](_0x4ed31e){const _0x2d6f0b=_0x4a8bb2;return Object['entries'](_0x4ed31e)[_0x2d6f0b(0x15d)](([_0x652870],[_0xfa7443])=>SortUtil[_0x2d6f0b(0x1cb)](_0x652870,_0xfa7443))[_0x2d6f0b(0x1d3)](([_0x2ab890,_0x237953])=>(_0x2ab890+'='+(''+_0x237953)[_0x2d6f0b(0x213)]())[_0x2d6f0b(0x245)]())['join']('::');}async[_0x4a8bb2(0x2cb)]({gameProp:gameProp=null}={}){const _0x5910a4=_0x4a8bb2;gameProp=gameProp||this[_0x5910a4(0x288)];if(!this[_0x5910a4(0x1b3)]||Config[_0x5910a4(0x187)](_0x5910a4(0x244),'deduplicationMode')===ConfigConsts[_0x5910a4(0x14c)])return;this[_0x5910a4(0x1e2)]={},this['_packCacheFlat']=[];const _0x24fc05=await UtilCompendium[_0x5910a4(0x1fb)](this[_0x5910a4(0x1b3)],!![]);_0x24fc05['forEach'](_0x3fb3df=>{const _0x531c04=_0x5910a4;switch(gameProp){case _0x531c04(0x15e):{const _0x503a9e=(MiscUtil[_0x531c04(0x187)](_0x3fb3df,_0x531c04(0x156),_0x531c04(0x1a1))||'')['toLowerCase']()[_0x531c04(0x213)](),_0x4a2312=(MiscUtil[_0x531c04(0x187)](_0x3fb3df,_0x531c04(0x156),_0x531c04(0x156),_0x531c04(0x2a4),'source')||'')[_0x531c04(0x245)]()['trim'](),_0x45b9ed=this[_0x531c04(0x1de)]({'name':_0x503a9e,'source':_0x4a2312});this[_0x531c04(0x1e2)][_0x45b9ed]=_0x3fb3df;break;}case _0x531c04(0x238):{const _0xd60491=(MiscUtil['get'](_0x3fb3df,_0x531c04(0x156),_0x531c04(0x1a1))||'')[_0x531c04(0x245)]()['trim'](),_0x2b56ae=(MiscUtil[_0x531c04(0x187)](_0x3fb3df,_0x531c04(0x156),_0x531c04(0x156),'source')||'')['toLowerCase']()[_0x531c04(0x213)](),_0x3abb9a=this[_0x531c04(0x1de)]({'name':_0xd60491,'source':_0x2b56ae});this[_0x531c04(0x1e2)][_0x3abb9a]=_0x3fb3df;break;}case _0x531c04(0x24f):case _0x531c04(0x269):case _0x531c04(0x157):{const _0x2fccdc=(MiscUtil[_0x531c04(0x187)](_0x3fb3df,'data',_0x531c04(0x1a1))||'')['toLowerCase']()[_0x531c04(0x213)](),_0x466224=this[_0x531c04(0x1de)]({'name':_0x2fccdc});this[_0x531c04(0x1e2)][_0x466224]=_0x3fb3df;break;}default:throw new Error(_0x531c04(0x158)+gameProp+'\x22\x20is\x20not\x20supported!');}this[_0x531c04(0x16b)][_0x531c04(0x23a)](_0x3fb3df);});}[_0x4a8bb2(0x207)](){const _0x4ec62a=_0x4a8bb2;this[_0x4ec62a(0x1e2)]=null,this['_packCacheFlat']=null;}async['_pImportEntry_pDoUpdateExistingPackEntity'](_0x3acfd8,_0x91c96d){const _0xa81c8a=_0x4a8bb2;if(_0x3acfd8[_0xa81c8a(0x19a)][_0xa81c8a(0x1d7)]?.[_0xa81c8a(0x278)])await _0x3acfd8[_0xa81c8a(0x19a)][_0xa81c8a(0x279)](_0xa81c8a(0x267),_0x3acfd8[_0xa81c8a(0x19a)][_0xa81c8a(0x1d7)]['map'](_0x290b21=>_0x290b21['id']));if(this[_0xa81c8a(0x288)]==='tables'&&_0x3acfd8[_0xa81c8a(0x19a)][_0xa81c8a(0x13d)]?.[_0xa81c8a(0x2cf)])await _0x3acfd8[_0xa81c8a(0x19a)][_0xa81c8a(0x279)](_0xa81c8a(0x1ea),_0x3acfd8[_0xa81c8a(0x19a)][_0xa81c8a(0x13d)]['map'](_0x3b4de8=>_0x3b4de8['id']));return await UtilDocuments['pUpdateDocument'](_0x3acfd8[_0xa81c8a(0x19a)],_0x91c96d),await this[_0xa81c8a(0x2ab)]([_0x3acfd8[_0xa81c8a(0x19a)]],_0x3acfd8),new ImportSummary({'status':UtilApplications[_0xa81c8a(0x19e)],'imported':[new ImportedDocument({'isExisting':!![],'document':_0x3acfd8[_0xa81c8a(0x19a)],'pack':this[_0xa81c8a(0x1b3)]})]});}async[_0x4a8bb2(0x292)](_0x493aed,_0x4ba282){const _0x38f71d=_0x4a8bb2;if(this[_0x38f71d(0x288)]===_0x38f71d(0x269)&&_0x493aed[_0x38f71d(0x19a)]['results']?.['size'])await _0x493aed[_0x38f71d(0x19a)][_0x38f71d(0x279)](_0x38f71d(0x1ea),_0x493aed[_0x38f71d(0x19a)][_0x38f71d(0x13d)][_0x38f71d(0x1d3)](_0x249fa2=>_0x249fa2['id']));return await UtilDocuments[_0x38f71d(0x1e8)](_0x493aed['existing'],_0x4ba282),new ImportSummary({'status':UtilApplications[_0x38f71d(0x19e)],'imported':[new ImportedDocument({'isExisting':!![],'document':_0x493aed[_0x38f71d(0x19a)]})]});}async[_0x4a8bb2(0x1a7)](_0x34b273,_0x58da4a,_0x57a9b1={},{docData:docData=null,isSkipDuplicateHandling:isSkipDuplicateHandling=![]}={}){const _0xd3ab06=_0x4a8bb2;docData=docData||await this[_0xd3ab06(0x2c3)](_0x34b273,{'isAddDataFlags':!![],'filterValues':_0x58da4a[_0xd3ab06(0x17f)],..._0x57a9b1,'isAddPermission':!![],'defaultPermission':_0x58da4a[_0xd3ab06(0x2c6)]},_0x58da4a);const _0x4acfba=isSkipDuplicateHandling?null:this['_getDuplicateMeta']({'name':docData[_0xd3ab06(0x1a1)],'source':MiscUtil[_0xd3ab06(0x187)](docData,_0xd3ab06(0x156),_0xd3ab06(0x243)),'importOpts':_0x58da4a});if(_0x4acfba?.['isSkip'])return new ImportSummary({'status':UtilApplications['TASK_EXIT_SKIPPED_DUPLICATE'],'imported':[new ImportedDocument({'isExisting':!![],'document':_0x4acfba[_0xd3ab06(0x19a)]})]});let _0xd60157;switch(this[_0xd3ab06(0x288)]){case'items':_0xd60157=CONFIG[_0xd3ab06(0x1af)][_0xd3ab06(0x2bf)];break;case _0xd3ab06(0x24f):_0xd60157=CONFIG[_0xd3ab06(0x250)][_0xd3ab06(0x2bf)];break;case _0xd3ab06(0x269):_0xd60157=CONFIG[_0xd3ab06(0x1c4)][_0xd3ab06(0x2bf)];break;case _0xd3ab06(0x157):_0xd60157=CONFIG[_0xd3ab06(0x18c)][_0xd3ab06(0x2bf)];break;}if(_0x58da4a[_0xd3ab06(0x1f0)]){const _0x146455=await _0xd60157['create'](docData,{'renderSheet':!![],'temporary':!![]});return new ImportSummary({'status':UtilApplications['TASK_EXIT_COMPLETE'],'imported':[new ImportedDocument({'document':_0x146455})]});}if(this[_0xd3ab06(0x1b3)]){if(_0x4acfba?.[_0xd3ab06(0x155)])return this[_0xd3ab06(0x231)](_0x4acfba,docData);const _0x20f738=new _0xd60157(docData),_0x219657=await this[_0xd3ab06(0x1b3)][_0xd3ab06(0x20a)](_0x20f738);return await this[_0xd3ab06(0x2ab)]([_0x219657],_0x4acfba),new ImportSummary({'status':UtilApplications[_0xd3ab06(0x2a7)],'imported':[new ImportedDocument({'document':_0x219657,'pack':this[_0xd3ab06(0x1b3)]})]});}if(_0x4acfba?.['isOverwrite'])return this[_0xd3ab06(0x292)](_0x4acfba,docData);const _0x59e378=_0x58da4a['folderId']!==undefined?_0x58da4a[_0xd3ab06(0x20b)]:await this[_0xd3ab06(0x1b9)](_0x34b273);if(_0x59e378)docData[_0xd3ab06(0x1a2)]=_0x59e378;const _0x2ff3b5=await _0xd60157[_0xd3ab06(0x235)](docData,{'renderSheet':![],'temporary':![]});return await game[this[_0xd3ab06(0x288)]][_0xd3ab06(0x1f2)](_0x2ff3b5['id'],_0x2ff3b5),new ImportSummary({'status':UtilApplications[_0xd3ab06(0x2a7)],'imported':[new ImportedDocument({'document':_0x2ff3b5})]});}async[_0x4a8bb2(0x2ab)](_0x4c7e3a,_0x2b044d){const _0x40decb=_0x4a8bb2;if(!this['_table'])return;const _0x3f82b7=_0x2b044d?.[_0x40decb(0x181)]===ConfigConsts[_0x40decb(0x1ff)]||_0x2b044d?.['isOverwrite'];_0x4c7e3a=_0x3f82b7?_0x4c7e3a[_0x40decb(0x26b)](_0x516b10=>!this['_table'][_0x40decb(0x13d)][_0x40decb(0x19c)](_0x51cb74=>_0x51cb74[_0x40decb(0x156)][_0x40decb(0x14d)]===_0x516b10['id'])):_0x4c7e3a;if(!_0x4c7e3a['length'])return;const _0x4b1f27=DataConverterTable[_0x40decb(0x223)](this[_0x40decb(0x1e9)])+0x1;await UtilDocuments[_0x40decb(0x1f1)](this[_0x40decb(0x1e9)],await _0x4c7e3a['pSerialAwaitMap'](_0x5bf535=>DataConverterTable[_0x40decb(0x160)]({'type':CONST['TABLE_RESULT_TYPES']['COMPENDIUM'],'text':_0x5bf535['name'],'resultId':_0x5bf535['id'],'collection':this[_0x40decb(0x1b3)][_0x40decb(0x162)],'rangeExact':_0x4b1f27,'img':_0x5bf535[_0x40decb(0x20d)]})),{'propData':_0x40decb(0x13d),'ClsEmbed':TableResult});}[_0x4a8bb2(0x2c3)](_0x5290e0,_0x1d464c){const _0x5ca354=_0x4a8bb2;throw new Error(_0x5ca354(0x2c1));}async[_0x4a8bb2(0x2b6)](){}[_0x4a8bb2(0x130)](_0x1726cf){const _0x3977a2=_0x4a8bb2,_0x5987d3=Parser['getPropTag'](this[_0x3977a2(0x1f6)][_0x1726cf['ix']][_0x3977a2(0x21d)]),_0x22d9a8=DataUtil[_0x3977a2(0x28f)][_0x3977a2(0x228)](this[_0x3977a2(0x1f6)][_0x1726cf['ix']],_0x5987d3);return'@'+_0x5987d3+'['+_0x22d9a8+']';}}ImportList['_STO_K_FOLDER_PATH_SPEC']='ImportList.folderKeyPathSpec',ImportList[_0x4a8bb2(0x140)]=null;const MixinUserChooseImporter=_0x4ab203=>class extends _0x4ab203{constructor(_0x43313e,_0x59f2f1,_0x5b4996,_0x5dceb6={}){const _0x1a2beb=_0x4a8bb2;super(_0x43313e,_0x59f2f1,_0x5b4996),this[_0x1a2beb(0x21c)]=!![],this[_0x1a2beb(0x234)]=!![],this[_0x1a2beb(0x1be)]=null,this[_0x1a2beb(0x224)]=null,this['pResult']=null,this[_0x1a2beb(0x276)]=!!_0x5dceb6[_0x1a2beb(0x1cc)];}[_0x4a8bb2(0x13b)](){const _0x5425e5=_0x4a8bb2;return this[_0x5425e5(0x276)]?{'isImportToTempDirectory':!![]}:{'isTemp':!![],'isDataOnly':!![]};}[_0x4a8bb2(0x214)](_0x35ebed){const _0xbbc47b=_0x4a8bb2;return!this['_isForceImportToTempDirectory']&&_0x35ebed[_0xbbc47b(0x270)]===UtilApplications[_0xbbc47b(0x28d)]||this['_isForceImportToTempDirectory']&&_0x35ebed['status']===UtilApplications[_0xbbc47b(0x2a7)];}async[_0x4a8bb2(0x1d2)](){const _0x4241e4=_0x4a8bb2;if(!this[_0x4241e4(0x176)])return;try{const _0x510c43=this[_0x4241e4(0x176)][_0x4241e4(0x238)][_0x4241e4(0x275)](_0x18be1b=>_0x18be1b['data']['cbSel'][_0x4241e4(0x229)]);if(!_0x510c43)return ui[_0x4241e4(0x1ac)][_0x4241e4(0x283)](_0x4241e4(0x185));this[_0x4241e4(0x234)]=![],this[_0x4241e4(0x296)]();let _0x327f8e=[this[_0x4241e4(0x1f6)][_0x510c43['ix']]];_0x327f8e=await this[_0x4241e4(0x24a)](_0x327f8e);if(_0x327f8e==null)return;const _0x385733=this[_0x4241e4(0x13b)](),_0x15e6e5=await this[_0x4241e4(0x167)](_0x327f8e[0x0],_0x385733);if(this['_isImportSuccess'](_0x15e6e5))this[_0x4241e4(0x1be)](_0x15e6e5?.['imported']?.[0x0]?.[_0x4241e4(0x1c8)]);else this[_0x4241e4(0x224)](new Error(_0x4241e4(0x17d)+_0x15e6e5[_0x4241e4(0x270)]['toString']()+'\x22'));_0x510c43[_0x4241e4(0x156)][_0x4241e4(0x14e)][_0x4241e4(0x229)]=![],_0x510c43[_0x4241e4(0x16c)][_0x4241e4(0x272)]['remove']('list-multi-selected');}catch(_0x667084){this[_0x4241e4(0x224)](_0x667084);}}['_activateListeners_initPreviewImportButton'](_0x682449,_0x57b665){const _0x53e5f1=_0x4a8bb2;_0x57b665[_0x53e5f1(0x1ca)](_0x53e5f1(0x23d),async _0x742296=>{const _0x40a9d2=_0x53e5f1;_0x742296[_0x40a9d2(0x192)](),_0x742296[_0x40a9d2(0x169)]();try{let _0x4e3276=[this['_content'][_0x682449['ix']]];_0x4e3276=await this[_0x40a9d2(0x24a)](_0x4e3276);if(_0x4e3276==null)return;const _0x4bc386=this[_0x40a9d2(0x13b)](),_0x1c4a08=await this[_0x40a9d2(0x167)](_0x4e3276[0x0],_0x4bc386);if(this[_0x40a9d2(0x214)](_0x1c4a08))this['_fnResolve'](_0x1c4a08?.['imported']?.[0x0]?.[_0x40a9d2(0x1c8)]);else this['_fnReject'](new Error(_0x40a9d2(0x17d)+_0x1c4a08[_0x40a9d2(0x270)][_0x40a9d2(0x18e)]()+'\x22'));this['close']();}catch(_0x4b9b30){this[_0x40a9d2(0x224)](_0x4b9b30);}});}async[_0x4a8bb2(0x296)](..._0x671273){const _0x463dec=_0x4a8bb2;await super[_0x463dec(0x296)](..._0x671273);if(this[_0x463dec(0x234)])this[_0x463dec(0x1be)](null);}async[_0x4a8bb2(0x251)](..._0x4c83f8){const _0x1244ec=_0x4a8bb2;await super[_0x1244ec(0x251)](..._0x4c83f8);if(!_0x4c83f8?.[_0x1244ec(0x278)])return;const [{fnResolve:_0x2a5d5b,fnReject:_0xd1f281,pResult:_0x45d5d0}]=_0x4c83f8;this[_0x1244ec(0x234)]=!![],this['_fnResolve']=_0x2a5d5b,this['_fnReject']=_0xd1f281,this[_0x1244ec(0x1ed)]=_0x45d5d0;}static async[_0x4a8bb2(0x274)](_0x43edff,_0x33edeb){const _0x2b7013=_0x4a8bb2,{ChooseImporter:_0x19f4db}=await import(_0x2b7013(0x17c)),_0x37dd08=new this({});await _0x37dd08[_0x2b7013(0x2c4)]();let _0x19016c=null,_0x29c566=null;const _0x6cb628=new Promise((_0x4ff379,_0x2d0dd2)=>{_0x19016c=_0x4ff379,_0x29c566=_0x2d0dd2;}),_0x154d6c=new _0x19f4db({'mode':new _0x19f4db[(_0x2b7013(0x143))]({..._0x43edff,'importerInstance':_0x37dd08}),'namespace':_0x33edeb,'isAlwaysCloseWindow':!![],'isTemp':!![],'importerPreRenderArgs':{'fnResolve':_0x19016c,'fnReject':_0x29c566,'pResult':_0x6cb628}});if(_0x154d6c[_0x2b7013(0x201)]()){if(await _0x154d6c['pInitIsSubSkippable']())return _0x154d6c[_0x2b7013(0x27c)]({'isSilent':!![],'isBackground':!![]})[_0x2b7013(0x2d3)](null),_0x6cb628;}return _0x154d6c[_0x2b7013(0x2b0)](!![]),_0x6cb628;}};class ImportSummary{constructor({imported:_0x3f5d90,status:_0xdd4422}){const _0x147c77=_0x4a8bb2;this[_0x147c77(0x204)]=_0x3f5d90,this[_0x147c77(0x270)]=_0xdd4422;}static[_0x4a8bb2(0x242)](){const _0x3622a8=_0x4a8bb2;return new this({'status':UtilApplications[_0x3622a8(0x237)]});}static[_0x4a8bb2(0x1d9)](){return new this({'imported':[],'status':UtilApplications['TASK_EXIT_COMPLETE']});}}class ImportedDocument{constructor({name:name=null,isExisting:isExisting=![],document:document=null,actor:actor=null,embeddedDocument:embeddedDocument=null,pack:pack=null}){const _0x2b72c7=_0x4a8bb2;if(document&&embeddedDocument)throw new Error('Only\x20one\x20of\x20\x22document\x22\x20and\x20\x22embeddedDocument\x22\x20may\x20be\x20specified!');if(actor&&pack)throw new Error(_0x2b72c7(0x255));this['name']=name,this[_0x2b72c7(0x1b4)]=isExisting,this[_0x2b72c7(0x1c8)]=document,this[_0x2b72c7(0x1f5)]=actor,this[_0x2b72c7(0x262)]=embeddedDocument,this[_0x2b72c7(0x19b)]=pack;}}class ImportCustomizer extends Application{constructor(_0x441c23,_0x39263d,{title:_0x1733c4,template:_0x35448e,titleSearch:_0x27ae91,isActor:_0x3088c0}){const _0xb627a=_0x4a8bb2;super({'title':_0x1733c4,'template':_0x35448e,'width':0x3c0,'height':Util[_0xb627a(0x29e)](),'resizable':!![]}),this[_0xb627a(0x2c9)]=_0x441c23,this[_0xb627a(0x1b1)]=_0x39263d,this[_0xb627a(0x227)]=_0x27ae91,this['_isActor']=_0x3088c0,this[_0xb627a(0x176)]=null,this[_0xb627a(0x25c)]=null;}['getData'](){const _0x55f9d2=_0x4a8bb2;return{'titleSearch':this['_titleSearch'],'isActor':this[_0x55f9d2(0x216)]};}['activateListeners'](_0x56ecd5){const _0x5aea26=_0x4a8bb2;super['activateListeners'](_0x56ecd5),this['_activateListeners_initList']({'$html':_0x56ecd5});const _0x9b1f73=_0x56ecd5[_0x5aea26(0x275)](_0x5aea26(0x28c));SortUtil[_0x5aea26(0x1ba)](_0x9b1f73,this[_0x5aea26(0x176)]),this['_activateListeners_bindControls']({'$html':_0x56ecd5,'$wrpBtnsSort':_0x9b1f73});if(this[_0x5aea26(0x25c)])this[_0x5aea26(0x25c)][_0x5aea26(0x23d)]();}[_0x4a8bb2(0x22a)]({$html:_0x5bdfde}){const _0x58db45=_0x4a8bb2;throw new Error(_0x58db45(0x12e));}[_0x4a8bb2(0x1b7)]({$html:_0xa81f55,$wrpBtnsSort:_0x2f077f}){const _0x5c133e=_0x4a8bb2;throw new Error(_0x5c133e(0x12e));}async['close'](){const _0x2a7b62=_0x4a8bb2;return this[_0x2a7b62(0x1b1)](null),super[_0x2a7b62(0x296)]();}}export{ImportList,MixinUserChooseImporter,ImportSummary,ImportedDocument,ImportCustomizer};