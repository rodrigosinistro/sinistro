function _0x18cb(_0x22ec2b,_0xb4440){const _0x5aae87=_0x5aae();return _0x18cb=function(_0x18cb44,_0x2cf9e2){_0x18cb44=_0x18cb44-0xf3;let _0x2ef32e=_0x5aae87[_0x18cb44];return _0x2ef32e;},_0x18cb(_0x22ec2b,_0xb4440);}function _0x5aae(){const _0x43034e=['161268SpwjwA','3340057qvWlYg','103202mTPzBw','randomID','6xwyscb','items','utils','313715eKAIxL','_id','718023BUkJwA','added','document','mergeMap','map','length','value','data','push','level','copy','Level\x20must\x20be\x20defined!','advancement','Features','LevelledEmbeddedDocument_MinLevel1','ItemGrant','getOrSet','assign','473526cAoIvH','3650IrwAUp','filter','sort','pUpdateEmbeddedDocuments','1997088wKGbPr','forEach','80EuQmzM','80wVYbGR','_LevelledEmbeddedDocument','LevelledEmbeddedDocument_MinLevel0','ascSort','advancementId','img','embeddedDocument','keys'];_0x5aae=function(){return _0x43034e;};return _0x5aae();}const _0x1519f7=_0x18cb;(function(_0x9223ed,_0x5cc724){const _0x488d6f=_0x18cb,_0x300c89=_0x9223ed();while(!![]){try{const _0x14a102=parseInt(_0x488d6f(0xf3))/0x1+-parseInt(_0x488d6f(0x10a))/0x2+parseInt(_0x488d6f(0x115))/0x3+parseInt(_0x488d6f(0x10c))/0x4*(-parseInt(_0x488d6f(0x11c))/0x5)+-parseInt(_0x488d6f(0x119))/0x6*(parseInt(_0x488d6f(0x116))/0x7)+-parseInt(_0x488d6f(0x10d))/0x8*(parseInt(_0x488d6f(0x105))/0x9)+parseInt(_0x488d6f(0x106))/0xa*(parseInt(_0x488d6f(0x117))/0xb);if(_0x14a102===_0x5cc724)break;else _0x300c89['push'](_0x300c89['shift']());}catch(_0x5250f5){_0x300c89['push'](_0x300c89['shift']());}}}(_0x5aae,0xe55fa));import{UtilDocuments}from'./UtilDocuments.js';class UtilAdvancements{static [_0x1519f7(0x10e)]=class{constructor({embeddedDocument:embeddedDocument,level:level}={}){const _0x47a2cf=_0x1519f7;if(level==null)throw new Error(_0x47a2cf(0xfe));this[_0x47a2cf(0x113)]=embeddedDocument,this['level']=level,this[_0x47a2cf(0x111)]=null;}};static [_0x1519f7(0x10f)]=class extends this[_0x1519f7(0x10e)]{constructor({level:level=0x0,...rest}){super({'level':level,...rest});}};static [_0x1519f7(0x101)]=class extends this[_0x1519f7(0x10e)]{constructor({level:level=0x1,...rest}){super({'level':level,...rest});}};static async['pAddAdvancementLinks']({actor:_0x11b9b0,parentEmbeddedDocument:_0x1fe109,childLevelledEmbeddedDocuments:_0x366b66}){const _0x3ccd72=_0x1519f7;_0x366b66=_0x366b66[_0x3ccd72(0x107)](_0x68d532=>_0x68d532[_0x3ccd72(0x113)]);if(!_0x1fe109||!_0x366b66[_0x3ccd72(0xf8)])return;const _0x4fb74f={};_0x366b66['forEach'](_0x545cd9=>{const _0x16cc83=_0x3ccd72;(_0x4fb74f[_0x545cd9['level']]=_0x4fb74f[_0x545cd9['level']]||[])[_0x16cc83(0xfb)](_0x545cd9);});const _0x18fbd4=Object[_0x3ccd72(0x114)](_0x4fb74f)['map'](_0x531a54=>Number(_0x531a54))[_0x3ccd72(0x108)](SortUtil[_0x3ccd72(0x110)])[_0x3ccd72(0xf7)](_0x2d2c67=>{const _0x20f200=_0x3ccd72,_0x400d61=foundry[_0x20f200(0x11b)][_0x20f200(0x118)](),_0x2a06b2=_0x4fb74f[_0x2d2c67];return _0x2a06b2[_0x20f200(0x10b)](_0x4bd231=>_0x4bd231['advancementId']=_0x400d61),{'_id':_0x400d61,'type':_0x20f200(0x102),'level':_0x2d2c67,'title':_0x20f200(0x100),'icon':_0x1fe109[_0x20f200(0x112)],'configuration':{'items':[]},'value':{'added':_0x2a06b2[_0x20f200(0xf6)](_0x24091a=>({[_0x24091a[_0x20f200(0x113)]['id']]:''}))}};}),_0xcccfc9=MiscUtil[_0x3ccd72(0xfd)](_0x1fe109['data']?.[_0x3ccd72(0xfa)]?.[_0x3ccd72(0xff)]||[]),_0x39f78f=_0x18fbd4[_0x3ccd72(0x107)](_0x931880=>{const _0x1bf536=_0x3ccd72,_0x319db4=_0xcccfc9['find'](_0x4a18e4=>_0x4a18e4[_0x1bf536(0xfc)]===_0x931880[_0x1bf536(0xfc)]);if(!_0x319db4)return!![];if(_0x931880?.[_0x1bf536(0xf9)]?.[_0x1bf536(0xf4)]){const _0x2c4006=MiscUtil[_0x1bf536(0x103)](_0x319db4,_0x1bf536(0xf9),_0x1bf536(0xf4),{});Object[_0x1bf536(0x104)](_0x2c4006,_0x931880[_0x1bf536(0xf9)]['added']);}return _0x4fb74f[_0x931880[_0x1bf536(0xfc)]][_0x1bf536(0x10b)](_0x1c2671=>_0x1c2671[_0x1bf536(0x111)]=_0x319db4[_0x1bf536(0x11d)]),![];}),_0x21a11b=await UtilDocuments[_0x3ccd72(0x109)](_0x11b9b0,[{'_id':_0x1fe109['id'],'data':{'advancement':[..._0xcccfc9,..._0x39f78f]}}],{'propData':_0x3ccd72(0x11a),'ClsEmbed':Item}),_0x5e3009=_0x21a11b[0x0]?.[_0x3ccd72(0xf5)];if(!_0x5e3009)return;await UtilDocuments[_0x3ccd72(0x109)](_0x11b9b0,_0x366b66['map'](_0x410c8b=>({'_id':_0x410c8b[_0x3ccd72(0x113)]['id'],'flags':{'dnd5e':{'advancementOrigin':_0x5e3009['id']+'.'+_0x410c8b[_0x3ccd72(0x111)]}}})),{'propData':_0x3ccd72(0x11a),'ClsEmbed':Item});}}export{UtilAdvancements};