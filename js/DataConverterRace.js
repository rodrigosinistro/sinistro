const _0x33f39e=_0xc158;(function(_0x166622,_0x4d3454){const _0xaf2738=_0xc158,_0x3e1514=_0x166622();while(!![]){try{const _0x7d35ea=-parseInt(_0xaf2738(0x170))/0x1+parseInt(_0xaf2738(0x179))/0x2*(parseInt(_0xaf2738(0x1b5))/0x3)+-parseInt(_0xaf2738(0x1b2))/0x4*(parseInt(_0xaf2738(0x175))/0x5)+-parseInt(_0xaf2738(0x1a5))/0x6*(-parseInt(_0xaf2738(0x176))/0x7)+-parseInt(_0xaf2738(0x198))/0x8+parseInt(_0xaf2738(0x1a4))/0x9*(parseInt(_0xaf2738(0x19f))/0xa)+-parseInt(_0xaf2738(0x18b))/0xb;if(_0x7d35ea===_0x4d3454)break;else _0x3e1514['push'](_0x3e1514['shift']());}catch(_0x456125){_0x3e1514['push'](_0x3e1514['shift']());}}}(_0x2aba,0xe2858));import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';function _0xc158(_0x395f2a,_0x1597a2){const _0x2aba56=_0x2aba();return _0xc158=function(_0xc158aa,_0x50144b){_0xc158aa=_0xc158aa-0x168;let _0x4d328e=_0x2aba56[_0xc158aa];return _0x4d328e;},_0xc158(_0x395f2a,_0x1597a2);}function _0x2aba(){const _0x55c43a=['/media/icon/family-tree.svg','raceSource','410JFMBJJ','foundryRaceFeature','_pGetSideLoadedMatch','filterValues','setFirstSection','248247LFJWZh','234kwWSpa','_IMG_FALLBACK','getRaceStub','STUB_RACE','pGetItemActorPassive','_pGetDataSideLoaded','</td>\x0a\x09\x09\x09\x09</tr>\x0a\x09\x09\x09</table>\x0a\x09\x09\x09','_pGetSaveImagePath','srd','getSourceWithPagePart','permission','effects','defaultPermission','556fsZIPV','MODULE_NAME','source','6kbtMvp','pGetCompendiumImage','_pGetCompendiumFeatureImage','ability','race','pGetWithDescriptionPlugins','isImportDescription','</div>','foundryRace','_pGetRaceDescription','getSrdCompendiumEntity','_pGetFlagsSideLoaded','_baseSource','getAbilityData','getFauxRaceFeaturesAlias','push','381705SyPfNq','join','asText','isAddPermission','_SIDE_LOAD_FEATURE_OPTS','6505Rjqtdt','156947vczXkY','map','isUseMetricDistance','1644752zmTowM','pHasRaceFeatureSideLoadedEffects','modules/','_getCompendiumFeatureAliases','feat','isStubRace','mutActorUpdate','pGetRaceFeatureItemEffects','pGetRaceSideData','raceName','data.requirements','getSpeedString','get','URL_TO_HASH_BUILDER','_getCompendiumAliases','getNameWithSourcePart','_baseName','getInvertedName','17482905CyGBge','<div><table\x20class=\x22summary\x20stripe-even\x22>\x0a\x09\x09\x09\x09<tr>\x0a\x09\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Ability\x20Scores</th>\x0a\x09\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Size</th>\x0a\x09\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Speed</th>\x0a\x09\x09\x09\x09</tr>\x0a\x09\x09\x09\x09<tr>\x0a\x09\x09\x09\x09\x09<td\x20class=\x22text-center\x22>','importRace','bind','player','length','</td>\x0a\x09\x09\x09\x09\x09<td\x20class=\x22text-center\x22>','PG_RACES','Unknown\x20Race','entries','_baseSrd','name','copy','4562744PRxram','mutEffectsDisabledTransfer','getExpandedEffects','_pGetEffectsRawSideLoaded_','raceFeature'];_0x2aba=function(){return _0x55c43a;};return _0x2aba();}import{UtilApplications}from'./UtilApplications.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';import{UtilCompendium}from'./UtilCompendium.js';import{UtilDataConverter}from'./UtilDataConverter.js';class DataConverterRace extends DataConverter{static ['_SIDE_LOAD_OPTS']={'propBrew':_0x33f39e(0x168),'fnLoadJson':Vetools[_0x33f39e(0x181)][_0x33f39e(0x18e)](Vetools),'propJson':_0x33f39e(0x1b9),'propsMatch':['source','name']};static [_0x33f39e(0x174)]={'propBrew':_0x33f39e(0x1a0),'fnLoadJson':Vetools[_0x33f39e(0x181)][_0x33f39e(0x18e)](Vetools),'propJson':_0x33f39e(0x19c),'propsMatch':[_0x33f39e(0x19e),_0x33f39e(0x182),_0x33f39e(0x1b4),'name']};static [_0x33f39e(0x1a6)]=_0x33f39e(0x17b)+SharedConsts['MODULE_NAME']+_0x33f39e(0x19d);static async['pGetRaceItem'](_0x2a2aae,_0x11b02f){const _0x54ba94=_0x33f39e;_0x11b02f=_0x11b02f||{};const _0x52114c=await this[_0x54ba94(0x1ac)](_0x2a2aae,{'propCompendium':'race'}),_0x5e4e5a=await this[_0x54ba94(0x1aa)](_0x2a2aae),_0x1e95fc=await this[_0x54ba94(0x16b)](_0x2a2aae),_0xb90839=await this['_pGetEffectsSideLoaded']({'ent':_0x2a2aae,'img':_0x52114c});DataConverter[_0x54ba94(0x199)](_0xb90839,'importRace');const _0x33f6c0={'name':UtilApplications['getCleanEntityName'](UtilDataConverter[_0x54ba94(0x188)](_0x2a2aae)),'type':'feat','data':{'description':{'value':await this[_0x54ba94(0x169)](_0x2a2aae),'chat':'','unidentified':''},'source':UtilDataConverter[_0x54ba94(0x1ae)](_0x2a2aae),'damage':{'parts':[]},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':0x0,'max':0x0,'per':null},'ability':null,'actionType':'','attackBonus':null,'chatFlavor':'','critical':{'threshold':null,'damage':''},'formula':'','save':{'ability':'','dc':null},'requirements':'','recharge':{'value':null,'charged':![]},..._0x5e4e5a},'flags':{[SharedConsts[_0x54ba94(0x1b3)]]:{'page':UrlUtil[_0x54ba94(0x192)],'source':_0x2a2aae['source'],'hash':UrlUtil[_0x54ba94(0x186)][UrlUtil[_0x54ba94(0x192)]](_0x2a2aae),'propDroppable':_0x54ba94(0x1b9),'filterValues':_0x11b02f[_0x54ba94(0x1a2)]},..._0x1e95fc},'effects':_0xb90839,'img':_0x52114c};if(_0x11b02f[_0x54ba94(0x1b1)]!=null)_0x33f6c0['permission']={'default':_0x11b02f['defaultPermission']};else{if(_0x11b02f[_0x54ba94(0x173)])_0x33f6c0[_0x54ba94(0x1af)]={'default':Config[_0x54ba94(0x185)](_0x54ba94(0x18d),'permissions')};}return _0x33f6c0;}static[_0x33f39e(0x169)](_0x3acec5){const _0x945ade=_0x33f39e;if(!Config['get'](_0x945ade(0x18d),_0x945ade(0x1bb)))return'';return UtilDataConverter[_0x945ade(0x1ba)](()=>{const _0x532640=_0x945ade;return _0x532640(0x18c)+Renderer[_0x532640(0x16d)](_0x3acec5[_0x532640(0x1b8)])[_0x532640(0x172)]+_0x532640(0x191)+(_0x3acec5['size']||[SZ_VARIES])[_0x532640(0x177)](_0x336ace=>Parser['sizeAbvToFull'](_0x336ace))[_0x532640(0x171)]('/')+_0x532640(0x191)+Parser[_0x532640(0x184)](_0x3acec5,{'isMetric':Config[_0x532640(0x178)]({'configGroup':'importRace'})})+_0x532640(0x1ab)+Renderer[_0x532640(0x185)]()[_0x532640(0x1a3)](!![])['render']({'type':_0x532640(0x194),'entries':_0x3acec5[_0x532640(0x194)]},0x1)+_0x532640(0x1bc);});}static[_0x33f39e(0x187)](_0x259690){const _0x5c45de=_0x33f39e;if(!_0x259690[_0x5c45de(0x196)]&&!_0x259690[_0x5c45de(0x189)])return[];const _0x2b80d0=[],_0x259467=PageFilterRaces[_0x5c45de(0x18a)](_0x259690[_0x5c45de(0x196)]);if(_0x259467&&_0x259467!==_0x259690['name'])_0x2b80d0[_0x5c45de(0x16f)](_0x259467);if(_0x259690[_0x5c45de(0x189)])_0x2b80d0[_0x5c45de(0x16f)](_0x259690[_0x5c45de(0x189)]);return _0x2b80d0;}static async['pGetRaceFeatureItem'](_0x2a2048,_0x4c0733,_0xe36854=null,_0x19c8cb){const _0x32dcab=_0x33f39e,_0x154347=await this[_0x32dcab(0x1b7)](_0x2a2048,_0x4c0733),_0x13a6c2=await this[_0x32dcab(0x1aa)](_0x4c0733,{'propOpts':'_SIDE_LOAD_FEATURE_OPTS'}),_0x5e3359=await this['_pGetFlagsSideLoaded'](_0x4c0733,{'propOpts':_0x32dcab(0x174)}),_0x51a7d3=_0xe36854?await this[_0x32dcab(0x1aa)](_0xe36854,{'propOpts':_0x32dcab(0x174)}):null,_0x28bfc0=_0xe36854?await this[_0x32dcab(0x16b)](_0xe36854,{'propOpts':_0x32dcab(0x174)}):null,_0x41bc20=await UtilCompendium[_0x32dcab(0x16a)](_0x32dcab(0x19c),_0x4c0733)||(_0xe36854?await UtilCompendium[_0x32dcab(0x16a)]('raceFeature',_0xe36854):null),_0x5af43b=MiscUtil[_0x32dcab(0x197)](_0x41bc20?.[_0x32dcab(0x1b0)]||[]);return DataConverter[_0x32dcab(0x199)](_0x5af43b,'importRace'),DataConverter[_0x32dcab(0x1a9)](_0x4c0733,{'mode':_0x32dcab(0x18f),'img':_0x154347,'effects':_0x5af43b,'fvttType':_0x32dcab(0x17d),'source':_0x2a2048['source'],'actor':_0x19c8cb['actor'],'additionalData':{..._0x51a7d3,..._0x13a6c2},'additionalFlags':{..._0x5e3359,..._0x28bfc0}});}static['getFauxRaceFeature'](_0x4ed80d,_0x28a825){const _0x3d4c7a=_0x33f39e;return{'source':_0x4ed80d[_0x3d4c7a(0x1b4)],'raceName':_0x4ed80d[_0x3d4c7a(0x196)],'raceSource':_0x4ed80d['source'],'srd':_0x4ed80d[_0x3d4c7a(0x1ad)]||_0x4ed80d[_0x3d4c7a(0x195)],...MiscUtil[_0x3d4c7a(0x197)](_0x28a825)};}static[_0x33f39e(0x16e)](_0x4c5cb9,_0x355d36){const _0x12234b=_0x33f39e;if(!_0x4c5cb9[_0x12234b(0x189)]&&!_0x4c5cb9[_0x12234b(0x16c)])return null;return{'source':_0x4c5cb9[_0x12234b(0x16c)],'raceName':_0x4c5cb9['_baseName'],'raceSource':_0x4c5cb9[_0x12234b(0x16c)],'srd':_0x4c5cb9['srd']||_0x4c5cb9[_0x12234b(0x195)],...MiscUtil[_0x12234b(0x197)](_0x355d36)};}static async['pMutActorUpdateRaceFeature'](_0x212b60,_0x22cb7a,_0x246e00,_0x1fbd07){const _0x3f2943=_0x33f39e,_0x2e2996=await DataConverter[_0x3f2943(0x1a1)](_0x246e00,this[_0x3f2943(0x174)]);DataConverter[_0x3f2943(0x17f)](_0x212b60,_0x22cb7a,_0x246e00,{'sideData':_0x2e2996});}static async['_pGetCompendiumFeatureImage'](_0xbd5c6d,_0x579324){const _0x2e3bf1=_0x33f39e,_0x9862ed=await UtilCompendium[_0x2e3bf1(0x1b6)](_0x2e3bf1(0x19c),_0x579324,{'fnGetAliases':this[_0x2e3bf1(0x17c)][_0x2e3bf1(0x18e)](this,_0xbd5c6d),'deepKeys':[_0x2e3bf1(0x183)]});if(_0x9862ed)return _0x9862ed;return this[_0x2e3bf1(0x1ac)](_0xbd5c6d,{'propCompendium':_0x2e3bf1(0x1b9)});}static[_0x33f39e(0x17c)](_0x315a08,_0x3c3a83){const _0x8dd1a4=_0x33f39e;if(!_0x315a08[_0x8dd1a4(0x196)]&&!_0x315a08['_baseName'])return[];if(!_0x3c3a83[_0x8dd1a4(0x196)])return[];const _0x3ebd42=[];_0x3ebd42[_0x8dd1a4(0x16f)]({'name':_0x3c3a83[_0x8dd1a4(0x196)],'data.requirements':_0x315a08[_0x8dd1a4(0x196)]});const _0x5932b6=PageFilterRaces[_0x8dd1a4(0x18a)](_0x315a08[_0x8dd1a4(0x196)]);return _0x5932b6&&_0x5932b6!==_0x315a08[_0x8dd1a4(0x196)]&&_0x3ebd42['push']({'name':_0x3c3a83['name'],'data.requirements':_0x5932b6}),_0x315a08['_baseName']&&_0x3ebd42['push']({'name':_0x3c3a83['name'],'data.requirements':_0x315a08[_0x8dd1a4(0x189)]}),_0x3ebd42;}static async[_0x33f39e(0x17a)](_0x45adb8,_0xe33a9){const _0x8c596e=_0x33f39e;return(await DataConverter[_0x8c596e(0x19b)](_0xe33a9,this['_SIDE_LOAD_FEATURE_OPTS']))?.[_0x8c596e(0x190)]>0x0;}static async[_0x33f39e(0x180)](_0x4d1594,_0x3c2816,_0x24ce72,_0x56ade6){const _0x29f7b9=_0x33f39e,_0x2590de=await DataConverter['_pGetEffectsRawSideLoaded_'](_0x24ce72,this[_0x29f7b9(0x174)]);return UtilActiveEffects[_0x29f7b9(0x19a)](_0x2590de||[],{'actor':_0x4d1594,'sheetItem':_0x56ade6,'parentName':_0x3c2816[_0x29f7b9(0x196)]});}static[_0x33f39e(0x17e)](_0x47e6c8){const _0x535e5a=_0x33f39e;return _0x47e6c8[_0x535e5a(0x196)]===DataConverterRace[_0x535e5a(0x1a8)][_0x535e5a(0x196)]&&_0x47e6c8[_0x535e5a(0x1b4)]===DataConverterRace['STUB_RACE'][_0x535e5a(0x1b4)];}static[_0x33f39e(0x1a7)](){const _0x166031=_0x33f39e;return MiscUtil[_0x166031(0x197)](DataConverterRace[_0x166031(0x1a8)]);}}DataConverterRace[_0x33f39e(0x1a8)]={'name':_0x33f39e(0x193),'source':SRC_PHB,'_isStub':!![]};export{DataConverterRace};