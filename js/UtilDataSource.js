const _0x5bfb6b=_0x1987;(function(_0x5e4698,_0x18061f){const _0x4b3645=_0x1987,_0x4e23e8=_0x5e4698();while(!![]){try{const _0x46e865=parseInt(_0x4b3645(0xd9))/0x1*(parseInt(_0x4b3645(0x84))/0x2)+parseInt(_0x4b3645(0xd4))/0x3*(parseInt(_0x4b3645(0xa7))/0x4)+parseInt(_0x4b3645(0xac))/0x5*(-parseInt(_0x4b3645(0xdc))/0x6)+parseInt(_0x4b3645(0xd3))/0x7+parseInt(_0x4b3645(0xb5))/0x8+-parseInt(_0x4b3645(0x9c))/0x9*(-parseInt(_0x4b3645(0xbb))/0xa)+-parseInt(_0x4b3645(0x7d))/0xb;if(_0x46e865===_0x18061f)break;else _0x4e23e8['push'](_0x4e23e8['shift']());}catch(_0x12be17){_0x4e23e8['push'](_0x4e23e8['shift']());}}}(_0x5d3c,0x43aae));import{Vetools}from'./Vetools.js';import{Config}from'./Config.js';class UtilDataSource{static[_0x5bfb6b(0xb3)](_0x11bdc8,_0x3ab445,_0x267be8){const _0x2fb95f=_0x5bfb6b,_0xc0ac77=Math[_0x2fb95f(0xdb)](..._0x11bdc8[_0x2fb95f(0xd5)][_0x2fb95f(0xcb)][_0x2fb95f(0x9a)](_0x1bdba2=>UtilDataSource[_0x2fb95f(0x7c)][_0x2fb95f(0xdd)](_0x1bdba2))),_0x468b71=Math['min'](..._0x3ab445['values'][_0x2fb95f(0xcb)][_0x2fb95f(0x9a)](_0x44d804=>UtilDataSource[_0x2fb95f(0x7c)]['indexOf'](_0x44d804)));return SortUtil[_0x2fb95f(0xc9)](_0xc0ac77,_0x468b71)||SortUtil[_0x2fb95f(0xd8)](_0x11bdc8,_0x3ab445);}static async['pGetFileOutputs'](_0x593b08,_0x2fb7e2,_0x1a49e1){const _0x36043a=_0x5bfb6b;_0x1a49e1=_0x1a49e1||[];const _0x25a01a=await Promise['all'](_0x1a49e1['map'](_0x52d2f9=>{const _0x6fa109=_0x1987,_0xf1eed5=Vetools['getContent'](_0x52d2f9,_0x2fb7e2);return _0x593b08['pPostLoad']?_0x593b08[_0x6fa109(0x82)](_0xf1eed5,_0x52d2f9,_0x593b08[_0x6fa109(0x93)]):_0xf1eed5;}));return{'contents':_0x25a01a[_0x36043a(0xa0)](_0x4cc6f6=>_0x4cc6f6!=null)};}static async[_0x5bfb6b(0xce)](_0x1b05e8,_0x4c5cfc,_0x37b78b){const _0x389e3a=_0x5bfb6b;if(_0x1b05e8[_0x389e3a(0xde)]===''){_0x37b78b=_0x37b78b||[];let _0xb7a3ab;try{_0xb7a3ab=await Promise[_0x389e3a(0xd2)](_0x37b78b[_0x389e3a(0x9a)](async _0x593d31=>{const _0x24c1aa=_0x389e3a,_0x2b8427=await Vetools[_0x24c1aa(0xb4)](_0x593d31);return _0x1b05e8[_0x24c1aa(0x82)]?_0x1b05e8[_0x24c1aa(0x82)](Vetools['getContent'](_0x2b8427,_0x4c5cfc),_0x2b8427,_0x1b05e8[_0x24c1aa(0x93)]):Vetools[_0x24c1aa(0xe1)](_0x2b8427,_0x4c5cfc);}));}catch(_0x1e0e96){ui[_0x389e3a(0xe8)][_0x389e3a(0xdf)](_0x389e3a(0xa5)+VeCt[_0x389e3a(0xc5)]);throw _0x1e0e96;}return{'cacheKeys':_0x37b78b,'contents':_0xb7a3ab};}let _0x142238;try{const _0x432682=await Vetools[_0x389e3a(0xb4)](_0x1b05e8[_0x389e3a(0xde)]);_0x142238=Vetools[_0x389e3a(0xe1)](_0x432682,_0x4c5cfc);if(_0x1b05e8[_0x389e3a(0x82)])_0x142238=await _0x1b05e8[_0x389e3a(0x82)](_0x142238,_0x432682,_0x1b05e8[_0x389e3a(0x93)]);}catch(_0x13e2ed){const _0x1c0002=_0x389e3a(0xae)+_0x1b05e8[_0x389e3a(0xde)]+'\x22!';ui['notifications'][_0x389e3a(0xdf)](_0x1c0002+'\x20'+VeCt[_0x389e3a(0xc5)]),console[_0x389e3a(0xdf)](_0x1c0002);throw _0x13e2ed;}return{'cacheKeys':[_0x1b05e8[_0x389e3a(0xde)]],'contents':[_0x142238]};}static async['pGetSpecialOutput'](_0x14320a,_0x5f3c9b){const _0x87a20a=_0x5bfb6b;let _0x4c7185;try{const _0x57cbda=await Vetools[_0x87a20a(0xe5)](_0x14320a);_0x4c7185=_0x57cbda;if(_0x14320a[_0x87a20a(0xa8)])_0x4c7185=Vetools['getContent'](_0x4c7185,_0x5f3c9b);if(_0x14320a['pPostLoad'])_0x4c7185=await _0x14320a[_0x87a20a(0x82)](_0x4c7185,_0x57cbda,_0x14320a[_0x87a20a(0x93)]);}catch(_0x48050d){ui['notifications'][_0x87a20a(0xdf)](_0x87a20a(0xca)+_0x14320a[_0x87a20a(0x88)]+_0x87a20a(0xba)+VeCt[_0x87a20a(0xc5)]);throw _0x48050d;}return{'cacheKeys':[_0x14320a[_0x87a20a(0x88)]],'contents':[_0x4c7185]};}static [_0x5bfb6b(0x83)]=new Set([_0x5bfb6b(0xe0),_0x5bfb6b(0xb2)]);static [_0x5bfb6b(0x85)]=/^foundry[A-Z]/;static['getMergedData'](_0x4168a0,{isFilterBlacklisted:isFilterBlacklisted=!![]}={}){const _0x3949a9={};return _0x4168a0['forEach'](_0x657ee3=>{const _0x12c804=_0x1987;Object[_0x12c804(0x94)](_0x657ee3)[_0x12c804(0x7e)](([_0x29174b,_0x1bc50f])=>{const _0x32017e=_0x12c804;if(!_0x1bc50f||!(_0x1bc50f instanceof Array))return;if(_0x3949a9[_0x29174b])_0x3949a9[_0x29174b]=[..._0x3949a9[_0x29174b],...MiscUtil[_0x32017e(0xcc)](_0x1bc50f)];else _0x3949a9[_0x29174b]=MiscUtil[_0x32017e(0xcc)](_0x1bc50f);});}),isFilterBlacklisted&&Object['entries'](_0x3949a9)['forEach'](([_0x43d1f6,_0x5ece15])=>{const _0x13cb10=_0x1987;if(!_0x5ece15||!(_0x5ece15 instanceof Array))return;_0x3949a9[_0x43d1f6]=_0x3949a9[_0x43d1f6][_0x13cb10(0xa0)](_0x20eb5c=>{const _0x1c264a=_0x13cb10;if(_0x20eb5c[_0x1c264a(0x92)]===VeCt[_0x1c264a(0x9f)])return![];if(_0x20eb5c['__prop']&&(this['_PROPS_NO_BLACKLIST'][_0x1c264a(0x9d)](_0x20eb5c[_0x1c264a(0xd1)])||this[_0x1c264a(0x85)][_0x1c264a(0x99)](_0x20eb5c[_0x1c264a(0xd1)])))return![];if(!_0x20eb5c[_0x1c264a(0x92)])return console[_0x1c264a(0x81)](_0x1c264a(0xe4)),!![];if(!_0x20eb5c[_0x1c264a(0xd1)])return console[_0x1c264a(0x81)](_0x1c264a(0xbf)),!![];if(!UrlUtil[_0x1c264a(0xbd)][_0x20eb5c[_0x1c264a(0xd1)]])return console[_0x1c264a(0x81)]('No\x20hash\x20builder\x20found\x20for\x20\x22__prop\x22\x20\x22'+_0x20eb5c[_0x1c264a(0xd1)]+_0x1c264a(0xaf)),!![];switch(_0x20eb5c[_0x1c264a(0xd1)]){case _0x1c264a(0xa1):{if(!_0x20eb5c[_0x1c264a(0xb6)]?.[_0x1c264a(0x8c)])break;_0x20eb5c[_0x1c264a(0xb6)]=_0x20eb5c[_0x1c264a(0xb6)][_0x1c264a(0xa0)](_0x555ee8=>{const _0x29f7b8=_0x1c264a;if(_0x555ee8[_0x29f7b8(0x92)]===VeCt[_0x29f7b8(0x9f)])return![];return!ExcludeUtil[_0x29f7b8(0xc0)](UrlUtil[_0x29f7b8(0xbd)]['subclass'](_0x555ee8),_0x29f7b8(0xbc),_0x555ee8[_0x29f7b8(0x92)],{'isNoCount':!![]});});}}return!ExcludeUtil['isExcluded'](UrlUtil[_0x1c264a(0xbd)][_0x20eb5c[_0x1c264a(0xd1)]](_0x20eb5c),_0x20eb5c[_0x1c264a(0xd1)],_0x20eb5c[_0x1c264a(0x92)],{'isNoCount':!![]});});}),_0x3949a9;}static async[_0x5bfb6b(0x91)]({pLoad:_0x3a849b,isBackground:isBackground=![]}){const _0x3b6bb4=_0x5bfb6b,_0x4a6f85=isBackground?MiscUtil[_0x3b6bb4(0x9e)](0x1f4,VeCt['SYM_UTIL_TIMEOUT']):null,_0x5b1b4e=[_0x3a849b,_0x4a6f85][_0x3b6bb4(0xa0)](Boolean),_0xa1343b=await Promise[_0x3b6bb4(0x96)](_0x5b1b4e);if(_0xa1343b===VeCt[_0x3b6bb4(0xb8)])ui['notifications'][_0x3b6bb4(0x8e)](_0x3b6bb4(0x89));return _0x3a849b;}static async[_0x5bfb6b(0xb0)]({sources:_0x212d1e,uploadedFiles:_0x16fc74,customUrls:_0x466d51,isBackground:isBackground=![],props:_0x2abca5,userData:_0x3c4785,cacheKeys:cacheKeys=null,page:_0x4eb1b4,isDedupable:isDedupable=![],fnGetDedupedData:fnGetDedupedData=null,fnGetBlacklistFilteredData:fnGetBlacklistFilteredData=null}){const _0xa06dbb=_0x5bfb6b,_0x3c5383=[],_0x507084=_0x212d1e['pMap'](async _0x22ce73=>{const _0x38bc7d=_0x1987;if(_0x22ce73['isFile']){const _0x3069cc=await UtilDataSource[_0x38bc7d(0xa9)](_0x22ce73,_0x2abca5,_0x16fc74);_0x3c5383[_0x38bc7d(0x8f)](..._0x3069cc[_0x38bc7d(0xc2)]);if(cacheKeys)cacheKeys[_0x38bc7d(0x8f)](null);}else{if(_0x22ce73[_0x38bc7d(0xde)]!=null){const _0x1a3ead=await UtilDataSource[_0x38bc7d(0xce)](_0x22ce73,_0x2abca5,_0x466d51);_0x3c5383[_0x38bc7d(0x8f)](..._0x1a3ead[_0x38bc7d(0xc2)]);if(cacheKeys)cacheKeys[_0x38bc7d(0x8f)](..._0x1a3ead[_0x38bc7d(0xc1)]);}else{const _0x301a35=await UtilDataSource[_0x38bc7d(0xcd)](_0x22ce73,_0x2abca5);_0x3c5383['push'](..._0x301a35[_0x38bc7d(0xc2)]);if(cacheKeys)cacheKeys['push'](..._0x301a35[_0x38bc7d(0xc1)]);}}});await UtilDataSource['pHandleBackgroundLoad']({'pLoad':_0x507084,'isBackground':isBackground});const _0x35fac1=_0x3c5383 instanceof Array?_0x3c5383[_0xa06dbb(0xd7)](0x2):_0x3c5383;let _0x44e50f=fnGetDedupedData?fnGetDedupedData({'allContentFlat':_0x35fac1,'isDedupable':isDedupable}):this[_0xa06dbb(0x86)]({'allContentFlat':_0x35fac1,'isDedupable':isDedupable});return _0x44e50f=fnGetBlacklistFilteredData?fnGetBlacklistFilteredData({'dedupedAllContentFlat':_0x44e50f,'page':_0x4eb1b4}):this['_getBlacklistFilteredData']({'dedupedAllContentFlat':_0x44e50f,'page':_0x4eb1b4}),_0x44e50f instanceof Array&&Config[_0xa06dbb(0xa6)]('import','isShowVariantsInLists')&&(_0x44e50f=_0x44e50f[_0xa06dbb(0x9a)](_0x42cd0e=>[_0x42cd0e,...DataUtil['proxy']['getVersions'](_0x42cd0e[_0xa06dbb(0xd1)],_0x42cd0e)])['flat']()),{'dedupedAllContentFlat':_0x44e50f,'cacheKeys':cacheKeys,'userData':_0x3c4785};}static[_0x5bfb6b(0xc6)]({dedupedAllContentFlat:_0x5bbc78,page:_0x3eeadd}){const _0xc5c01a=_0x5bfb6b;if(!UrlUtil[_0xc5c01a(0xbd)][_0x3eeadd])return _0x5bbc78;return _0x5bbc78[_0xc5c01a(0xa0)](_0x3a5661=>{const _0x56d5b3=_0xc5c01a;if(_0x3a5661['source']===VeCt[_0x56d5b3(0x9f)])return![];if(!_0x3a5661['source'])return console[_0x56d5b3(0x81)]('Entity\x20did\x20not\x20have\x20a\x20\x22source\x22!\x20This\x20should\x20never\x20occur.'),!![];if(!_0x3a5661[_0x56d5b3(0xd1)])return console[_0x56d5b3(0x81)](_0x56d5b3(0xbf)),!![];return!ExcludeUtil['isExcluded']((UrlUtil[_0x56d5b3(0xbd)][_0x3a5661[_0x56d5b3(0xd1)]]||UrlUtil[_0x56d5b3(0xbd)][_0x3eeadd])(_0x3a5661),_0x3a5661['__prop'],_0x3a5661[_0x56d5b3(0x92)],{'isNoCount':!![]});});}static['_getDedupedAllContentFlat']({allContentFlat:_0x3a175b,page:_0xb86a44,isDedupable:isDedupable=![]}){const _0x5d82b9=_0x5bfb6b;if(!isDedupable)return _0x3a175b;return this[_0x5d82b9(0x8d)]({'allContentFlat':_0x3a175b,'page':_0xb86a44});}static[_0x5bfb6b(0x8d)]({allContentFlat:_0x3fb2b3,page:_0x1bfc5a}){const _0x4f2060=_0x5bfb6b;if(!UrlUtil['URL_TO_HASH_BUILDER'][_0x1bfc5a])return _0x3fb2b3;const _0x586808=new Set();return _0x3fb2b3[_0x4f2060(0xa0)](_0x22fdf4=>{const _0xda553a=_0x4f2060,_0x184990=UrlUtil[_0xda553a(0xbd)][_0x1bfc5a];if(!_0x184990)return!![];const _0x5d4486=_0x184990(_0x22fdf4);if(_0x586808[_0xda553a(0x9d)](_0x5d4486))return![];return _0x586808[_0xda553a(0xda)](_0x5d4486),!![];});}}UtilDataSource[_0x5bfb6b(0xc4)]=_0x5bfb6b(0xe7),UtilDataSource['SOURCE_TYP_OFFICIAL_ALL']=UtilDataSource[_0x5bfb6b(0xc4)]+_0x5bfb6b(0xc8),UtilDataSource[_0x5bfb6b(0xaa)]=UtilDataSource[_0x5bfb6b(0xc4)]+_0x5bfb6b(0xea),UtilDataSource[_0x5bfb6b(0xad)]=_0x5bfb6b(0x87),UtilDataSource['SOURCE_TYP_ARCANA']=_0x5bfb6b(0xe3),UtilDataSource[_0x5bfb6b(0xa2)]=_0x5bfb6b(0xc7),UtilDataSource['SOURCE_TYP_BREW_LOCAL']=_0x5bfb6b(0xb7),UtilDataSource[_0x5bfb6b(0xa3)]=_0x5bfb6b(0x8a),UtilDataSource[_0x5bfb6b(0x7c)]=[UtilDataSource[_0x5bfb6b(0xbe)],UtilDataSource[_0x5bfb6b(0xad)],UtilDataSource[_0x5bfb6b(0xaa)],UtilDataSource[_0x5bfb6b(0xe9)],UtilDataSource['SOURCE_TYP_BREW_LOCAL'],UtilDataSource['SOURCE_TYP_BREW'],UtilDataSource[_0x5bfb6b(0xa3)]],UtilDataSource[_0x5bfb6b(0xd0)]=[UtilDataSource[_0x5bfb6b(0xbe)],UtilDataSource[_0x5bfb6b(0xaa)],UtilDataSource[_0x5bfb6b(0xe9)],UtilDataSource[_0x5bfb6b(0x9b)],UtilDataSource[_0x5bfb6b(0xa2)],UtilDataSource[_0x5bfb6b(0xad)],UtilDataSource[_0x5bfb6b(0xa3)]],UtilDataSource[_0x5bfb6b(0x90)]=class{constructor(_0x5db5d3,_0x559439){const _0xf08e78=_0x5bfb6b;this[_0xf08e78(0x80)]=_0x5db5d3,this[_0xf08e78(0x82)]=_0x559439['pPostLoad'],this['filterTypes']=_0x559439['filterTypes']||[UtilDataSource[_0xf08e78(0xa3)]],this['isDefault']=!!_0x559439[_0xf08e78(0x97)],this[_0xf08e78(0xe6)]=_0x559439[_0xf08e78(0xe6)],this[_0xf08e78(0x95)]=!!_0x559439['isWorldSelectable'];}get[_0x5bfb6b(0xc3)](){const _0x41ac85=_0x5bfb6b;throw new Error(_0x41ac85(0xa4));}get['identifierWorld'](){const _0x37952c=_0x5bfb6b;return this['isDefault']?_0x37952c(0xcf):this[_0x37952c(0xc3)];}},UtilDataSource[_0x5bfb6b(0x8b)]=class extends UtilDataSource[_0x5bfb6b(0x90)]{constructor(_0x1d4371,_0x37eb9d,_0x2232f5){const _0x5d2076=_0x5bfb6b;_0x2232f5=_0x2232f5||{},super(_0x1d4371,{'isWorldSelectable':!!_0x37eb9d,..._0x2232f5}),this['url']=_0x37eb9d,this['source']=_0x2232f5['source'],this[_0x5d2076(0x93)]=_0x2232f5[_0x5d2076(0x93)];}get[_0x5bfb6b(0xc3)](){const _0x73e341=_0x5bfb6b;return this[_0x73e341(0xde)]===''?_0x73e341(0xb1):this[_0x73e341(0xde)];}get['identifierWorld'](){const _0x5b9f9e=_0x5bfb6b;return this[_0x5b9f9e(0x92)]??super[_0x5b9f9e(0x98)];}},UtilDataSource[_0x5bfb6b(0x7f)]=class extends UtilDataSource[_0x5bfb6b(0x90)]{constructor(_0x2a978a,_0x5f3756){const _0x38e405=_0x5bfb6b;_0x5f3756=_0x5f3756||{},super(_0x2a978a,{'isWorldSelectable':![],..._0x5f3756}),this[_0x38e405(0xab)]=!![];}get[_0x5bfb6b(0xc3)](){return'VE_SOURCE_CUSTOM_FILE';}},UtilDataSource[_0x5bfb6b(0xe2)]=class extends UtilDataSource[_0x5bfb6b(0x90)]{constructor(_0x464fb8,_0x4cc5e0,_0x2e7588){const _0x1ac9a6=_0x5bfb6b;_0x2e7588=_0x2e7588||{},super(_0x464fb8,{'isWorldSelectable':!![],..._0x2e7588}),this[_0x1ac9a6(0xb9)]={'pGet':_0x4cc5e0};if(!_0x2e7588[_0x1ac9a6(0x88)])throw new Error(_0x1ac9a6(0xd6));this['cacheKey']=_0x2e7588[_0x1ac9a6(0x88)],this[_0x1ac9a6(0xa8)]=_0x2e7588['isUseProps'];}get['identifier'](){return this['cacheKey'];}};function _0x1987(_0x44c26d,_0xcba020){const _0x5d3c51=_0x5d3c();return _0x1987=function(_0x1987ba,_0x12c9a2){_0x1987ba=_0x1987ba-0x7c;let _0x54cd0c=_0x5d3c51[_0x1987ba];return _0x54cd0c;},_0x1987(_0x44c26d,_0xcba020);}export{UtilDataSource};function _0x5d3c(){const _0x53b304=['DataSourceFile','name','warn','pPostLoad','_PROPS_NO_BLACKLIST','4786ubAezJ','_PROP_RE_FOUNDRY','_getDedupedAllContentFlat','Custom/User','cacheKey','Please\x20wait\x20while\x20data\x20is\x20being\x20loaded...','Unknown','DataSourceUrl','length','_getDedupedData','info','push','DataSourceBase','pHandleBackgroundLoad','source','userData','entries','isWorldSelectable','race','isDefault','identifierWorld','test','map','SOURCE_TYP_BREW_LOCAL','171SULxnl','has','pDelay','STR_GENERIC','filter','class','SOURCE_TYP_BREW','SOURCE_TYP_UNKNOWN','Unimplemented!','Failed\x20to\x20load\x20one\x20or\x20more\x20URLs!\x20','get','1762036uAnyhr','isUseProps','pGetFileOutputs','SOURCE_TYP_OFFICIAL_SINGLE','isFile','1313190DXwjvt','SOURCE_TYP_CUSTOM','Failed\x20to\x20load\x20URL\x20\x22','\x22!\x20This\x20should\x20never\x20occur.','pGetAllContent','VE_SOURCE_CUSTOM_URL','itemType','sortListItems','pGetWithCache','1839280TYIEem','subclasses','Local\x20Homebrew','SYM_UTIL_TIMEOUT','special','\x22!\x20','47890NufKwK','subclass','URL_TO_HASH_BUILDER','SOURCE_TYP_OFFICIAL_ALL','Entity\x20did\x20not\x20have\x20a\x20\x22__prop\x22!\x20This\x20should\x20never\x20occur.','isExcluded','cacheKeys','contents','identifier','SOURCE_TYP_OFFICIAL_BASE','STR_SEE_CONSOLE','_getBlacklistFilteredData','Homebrew','\x20(All)','ascSort','Failed\x20to\x20load\x20pre-defined\x20source\x20\x22','filterTypes','copy','pGetSpecialOutput','pGetUrlOutputs','5etools','SOURCE_TYPE_ORDER__FILTER','__prop','all','3486560tWzmqm','3YYhLxk','values','No\x20cache\x20key\x20specified!','flat','compareListNames','68dMZHgV','add','min','6BjtmTv','indexOf','url','error','itemProperty','getContent','DataSourceSpecial','UA/Etc.','Entity\x20did\x20not\x20have\x20a\x20\x22source\x22!\x20This\x20should\x20never\x20occur.','pLoadImporterSourceSpecial','abbreviations','Official','notifications','SOURCE_TYP_ARCANA','\x20(Single\x20Source)','SOURCE_TYPE_ORDER','9706510qKTErv','forEach'];_0x5d3c=function(){return _0x53b304;};return _0x5d3c();}