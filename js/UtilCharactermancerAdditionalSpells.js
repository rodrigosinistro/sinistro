const _0x36ebd7=_0x2fc9;function _0x2fc9(_0x3c17a3,_0x1e2890){const _0x163712=_0x1637();return _0x2fc9=function(_0x2fc93d,_0x1d28a1){_0x2fc93d=_0x2fc93d-0x7a;let _0x41bc5b=_0x163712[_0x2fc93d];return _0x41bc5b;},_0x2fc9(_0x3c17a3,_0x1e2890);}function _0x1637(){const _0x89dec1=['parentAbilityAbv','meta','chooseFromCount','693XrhKdA','daily','_render_addLastExpandedSpellsHook','<div>','key','rowMetas','data','exec','append','_additionalSpellsFlat','prop','test','spellLevelLow','pCacheAndGet','string','chooseFromGroup','filterExpression','spellsAlwaysKnown','<div\x20class=\x22ve-flex-col\x20w-100\x22></div>','consumeTarget','abilityAbv','showVe','11672KqcshL','_render_addLastBoolSpellsHook','627xgUlIV','choose','pulseChoose','additionalSpells','segregate','_getFlatExpandedSpellsInRange','will','consumeType','usesPer','Unhandled\x20spell\x20recharge\x20type\x20\x22','1344084kTXdfs','\x22></div>','$getSelEnum','_isAnyInnatePreparedExpanded','curLevel','_isRequiredLevelInRange','resource','isExpanded','render','ascSort','isCantrip','get','warn','Could\x20not\x20find\x20spell\x20\x22','targetLevel','<div\x20class=\x22ve-flex-v-center\x20py-1\x22>\x0a\x09\x09\x09<div\x20class=\x22col-3\x20text-center\x22>Spell\x20Level</div>\x0a\x09\x09\x09<div\x20class=\x22col-9\x22>Spells</div>\x0a\x09\x09</div>','URL_TO_HASH_BUILDER','toSpellCase','isAlwaysKnown','_render_$getRows','includes','from','isAnyCantrips','ritual','78rWmwOU','requiredLevel','name','stringify','prepared','notifications','FlatSpell','_render_addLastAlwaysPreparedSpellsHook','resourceName','_getFlatInnatePreparedSpellsInRange','_render_addLastAlwaysKnownSpellsHook','getFlatData','selectedValues','_render_$getSelChooseAbility','vetConsumes','<i\x20class=\x22ve-muted\x22>Current</i>','pGetFormData','Charactermancer_AdditionalSpellsSelect.spells','isAlwaysPrepared','inherit','consumeAmount','spellsExpanded','34722JrbGME','addHookExpandedSpells','uses','pApplyFormDataToActor','_getFlatData_doProcessSpellItem','_additionalSpells','disabled','<div\x20class=\x22ve-flex-v-center\x20py-1\x22>\x0a\x09\x09\x09<div\x20class=\x22col-3\x20text-center\x22>Level</div>\x0a\x09\x09\x09<div\x20class=\x22col-9\x22>Spells</div>\x0a\x09\x09</div>','isNoChoice','values','ascSortLower','./ImportListSpell.js','entries','chooseFrom_','_isRequiredCasterLevelInRange','known','sourceHintText','count','<div\x20class=\x22mr-2\x22>,</div>','Spell\x20Set\x20','attAbvToFull','type','_isAnyInnatePrepared','innate','_render_renderOptions','rest','copy','uid','toggleVe','appendTo','mb-1','<button\x20class=\x22btn\x20btn-xs\x20ve-flex-1\x22\x20title=\x22Select\x20Spell\x20Set\x22>','click','expanded','preparationMode','MIN_SAFE_INTEGER','<div\x20class=\x22ve-flex-v-center\x22></div>','spells','map','filter','_getExpandedUid','_sourceHintText','some','addHookAlwaysKnownSpells','<div\x20class=\x22ve-small\x20ve-flex-v-center\x20my-1\x20w-100\x20italic\x20ve-muted\x22>No\x20spells\x20at\x20this\x20level</div>','_modalFilterSpells','getMetaWrpMultipleChoice_getSelectedValues','PG_SPELLS','\x22\x20when\x20applying\x20additional\x20spells!','isPrepared','length','_getDefaultState','spellLevelHigh','constructor','castAtLevel','MAX_SAFE_INTEGER','_isAnyExpanded','pop','push','{@spell\x20','toLowerCase','4784940zDKvke','modalTitle','getFormData','ml-1','always','_getProps_chooseFrom','pGetImportCompApplicationFormData','toggleClass','join','mergeMap','521307HfSGRB','forEach','chooseFrom','state','_state','_getFlatData_doProcessSpellRechargeBlock','spellsAlwaysPrepared','_getFlatSpellsInRange','</button>','sort','pImportEntry','requiredCasterLevel','ixSet','addHookAlwaysPreparedSpells','_addHookBase','ability','6849IuhOfb','getMetaWrpMultipleChoice_getPropIsAcceptable','getComp','_isChooseAbility','trim','split','spell','3946650GHOjDC'];_0x1637=function(){return _0x89dec1;};return _0x1637();}(function(_0x2775fa,_0x35859d){const _0x4b0987=_0x2fc9,_0xc592b4=_0x2775fa();while(!![]){try{const _0x4da202=-parseInt(_0x4b0987(0xf7))/0x1*(parseInt(_0x4b0987(0x119))/0x2)+-parseInt(_0x4b0987(0xc4))/0x3+-parseInt(_0x4b0987(0x101))/0x4+parseInt(_0x4b0987(0xba))/0x5+parseInt(_0x4b0987(0x7d))/0x6*(-parseInt(_0x4b0987(0xdf))/0x7)+parseInt(_0x4b0987(0xf5))/0x8*(parseInt(_0x4b0987(0xd4))/0x9)+-parseInt(_0x4b0987(0xdb))/0xa;if(_0x4da202===_0x35859d)break;else _0xc592b4['push'](_0xc592b4['shift']());}catch(_0x33f4c1){_0xc592b4['push'](_0xc592b4['shift']());}}}(_0x1637,0x8a0da));import{ModalFilterSpellsFvtt}from'./UtilModalFilter.js';import{UtilApplications}from'./UtilApplications.js';import{LGT}from'./Util.js';class Charactermancer_AdditionalSpellsUtil{static[_0x36ebd7(0x124)](_0x4dad2f){const _0x2585f4=_0x36ebd7;return _0x4dad2f=MiscUtil['copy'](_0x4dad2f),_0x4dad2f[_0x2585f4(0xa3)](_0x2906b0=>{const _0x11668d=_0x2585f4,_0x5d13fa={},_0x3db290={},_0x4b6670=[];return Object[_0x11668d(0x89)](_0x2906b0)[_0x11668d(0xc5)](([_0x15fed6,_0x489c92])=>{const _0x25243f=_0x11668d;_0x4b6670[_0x25243f(0xb7)](_0x15fed6);switch(_0x15fed6){case _0x25243f(0x11b):case'ability':_0x5d13fa[_0x15fed6]=_0x489c92;break;case _0x25243f(0x121):break;case'innate':case _0x25243f(0x8c):case'prepared':case _0x25243f(0x9e):{this['_getFlatData_doProcessAdditionMeta']({'additionType':_0x15fed6,'additionMeta':_0x489c92,'outSpells':_0x3db290,'keyPath':_0x4b6670,'resourceName':_0x2906b0['resourceName']});break;}default:throw new Error('Unhandled\x20spell\x20addition\x20type\x20\x22'+_0x15fed6+'\x22');}_0x4b6670[_0x25243f(0xb6)]();}),{'meta':_0x5d13fa,'spells':_0x3db290};});}static['_getFlatData_doProcessAdditionMeta'](_0x1d26bb){const _0x59d510=_0x36ebd7,{additionMeta:_0x177459,keyPath:_0x151855}=_0x1d26bb;Object['entries'](_0x177459)[_0x59d510(0xc5)](([_0x36efe6,_0x153cff])=>{const _0x503c45=_0x59d510;_0x151855['push'](_0x36efe6),_0x153cff instanceof Array?_0x153cff[_0x503c45(0xc5)]((_0x27781c,_0x47be3f)=>this[_0x503c45(0x81)]({..._0x1d26bb,'levelOrCasterLevel':_0x36efe6,'spellItem':_0x27781c,'ix':_0x47be3f})):Object[_0x503c45(0x89)](_0x153cff)['forEach'](([_0x3f9fce,_0x4b2636])=>{this['_getFlatData_doProcessSpellRechargeBlock']({..._0x1d26bb,'levelOrCasterLevel':_0x36efe6,'rechargeType':_0x3f9fce,'levelMetaInner':_0x4b2636});}),_0x151855['pop']();});}static[_0x36ebd7(0x81)](_0x1e0267){const _0x383371=_0x36ebd7,{additionType:_0xd58479,additionMeta:_0x3101af,outSpells:_0x360c6b,keyPath:_0x5823aa,spellItem:_0x26469b,ix:_0x4e4da0,rechargeType:_0x1c741a,uses:_0x5b5670,usesPer:_0x3c9c60,levelOrCasterLevel:_0x355119,consumeType:_0x72056d,consumeAmount:_0x2e55cf,consumeTarget:_0x5070a2,vetConsumes:_0xd79c41}=_0x1e0267;_0x5823aa[_0x383371(0xb7)](_0x4e4da0);const _0x558575={'isExpanded':_0xd58479===_0x383371(0x9e),'isAlwaysPrepared':_0xd58479===_0x383371(0x11d),'isAlwaysKnown':_0xd58479===_0x383371(0x8c),'isPrepared':_0xd58479===_0x383371(0x11d)||_0xd58479===_0x383371(0x94)||_0xd58479===_0x383371(0x8c),'preparationMode':_0xd58479===_0x383371(0x11d)||_0xd58479==='known'?_0x383371(0xbe):_0x383371(0x94),'consumeType':_0x72056d,'consumeAmount':_0x2e55cf,'consumeTarget':_0x5070a2,'vetConsumes':_0xd79c41};if(_0x355119!=='_'){const _0x50ef0b=/^s(\d+)$/[_0x383371(0xe6)](_0x355119);if(_0x50ef0b)_0x558575[_0x383371(0xcf)]=Number(_0x50ef0b[0x1]);else{if(!isNaN(_0x355119))_0x558575['requiredLevel']=Number(_0x355119);}}if(_0x1c741a)switch(_0x1c741a){case _0x383371(0x96):case'daily':break;case _0x383371(0xfd):case'ritual':case _0x383371(0x107):{_0x558575[_0x383371(0x9f)]='atwill',_0x558575[_0x383371(0xae)]=_0x1c741a!==_0x383371(0x118);break;}case'_':break;default:throw new Error('Unhandled\x20recharge\x20type\x20\x22'+_0x1c741a+'\x22');}if(_0x5b5670)_0x558575[_0x383371(0x7f)]=_0x5b5670;if(_0x3c9c60)_0x558575[_0x383371(0xff)]=_0x3c9c60;if(typeof _0x26469b===_0x383371(0xed)){const _0x466b06=_0x5823aa[_0x383371(0xc2)]('__');_0x360c6b[_0x466b06]=new Charactermancer_AdditionalSpellsUtil[(_0x383371(0x11f))]({'type':_0x383371(0xda),'key':_0x466b06,..._0x558575,'uid':_0x26469b});}else{if(_0x26469b[_0x383371(0xf8)]!=null){if(typeof _0x26469b['choose']===_0x383371(0xed)){const _0x1350c9=_0x26469b[_0x383371(0x8e)]||0x1;for(let _0xa2887a=0x0;_0xa2887a<_0x1350c9;++_0xa2887a){_0x5823aa[_0x383371(0xb7)](_0xa2887a);const _0x30adbd=_0x5823aa[_0x383371(0xc2)]('__');_0x360c6b[_0x30adbd]=new Charactermancer_AdditionalSpellsUtil['FlatSpell']({'type':_0x383371(0xf8),'key':_0x30adbd,..._0x558575,'filterExpression':_0x26469b[_0x383371(0xf8)]}),_0x5823aa[_0x383371(0xb6)]();}}else{if(_0x26469b['choose'][_0x383371(0x116)]){const _0xd54466=_0x26469b[_0x383371(0xf8)][_0x383371(0x8e)]||0x1,_0x5846f8=CryptUtil[_0x383371(0x98)]();[..._0x26469b['choose'][_0x383371(0x116)]][_0x383371(0xcd)]((_0x5311cf,_0x2b01a4)=>SortUtil[_0x383371(0x87)](_0x5311cf,_0x2b01a4))[_0x383371(0xc5)]((_0x46aba2,_0x1d8662)=>{const _0x491072=_0x383371;_0x5823aa[_0x491072(0xb7)](_0x1d8662);const _0x3dd818=_0x5823aa['join']('__');_0x360c6b[_0x3dd818]=new Charactermancer_AdditionalSpellsUtil['FlatSpell']({'type':_0x491072(0xc6),'key':_0x3dd818,..._0x558575,'uid':_0x46aba2,'chooseFromGroup':_0x5846f8,'chooseFromCount':_0xd54466}),_0x5823aa[_0x491072(0xb6)]();});}else throw new Error('Unhandled\x20additional\x20spell\x20format:\x20\x22'+JSON[_0x383371(0x11c)](_0x26469b)+'\x22');}}else throw new Error('Unhandled\x20additional\x20spell\x20format:\x20\x22'+JSON['stringify'](_0x26469b)+'\x22');}_0x5823aa[_0x383371(0xb6)]();}static[_0x36ebd7(0xc9)](_0x1abe91){const _0x146941=_0x36ebd7,{additionType:_0xcc767a,additionMeta:_0x2a4a9a,outSpells:_0x22887d,keyPath:_0x2d4a2d,resourceName:_0x2f0438,levelOrCasterLevel:_0x30f171,rechargeType:_0x831a0a,levelMetaInner:_0x3c5f4a}=_0x1abe91;_0x2d4a2d[_0x146941(0xb7)](_0x831a0a);switch(_0x831a0a){case _0x146941(0x96):case _0x146941(0xe0):{const _0x4bffd4=_0x831a0a===_0x146941(0x96)?'sr':'lr';Object['entries'](_0x3c5f4a)[_0x146941(0xc5)](([_0x3231ac,_0x3e1211])=>{const _0xf4c962=_0x146941;_0x2d4a2d[_0xf4c962(0xb7)](_0x3231ac),_0x3231ac=_0x3231ac['replace'](/^(\d+)e$/,'$1');const _0x4ed864=Number(_0x3231ac);_0x3e1211[_0xf4c962(0xc5)]((_0x2db38d,_0x3fff63)=>this['_getFlatData_doProcessSpellItem']({..._0x1abe91,'spellItem':_0x2db38d,'ix':_0x3fff63,'uses':_0x4ed864,'usesPer':_0x4bffd4})),_0x2d4a2d[_0xf4c962(0xb6)]();});break;}case _0x146941(0x107):{Object['entries'](_0x3c5f4a)[_0x146941(0xc5)](([_0x338161,_0x561240])=>{const _0xd9c22b=_0x146941;_0x2d4a2d['push'](_0x338161),_0x561240['forEach']((_0x4dcc9a,_0x4eef08)=>this[_0xd9c22b(0x81)]({..._0x1abe91,'spellItem':_0x4dcc9a,'ix':_0x4eef08,'vetConsumes':{'name':_0x2f0438,'amount':Number(_0x338161)}})),_0x2d4a2d[_0xd9c22b(0xb6)]();});break;}case _0x146941(0xfd):case _0x146941(0x118):case'_':{_0x3c5f4a[_0x146941(0xc5)]((_0x1612b2,_0x5d6b96)=>this[_0x146941(0x81)]({..._0x1abe91,'spellItem':_0x1612b2,'ix':_0x5d6b96}));break;}default:throw new Error(_0x146941(0x100)+_0x831a0a+'\x22');}_0x2d4a2d[_0x146941(0xb6)]();}}Charactermancer_AdditionalSpellsUtil[_0x36ebd7(0x11f)]=class{constructor(_0x19a91e){const _0x1dd9da=_0x36ebd7;this[_0x1dd9da(0x92)]=_0x19a91e[_0x1dd9da(0x92)],this[_0x1dd9da(0xe3)]=_0x19a91e[_0x1dd9da(0xe3)],this['isExpanded']=_0x19a91e[_0x1dd9da(0x108)],this[_0x1dd9da(0xae)]=_0x19a91e[_0x1dd9da(0xae)],this['isAlwaysKnown']=_0x19a91e[_0x1dd9da(0x113)],this['isAlwaysPrepared']=_0x19a91e[_0x1dd9da(0x12b)],this['preparationMode']=_0x19a91e[_0x1dd9da(0x9f)],this[_0x1dd9da(0xcf)]=_0x19a91e[_0x1dd9da(0xcf)],this[_0x1dd9da(0x11a)]=_0x19a91e[_0x1dd9da(0x11a)],this[_0x1dd9da(0x7f)]=_0x19a91e[_0x1dd9da(0x7f)],this[_0x1dd9da(0xff)]=_0x19a91e[_0x1dd9da(0xff)],this['consumeType']=_0x19a91e[_0x1dd9da(0xfe)],this[_0x1dd9da(0x7b)]=_0x19a91e['consumeAmount'],this[_0x1dd9da(0xf2)]=_0x19a91e[_0x1dd9da(0xf2)],this[_0x1dd9da(0x127)]=_0x19a91e[_0x1dd9da(0x127)],this[_0x1dd9da(0x10b)]=![],this['uid']=null,this[_0x1dd9da(0xb3)]=null;if(_0x19a91e[_0x1dd9da(0x98)]){const {uid:_0x3558cf,isCantrip:_0x2303bc,castAtLevel:_0xfe2c57}=Charactermancer_AdditionalSpellsUtil['FlatSpell'][_0x1dd9da(0xa5)](_0x19a91e[_0x1dd9da(0x98)]);this[_0x1dd9da(0x98)]=_0x3558cf,this[_0x1dd9da(0x10b)]=_0x2303bc,this[_0x1dd9da(0xb3)]=_0xfe2c57;}this['filterExpression']=_0x19a91e[_0x1dd9da(0xef)];_0x19a91e[_0x1dd9da(0xef)]&&_0x19a91e[_0x1dd9da(0xef)][_0x1dd9da(0xd9)]('|')[_0x1dd9da(0xa4)](Boolean)[_0x1dd9da(0xa7)](_0x4d9ac3=>/^level=0$/i[_0x1dd9da(0xea)](_0x4d9ac3[_0x1dd9da(0xd8)]()))&&(this[_0x1dd9da(0x10b)]=!![]);this[_0x1dd9da(0xee)]=_0x19a91e[_0x1dd9da(0xee)],this[_0x1dd9da(0xde)]=_0x19a91e[_0x1dd9da(0xde)];if(this[_0x1dd9da(0x10b)]&&!this[_0x1dd9da(0x108)])this[_0x1dd9da(0x113)]=!![];}static['_getExpandedUid'](_0x502099){const _0x51c50d=_0x36ebd7,[_0x2e5a81,_0x2860be]=_0x502099['split']('#')[_0x51c50d(0xa3)](_0x15fda2=>_0x15fda2[_0x51c50d(0xd8)]())['filter'](Boolean);let [_0x1d1bac,_0x480c64]=Renderer['splitTagByPipe'](_0x2e5a81[_0x51c50d(0xb9)]());_0x480c64=_0x480c64||SRC_PHB[_0x51c50d(0xb9)]();const _0x534ea1=_0x1d1bac+'|'+_0x480c64,_0x56db6e=_0x2860be&&_0x2860be['toLowerCase']()==='c',_0xb0d53c=_0x56db6e?null:_0x2860be&&!isNaN(_0x2860be)?Number(_0x2860be):null;return{'uid':_0x534ea1,'isCantrip':_0x56db6e,'castAtLevel':_0xb0d53c};}};class Charactermancer_AdditionalSpellsSelect extends BaseComponent{static async['pGetUserInput'](_0x23a640){const _0x3d3949=_0x36ebd7;_0x23a640=_0x23a640||{};const {additionalSpells:_0x18e0d9}=_0x23a640;if(!_0x18e0d9||!_0x18e0d9[_0x3d3949(0xaf)])return{'isFormComplete':!![],'data':[]};const _0x4985c2=this['getComp'](_0x23a640);if(_0x4985c2[_0x3d3949(0x85)]({'curLevel':_0x23a640[_0x3d3949(0x105)],'targetLevel':_0x23a640[_0x3d3949(0x10f)],'isStandalone':_0x23a640['isStandalone']}))return _0x4985c2[_0x3d3949(0x129)]();return UtilApplications[_0x3d3949(0xc0)]({'comp':_0x4985c2,'width':0x280,'height':0xdc});}static[_0x36ebd7(0xd6)](_0x1d6856){const _0x395452=_0x36ebd7;_0x1d6856=_0x1d6856||{};const _0x202e6e=_0x1d6856['modalFilterSpells']||new ModalFilterSpellsFvtt({'namespace':_0x395452(0x12a),'isRadio':!![]}),_0x55c4a0=new this({..._0x1d6856,'modalFilterSpells':_0x202e6e});return _0x55c4a0[_0x395452(0x105)]=_0x1d6856[_0x395452(0x105)],_0x55c4a0['targetLevel']=_0x1d6856[_0x395452(0x10f)],_0x55c4a0[_0x395452(0xeb)]=_0x1d6856['spellLevelLow'],_0x55c4a0[_0x395452(0xb1)]=_0x1d6856[_0x395452(0xb1)],_0x55c4a0[_0x395452(0x117)]=!!_0x1d6856['isAnyCantrips'],_0x55c4a0;}static async[_0x36ebd7(0x80)](_0x423f56,_0x51598f,_0x1259f3){const _0x34a6d3=_0x36ebd7;_0x1259f3=_0x1259f3||{};if(!_0x51598f||!_0x51598f?.[_0x34a6d3(0xe5)]?.[_0x34a6d3(0xaf)])return;const _0x57f90f=((_0x1259f3[_0x34a6d3(0xf3)]===_0x34a6d3(0x7a)?_0x1259f3[_0x34a6d3(0xdc)]:_0x1259f3[_0x34a6d3(0xf3)])||(_0x51598f[_0x34a6d3(0xf3)]==='inherit'?_0x1259f3[_0x34a6d3(0xdc)]:_0x51598f[_0x34a6d3(0xf3)]))??undefined,{ImportListSpell:_0x11a27c}=await import(_0x34a6d3(0x88)),_0x533ae0=new _0x11a27c({'actor':_0x423f56});for(const _0x226f6f of _0x51598f[_0x34a6d3(0xe5)]){if(_0x226f6f[_0x34a6d3(0x108)])continue;let [_0x3f3c83,_0x119a20]=_0x226f6f[_0x34a6d3(0x98)][_0x34a6d3(0xd9)]('|');if(!_0x119a20)_0x119a20=SRC_PHB;const _0x3b8179=UrlUtil[_0x34a6d3(0x111)][UrlUtil[_0x34a6d3(0xac)]]({'name':_0x3f3c83,'source':_0x119a20}),_0xb60d80=await Renderer['hover'][_0x34a6d3(0xec)](UrlUtil[_0x34a6d3(0xac)],_0x119a20,_0x3b8179);if(!_0xb60d80){const _0x55d0a7=_0x34a6d3(0x10e)+_0x3b8179+_0x34a6d3(0xad);ui[_0x34a6d3(0x11e)][_0x34a6d3(0x10d)](_0x55d0a7),console[_0x34a6d3(0x10d)](...LGT,_0x55d0a7);continue;}await _0x533ae0[_0x34a6d3(0xce)](_0xb60d80,{'opts_pGetSpellItem':{'ability':_0x57f90f,'usesMax':_0x226f6f[_0x34a6d3(0x7f)],'usesValue':_0x226f6f[_0x34a6d3(0x7f)],'usesPer':_0x226f6f['usesPer'],'consumeType':_0x226f6f[_0x34a6d3(0xfe)],'consumeAmount':_0x226f6f['consumeAmount'],'consumeTarget':_0x226f6f[_0x34a6d3(0xf2)],'vetConsumes':_0x226f6f['vetConsumes'],'isPrepared':_0x226f6f[_0x34a6d3(0xae)],'preparationMode':_0x226f6f[_0x34a6d3(0x9f)],'castAtLevel':_0x226f6f[_0x34a6d3(0xb3)],'isIgnoreExisting':!![]}});}}static[_0x36ebd7(0x85)](_0x1f8ed8,{additionalSpellsFlat:additionalSpellsFlat=null,curLevel:curLevel=null,targetLevel:targetLevel=null,isStandalone:isStandalone=![]}={}){const _0x158e7f=_0x36ebd7;if(_0x1f8ed8[_0x158e7f(0xaf)]!==0x1)return![];additionalSpellsFlat=additionalSpellsFlat||Charactermancer_AdditionalSpellsUtil['getFlatData'](_0x1f8ed8);const _0x525cbb=curLevel??Number[_0x158e7f(0xa0)],_0x26584b=targetLevel??Number[_0x158e7f(0xb4)],_0x588c1c=additionalSpellsFlat[_0x158e7f(0xa7)](_0x794530=>Object[_0x158e7f(0x86)](_0x794530[_0x158e7f(0xa2)])['some'](_0x4f1218=>(!isStandalone||!_0x4f1218[_0x158e7f(0x108)])&&(_0x4f1218['requiredLevel']==null||_0x4f1218[_0x158e7f(0x11a)]>=_0x525cbb&&_0x4f1218[_0x158e7f(0x11a)]<=_0x26584b)));if(!_0x588c1c)return!![];return!additionalSpellsFlat[_0x158e7f(0xa7)](_0x30e98e=>_0x30e98e[_0x158e7f(0xdd)]['ability']?.[_0x158e7f(0xf8)]||Object[_0x158e7f(0x86)](_0x30e98e[_0x158e7f(0xa2)])[_0x158e7f(0xa7)](_0x253a6e=>_0x253a6e['filterExpression']!=null||_0x253a6e[_0x158e7f(0xee)]!=null));}constructor(_0x59004a){const _0xbaf477=_0x36ebd7;_0x59004a=_0x59004a||{},super(),this[_0xbaf477(0x82)]=_0x59004a['additionalSpells'],this[_0xbaf477(0xa6)]=_0x59004a[_0xbaf477(0x8d)],this[_0xbaf477(0xaa)]=_0x59004a['modalFilterSpells'],this['_additionalSpellsFlat']=Charactermancer_AdditionalSpellsUtil[_0xbaf477(0x124)](_0x59004a[_0xbaf477(0xfa)]);}get[_0x36ebd7(0xbb)](){const _0x56c70d=_0x36ebd7;return'Choose\x20Additional\x20Spell\x20Set'+(this[_0x56c70d(0xa6)]?'\x20('+this[_0x56c70d(0xa6)]+')':'');}set['curLevel'](_0x582feb){const _0x1b56b9=_0x36ebd7;this['_state'][_0x1b56b9(0x105)]=_0x582feb;}set[_0x36ebd7(0x10f)](_0x21dcba){const _0x5c6799=_0x36ebd7;this[_0x5c6799(0xc8)][_0x5c6799(0x10f)]=_0x21dcba;}set[_0x36ebd7(0xeb)](_0x3bcd01){const _0x731c64=_0x36ebd7;this['_state'][_0x731c64(0xeb)]=_0x3bcd01;}set['spellLevelHigh'](_0x502ee1){const _0x9f399e=_0x36ebd7;this[_0x9f399e(0xc8)][_0x9f399e(0xb1)]=_0x502ee1;}set[_0x36ebd7(0x117)](_0x131b02){const _0xfb9ad4=_0x36ebd7;this['_state'][_0xfb9ad4(0x117)]=!!_0x131b02;}[_0x36ebd7(0xd1)](_0xb9028e){const _0x135ac3=_0x36ebd7;this['_addHookBase'](_0x135ac3(0xca),_0xb9028e);}[_0x36ebd7(0x7e)](_0x19c156){const _0x529741=_0x36ebd7;this[_0x529741(0xd2)](_0x529741(0x7c),_0x19c156);}[_0x36ebd7(0xa8)](_0x11f357){const _0x20f06f=_0x36ebd7;this[_0x20f06f(0xd2)]('spellsAlwaysKnown',_0x11f357);}get['spellsAlwaysPrepared'](){const _0x3b2b23=_0x36ebd7;return this[_0x3b2b23(0xc8)][_0x3b2b23(0xca)];}get['spellsExpanded'](){const _0x1bd35b=_0x36ebd7;return this[_0x1bd35b(0xc8)][_0x1bd35b(0x7c)];}get[_0x36ebd7(0xf0)](){const _0x42c2fa=_0x36ebd7;return this[_0x42c2fa(0xc8)][_0x42c2fa(0xf0)];}[_0x36ebd7(0x120)](){const _0x2c1769=_0x36ebd7;return this[_0x2c1769(0xf6)]({'propState':_0x2c1769(0xca),'propIsBool':_0x2c1769(0x12b)});}[_0x36ebd7(0xe1)](){const _0x1dfaa9=_0x36ebd7;return this[_0x1dfaa9(0xf6)]({'propState':_0x1dfaa9(0x7c),'propIsBool':_0x1dfaa9(0x108)});}[_0x36ebd7(0x123)](){const _0x58c416=_0x36ebd7;return this['_render_addLastBoolSpellsHook']({'propState':_0x58c416(0xf0),'propIsBool':_0x58c416(0x113)});}[_0x36ebd7(0xf6)]({propState:_0x4c172c,propIsBool:_0x5e6ad3}){const _0x5b6e7a=_0x36ebd7,_0x51ba0d=()=>{const _0x378e13=_0x2fc9,_0x3792ad=this[_0x378e13(0xbc)](),_0x8a7fb0=_0x3792ad[_0x378e13(0xe5)]['filter'](_0x486ed7=>_0x486ed7[_0x5e6ad3])[_0x378e13(0xa3)](_0x2da96d=>_0x2da96d[_0x378e13(0x98)][_0x378e13(0xb9)]()),_0x15a468=new Set(this[_0x378e13(0xc8)][_0x4c172c]),_0xc1ab7a=new Set(_0x8a7fb0);if(!CollectionUtil['setEq'](_0x15a468,_0xc1ab7a))this[_0x378e13(0xc8)][_0x4c172c]=_0x8a7fb0;};this[_0x5b6e7a(0xd2)](_0x5b6e7a(0xd0),_0x51ba0d),this['_addHookBase'](_0x5b6e7a(0x105),_0x51ba0d),this[_0x5b6e7a(0xd2)]('targetLevel',_0x51ba0d),this[_0x5b6e7a(0xd2)]('spellLevelLow',_0x51ba0d),this[_0x5b6e7a(0xd2)](_0x5b6e7a(0xb1),_0x51ba0d),this[_0x5b6e7a(0xd2)](_0x5b6e7a(0x117),_0x51ba0d),this[_0x5b6e7a(0xd2)](_0x5b6e7a(0xf9),_0x51ba0d),_0x51ba0d();}[_0x36ebd7(0x109)](_0x2ba6e0){const _0x21198b=_0x36ebd7;this[_0x21198b(0x120)](),this[_0x21198b(0xe1)](),this[_0x21198b(0x123)]();const _0x4f6005=$('<div\x20class=\x22ve-flex-v-center\x20ve-flex-wrap\x20w-100\x20btn-group\x20'+(this['_additionalSpellsFlat'][_0x21198b(0xaf)]>0x1?_0x21198b(0x9b):'')+_0x21198b(0x102)),_0x199e35=$(_0x21198b(0xf1));for(let _0x569a23=0x0;_0x569a23<this[_0x21198b(0xe8)][_0x21198b(0xaf)];++_0x569a23)this[_0x21198b(0x95)](_0x4f6005,_0x199e35,_0x569a23);$$(_0x2ba6e0)`
			${_0x4f6005}
			${_0x199e35}
		`;}[_0x36ebd7(0x95)](_0xde0146,_0x2ebedc,_0x2cf52e){const _0x26aa79=_0x36ebd7,_0x1269f7=this[_0x26aa79(0xe8)][_0x2cf52e],_0x47fd00=this[_0x26aa79(0xe8)][_0x26aa79(0xaf)]===0x1?null:$(_0x26aa79(0x9c)+(_0x1269f7[_0x26aa79(0xdd)][_0x26aa79(0x11b)]??_0x26aa79(0x90)+(_0x2cf52e+0x1))+_0x26aa79(0xcc))[_0x26aa79(0x9d)](()=>this[_0x26aa79(0xc8)][_0x26aa79(0xd0)]=_0x2cf52e),_0x195e55=this[_0x26aa79(0x93)](_0x2cf52e),_0x1ec161=this[_0x26aa79(0xb5)](_0x2cf52e),_0x288965=Object[_0x26aa79(0x86)](_0x1269f7[_0x26aa79(0xa2)])[_0x26aa79(0xcd)]((_0x44d734,_0x21a49e)=>SortUtil[_0x26aa79(0x10a)](_0x44d734['requiredLevel']||0x0,_0x21a49e[_0x26aa79(0x11a)]||0x0)||SortUtil[_0x26aa79(0x10a)](_0x44d734['requiredCasterLevel']||0x0,_0x21a49e[_0x26aa79(0xcf)]||0x0)),_0x4eda75=_0x195e55?$(_0x26aa79(0x84)):null,_0x410b71=_0x1ec161?$(_0x26aa79(0x110)):null,_0xc0bb7b=_0x195e55?this['_render_$getRows'](_0x2cf52e,_0x288965,{'isExpandedMatch':![]}):null,_0x1d5c61=_0x1ec161?this['_render_$getRows'](_0x2cf52e,_0x288965,{'isExpandedMatch':!![]}):null,_0x17b9b6=_0x195e55?$(_0x26aa79(0xa9)):null,_0x3afe6d=_0x1ec161?$(_0x26aa79(0xa9)):null,_0x24572e=()=>{const _0x16a59e=_0x26aa79,_0x2af9bf=!!this[_0x16a59e(0x122)](_0x2cf52e)[_0x16a59e(0xaf)];if(_0x4eda75)_0x4eda75[_0x16a59e(0x99)](_0x2af9bf);if(_0x17b9b6)_0x17b9b6[_0x16a59e(0x99)](!_0x2af9bf);const _0x5ede68=!!this[_0x16a59e(0xfc)](_0x2cf52e)[_0x16a59e(0xaf)];if(_0x410b71)_0x410b71['toggleVe'](_0x5ede68);if(_0x3afe6d)_0x3afe6d['toggleVe'](!_0x5ede68);};this[_0x26aa79(0xd2)]('spellLevelLow',_0x24572e),this[_0x26aa79(0xd2)](_0x26aa79(0xb1),_0x24572e),this[_0x26aa79(0xd2)](_0x26aa79(0x117),_0x24572e),this[_0x26aa79(0xd2)]('curLevel',_0x24572e),this[_0x26aa79(0xd2)]('targetLevel',_0x24572e),this[_0x26aa79(0xd2)](_0x26aa79(0xd0),_0x24572e),_0x24572e();const _0xbb01d=_0x195e55?$$`<div class="ve-flex-col">
			<div class="bold my-0">Innate/Prepared/Known Spells</div>
			${_0x4eda75}
			${_0xc0bb7b}
			${_0x17b9b6}
		</div>`:null,_0x3371b7=_0x1ec161?$$`<div class="ve-flex-col">
			<div class="bold my-0">Expanded Spell List</div>
			${_0x410b71}
			${_0x1d5c61}
			${_0x3afe6d}
		</div>`:null,_0x288582=this[_0x26aa79(0xd7)](_0x2cf52e),_0xfa5401=_0x288582?this['_render_$getSelChooseAbility'](_0x2cf52e):null,_0x1818a2=_0x288582?$$`<div class="split-v-center">
			<div class="bold my-0 no-shrink mr-2">Ability Score</div>
			${_0xfa5401}
		</div>`:null;if(_0x47fd00)_0xde0146[_0x26aa79(0xe7)](_0x47fd00);const _0x400a10=$$`<div class="ve-flex-col">
			${_0xbb01d}
			${_0x3371b7}
			${_0x1818a2}
		</div>`[_0x26aa79(0x9a)](_0x2ebedc);if(this[_0x26aa79(0xe8)][_0x26aa79(0xaf)]!==0x1){const _0xc06d1e=()=>{const _0x54220d=_0x26aa79;_0x47fd00[_0x54220d(0xc1)]('active',this['_state'][_0x54220d(0xd0)]===_0x2cf52e),_0x400a10['toggleVe'](this['_state'][_0x54220d(0xd0)]===_0x2cf52e);};this[_0x26aa79(0xd2)](_0x26aa79(0xd0),_0xc06d1e),_0xc06d1e();const _0x33e9dd=(_0x445914,_0x5ad012,_0x434946)=>{const _0x506fcb=_0x26aa79,_0x1c7a33=this[_0x506fcb(0xe8)][_0x434946],_0x41addf=Object[_0x506fcb(0x86)](_0x1c7a33[_0x506fcb(0xa2)])[_0x506fcb(0xc3)](_0x1c42f0=>({[_0x1c42f0[_0x506fcb(0xe3)]]:null}));this['_proxyAssignSimple'](_0x506fcb(0xc7),_0x41addf);};this[_0x26aa79(0xd2)](_0x26aa79(0xd0),_0x33e9dd);}}[_0x36ebd7(0xbf)]({groupUid:_0x138a79}){const _0x4c3a4c=_0x36ebd7;return{'propBase':_0x4c3a4c(0x8a)+_0x138a79};}[_0x36ebd7(0x114)](_0x477793,_0x11da3f,{isExpandedMatch:_0x32c418}){const _0x3bf05f=_0x36ebd7;if(!_0x11da3f['length'])return null;const _0x34a490={};return _0x11da3f['forEach'](_0x6f108d=>{const _0x42f714=_0x2fc9;if(_0x6f108d[_0x42f714(0x108)]!==_0x32c418)return;const _0x236928=_0x6f108d['requiredCasterLevel']||_0x6f108d[_0x42f714(0x11a)];(_0x34a490[_0x236928]=_0x34a490[_0x236928]||[])[_0x42f714(0xb7)](_0x6f108d);}),Object[_0x3bf05f(0x89)](_0x34a490)[_0x3bf05f(0xcd)](([_0x5c314c],[_0xaf9db7])=>SortUtil[_0x3bf05f(0x10a)](Number(_0x5c314c),Number(_0xaf9db7)))[_0x3bf05f(0xa3)](([,_0x508342])=>{const _0x298e50=_0x3bf05f,_0x3394ba=_0x508342[0x0][_0x298e50(0x11a)],_0x59d758=_0x508342[0x0][_0x298e50(0xcf)],_0x57cbeb=_0x508342[0x0][_0x298e50(0xcf)]!=null,_0x2552b4=_0x508342[0x0][_0x298e50(0x11a)]!=null,_0x2a8afc={};_0x508342=_0x508342['filter'](_0x292237=>{const _0x3c9293=_0x298e50;if(!_0x292237[_0x3c9293(0xee)])return!![];return _0x2a8afc[_0x292237[_0x3c9293(0xee)]]=_0x2a8afc[_0x292237['chooseFromGroup']]||{'from':[],'count':_0x292237[_0x3c9293(0xde)]??0x1},_0x2a8afc[_0x292237['chooseFromGroup']][_0x3c9293(0x116)][_0x3c9293(0xb7)](_0x292237),![];});const [_0x5225cd,_0x18e67d]=_0x508342[_0x298e50(0xfb)](_0x14838d=>_0x14838d[_0x298e50(0xef)]==null);_0x5225cd[_0x298e50(0xcd)]((_0x33619e,_0x4d7dfc)=>SortUtil['ascSortLower'](_0x33619e['uid'],_0x4d7dfc[_0x298e50(0x98)])),_0x18e67d[_0x298e50(0xcd)]((_0x191c0e,_0x4de434)=>SortUtil['ascSortLower'](_0x191c0e[_0x298e50(0xef)],_0x4de434[_0x298e50(0xef)]));const _0x2dd460=$$`<div class="col-9 ve-flex-v-center ve-flex-wrap">
					<div>${Renderer[_0x298e50(0x10c)]()[_0x298e50(0x109)](_0x5225cd['map'](_0x4e9eae=>_0x298e50(0xb8)+_0x4e9eae[_0x298e50(0x98)][_0x298e50(0x112)]()+'}')[_0x298e50(0xc2)](',\x20'))}</div>
				</div>`;_0x18e67d[_0x298e50(0xc5)]((_0x1c9fbb,_0x22b123)=>{const _0x238bca=_0x298e50,_0x517d42=$(_0x238bca(0xa1)),_0x574999=()=>{const _0x228b84=_0x238bca;_0x517d42['html'](this[_0x228b84(0xc8)][_0x1c9fbb[_0x228b84(0xe3)]]!=null&&this[_0x228b84(0xc8)][_0x228b84(0xd0)]===_0x477793?_0x228b84(0xe2)+Renderer['get']()['render']('{@spell\x20'+this[_0x228b84(0xc8)][_0x1c9fbb['key']][_0x228b84(0xb9)]()+'}')+'</div>':'<div\x20class=\x22italic\x20ve-muted\x22>(select\x20a\x20spell)</div>');};this[_0x238bca(0xd2)](_0x1c9fbb[_0x238bca(0xe3)],_0x574999);this[_0x238bca(0xe8)]['length']!==0x1&&this[_0x238bca(0xd2)](_0x238bca(0xd0),_0x574999);_0x574999();const _0x21cabf=$('<button\x20class=\x22btn\x20btn-default\x20btn-xxs\x20mr-1\x22\x20title=\x22Choose\x20a\x20Spell\x22><span\x20class=\x22fas\x20fa-fw\x20fa-search\x22></span></button>')['click'](async()=>{const _0x4bac1b=_0x238bca,_0x35bf7e=await this[_0x4bac1b(0xaa)]['pGetUserSelection']({'filterExpression':_0x1c9fbb[_0x4bac1b(0xef)]});if(_0x35bf7e==null||!_0x35bf7e[_0x4bac1b(0xaf)])return;const _0x489955=_0x35bf7e[0x0];this['_state'][_0x1c9fbb[_0x4bac1b(0xe3)]]=_0x489955[_0x4bac1b(0x11b)]+'|'+_0x489955['values']['sourceJson'],this[_0x4bac1b(0xc8)]['pulseChoose']=!this['_state'][_0x4bac1b(0xf9)];});if(this['_additionalSpellsFlat'][_0x238bca(0xaf)]!==0x1){const _0x599f3f=()=>_0x21cabf[_0x238bca(0xe9)](_0x238bca(0x83),this[_0x238bca(0xc8)][_0x238bca(0xd0)]!==_0x477793);this[_0x238bca(0xd2)](_0x238bca(0xd0),_0x599f3f),_0x599f3f();}if(_0x5225cd[_0x238bca(0xaf)]||_0x22b123)_0x2dd460[_0x238bca(0xe7)]('<div\x20class=\x22mr-2\x22>,</div>');$$`<div class="ve-flex-v-center">${_0x21cabf}${_0x517d42}</div>`[_0x238bca(0x9a)](_0x2dd460);}),Object['entries'](_0x2a8afc)[_0x298e50(0xc5)](([_0x4c5268,_0x4af7fc],_0x5e4a70)=>{const _0xbea5fb=_0x298e50,{propBase:_0x5fb879}=this[_0xbea5fb(0xbf)]({'groupUid':_0x4c5268}),_0xbcbeff=ComponentUiUtil['getMetaWrpMultipleChoice'](this,_0x5fb879,{'values':_0x4af7fc[_0xbea5fb(0x116)][_0xbea5fb(0xa3)](_0xe95bce=>_0xe95bce['uid']),'fnDisplay':_0x1b3283=>Renderer[_0xbea5fb(0x10c)]()[_0xbea5fb(0x109)]('{@spell\x20'+_0x1b3283+'}'),'count':_0x4af7fc[_0xbea5fb(0x8e)]}),_0x588431=()=>this['_state'][_0xbea5fb(0xf9)]=!this[_0xbea5fb(0xc8)][_0xbea5fb(0xf9)];this[_0xbea5fb(0xd2)](_0xbcbeff['propPulse'],_0x588431);if(this[_0xbea5fb(0xe8)][_0xbea5fb(0xaf)]!==0x1){const _0x17e597=()=>{const _0x3269de=_0xbea5fb;_0xbcbeff['rowMetas'][_0x3269de(0xc5)](({$cb:_0x50b009})=>_0x50b009[_0x3269de(0xe9)]('disabled',this[_0x3269de(0xc8)][_0x3269de(0xd0)]!==_0x477793));};this[_0xbea5fb(0xd2)](_0xbea5fb(0xd0),_0x17e597),_0x17e597();}const _0x1ded16=[];_0xbcbeff[_0xbea5fb(0xe4)][_0xbea5fb(0xc5)](({$cb:_0x547865,displayValue:_0x50f6b2})=>{const _0x1d9051=_0xbea5fb;_0x1ded16[_0x1d9051(0xb7)]($$`<div class="ve-flex-v-center mr-2 no-wrap">${_0x50f6b2}${_0x547865['addClass'](_0x1d9051(0xbd))}</div>`);});if(_0x5225cd[_0xbea5fb(0xaf)]||_0x18e67d[_0xbea5fb(0xaf)]||_0x5e4a70)_0x2dd460['append'](_0xbea5fb(0x8f));$$`<div class="ve-flex-v-center ve-flex-wrap"><i class="mr-1 ve-muted no-wrap">Choose ${_0x4af7fc['count']===0x1?'':_0x4af7fc['count']+'\x20'}from:</i>${_0x1ded16}</div>`[_0xbea5fb(0x9a)](_0x2dd460);});const _0x5df687=$$`<div class="py-1 ve-flex-v-center stripe-even">
					<div class="col-3 text-center">${Parser['getOrdinalForm'](_0x59d758||_0x3394ba)||_0x298e50(0x128)}</div>
					${_0x2dd460}
				</div>`;if(_0x57cbeb){const _0x14cc75=()=>_0x5df687['toggleVe'](this[_0x298e50(0x8b)](_0x59d758));this[_0x298e50(0xd2)](_0x298e50(0xeb),_0x14cc75),this['_addHookBase']('spellLevelHigh',_0x14cc75),this[_0x298e50(0xd2)]('isAnyCantrips',_0x14cc75),_0x14cc75();}else{if(_0x2552b4){const _0x3dec2c=()=>_0x5df687[_0x298e50(0x99)](this[_0x298e50(0x106)](_0x3394ba));this[_0x298e50(0xd2)](_0x298e50(0x105),_0x3dec2c),this[_0x298e50(0xd2)](_0x298e50(0x10f),_0x3dec2c),_0x3dec2c();}else _0x5df687[_0x298e50(0xf4)]();}return _0x5df687;});}[_0x36ebd7(0x126)](_0x3667d1){const _0x2ca331=_0x36ebd7;return ComponentUiUtil[_0x2ca331(0x103)](this,_0x2ca331(0xd3),{'values':this[_0x2ca331(0x82)][_0x3667d1]['ability'][_0x2ca331(0xf8)],'fnDisplay':_0x51a6ce=>Parser[_0x2ca331(0x91)](_0x51a6ce),'isAllowNull':!![]});}['_isRequiredLevelInRange'](_0x39af8f){const _0x3ba600=_0x36ebd7;return _0x39af8f>(this['_state'][_0x3ba600(0x105)]??Number['MAX_SAFE_INTEGER'])&&_0x39af8f<=(this[_0x3ba600(0xc8)]['targetLevel']??Number[_0x3ba600(0xa0)]);}[_0x36ebd7(0x8b)](_0x282249){const _0x17bb1a=_0x36ebd7;if(_0x282249===0x0)return this[_0x17bb1a(0xc8)]['isAnyCantrips'];return _0x282249>=(this[_0x17bb1a(0xc8)][_0x17bb1a(0xeb)]??Number[_0x17bb1a(0xb4)])&&_0x282249<=(this[_0x17bb1a(0xc8)][_0x17bb1a(0xb1)]==null?Number[_0x17bb1a(0xa0)]:this[_0x17bb1a(0xc8)][_0x17bb1a(0xb1)]);}[_0x36ebd7(0xcb)](_0x12651f,{isExpandedMatch:isExpandedMatch=null}={}){const _0xf33117=_0x36ebd7;if(_0x12651f==null)_0x12651f=this[_0xf33117(0xc8)][_0xf33117(0xd0)];return Object[_0xf33117(0x86)]((this[_0xf33117(0xe8)][_0x12651f]||{'spells':[]})[_0xf33117(0xa2)])['filter'](_0x11998c=>{const _0x5f482b=_0xf33117;if(isExpandedMatch!=null){if(_0x11998c[_0x5f482b(0x108)]!==isExpandedMatch)return![];}if(_0x11998c[_0x5f482b(0xcf)]!=null)return this[_0x5f482b(0x8b)](_0x11998c[_0x5f482b(0xcf)]);else{if(_0x11998c[_0x5f482b(0x11a)]!=null)return this[_0x5f482b(0x106)](_0x11998c[_0x5f482b(0x11a)]);}return!![];});}[_0x36ebd7(0x122)](_0x443070){const _0x4d65d7=_0x36ebd7;return this[_0x4d65d7(0xcb)](_0x443070,{'isExpandedMatch':![]});}[_0x36ebd7(0xfc)](_0x367e58){const _0x18fbbe=_0x36ebd7;return this[_0x18fbbe(0xcb)](_0x367e58,{'isExpandedMatch':!![]});}[_0x36ebd7(0x93)](_0x30fd19){const _0x49fc6a=_0x36ebd7;return this[_0x49fc6a(0x104)](_0x30fd19,{'isExpandedMatch':![]});}['_isAnyExpanded'](_0x164ee2){const _0x4b1e29=_0x36ebd7;return this[_0x4b1e29(0x104)](_0x164ee2,{'isExpandedMatch':!![]});}[_0x36ebd7(0x104)](_0xcd672f,{isExpandedMatch:_0x5e0f59}){const _0x39801e=_0x36ebd7;if(_0xcd672f==null)_0xcd672f=this[_0x39801e(0xc8)][_0x39801e(0xd0)];return Object[_0x39801e(0x86)]((this[_0x39801e(0xe8)][_0xcd672f]||{'spells':[]})['spells'])[_0x39801e(0xa7)](_0x439678=>_0x439678[_0x39801e(0x108)]===_0x5e0f59);}[_0x36ebd7(0xd7)](_0x36421e){const _0xb9eedc=_0x36ebd7;if(_0x36421e==null)_0x36421e=this[_0xb9eedc(0xc8)][_0xb9eedc(0xd0)];return(this[_0xb9eedc(0x82)][_0x36421e]?.[_0xb9eedc(0xd3)]?.[_0xb9eedc(0xf8)]?.[_0xb9eedc(0xaf)]??0x0)>0x1;}[_0x36ebd7(0x85)]({curLevel:_0x141cb9,targetLevel:_0x569386,isStandalone:_0x5dadf5}={}){const _0x98bed7=_0x36ebd7;return this[_0x98bed7(0xb2)][_0x98bed7(0x85)](this[_0x98bed7(0x82)],{'additionalSpellsFlat':this[_0x98bed7(0xe8)],'curLevel':_0x141cb9,'targetLevel':_0x569386,'isStandalone':_0x5dadf5});}[_0x36ebd7(0xbc)](){const _0x509d90=_0x36ebd7;let _0x3f84bd=MiscUtil[_0x509d90(0x97)](this[_0x509d90(0xcb)]());const _0x335fb0={};_0x3f84bd[_0x509d90(0xc5)](_0x402172=>{const _0x198d15=_0x509d90;if(!_0x402172[_0x198d15(0xee)])return;_0x335fb0[_0x402172['chooseFromGroup']]=_0x335fb0[_0x402172[_0x198d15(0xee)]]||{'from':[],'selectedValues':[],'isAcceptable':![],'count':_0x402172[_0x198d15(0xde)]??0x1},_0x335fb0[_0x402172[_0x198d15(0xee)]][_0x198d15(0x116)][_0x198d15(0xb7)](_0x402172);}),Object[_0x509d90(0x89)](_0x335fb0)['forEach'](([_0x56be41,_0x2b5c69])=>{const _0x5260c4=_0x509d90,{propBase:_0x35b6a3}=this[_0x5260c4(0xbf)]({'groupUid':_0x56be41});_0x2b5c69['isAcceptable']=this[_0x5260c4(0xc8)][ComponentUiUtil[_0x5260c4(0xd5)](_0x35b6a3)],_0x2b5c69[_0x5260c4(0x125)]=ComponentUiUtil[_0x5260c4(0xab)](this,_0x35b6a3,{'values':_0x2b5c69[_0x5260c4(0x116)][_0x5260c4(0xa3)](_0x70b637=>_0x70b637[_0x5260c4(0x98)])});});let _0x46f878=0x0;_0x3f84bd=_0x3f84bd['filter'](_0x666e5e=>{const _0x15f5c4=_0x509d90;if(_0x666e5e['filterExpression']!=null){const _0x30b9b2=this[_0x15f5c4(0xc8)][_0x666e5e[_0x15f5c4(0xe3)]];if(!_0x30b9b2)return _0x46f878++,![];return delete _0x666e5e[_0x15f5c4(0xef)],_0x666e5e[_0x15f5c4(0x98)]=this['_state'][_0x666e5e[_0x15f5c4(0xe3)]],!![];}if(_0x666e5e[_0x15f5c4(0xee)]!=null)return _0x335fb0[_0x666e5e[_0x15f5c4(0xee)]][_0x15f5c4(0x125)][_0x15f5c4(0x115)](_0x666e5e[_0x15f5c4(0x98)]);return!![];});let _0xf6d0eb;if(this[_0x509d90(0xd7)](this[_0x509d90(0xc8)][_0x509d90(0xd0)])){_0xf6d0eb=this[_0x509d90(0xc8)][_0x509d90(0xd3)];if(_0xf6d0eb==null)_0x46f878++;}else _0xf6d0eb=(this[_0x509d90(0xe8)][this[_0x509d90(0xc8)][_0x509d90(0xd0)]]||{'meta':{}})['meta']['ability'];return{'isFormComplete':_0x46f878===0x0&&Object['values'](_0x335fb0)['every'](_0x105195=>_0x105195['isAcceptable']),'data':_0x3f84bd,'abilityAbv':_0xf6d0eb};}[_0x36ebd7(0x129)](){const _0x2f27b5=_0x36ebd7;return this[_0x2f27b5(0xbc)]();}[_0x36ebd7(0xb0)](){return{'ixSet':0x0,'curLevel':null,'targetLevel':null,'spellLevelLow':null,'spellLevelHigh':null,'isAnyCantrips':![],'spellsAlwaysPrepared':[],'spellsExpanded':[],'spellsAlwaysKnown':[],'ability':null,'pulseChoose':![]};}}export{Charactermancer_AdditionalSpellsSelect};