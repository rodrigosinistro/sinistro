const _0x301207=_0x5b7d;(function(_0x18166f,_0x2f4d94){const _0x3d9aa2=_0x5b7d,_0x485019=_0x18166f();while(!![]){try{const _0x2599af=-parseInt(_0x3d9aa2(0xc2))/0x1*(parseInt(_0x3d9aa2(0xb9))/0x2)+-parseInt(_0x3d9aa2(0x8c))/0x3*(-parseInt(_0x3d9aa2(0x8d))/0x4)+parseInt(_0x3d9aa2(0xd3))/0x5*(-parseInt(_0x3d9aa2(0xce))/0x6)+-parseInt(_0x3d9aa2(0xa7))/0x7+-parseInt(_0x3d9aa2(0x98))/0x8+parseInt(_0x3d9aa2(0x88))/0x9+parseInt(_0x3d9aa2(0xaa))/0xa*(parseInt(_0x3d9aa2(0xc3))/0xb);if(_0x2599af===_0x2f4d94)break;else _0x485019['push'](_0x485019['shift']());}catch(_0x4ab73d){_0x485019['push'](_0x485019['shift']());}}}(_0x955c,0x93cfc));import{ImportedDocument,ImportList,ImportSummary}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterTable}from'./DataConverterTable.js';import{UtilApplications}from'./UtilApplications.js';import{UtilDataSource}from'./UtilDataSource.js';class ImportListRollableTable extends ImportList{static ['ID']='tables';static [_0x301207(0xa6)]=_0x301207(0x8a);static ['_']=this[_0x301207(0xc5)](this);static get[_0x301207(0x84)](){return'RollTable';}constructor(_0x16517f,_0x1e8906,_0x47eb7f){const _0x8c1a04=_0x301207;_0x16517f=_0x16517f||{},_0x1e8906=_0x1e8906||{},_0x47eb7f=_0x47eb7f||{},super({'title':_0x8c1a04(0xb2),..._0x1e8906},_0x16517f,{'props':[_0x8c1a04(0x7e),_0x8c1a04(0xcd)],'dirsHomebrew':[_0x8c1a04(0x7e)],'titleSearch':_0x8c1a04(0x7e),'sidebarTab':_0x8c1a04(0x83),'gameProp':'tables','defaultFolderPath':[_0x8c1a04(0x8a)],'pageFilter':new PageFilterTables(),'page':UrlUtil['PG_TABLES'],'isPreviewable':!![],'isDedupable':!![],'configGroup':_0x8c1a04(0x96),..._0x47eb7f});}async[_0x301207(0xc1)](){const _0x1b453a=_0x301207;return[new UtilDataSource[(_0x1b453a(0xbd))](Config['get']('ui',_0x1b453a(0x9f))?_0x1b453a(0xc6):'5etools',Vetools[_0x1b453a(0xa9)][_0x1b453a(0x92)](Vetools),{'cacheKey':_0x1b453a(0xb3),'isUseProps':!![],'filterTypes':[UtilDataSource['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new UtilDataSource[(_0x1b453a(0xd6))](_0x1b453a(0xa2),'',{'filterTypes':[UtilDataSource[_0x1b453a(0x95)]]}),new UtilDataSource[(_0x1b453a(0xc7))]('Upload\x20File',{'filterTypes':[UtilDataSource[_0x1b453a(0x95)]]}),...await this[_0x1b453a(0xbb)]()];}[_0x301207(0xaf)](){const _0x4394b8=_0x301207;return{...super[_0x4394b8(0xaf)](),'buttonsAdditional':[{'name':'btn-run-journal-entries','text':_0x4394b8(0xd7)}],'cols':[{'name':'Name','width':0x9,'field':_0x4394b8(0xa1)},{'name':'Source','width':0x2,'field':_0x4394b8(0xcc),'titleProp':_0x4394b8(0xa5),'displayProp':_0x4394b8(0xcb),'classNameProp':'sourceClassName','styleProp':_0x4394b8(0xbf),'rowClassName':'text-center'}],'rows':this[_0x4394b8(0x80)][_0x4394b8(0x9a)]((_0x1dfe5a,_0x543f74)=>{const _0x19ef20=_0x4394b8;return this[_0x19ef20(0xc9)][_0x19ef20(0xc4)]['mutateForFilters'](_0x1dfe5a),{'name':_0x1dfe5a[_0x19ef20(0xa1)],'source':_0x1dfe5a[_0x19ef20(0xcc)],'sourceShort':Parser[_0x19ef20(0x99)](_0x1dfe5a[_0x19ef20(0xcc)]),'sourceLong':Parser[_0x19ef20(0x89)](_0x1dfe5a[_0x19ef20(0xcc)]),'sourceClassName':Parser[_0x19ef20(0xb1)](_0x1dfe5a[_0x19ef20(0xcc)]),'sourceStyle':BrewUtil2[_0x19ef20(0x9e)](_0x1dfe5a[_0x19ef20(0xcc)]),'ix':_0x543f74};})};}[_0x301207(0xba)](){const _0x1cca21=_0x301207;this[_0x1cca21(0x87)][_0x1cca21(0xa8)][_0x1cca21(0x7d)](()=>{const _0x4cbb0b=_0x1cca21;return this[_0x4cbb0b(0xd4)]({'gameProp':_0x4cbb0b(0x85),'sidebarTab':'journal','optsImportEntry':{'isImportAsJournalEntry':!![]}});});}[_0x301207(0xa3)](){const _0x19cfb9=_0x301207;this['_list']['doAbsorbItems'](this['_content'],{'fnGetName':_0x224397=>_0x224397[_0x19cfb9(0xa1)],'fnGetValues':_0x1d168f=>({'source':_0x1d168f[_0x19cfb9(0xcc)],'hash':UrlUtil['URL_TO_HASH_BUILDER'][this[_0x19cfb9(0xad)]](_0x1d168f)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x1fa648=>this[_0x19cfb9(0xd1)]?UtilList2[_0x19cfb9(0xb0)](this[_0x19cfb9(0x94)],_0x1fa648):UtilList2[_0x19cfb9(0x81)](this[_0x19cfb9(0x94)],_0x1fa648)});}['_pImportEntry_getTablesFromGroup'](_0x42b391){const _0x3b0c84=_0x301207,_0x4e6b3c=MiscUtil[_0x3b0c84(0xab)](_0x42b391);return _0x4e6b3c[_0x3b0c84(0x83)]['forEach']((_0x444208,_0x21bf97)=>{const _0x3e66c6=_0x3b0c84;if(_0x4e6b3c['name'])_0x444208[_0x3e66c6(0xa1)]=_0x444208[_0x3e66c6(0xa1)]||_0x4e6b3c[_0x3e66c6(0xa1)]+',\x20Table\x20'+(_0x21bf97+0x1);_0x444208[_0x3e66c6(0xcc)]=_0x444208[_0x3e66c6(0xcc)]||_0x4e6b3c[_0x3e66c6(0xcc)];}),_0x4e6b3c[_0x3b0c84(0x83)];}async[_0x301207(0xa0)](_0x36a3b2,_0x33d695){const _0x5814eb=_0x301207;if(_0x36a3b2[_0x5814eb(0xd2)]!==_0x5814eb(0xcd))return null;console[_0x5814eb(0x86)](...LGT,_0x5814eb(0xd5)+(_0x36a3b2[_0x5814eb(0xa1)]||_0x36a3b2[_0x5814eb(0xca)])+'\x22\x20(from\x20\x22'+Parser['sourceJsonToAbv'](_0x36a3b2[_0x5814eb(0xcc)])+'\x22)');const _0x2c5a30=this[_0x5814eb(0xc8)](_0x36a3b2),_0x5db022=[];let _0x42b802=0x0;for(const _0x5aa366 of _0x2c5a30){const _0x396371=await this[_0x5814eb(0xd0)](_0x5aa366,_0x33d695);if(_0x396371[_0x5814eb(0xcf)])_0x5db022[_0x5814eb(0x90)](..._0x396371['imported']['map'](_0x579896=>_0x579896['document'])[_0x5814eb(0x8e)](Boolean));else{if(_0x396371[_0x5814eb(0xae)])_0x42b802++;}}if(!_0x5db022[_0x5814eb(0x91)]&&_0x42b802)return new ImportSummary({'status':UtilApplications[_0x5814eb(0x9d)]});const _0x378903=DataConverterTable[_0x5814eb(0x97)](_0x36a3b2,_0x5db022,{'isAddPermission':!![]}),_0x3d0d2f=this[_0x5814eb(0x93)]({'name':_0x378903[_0x5814eb(0xa1)],'gameProp':_0x5814eb(0x85),'importOpts':_0x33d695});if(_0x3d0d2f[_0x5814eb(0x8b)])return new ImportSummary({'status':UtilApplications[_0x5814eb(0x9d)]});const _0x1f4e83=_0x33d695['isTemp']||!!this[_0x5814eb(0xb5)];if(_0x1f4e83){const _0x524423=await JournalEntry['create'](_0x378903,{'renderSheet':!![],'temporary':!![]});return new ImportSummary({'status':UtilApplications[_0x5814eb(0x9b)],'imported':[new ImportedDocument({'document':_0x524423})]});}if(_0x3d0d2f['isOverwrite'])return this['_pImportEntry_pDoUpdateExistingDirectoryEntity'](_0x3d0d2f,_0x378903);const _0x3f19ee=await this[_0x5814eb(0xb4)](_0x36a3b2);if(_0x3f19ee)_0x378903[_0x5814eb(0xb8)]=_0x3f19ee;const _0x1f6d95=await JournalEntry[_0x5814eb(0x8f)](_0x378903,{'renderSheet':![],'temporary':![]});return await game[_0x5814eb(0x85)][_0x5814eb(0x7f)](_0x1f6d95['id'],_0x1f6d95),new ImportSummary({'status':UtilApplications['TASK_EXIT_COMPLETE'],'imported':[new ImportedDocument({'document':_0x1f6d95})]});}async[_0x301207(0x82)](_0x2081ee,_0x4c3f44){const _0x1b7cf8=_0x301207;_0x4c3f44=_0x4c3f44||{};const _0x5c9c32=await this[_0x1b7cf8(0xa0)](_0x2081ee,_0x4c3f44);if(_0x5c9c32!=null)return _0x5c9c32;console[_0x1b7cf8(0x86)](...LGT,_0x1b7cf8(0xb7)+(_0x2081ee[_0x1b7cf8(0xa1)]||_0x2081ee[_0x1b7cf8(0xca)])+_0x1b7cf8(0xc0)+Parser[_0x1b7cf8(0x99)](_0x2081ee[_0x1b7cf8(0xcc)])+'\x22)');if(this[_0x1b7cf8(0xd8)])throw new Error('Cannot\x20import\x20table\x20to\x20actor!');if(_0x4c3f44[_0x1b7cf8(0x9c)]){const _0x18dec3=new ImportListRollableTableJournal();await _0x18dec3[_0x1b7cf8(0xb6)]();const _0x549776=MiscUtil[_0x1b7cf8(0xab)](_0x4c3f44);return delete _0x549776[_0x1b7cf8(0x9c)],_0x18dec3[_0x1b7cf8(0x82)](_0x2081ee,_0x549776);}return this[_0x1b7cf8(0xa4)](_0x2081ee,_0x4c3f44);}[_0x301207(0xbc)](_0x320f62,_0x364b50){return DataConverterTable['pGetTableRollableTable'](_0x320f62,_0x364b50);}}function _0x955c(){const _0x116af8=['bind','_getDuplicateMeta','_list','SOURCE_TYP_CUSTOM','importTable','getTableGroupJournal','1292200tSwLoW','sourceJsonToAbv','map','TASK_EXIT_COMPLETE','isImportAsJournalEntry','TASK_EXIT_SKIPPED_DUPLICATE','sourceJsonToStylePart','isStreamerMode','_pImportTableGroup','name','Custom\x20URL','_activateListeners_absorbListItems','_pImportEntry_pImportToDirectoryGeneric','sourceLong','DISPLAY_NAME_TYPE_PLURAL','264544TCbAdx','btn-run-journal-entries','pGetRollableTables','6228130bWuvTY','copy','ImportListRollableTable','_page','existing','getData','absorbFnBindListenersRadio','sourceJsonToColor','Import\x20Rollable\x20Tables','5etools-rollable-tables','_pImportEntry_pGetFolderId','_pack','pInit','Importing\x20table\x20\x22','folder','2BlsOph','_activateListeners_initRunButtonsAdditional','_pGetSourcesHomebrew','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','DataSourceSpecial','pGetTableRollableTable','sourceStyle','\x22\x20(from\x20\x22','_pGetSources','209053IIwcbO','11tqLeIq','constructor','registerImpl','SRD','DataSourceFile','_pImportEntry_getTablesFromGroup','_pageFilter','caption','sourceShort','source','tableGroup','13710Dukych','imported','pImportEntry','_isRadio','__prop','1165ivijqD','_pHandleClickRunButton','Importing\x20table\x20group\x20\x22','DataSourceUrl','Import\x20as\x20Journal\x20Entries','_actor','click','table','set','_content','absorbFnBindListeners','_pImportEntry','tables','FOLDER_TYPE','journal','log','_$btnsRunAdditional','7771104YwJnXq','sourceJsonToFull','Tables','isSkip','246DOTIPU','2924ZSShOq','filter','create','push','length'];_0x955c=function(){return _0x116af8;};return _0x955c();}function _0x5b7d(_0x5d176a,_0x2642b5){const _0x955cca=_0x955c();return _0x5b7d=function(_0x5b7de1,_0x375134){_0x5b7de1=_0x5b7de1-0x7d;let _0x2fd7e2=_0x955cca[_0x5b7de1];return _0x2fd7e2;},_0x5b7d(_0x5d176a,_0x2642b5);}class ImportListRollableTableJournal extends ImportListRollableTable{static get[_0x301207(0x84)](){return'JournalEntry';}constructor(_0x47128c){const _0x251faa=_0x301207;_0x47128c=_0x47128c||{},super(_0x47128c,{},{'sidebarTab':'journal','gameProp':_0x251faa(0x85)});}get['_folderPathSpecKeyConstructorName'](){const _0x592ece=_0x301207;return _0x592ece(0xac);}[_0x301207(0xbc)](_0x38bdde,_0xb41511){const _0xad4f82=_0x301207;return DataConverterTable[_0xad4f82(0xbe)](_0x38bdde,{'isImportAsJournalEntry':!![],..._0xb41511});}}export{ImportListRollableTable};